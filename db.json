{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1556155488980},{"_id":"themes/next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1556155488903},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1556155488459},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1556155487725},{"_id":"themes/next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1556155488481},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1556155336996},{"_id":"themes/next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1556155487563},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1556155455484},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1556155490796},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1556155488437},{"_id":"themes/next/README.cn.md","hash":"2c766b3369ed477bce134a5450dab45bef161504","modified":1556155488881},{"_id":"themes/next/README.md","hash":"8ce60ce578963eb4e1eb5e33e1efc2fc4779af9c","modified":1556155488926},{"_id":"themes/next/_config.yml","hash":"d404243c3744bbd7c774fde3be001438b7cee9dc","modified":1556155488415},{"_id":"themes/next/bower.json","hash":"0674f11d3d514e087a176da0e1d85c2286aa5fba","modified":1556155336975},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1556155490774},{"_id":"themes/next/hexo_config.yml","hash":"3573505d52cce6d40064b86c40a7a9c17b31fa42","modified":1556155488958},{"_id":"themes/next/package.json","hash":"036d3a1346203d2f1a3958024df7f74e7ac07bfe","modified":1556155490742},{"_id":"source/_posts/LeetCode312.md","hash":"ee0271cf8b1a60d79f48e6b3a3056bff017a0161","modified":1556155644824},{"_id":"source/_posts/LeetCode496.md","hash":"8e00b9f5b063e54d48fabf16e293bbdc0dd63eab","modified":1556155645130},{"_id":"source/_posts/bilibili_download.md","hash":"0e5357ca26b65b3e9db6575a8aa154ee1233dd3b","modified":1556155645381},{"_id":"source/_posts/LeetCode382.md","hash":"b8f9b51dc557ca5762933390d1e89c4f84ff6245","modified":1556155645849},{"_id":"source/_posts/bitwise-operation-in-leetcode.md","hash":"ec6955c785aa1418c3b61b3591eee98525d2ed67","modified":1556155645274},{"_id":"source/_posts/fluent-python-11.md","hash":"4fe1d547f9447ae6a575f73f543eb516421e996d","modified":1556155644979},{"_id":"source/_posts/fluent-python-10.md","hash":"385739bcbdd3d302b747a06a7d276c413261a4fd","modified":1556155645107},{"_id":"source/_posts/fluent-python-13.md","hash":"088b48fb847694efba27775020312feff62ee740","modified":1556155644933},{"_id":"source/_posts/fluent-python-14.md","hash":"2ec004d711d3b293170f804dc65730eb950b3441","modified":1556155644792},{"_id":"source/_posts/fluent-python-2.md","hash":"e193f002ffbf26b5f230a17f91c0846389ebe1a1","modified":1556155645904},{"_id":"source/_posts/fluent-python-12.md","hash":"0f9d1013a7f721339e47cecd9bb210fce632d205","modified":1556155645927},{"_id":"source/_posts/fluent-python-3.md","hash":"2c734bed445157738dcc954ed92be14b86bfb006","modified":1556155644956},{"_id":"source/_posts/fluent-python-4.md","hash":"1197826d863ceec2b6f90421e392390a840e8f8c","modified":1556155645242},{"_id":"source/_posts/fluent-python-5.md","hash":"0c66c54614d2ed66430a542cfc03946576591387","modified":1556155645755},{"_id":"source/_posts/fluent-python-6-2.md","hash":"a51fbc995e0c2b6e6b1e88ef0206b129bd01d10c","modified":1556155645339},{"_id":"source/_posts/fluent-python-7.md","hash":"8b068284b5298070b23500fefa5f976e615c1c8f","modified":1556155644747},{"_id":"source/_posts/fluent-python-8.md","hash":"2bd0cf42341852dfb6b2e02e96130e5b190ceaec","modified":1556155645960},{"_id":"source/_posts/fluent-python-6-1.md","hash":"bafccc1ceda90886180a4a6ce98550cecb4c3c03","modified":1556155644888},{"_id":"source/_posts/fluent-python-9.md","hash":"4d3c9abb0efb22d130f14a06a1410013c5218077","modified":1556155645881},{"_id":"source/_posts/fluent-python-chapter1-note.md","hash":"c1ab263d21dc95eea4a9bc6558f5b34107cb4d17","modified":1556155644910},{"_id":"source/_posts/hello.md","hash":"8f978d4a2856697eb56f93b205a87243da5ed4d7","modified":1556155645981},{"_id":"source/_posts/how-network-connects-1.md","hash":"029fd9f7772b1037023ceb56776c9d75b1b63e52","modified":1556155644856},{"_id":"source/_posts/jetbrain_crack.md","hash":"12a710e96c3118c629793c0cbdcf05c74d8e8e81","modified":1556155645777},{"_id":"source/_posts/scrapy_crawler_01.md","hash":"a249beca9d165de0427cc27409f36f1876878e39","modified":1556155645032},{"_id":"source/_posts/some_python_tricks.md","hash":"eacf422e4f10964097eedd16446656b2e1bfa9a7","modified":1556155645828},{"_id":"source/_posts/ubuntu_tcp_bbr.md","hash":"dcc850fb166d62f3ddb6ea0ba6bdd6938a255d82","modified":1556155645000},{"_id":"source/about/index.md","hash":"a6fd991bf9cbd513de812bf99c24e6ca73dbd7cc","modified":1556155644564},{"_id":"source/categories/index.md","hash":"1c0f0cc4ba9e462897ca4b96e8afb55600f5c8f7","modified":1556155644628},{"_id":"source/tags/index.md","hash":"f6b400d4d2c585033e00122beab07becb16ec9d4","modified":1556155646060},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1556155490710},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"50d48c47162817a3810a9d9ad51104e83947419a","modified":1556155490633},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1556155490655},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1556155490687},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1556155337434},{"_id":"themes/next/.git/config","hash":"6cec67a32305c95864b8cfbebb61e681a8f092db","modified":1556155455430},{"_id":"themes/next/.git/COMMIT_EDITMSG","hash":"92beb40d1a86a6509c300d948703802d656b31c9","modified":1556155342925},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1556155337699},{"_id":"themes/next/.git/index","hash":"65357af40d7c87fae899fbe465e322733001b590","modified":1556155337342},{"_id":"themes/next/.git/packed-refs","hash":"8e36811256ee380c2c65692f1b8f8e77c5bc33c9","modified":1556155337364},{"_id":"themes/next/languages/de.yml","hash":"057e7df11ddeb1c8c15a5d7c5ff29430d725ec6b","modified":1556155487775},{"_id":"themes/next/languages/en.yml","hash":"7e680d9bb8f3a3a9d1ba1c9d312b3d257183dded","modified":1556155487829},{"_id":"themes/next/languages/fr-FR.yml","hash":"7e4eb7011b8feee641cfb11c6e73180b0ded1c0f","modified":1556155488295},{"_id":"themes/next/languages/default.yml","hash":"44ef3f26917f467459326c2c8be2f73e4d947f35","modified":1556155487852},{"_id":"themes/next/languages/id.yml","hash":"b5de1ea66dd9ef54cac9a1440eaa4e3f5fc011f5","modified":1556155488008},{"_id":"themes/next/languages/it.yml","hash":"aa595f2bda029f73ef7bfa104b4c55c3f4e9fb4c","modified":1556155487874},{"_id":"themes/next/languages/ja.yml","hash":"3c76e16fd19b262864475faa6854b718bc08c4d8","modified":1556155488252},{"_id":"themes/next/languages/ko.yml","hash":"ea5b46056e73ebcee121d5551627af35cbffc900","modified":1556155488273},{"_id":"themes/next/languages/nl-NL.yml","hash":"edca4f3598857dbc3cbf19ed412213329b6edd47","modified":1556155487963},{"_id":"themes/next/languages/pt-BR.yml","hash":"b1694ae766ed90277bcc4daca4b1cfa19cdcb72b","modified":1556155487942},{"_id":"themes/next/languages/pt.yml","hash":"44b61f2d085b827b507909a0b8f8ce31c6ef5d04","modified":1556155487919},{"_id":"themes/next/languages/ru.yml","hash":"98ec6f0b7183282e11cffc7ff586ceb82400dd75","modified":1556155488318},{"_id":"themes/next/languages/vi.yml","hash":"fd08d3c8d2c62965a98ac420fdaf95e54c25d97c","modified":1556155487986},{"_id":"themes/next/languages/zh-Hans.yml","hash":"16ef56d0dea94638de7d200984c90ae56f26b4fe","modified":1556155487805},{"_id":"themes/next/languages/zh-hk.yml","hash":"9396f41ae76e4fef99b257c93c7354e661f6e0fa","modified":1556155487896},{"_id":"themes/next/languages/zh-tw.yml","hash":"50b71abb3ecc0686f9739e179e2f829cd074ecd9","modified":1556155488029},{"_id":"themes/next/layout/_layout.swig","hash":"da0929166674ea637e0ad454f85ad0d7bac4aff2","modified":1556155457576},{"_id":"themes/next/layout/archive.swig","hash":"f0a8225feafd971419837cdb4bcfec98a4a59b2f","modified":1556155457467},{"_id":"themes/next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1556155455546},{"_id":"themes/next/layout/page.swig","hash":"969caaee05bdea725e99016eb63d810893a73e99","modified":1556155457864},{"_id":"themes/next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1556155457906},{"_id":"themes/next/layout/post.swig","hash":"b3589a8e46288a10d20e41c7a5985d2493725aec","modified":1556155457554},{"_id":"themes/next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1556155457885},{"_id":"themes/next/scripts/merge-configs.js","hash":"81e86717ecfb775986b945d17f0a4ba27532ef07","modified":1556155488848},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1556155488602},{"_id":"themes/next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1556155456770},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1556155458049},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1556155458016},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1556155457983},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155487498},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1556155342782},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1556155342716},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1556155342803},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1556155342737},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1556155342892},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1556155342824},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1556155342847},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"18be3eb275c1decd3614e139f5a311b75f1b0ab8","modified":1556155342760},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1556155342870},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1556155455381},{"_id":"themes/next/.git/logs/HEAD","hash":"861b3bc0d20f8303b8b83c599ae9db624d24e264","modified":1556155337484},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1556155457499},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1556155457521},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1556155457833},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1556155457789},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"a266f96ad06ee87bdeae6e105a4b53cd587bbd04","modified":1556155457811},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"665a928604f99d2ba7dc4a4a9150178229568cc6","modified":1556155456843},{"_id":"themes/next/layout/_macro/reward.swig","hash":"56e8d8556cf474c56ae1bef9cb7bbd26554adb07","modified":1556155456890},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1556155456822},{"_id":"themes/next/layout/_macro/post.swig","hash":"446a35a2cd389f8cfc3aa38973a9b44ad0740134","modified":1556155456932},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"6a54c3c85ff6b19d275827a327abbf4bd99b2ebf","modified":1556155456868},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"39852700e4084ecccffa6d4669168e5cc0514c9e","modified":1556155456957},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1556155456114},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"5fe0447cc88a5a63b530cf0426f93c4634811876","modified":1556155455907},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1556155455860},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1556155456135},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1556155456198},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"1ddb2336a1a19b47af3017047012c01ec5f54529","modified":1556155455886},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1556155456220},{"_id":"themes/next/layout/_partials/comments.swig","hash":"4a6f5b1792b2e5262b7fdab9a716b3108e2f09c7","modified":1556155457391},{"_id":"themes/next/layout/_partials/footer.swig","hash":"c4d6181f5d3db5365e622f78714af8cc58d7a45e","modified":1556155457435},{"_id":"themes/next/layout/_partials/head.swig","hash":"6b94fe8f3279daea5623c49ef4bb35917ba57510","modified":1556155457132},{"_id":"themes/next/layout/_partials/header.swig","hash":"ed042be6252848058c90109236ec988e392d91d4","modified":1556155457413},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1556155457367},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1556155457153},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1556155457345},{"_id":"themes/next/hexo_source/about/index.md","hash":"a6fd991bf9cbd513de812bf99c24e6ca73dbd7cc","modified":1556155489042},{"_id":"themes/next/hexo_source/categories/index.md","hash":"1c0f0cc4ba9e462897ca4b96e8afb55600f5c8f7","modified":1556155489092},{"_id":"themes/next/hexo_source/tags/index.md","hash":"f6b400d4d2c585033e00122beab07becb16ec9d4","modified":1556155490543},{"_id":"themes/next/hexo_source/_posts/LeetCode312.md","hash":"ee0271cf8b1a60d79f48e6b3a3056bff017a0161","modified":1556155489201},{"_id":"themes/next/hexo_source/_posts/LeetCode382.md","hash":"b8f9b51dc557ca5762933390d1e89c4f84ff6245","modified":1556155490032},{"_id":"themes/next/hexo_source/_posts/bilibili_download.md","hash":"0e5357ca26b65b3e9db6575a8aa154ee1233dd3b","modified":1556155489911},{"_id":"themes/next/hexo_source/_posts/LeetCode496.md","hash":"8e00b9f5b063e54d48fabf16e293bbdc0dd63eab","modified":1556155489800},{"_id":"themes/next/hexo_source/_posts/bitwise-operation-in-leetcode.md","hash":"ec6955c785aa1418c3b61b3591eee98525d2ed67","modified":1556155489855},{"_id":"themes/next/hexo_source/_posts/fluent-python-10.md","hash":"385739bcbdd3d302b747a06a7d276c413261a4fd","modified":1556155489768},{"_id":"themes/next/hexo_source/_posts/fluent-python-11.md","hash":"4fe1d547f9447ae6a575f73f543eb516421e996d","modified":1556155489394},{"_id":"themes/next/hexo_source/_posts/fluent-python-12.md","hash":"0f9d1013a7f721339e47cecd9bb210fce632d205","modified":1556155490430},{"_id":"themes/next/hexo_source/_posts/fluent-python-2.md","hash":"e193f002ffbf26b5f230a17f91c0846389ebe1a1","modified":1556155490171},{"_id":"themes/next/hexo_source/_posts/fluent-python-3.md","hash":"2c734bed445157738dcc954ed92be14b86bfb006","modified":1556155489339},{"_id":"themes/next/hexo_source/_posts/fluent-python-5.md","hash":"0c66c54614d2ed66430a542cfc03946576591387","modified":1556155489986},{"_id":"themes/next/hexo_source/_posts/fluent-python-6-1.md","hash":"bafccc1ceda90886180a4a6ce98550cecb4c3c03","modified":1556155489268},{"_id":"themes/next/hexo_source/_posts/fluent-python-4.md","hash":"1197826d863ceec2b6f90421e392390a840e8f8c","modified":1556155489833},{"_id":"themes/next/hexo_source/_posts/fluent-python-6-2.md","hash":"a51fbc995e0c2b6e6b1e88ef0206b129bd01d10c","modified":1556155489878},{"_id":"themes/next/hexo_source/_posts/fluent-python-8.md","hash":"2bd0cf42341852dfb6b2e02e96130e5b190ceaec","modified":1556155490490},{"_id":"themes/next/hexo_source/_posts/fluent-python-7.md","hash":"8b068284b5298070b23500fefa5f976e615c1c8f","modified":1556155489161},{"_id":"themes/next/hexo_source/_posts/fluent-python-chapter1-note.md","hash":"c1ab263d21dc95eea4a9bc6558f5b34107cb4d17","modified":1556155489289},{"_id":"themes/next/hexo_source/_posts/fluent-python-9.md","hash":"4d3c9abb0efb22d130f14a06a1410013c5218077","modified":1556155490096},{"_id":"themes/next/hexo_source/_posts/ubuntu_tcp_bbr.md","hash":"dcc850fb166d62f3ddb6ea0ba6bdd6938a255d82","modified":1556155489416},{"_id":"themes/next/hexo_source/_posts/how-network-connects-1.md","hash":"029fd9f7772b1037023ceb56776c9d75b1b63e52","modified":1556155489226},{"_id":"themes/next/hexo_source/_posts/jetbrain_crack.md","hash":"12a710e96c3118c629793c0cbdcf05c74d8e8e81","modified":1556155490010},{"_id":"themes/next/scripts/tags/button.js","hash":"d023f10a00077f47082b0517e2ad666e6e994f60","modified":1556155488773},{"_id":"themes/next/hexo_source/_posts/scrapy_crawler_01.md","hash":"a249beca9d165de0427cc27409f36f1876878e39","modified":1556155489497},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1556155488794},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1556155488752},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1556155488678},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1556155488731},{"_id":"themes/next/scripts/tags/label.js","hash":"2f8f41a7316372f0d1ed6b51190dc4acd3e16fff","modified":1556155488699},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"eeeabede68cf263de9e6593ecf682f620da16f0a","modified":1556155488657},{"_id":"themes/next/scripts/tags/note.js","hash":"64de4e9d01cf3b491ffc7d53afdf148ee5ad9779","modified":1556155488816},{"_id":"themes/next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1556155488636},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1556155461659},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1556155462230},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1556155462166},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1556155461985},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1556155462209},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1556155462283},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1556155462029},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1556155462081},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1556155462060},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1556155462251},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1556155462145},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1556155461888},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1556155462123},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1556155462102},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1556155461911},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1556155461954},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1556155461932},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1556155462007},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1556155462187},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155457723},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155457703},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155459303},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155459019},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155459283},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155461681},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556155461723},{"_id":"themes/next/.git/objects/18/4662ef4be41f4cb5431b48a6aea5b24c8dbf67","hash":"a9be0387c74350e8be9d4970ef9876c81302323c","modified":1556155455184},{"_id":"themes/next/.git/objects/18/5f191b51d76bcd7623e2b360d6788afa7eaa1b","hash":"0f379c23954aa5c24a2e3e779a8da2109005f86e","modified":1556155455248},{"_id":"themes/next/.git/objects/20/72737539cc30a9e7953804bc4bb519e6a057ed","hash":"c62313c5dc2cf5e4a47b27ba06f1e20a68a6bcc7","modified":1556155454584},{"_id":"themes/next/.git/objects/0d/5731f2278fc6f280372cf7c02cf1029dd0d9fe","hash":"50c630c2b213610239ded21df6948049b8252fef","modified":1556155344297},{"_id":"themes/next/.git/objects/3f/01f734771fb736648536e8409792d77591f532","hash":"a5a696b8bb0523412230421b60114e6b3c904337","modified":1556155344502},{"_id":"themes/next/.git/objects/4d/a476f7dc72bb91b552dbe119b8933fc5391dbd","hash":"c4b2633f2affd1406adaa94f545106106bcfeaad","modified":1556155454409},{"_id":"themes/next/.git/objects/1c/6c81632e91527e3b43b91b420f08137f49cf64","hash":"547647e1c36e976e425f08405d4d9b5d0755798e","modified":1556155343895},{"_id":"themes/next/.git/objects/54/a1dcf9011b3197d33819c39e10906320a4a7a7","hash":"99222082d34d05b564b7bbd3dd7e637a30f4b974","modified":1556155455290},{"_id":"themes/next/.git/objects/52/e2e06734305094dadba223d498f1c72422e2e4","hash":"f137eb319e1bea4c40137cb51ab2a5ba60ee29a1","modified":1556155455083},{"_id":"themes/next/.git/objects/52/4f5936546296e5e5d264fe6ff55eeca0a62120","hash":"7a5f7cf78e7e9d185ebe6bb743e6f2e42fae7e15","modified":1556155455049},{"_id":"themes/next/.git/objects/61/8706e0558a064ad0460ee777fa777840d579fd","hash":"74ca35217a2a1545c4b638d9a14152e253095854","modified":1556155343939},{"_id":"themes/next/.git/objects/71/f6b8ecc87fe9be841535ec58e67543baaf7b1c","hash":"04c4a46f05908dc9b940955f414a74462ffa04c4","modified":1556155344210},{"_id":"themes/next/.git/objects/7a/a09b45ea724ff3a1da2d89194451976709335a","hash":"1255939d97c22f64e39b1dda44c26308d00cbea0","modified":1556155344167},{"_id":"themes/next/.git/objects/79/88f5b9365f5dc2241b6b454bab726120a1c6cb","hash":"b5268e472b96a613c7fb521f5ffcef6135c287fb","modified":1556155344101},{"_id":"themes/next/.git/objects/82/b32fcf8b44295e95a1d074d5dde4400ca085b0","hash":"b4d0e4bdacba392388d81e980967682a26f9a061","modified":1556155454943},{"_id":"themes/next/.git/objects/83/fba8c623d00e13d1a1ca42bf37b59cf8ddf97a","hash":"e4f5b7bc2e601163237b153f922ccb40d6599dcd","modified":1556155344042},{"_id":"themes/next/.git/objects/9a/6da10bde13efc72c82d6d8028ed3ee98b98c86","hash":"49c2c5b28d9c30646273b398141c4bc61d243b4b","modified":1556155343828},{"_id":"themes/next/.git/objects/89/8b9efb2339838829eb3b8f5d5196b18f142582","hash":"c1be08d03e51ebe154b33d26fe7af5c719173a0e","modified":1556155344459},{"_id":"themes/next/.git/objects/90/bc798318875aa88f69e067f0e9c954e08ba7ab","hash":"235ed7a305c7e6780f3865dd7dfa7e1bab648553","modified":1556155454638},{"_id":"themes/next/.git/objects/9d/a07de488f8f167acafec41072f41cdfd0df7b3","hash":"10cdfa6df09beb484ea74955980301282a1d60e0","modified":1556155344416},{"_id":"themes/next/.git/objects/b7/24392e26af028f920fd4df2e610b42c897d9e5","hash":"829b4eeb41a1e50baa943c4f1746e5fb7564c285","modified":1556155454340},{"_id":"themes/next/.git/objects/a0/eeecb3ccd6942ff52e8232e636b9e23f117766","hash":"775c4f20bbf7d6c5c3d29c74700a81d62bb2e4e0","modified":1556155454498},{"_id":"themes/next/.git/objects/c4/01646e70aed2bd8481a2b4288298e98d01160c","hash":"996ea9202846dc1705c52a88e7d434824814913e","modified":1556155454708},{"_id":"themes/next/.git/objects/dd/690ccc7ab7b577c2bf03ed963d6abc4a6d5fe4","hash":"dfc17805106382589d744e865d8a1c4115374512","modified":1556155343022},{"_id":"themes/next/.git/objects/e0/a252c927b3c6274030c75445ac3da5f4773066","hash":"4a300ca42db24fae1415ef1f582b57abb9222908","modified":1556155344348},{"_id":"themes/next/.git/objects/d7/a6e3498ee2490229ba25bcd831143850d3d9e8","hash":"636ba04736eaa0bd0734a37ac7cfe8488a58786a","modified":1556155454754},{"_id":"themes/next/.git/objects/c7/7aef006fe84cab4696e11776944884823c50bb","hash":"e90a34f11be6f368a5453a8739d8ea69d7eaf1e1","modified":1556155454831},{"_id":"themes/next/.git/objects/e0/ef531f436c42930f1a60befc388c566115578f","hash":"84f05d5d48f38f9cda8f51a5f40519f10d18f26d","modified":1556155344371},{"_id":"themes/next/.git/objects/e2/5629e5113ed11ca1dea30e838b8a2c2fdc6358","hash":"5a393fe7f56f2525664acdc7977bd73fc0334964","modified":1556155454890},{"_id":"themes/next/.git/objects/e1/e2063e1fc0a36f16d5bed3e3f6fcc72bb474f6","hash":"e8b1ead2dfcc1b4475842690504e19e09e169b8d","modified":1556155343999},{"_id":"themes/next/.git/objects/e3/fbaf9ee000addf2210d5a5f5f18c0d522bb10d","hash":"4e0846796c45ed194156c413645f7c22c2412942","modified":1556155344254},{"_id":"themes/next/.git/objects/fb/d3ce6fcb30968a40e177eee2e5704e1799b6d7","hash":"cb9732845857efa879200e3465d1bce37ff9eb77","modified":1556155455140},{"_id":"themes/next/.git/objects/f7/ee33c3bebf11299430cc96faadd3e384fa313a","hash":"08214907714dd3289fb43bcd1190923fe3013327","modified":1556155343083},{"_id":"themes/next/.git/refs/heads/master","hash":"738ef243e87abee5b7d346518b4ca742b0af4f1d","modified":1556155337759},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1556155457631},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1556155457692},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1556155456614},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1556155457757},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1556155456706},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1556155456514},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1556155456536},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1556155456456},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1556155456728},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"1cd01c6e92ab1913d48e556a92bb4f28b6dc4996","modified":1556155456580},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1556155456636},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1556155456397},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"fc65b9c98a0a8ab43a5e7aabff6c5f03838e09c8","modified":1556155456419},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1556155456478},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1556155456658},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1556155456558},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1556155455720},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1556155455828},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"10160daceaa6f1ecf632323d422ebe2caae49ddf","modified":1556155455785},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1556155455670},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1556155455763},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"aa0629277d751c55c6d973e7691bf84af9b17a60","modified":1556155455637},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"8a2e393d2e49f7bf560766d8a07cd461bf3fce4f","modified":1556155455806},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"8b6650f77fe0a824c8075b2659e0403e0c78a705","modified":1556155455692},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"fcabbb241f894c9a6309c44e126cf3e8fea81fd4","modified":1556155455741},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1556155455997},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1556155455941},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"385c066af96bee30be2459dbec8aae1f15d382f5","modified":1556155455974},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1556155456167},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1556155457313},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1556155457292},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1556155457197},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1556155457241},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1556155457219},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1556155457029},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1556155457055},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1556155457100},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1556155457077},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"df4152d3194e337f29cb1a1a08259a2fdb5b1421","modified":1556155458988},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1556155459339},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"82f9055955920ed88a2ab6a20ab02169abb2c634","modified":1556155459361},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"9ab65361ba0a12a986edd103e56492644c2db0b8","modified":1556155459272},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"99fbb4686ea9a3e03a4726ed7cf4d8f529034452","modified":1556155461777},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1556155461754},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"f29165e36489a87ba32d17dddfd2720d84e3f3ec","modified":1556155461712},{"_id":"themes/next/source/css/_variables/base.styl","hash":"29c261fa6b4046322559074d75239c6b272fb8a3","modified":1556155461819},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1556155462567},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1556155462505},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1556155462525},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1556155462484},{"_id":"themes/next/source/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1556155462360},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1556155462586},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1556155462463},{"_id":"themes/next/source/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1556155462606},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1556155462380},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1556155462546},{"_id":"themes/next/source/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1556155462401},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1556155486762},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1556155464690},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1556155483069},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1556155483047},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1556155483343},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1556155483509},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1556155483320},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1556155482057},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1556155483299},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1556155474023},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1556155464901},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1556155465516},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1556155465475},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1556155465495},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1556155487449},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1556155483247},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1556155483183},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1556155483226},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1556155483130},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1556155483204},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1556155483161},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1556155479925},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1556155479419},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1556155479277},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1556155479460},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1556155479044},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1556155479299},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1556155479236},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1556155479320},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1556155479190},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1556155479168},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1556155479090},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1556155479213},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1556155479068},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1556155479012},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1556155479342},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1556155479146},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1556155479123},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1556155478601},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1556155474297},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1556155478942},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1556155463906},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1556155464628},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1556155463873},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1556155464010},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1556155464117},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"861b3bc0d20f8303b8b83c599ae9db624d24e264","modified":1556155337548},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1556155342607},{"_id":"themes/next/.git/refs/remotes/origin/master","hash":"738ef243e87abee5b7d346518b4ca742b0af4f1d","modified":1556155337829},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1556155456073},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1556155456052},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1556155461455},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1556155460233},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1556155460254},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1556155460276},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1556155460553},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1556155460575},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1556155461257},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"f7c44b0ee46cf2cf82a4c9455ba8d8b55299976f","modified":1556155461617},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1556155461498},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1556155459463},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1556155461573},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1556155461595},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1556155461552},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1556155461520},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1556155458372},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"18c3336ee3d09bd2da6a876e1336539f03d5a973","modified":1556155458897},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1556155458339},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1556155458460},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1556155458438},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"3b25edfa187d1bbbd0d38b50dd013cef54758abf","modified":1556155458306},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1556155458483},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1556155458272},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1556155458779},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1556155458802},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4aac01962520d60b03b23022ab601ad4bd19c08c","modified":1556155458823},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1556155458699},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1556155458844},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1556155458568},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5b93958239d3d2bf9aeaede44eced2434d784462","modified":1556155458612},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1556155458634},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1556155458546},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9d16fa3c14ed76b71229f022b63a02fd0f580958","modified":1556155458590},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1556155458655},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1556155462432},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1556155482006},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1556155480787},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1556155482885},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1556155483014},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1556155482151},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1556155482982},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1556155482174},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1556155482960},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1556155482713},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1556155482938},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1556155482691},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1556155483407},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1556155483457},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1556155465443},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1556155464957},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1556155465019},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1556155464785},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1556155464832},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1556155481712},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1556155480642},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1556155487428},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1556155468662},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1556155472947},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1556155463830},{"_id":"themes/next/.git/logs/refs/remotes/origin/master","hash":"8d73211b7a3be9cd8f2195755f2d946bc8be693d","modified":1556155337602},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"a097cf99bb7d9e75840cd37967e48bc7363704f9","modified":1556155337624},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1556155461340},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1556155461361},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1556155461383},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1556155461403},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1556155461425},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1556155459792},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1556155459728},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1556155459750},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1556155459771},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1556155459814},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1556155460202},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1556155460159},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"25dc25f61a232f03ca72472b7852f882448ec185","modified":1556155460180},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"7905a7f625702b45645d8be1268cb8af3f698c70","modified":1556155461290},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"0a6c0efffdf18bddbc1d1238feaed282b09cd0fe","modified":1556155460327},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"1c1e7501f8e0b99ab9a0e82897dc44d36c8ceb54","modified":1556155460371},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1556155460392},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1556155460501},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1556155460457},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1556155460349},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"12937cae17c96c74d5c58db6cb29de3b2dfa14a2","modified":1556155460522},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"50305b6ad7d09d2ffa4854e39f41ec1f4fe984fd","modified":1556155460414},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1556155460435},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1556155460479},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1556155460631},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1556155460889},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"535b3b4f8cb1eec2558e094320e7dfb01f94c0e7","modified":1556155460911},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1556155460770},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1556155460748},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1556155460853},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1556155460814},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"aea21141015ca8c409d8b33e3e34ec505f464e93","modified":1556155460727},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1556155460609},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1556155460652},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1556155460792},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1556155460933},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"d5a4e4fc17f1f7e7c3a61b52d8e2e9677e139de7","modified":1556155460675},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1556155460956},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1556155461051},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"262debfd4442fa03d9919ceb88b948339df03fb0","modified":1556155460696},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1556155461075},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"37e951e734a252fe8a81f452b963df2ba90bfe90","modified":1556155461139},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1556155461096},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1556155461203},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1556155461161},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1556155461117},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1556155461224},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1556155461182},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1556155460022},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1556155460086},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1556155460064},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1556155459955},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1556155460000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1556155460043},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1556155460111},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1556155459977},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1556155459913},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1ccfbd4d0f5754b2dc2719a91245c95f547a7652","modified":1556155459880},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1556155458222},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1556155458406},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1556155458748},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1556155480820},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1556155480841},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1556155481369},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1556155481265},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1556155481317},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1556155482853},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1556155482811},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1556155482767},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1556155482789},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1556155482746},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1556155482832},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1556155473992},{"_id":"themes/next/.git/objects/pack/pack-30a62047db825c29862367a57fb4121cf6d92feb.idx","hash":"8f0c72499de301e3bca267f0bdd3568f561f88dc","modified":1556155454262},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1556155468137},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1556155466854},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1556155486741},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1556155478439},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1556155472165},{"_id":"themes/next/.git/objects/pack/pack-30a62047db825c29862367a57fb4121cf6d92feb.pack","hash":"9ad9de360c43a67068d2438f2c83a469a48d8d74","modified":1556155451766}],"Category":[{"name":"Leetcode","_id":"cjuw5c69j0004dhyffn4n0os5"},{"name":"","_id":"cjuw5c6a2000jdhyfx9f7pypw"},{"name":"","_id":"cjuw5c6ac0019dhyf5umhejhp"},{"name":"","_id":"cjuw5c6ac001fdhyf2efuz51f"},{"name":"","_id":"cjuw5c6gt0040dhyfabvqbn80"}],"Data":[],"Page":[{"title":"about","date":"2018-07-29T10:39:42.000Z","_content":"\n\n- 2016\n\n- \n\n- Python Django, \n\n\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2018-07-29 18:39:42\n---\n\n\n- 2016\n\n- \n\n- Python Django, \n\n\n","updated":"2019-04-25T01:27:24.564Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjuw5c69f0001dhyfhdg3b7ze","content":"<ul>\n<li><p>2016</p>\n</li>\n<li><p></p>\n</li>\n<li><p>Python Django, </p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>2016</p>\n</li>\n<li><p></p>\n</li>\n<li><p>Python Django, </p>\n</li>\n</ul>\n"},{"title":"categories","date":"2018-07-29T10:39:32.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-07-29 18:39:32\ntype: \"categories\"\n---\n","updated":"2019-04-25T01:27:24.628Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjuw5c69h0003dhyf1fz4lxkw","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2018-07-29T10:36:45.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-07-29 18:36:45\ntype: \"tags\"\n---\n","updated":"2019-04-25T01:27:26.060Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjuw5c6g40036dhyfkhf5p5y0","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"LeetCode312 ","date":"2017-03-09T07:24:09.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\nAcceptance==\n\n\n\n> **312**. Burst Balloons   \nTotal Accepted: 23001   \nTotal Submissions: 54845   \nDifficulty: Hard   \nContributors: Admin   \nGiven n balloons, indexed from 0 to n-1. Each balloon is painted with a number on it represented by array nums. You are asked to burst all the balloons. If the you burst balloon i you will get nums[left] * nums[i] * nums[right] coins. Here left and right are adjacent indices of i. After the burst, the left and right then becomes adjacent.\n\n> Find the maximum coins you can collect by bursting the balloons wisely.\n\n> Note: \n> (1) You may imagine nums[-1] = nums[n] = 1. They are not real therefore you can not burst them.\n> (2) 0  n  500, 0  nums[i]  100\n\n> Example:\n\n> Given [3, 1, 5, 8]\n\n> Return 167\n\n>    nums = [3,1,5,8] --> [3,5,8] -->   [3,8]   -->  [8]  --> []\n   coins =  3 * 1 * 5      +  3 * 5 * 8    +  1 * 3 * 8      + 1 * 8 * 1   = 167\n   \n\n1. nin-i,O(n!)\n\n\n2.    \n\tkC(k, n),1nO(n!)   \n\n\n3. ****   \n\t:****\n\t****111\n\n4. ********\n\n```python\nclass Solution(object):\n    def maxCoins(self, nums):\n    \t#\n        coins = [1] + [num for num in nums if num] + [1]\n        n = len(coins)\n        dp = [[0] * n for _ in xrange(n)]\n\n        for l in xrange(2, n):\n            #l\n            for left in xrange(0, n-l):\n                right = left + l\n                for j in xrange(left+1, right):\n                #\n                #coins[left] * coins[j] * coins[right] \n                    dp[left][right] = max(dp[left][right], dp[left][j] + \\\n                            dp[j][right] + coins[left] * coins[j] * coins[right])\n        return dp[0][n-1]\n```\n\nO(n^3)   \n -->-->  -->-->  -->-->    \ndiscuss,\n\n\n(","source":"_posts/LeetCode312.md","raw":"title: LeetCode312 \ndate: 2017-03-09 15:24:09\ntags:\n- Python\n- Divide and Conquer\n- Dynamic Programming\ncategories:\n- Leetcode\t\nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\nAcceptance==\n\n\n\n> **312**. Burst Balloons   \nTotal Accepted: 23001   \nTotal Submissions: 54845   \nDifficulty: Hard   \nContributors: Admin   \nGiven n balloons, indexed from 0 to n-1. Each balloon is painted with a number on it represented by array nums. You are asked to burst all the balloons. If the you burst balloon i you will get nums[left] * nums[i] * nums[right] coins. Here left and right are adjacent indices of i. After the burst, the left and right then becomes adjacent.\n\n> Find the maximum coins you can collect by bursting the balloons wisely.\n\n> Note: \n> (1) You may imagine nums[-1] = nums[n] = 1. They are not real therefore you can not burst them.\n> (2) 0  n  500, 0  nums[i]  100\n\n> Example:\n\n> Given [3, 1, 5, 8]\n\n> Return 167\n\n>    nums = [3,1,5,8] --> [3,5,8] -->   [3,8]   -->  [8]  --> []\n   coins =  3 * 1 * 5      +  3 * 5 * 8    +  1 * 3 * 8      + 1 * 8 * 1   = 167\n   \n\n1. nin-i,O(n!)\n\n\n2.    \n\tkC(k, n),1nO(n!)   \n\n\n3. ****   \n\t:****\n\t****111\n\n4. ********\n\n```python\nclass Solution(object):\n    def maxCoins(self, nums):\n    \t#\n        coins = [1] + [num for num in nums if num] + [1]\n        n = len(coins)\n        dp = [[0] * n for _ in xrange(n)]\n\n        for l in xrange(2, n):\n            #l\n            for left in xrange(0, n-l):\n                right = left + l\n                for j in xrange(left+1, right):\n                #\n                #coins[left] * coins[j] * coins[right] \n                    dp[left][right] = max(dp[left][right], dp[left][j] + \\\n                            dp[j][right] + coins[left] * coins[j] * coins[right])\n        return dp[0][n-1]\n```\n\nO(n^3)   \n -->-->  -->-->  -->-->    \ndiscuss,\n\n\n(","slug":"LeetCode312","published":1,"updated":"2019-04-25T01:27:24.824Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69a0000dhyff6vcxx3k","content":"<p>Acceptance==</p>\n<p></p>\n<blockquote>\n<p><strong>312</strong>. Burst Balloons<br>Total Accepted: 23001<br>Total Submissions: 54845<br>Difficulty: Hard<br>Contributors: Admin<br>Given n balloons, indexed from 0 to n-1. Each balloon is painted with a number on it represented by array nums. You are asked to burst all the balloons. If the you burst balloon i you will get nums[left] <em> nums[i] </em> nums[right] coins. Here left and right are adjacent indices of i. After the burst, the left and right then becomes adjacent.</p>\n</blockquote>\n<blockquote>\n<p>Find the maximum coins you can collect by bursting the balloons wisely.</p>\n</blockquote>\n<blockquote>\n<p>Note:<br>(1) You may imagine nums[-1] = nums[n] = 1. They are not real therefore you can not burst them.<br>(2) 0  n  500, 0  nums[i]  100</p>\n</blockquote>\n<blockquote>\n<p>Example:</p>\n</blockquote>\n<blockquote>\n<p>Given [3, 1, 5, 8]</p>\n</blockquote>\n<blockquote>\n<p>Return 167</p>\n</blockquote>\n<blockquote>\n<p>   nums = [3,1,5,8] &gt; [3,5,8] &gt;   [3,8]   &gt;  [8]  &gt; []<br>   coins =  3 <em> 1 </em> 5      +  3 <em> 5 </em> 8    +  1 <em> 3 </em> 8      + 1 <em> 8 </em> 1   = 167</p>\n</blockquote>\n<ol>\n<li><p>nin-i,O(n!)<br></p>\n</li>\n<li><p><br> kC(k, n),1nO(n!)<br></p>\n</li>\n<li><p><strong></strong><br> :<strong></strong><br> <strong></strong>111</p>\n</li>\n<li><p><strong></strong><strong></strong></p>\n</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">maxCoins</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    \t<span class=\"comment\">#</span></span><br><span class=\"line\">        coins = [<span class=\"number\">1</span>] + [num <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums <span class=\"keyword\">if</span> num] + [<span class=\"number\">1</span>]</span><br><span class=\"line\">        n = len(coins)</span><br><span class=\"line\">        dp = [[<span class=\"number\">0</span>] * n <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> xrange(n)]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> l <span class=\"keyword\">in</span> xrange(<span class=\"number\">2</span>, n):</span><br><span class=\"line\">            <span class=\"comment\">#l</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> left <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, n-l):</span><br><span class=\"line\">                right = left + l</span><br><span class=\"line\">                <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> xrange(left+<span class=\"number\">1</span>, right):</span><br><span class=\"line\">                <span class=\"comment\">#</span></span><br><span class=\"line\">                <span class=\"comment\">#coins[left] * coins[j] * coins[right] </span></span><br><span class=\"line\">                    dp[left][right] = max(dp[left][right], dp[left][j] + \\</span><br><span class=\"line\">                            dp[j][right] + coins[left] * coins[j] * coins[right])</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dp[<span class=\"number\">0</span>][n<span class=\"number\">-1</span>]</span><br></pre></td></tr></table></figure>\n<p>O(n^3)<br> &gt;&gt;  &gt;&gt;  &gt;&gt; <br>discuss,</p>\n<p>(</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Acceptance==</p>\n<p></p>\n<blockquote>\n<p><strong>312</strong>. Burst Balloons<br>Total Accepted: 23001<br>Total Submissions: 54845<br>Difficulty: Hard<br>Contributors: Admin<br>Given n balloons, indexed from 0 to n-1. Each balloon is painted with a number on it represented by array nums. You are asked to burst all the balloons. If the you burst balloon i you will get nums[left] <em> nums[i] </em> nums[right] coins. Here left and right are adjacent indices of i. After the burst, the left and right then becomes adjacent.</p>\n</blockquote>\n<blockquote>\n<p>Find the maximum coins you can collect by bursting the balloons wisely.</p>\n</blockquote>\n<blockquote>\n<p>Note:<br>(1) You may imagine nums[-1] = nums[n] = 1. They are not real therefore you can not burst them.<br>(2) 0  n  500, 0  nums[i]  100</p>\n</blockquote>\n<blockquote>\n<p>Example:</p>\n</blockquote>\n<blockquote>\n<p>Given [3, 1, 5, 8]</p>\n</blockquote>\n<blockquote>\n<p>Return 167</p>\n</blockquote>\n<blockquote>\n<p>   nums = [3,1,5,8] &gt; [3,5,8] &gt;   [3,8]   &gt;  [8]  &gt; []<br>   coins =  3 <em> 1 </em> 5      +  3 <em> 5 </em> 8    +  1 <em> 3 </em> 8      + 1 <em> 8 </em> 1   = 167</p>\n</blockquote>\n<ol>\n<li><p>nin-i,O(n!)<br></p>\n</li>\n<li><p><br> kC(k, n),1nO(n!)<br></p>\n</li>\n<li><p><strong></strong><br> :<strong></strong><br> <strong></strong>111</p>\n</li>\n<li><p><strong></strong><strong></strong></p>\n</li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">maxCoins</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    \t<span class=\"comment\">#</span></span><br><span class=\"line\">        coins = [<span class=\"number\">1</span>] + [num <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums <span class=\"keyword\">if</span> num] + [<span class=\"number\">1</span>]</span><br><span class=\"line\">        n = len(coins)</span><br><span class=\"line\">        dp = [[<span class=\"number\">0</span>] * n <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> xrange(n)]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> l <span class=\"keyword\">in</span> xrange(<span class=\"number\">2</span>, n):</span><br><span class=\"line\">            <span class=\"comment\">#l</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> left <span class=\"keyword\">in</span> xrange(<span class=\"number\">0</span>, n-l):</span><br><span class=\"line\">                right = left + l</span><br><span class=\"line\">                <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> xrange(left+<span class=\"number\">1</span>, right):</span><br><span class=\"line\">                <span class=\"comment\">#</span></span><br><span class=\"line\">                <span class=\"comment\">#coins[left] * coins[j] * coins[right] </span></span><br><span class=\"line\">                    dp[left][right] = max(dp[left][right], dp[left][j] + \\</span><br><span class=\"line\">                            dp[j][right] + coins[left] * coins[j] * coins[right])</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dp[<span class=\"number\">0</span>][n<span class=\"number\">-1</span>]</span><br></pre></td></tr></table></figure>\n<p>O(n^3)<br> &gt;&gt;  &gt;&gt;  &gt;&gt; <br>discuss,</p>\n<p>(</p>\n"},{"title":"LeetCode496 (stack)","date":"2017-02-10T04:56:16.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## LeetCode 496. Next Greater Element I(stack)\n\n\n\n> **496**. Next Greater Element I  \nDescription  Submission  Solutions  Add to List  \nTotal Accepted: 3176  \nTotal Submissions: 5284  \nDifficulty: Easy  \nContributors: love\\_FDU\\_llp  \nYou are given two arrays (without duplicates) nums1  and nums2 where nums1s elements are subset of nums2. Find all the next greater numbers for nums1's elements in the corresponding places of nums2.  \n\n>The Next Greater Number of a number x in nums1 is the first greater number to its right in nums2. If it does not exist, output -1 for this number.\n\n>Example 1:  \nInput: nums1 = [4,1,2], nums2 = [1,3,4,2].  \nOutput: [-1,3,-1]  \nExplanation:  \n    For number 4 in the first array, you cannot find the next greater number for it in the second array, so output -1.  \n    For number 1 in the first array, the next greater number for it in the second array is 3.  \n    For number 2 in the first array, there is no next greater number for it in the second array, so output -1.  \nExample 2:  \nInput: nums1 = [2,4], nums2 = [1,2,3,4].  \nOutput: [3,-1]  \nExplanation:  \n    For number 2 in the first array, the next greater number for it in the second array is 3.  \n    For number 4 in the first array, there is no next greater number for it in the second array, so output -1.  \nNote:  \nAll elements in nums1 and nums2 are unique.  \nThe length of both nums1 and nums2 would not exceed 1000.  \n\nnums1mnums2n\nO(m*n)  \n**1**   \n```python\ndef nextGreaterElement(self, findNums, nums):\n    \"\"\"\n    :type findNums: List[int]\n    :type nums: List[int]\n    :rtype: List[int]\n    \"\"\"\n    res = []\n    length = len(nums)\n    for i in findNums:\n        j, flag = 0, False\n        while j < length:\n            if i == nums[j] and not flag:\n                flag = True\n            if flag:\n                if j < length-1 and nums[j+1] > i:\n                    res.append(nums[j+1])\n                    flag = False\n                    break\n            if j == length - 1:\n                res.append(-1)\n                flag = False\n            j += 1\n    return res\n```\nnums1nums2List-1   \nACruntime2.47%.....\n\nDiscuss....  \n.....   \nO(m+n)  \n**2**  \n\n```python\ndef nextGreaterElement(self, findNums, nums):\n    \"\"\"\n    :type findNums: List[int]\n    :type nums: List[int]\n    :rtype: List[int]\n    \"\"\"\n    d = {}\n    ans = [-1] * len(findNums)\n    for i, num in enumerate(findNums):\n        d[num] = i\n    stack = []\n    for num in nums:\n        while stack and stack[-1] < num:\n            top = stack.pop()\n            if top in d:\n                ans[d[top]] = num\n        stack.append(num)\n    return ans\n```\n\n\n- dindex\n- nums1ans(-1)\n- [5, 4, 3, 2, 1, 6]6\"Next Greater Element\" \n- \n- \"Next Greater Element\"[6,4,3,2],5234, \"Next Greater Element\"5\n- nums2nums1ans\n- nums1nums2O(m+n)\n\nAC\n\n\n**PS. **  \n****   \n**==**\n","source":"_posts/LeetCode496.md","raw":"title: LeetCode496 (stack)\ndate: 2017-02-10 12:56:16\ntags:\n- Python\n- stack\ncategories:\n- Leetcode\t\nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## LeetCode 496. Next Greater Element I(stack)\n\n\n\n> **496**. Next Greater Element I  \nDescription  Submission  Solutions  Add to List  \nTotal Accepted: 3176  \nTotal Submissions: 5284  \nDifficulty: Easy  \nContributors: love\\_FDU\\_llp  \nYou are given two arrays (without duplicates) nums1  and nums2 where nums1s elements are subset of nums2. Find all the next greater numbers for nums1's elements in the corresponding places of nums2.  \n\n>The Next Greater Number of a number x in nums1 is the first greater number to its right in nums2. If it does not exist, output -1 for this number.\n\n>Example 1:  \nInput: nums1 = [4,1,2], nums2 = [1,3,4,2].  \nOutput: [-1,3,-1]  \nExplanation:  \n    For number 4 in the first array, you cannot find the next greater number for it in the second array, so output -1.  \n    For number 1 in the first array, the next greater number for it in the second array is 3.  \n    For number 2 in the first array, there is no next greater number for it in the second array, so output -1.  \nExample 2:  \nInput: nums1 = [2,4], nums2 = [1,2,3,4].  \nOutput: [3,-1]  \nExplanation:  \n    For number 2 in the first array, the next greater number for it in the second array is 3.  \n    For number 4 in the first array, there is no next greater number for it in the second array, so output -1.  \nNote:  \nAll elements in nums1 and nums2 are unique.  \nThe length of both nums1 and nums2 would not exceed 1000.  \n\nnums1mnums2n\nO(m*n)  \n**1**   \n```python\ndef nextGreaterElement(self, findNums, nums):\n    \"\"\"\n    :type findNums: List[int]\n    :type nums: List[int]\n    :rtype: List[int]\n    \"\"\"\n    res = []\n    length = len(nums)\n    for i in findNums:\n        j, flag = 0, False\n        while j < length:\n            if i == nums[j] and not flag:\n                flag = True\n            if flag:\n                if j < length-1 and nums[j+1] > i:\n                    res.append(nums[j+1])\n                    flag = False\n                    break\n            if j == length - 1:\n                res.append(-1)\n                flag = False\n            j += 1\n    return res\n```\nnums1nums2List-1   \nACruntime2.47%.....\n\nDiscuss....  \n.....   \nO(m+n)  \n**2**  \n\n```python\ndef nextGreaterElement(self, findNums, nums):\n    \"\"\"\n    :type findNums: List[int]\n    :type nums: List[int]\n    :rtype: List[int]\n    \"\"\"\n    d = {}\n    ans = [-1] * len(findNums)\n    for i, num in enumerate(findNums):\n        d[num] = i\n    stack = []\n    for num in nums:\n        while stack and stack[-1] < num:\n            top = stack.pop()\n            if top in d:\n                ans[d[top]] = num\n        stack.append(num)\n    return ans\n```\n\n\n- dindex\n- nums1ans(-1)\n- [5, 4, 3, 2, 1, 6]6\"Next Greater Element\" \n- \n- \"Next Greater Element\"[6,4,3,2],5234, \"Next Greater Element\"5\n- nums2nums1ans\n- nums1nums2O(m+n)\n\nAC\n\n\n**PS. **  \n****   \n**==**\n","slug":"LeetCode496","published":1,"updated":"2019-04-25T01:27:25.130Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69f0002dhyf9ndyp0fg","content":"<h2 id=\"LeetCode-496-Next-Greater-Element-I-stack-\"><a href=\"#LeetCode-496-Next-Greater-Element-I-stack-\" class=\"headerlink\" title=\"LeetCode 496. Next Greater Element I(stack)\"></a>LeetCode 496. Next Greater Element I(stack)</h2><p></p>\n<blockquote>\n<p><strong>496</strong>. Next Greater Element I<br>Description  Submission  Solutions  Add to List<br>Total Accepted: 3176<br>Total Submissions: 5284<br>Difficulty: Easy<br>Contributors: love_FDU_llp<br>You are given two arrays (without duplicates) nums1  and nums2 where nums1s elements are subset of nums2. Find all the next greater numbers for nums1s elements in the corresponding places of nums2.  </p>\n</blockquote>\n<blockquote>\n<p>The Next Greater Number of a number x in nums1 is the first greater number to its right in nums2. If it does not exist, output -1 for this number.</p>\n</blockquote>\n<blockquote>\n<p>Example 1:<br>Input: nums1 = [4,1,2], nums2 = [1,3,4,2].<br>Output: [-1,3,-1]<br>Explanation:<br>    For number 4 in the first array, you cannot find the next greater number for it in the second array, so output -1.<br>    For number 1 in the first array, the next greater number for it in the second array is 3.<br>    For number 2 in the first array, there is no next greater number for it in the second array, so output -1.<br>Example 2:<br>Input: nums1 = [2,4], nums2 = [1,2,3,4].<br>Output: [3,-1]<br>Explanation:<br>    For number 2 in the first array, the next greater number for it in the second array is 3.<br>    For number 4 in the first array, there is no next greater number for it in the second array, so output -1.<br>Note:<br>All elements in nums1 and nums2 are unique.<br>The length of both nums1 and nums2 would not exceed 1000.  </p>\n</blockquote>\n<p>nums1mnums2n<br>O(m*n)<br><strong>1</strong><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">nextGreaterElement</span><span class=\"params\">(self, findNums, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type findNums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    res = []</span><br><span class=\"line\">    length = len(nums)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> findNums:</span><br><span class=\"line\">        j, flag = <span class=\"number\">0</span>, <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> j &lt; length:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == nums[j] <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> flag:</span><br><span class=\"line\">                flag = <span class=\"literal\">True</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> flag:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> j &lt; length<span class=\"number\">-1</span> <span class=\"keyword\">and</span> nums[j+<span class=\"number\">1</span>] &gt; i:</span><br><span class=\"line\">                    res.append(nums[j+<span class=\"number\">1</span>])</span><br><span class=\"line\">                    flag = <span class=\"literal\">False</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> j == length - <span class=\"number\">1</span>:</span><br><span class=\"line\">                res.append(<span class=\"number\">-1</span>)</span><br><span class=\"line\">                flag = <span class=\"literal\">False</span></span><br><span class=\"line\">            j += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res</span><br></pre></td></tr></table></figure></p>\n<p>nums1nums2List-1<br>ACruntime2.47%..</p>\n<p>Discuss.<br>..<br>O(m+n)<br><strong>2</strong>  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">nextGreaterElement</span><span class=\"params\">(self, findNums, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type findNums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    d = &#123;&#125;</span><br><span class=\"line\">    ans = [<span class=\"number\">-1</span>] * len(findNums)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i, num <span class=\"keyword\">in</span> enumerate(findNums):</span><br><span class=\"line\">        d[num] = i</span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">while</span> stack <span class=\"keyword\">and</span> stack[<span class=\"number\">-1</span>] &lt; num:</span><br><span class=\"line\">            top = stack.pop()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> top <span class=\"keyword\">in</span> d:</span><br><span class=\"line\">                ans[d[top]] = num</span><br><span class=\"line\">        stack.append(num)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>dindex</li>\n<li>nums1ans(-1)</li>\n<li>[5, 4, 3, 2, 1, 6]6Next Greater Element </li>\n<li></li>\n<li>Next Greater Element[6,4,3,2],5234, Next Greater Element5</li>\n<li>nums2nums1ans</li>\n<li>nums1nums2O(m+n)</li>\n</ul>\n<p>AC</p>\n<p><strong>PS. </strong><br><strong></strong><br><strong>==</strong></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"LeetCode-496-Next-Greater-Element-I-stack-\"><a href=\"#LeetCode-496-Next-Greater-Element-I-stack-\" class=\"headerlink\" title=\"LeetCode 496. Next Greater Element I(stack)\"></a>LeetCode 496. Next Greater Element I(stack)</h2><p></p>\n<blockquote>\n<p><strong>496</strong>. Next Greater Element I<br>Description  Submission  Solutions  Add to List<br>Total Accepted: 3176<br>Total Submissions: 5284<br>Difficulty: Easy<br>Contributors: love_FDU_llp<br>You are given two arrays (without duplicates) nums1  and nums2 where nums1s elements are subset of nums2. Find all the next greater numbers for nums1s elements in the corresponding places of nums2.  </p>\n</blockquote>\n<blockquote>\n<p>The Next Greater Number of a number x in nums1 is the first greater number to its right in nums2. If it does not exist, output -1 for this number.</p>\n</blockquote>\n<blockquote>\n<p>Example 1:<br>Input: nums1 = [4,1,2], nums2 = [1,3,4,2].<br>Output: [-1,3,-1]<br>Explanation:<br>    For number 4 in the first array, you cannot find the next greater number for it in the second array, so output -1.<br>    For number 1 in the first array, the next greater number for it in the second array is 3.<br>    For number 2 in the first array, there is no next greater number for it in the second array, so output -1.<br>Example 2:<br>Input: nums1 = [2,4], nums2 = [1,2,3,4].<br>Output: [3,-1]<br>Explanation:<br>    For number 2 in the first array, the next greater number for it in the second array is 3.<br>    For number 4 in the first array, there is no next greater number for it in the second array, so output -1.<br>Note:<br>All elements in nums1 and nums2 are unique.<br>The length of both nums1 and nums2 would not exceed 1000.  </p>\n</blockquote>\n<p>nums1mnums2n<br>O(m*n)<br><strong>1</strong><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">nextGreaterElement</span><span class=\"params\">(self, findNums, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type findNums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    res = []</span><br><span class=\"line\">    length = len(nums)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> findNums:</span><br><span class=\"line\">        j, flag = <span class=\"number\">0</span>, <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> j &lt; length:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == nums[j] <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> flag:</span><br><span class=\"line\">                flag = <span class=\"literal\">True</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> flag:</span><br><span class=\"line\">                <span class=\"keyword\">if</span> j &lt; length<span class=\"number\">-1</span> <span class=\"keyword\">and</span> nums[j+<span class=\"number\">1</span>] &gt; i:</span><br><span class=\"line\">                    res.append(nums[j+<span class=\"number\">1</span>])</span><br><span class=\"line\">                    flag = <span class=\"literal\">False</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> j == length - <span class=\"number\">1</span>:</span><br><span class=\"line\">                res.append(<span class=\"number\">-1</span>)</span><br><span class=\"line\">                flag = <span class=\"literal\">False</span></span><br><span class=\"line\">            j += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res</span><br></pre></td></tr></table></figure></p>\n<p>nums1nums2List-1<br>ACruntime2.47%..</p>\n<p>Discuss.<br>..<br>O(m+n)<br><strong>2</strong>  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">nextGreaterElement</span><span class=\"params\">(self, findNums, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type findNums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    d = &#123;&#125;</span><br><span class=\"line\">    ans = [<span class=\"number\">-1</span>] * len(findNums)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i, num <span class=\"keyword\">in</span> enumerate(findNums):</span><br><span class=\"line\">        d[num] = i</span><br><span class=\"line\">    stack = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">while</span> stack <span class=\"keyword\">and</span> stack[<span class=\"number\">-1</span>] &lt; num:</span><br><span class=\"line\">            top = stack.pop()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> top <span class=\"keyword\">in</span> d:</span><br><span class=\"line\">                ans[d[top]] = num</span><br><span class=\"line\">        stack.append(num)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>dindex</li>\n<li>nums1ans(-1)</li>\n<li>[5, 4, 3, 2, 1, 6]6Next Greater Element </li>\n<li></li>\n<li>Next Greater Element[6,4,3,2],5234, Next Greater Element5</li>\n<li>nums2nums1ans</li>\n<li>nums1nums2O(m+n)</li>\n</ul>\n<p>AC</p>\n<p><strong>PS. </strong><br><strong></strong><br><strong>==</strong></p>\n"},{"title":"LeetCode382 ","date":"2017-02-16T04:06:23.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## LeetCode382 \n****\n\n- \n\n> NNNNkk\n\n-   \n****\n\n> kk/n -\nkk\nk+1k/n kO(n).\n\n\n\n```\nInit : a reservoir with the size k\nfor  i= k+1 to N\n    M=random(1, i);\n    if( M < k)\n        SWAP the Mth value and ith value\nend for\n```\n\n- k/n:\n\n1. i(i < k), k1, k+1, ik/k+1, n:\n> i(i < k) =  *   \n\n\t:\n> 1 * k/(k+1) * (k+1)/(k+2)  (n-1)/n = k/n\n\n2. j(j >= k): \n>  =  * \n\n\t: \n> k/j * j/(j+1) ... (n-1)/n = k/n\n\n\t\n  \n- Leetcode 382 \n\n> **382**. Linked List Random Node  \nTotal Accepted: 20928  \nTotal Submissions: 45158  \nDifficulty: Medium  \nContributors: Admin  \nGiven a singly linked list, return a random node's value from the linked list. Each node must have the same probability of being chosen.\n\n> Follow up:\nWhat if the linked list is extremely large and its length is unknown to you? Could you solve this efficiently without using extra space?\n\n**Example:**\n\n```\n// Init a singly linked list [1,2,3].\nListNode head = new ListNode(1);\nhead.next = new ListNode(2);\nhead.next.next = new ListNode(3);\nSolution solution = new Solution(head);\n\n// getRandom() should return either 1, 2, or 3 randomly. Each element should have equal probability of returning.\nsolution.getRandom();\n```\n\n1,Python\n\n```python\nimport random\nclass Solution(object):\n\n    def __init__(self, head):\n        \"\"\"\n        @param head The linked list's head.\n        Note that the head is guaranteed to be not null, so it contains at least one node.\n        :type head: ListNode\n        \"\"\"\n        self.head = head\n\n    def getRandom(self):\n        \"\"\"\n        Returns a random node's value.\n        :rtype: int\n        \"\"\"\n        i = 1\n        head = self.head\n        while head != None:\n            M = random.randrange(0, i)\n            if M == 0:\n                k = head.val\n            head = head.next\n            i += 1\n        return k\n```\n\n> What if the linked list is extremely large\n\n, 100, \n\n```python\nclass Solution(object):\n\n    def __init__(self, head):\n        self.head = head\n\n    def getRandom(self):\n        node = self.head\n        before = 0\n        buffer = [None] * 100\n        while node:\n            now = 0\n            while node and now < 100:\n                buffer[now] = node\n                node = node.next\n                now += 1\n            r = random.randrange(now + before)\n            if r < now:\n                pick = buffer[r]\n            before += now\n        return pick.val\n```\nAC 50% , orz, ==\n \n","source":"_posts/LeetCode382.md","raw":"title: LeetCode382 \ndate: 2017-02-16 12:06:23\ntags:\n- Python\n- \ncategories:\n- Leetcode\t\nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## LeetCode382 \n****\n\n- \n\n> NNNNkk\n\n-   \n****\n\n> kk/n -\nkk\nk+1k/n kO(n).\n\n\n\n```\nInit : a reservoir with the size k\nfor  i= k+1 to N\n    M=random(1, i);\n    if( M < k)\n        SWAP the Mth value and ith value\nend for\n```\n\n- k/n:\n\n1. i(i < k), k1, k+1, ik/k+1, n:\n> i(i < k) =  *   \n\n\t:\n> 1 * k/(k+1) * (k+1)/(k+2)  (n-1)/n = k/n\n\n2. j(j >= k): \n>  =  * \n\n\t: \n> k/j * j/(j+1) ... (n-1)/n = k/n\n\n\t\n  \n- Leetcode 382 \n\n> **382**. Linked List Random Node  \nTotal Accepted: 20928  \nTotal Submissions: 45158  \nDifficulty: Medium  \nContributors: Admin  \nGiven a singly linked list, return a random node's value from the linked list. Each node must have the same probability of being chosen.\n\n> Follow up:\nWhat if the linked list is extremely large and its length is unknown to you? Could you solve this efficiently without using extra space?\n\n**Example:**\n\n```\n// Init a singly linked list [1,2,3].\nListNode head = new ListNode(1);\nhead.next = new ListNode(2);\nhead.next.next = new ListNode(3);\nSolution solution = new Solution(head);\n\n// getRandom() should return either 1, 2, or 3 randomly. Each element should have equal probability of returning.\nsolution.getRandom();\n```\n\n1,Python\n\n```python\nimport random\nclass Solution(object):\n\n    def __init__(self, head):\n        \"\"\"\n        @param head The linked list's head.\n        Note that the head is guaranteed to be not null, so it contains at least one node.\n        :type head: ListNode\n        \"\"\"\n        self.head = head\n\n    def getRandom(self):\n        \"\"\"\n        Returns a random node's value.\n        :rtype: int\n        \"\"\"\n        i = 1\n        head = self.head\n        while head != None:\n            M = random.randrange(0, i)\n            if M == 0:\n                k = head.val\n            head = head.next\n            i += 1\n        return k\n```\n\n> What if the linked list is extremely large\n\n, 100, \n\n```python\nclass Solution(object):\n\n    def __init__(self, head):\n        self.head = head\n\n    def getRandom(self):\n        node = self.head\n        before = 0\n        buffer = [None] * 100\n        while node:\n            now = 0\n            while node and now < 100:\n                buffer[now] = node\n                node = node.next\n                now += 1\n            r = random.randrange(now + before)\n            if r < now:\n                pick = buffer[r]\n            before += now\n        return pick.val\n```\nAC 50% , orz, ==\n \n","slug":"LeetCode382","published":1,"updated":"2019-04-25T01:27:25.849Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69m0006dhyfbtizqfbj","content":"<h2 id=\"LeetCode382-\"><a href=\"#LeetCode382-\" class=\"headerlink\" title=\"LeetCode382 \"></a>LeetCode382 </h2><p><strong></strong></p>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>NNNNkk</p>\n</blockquote>\n<ul>\n<li><br><strong></strong></li>\n</ul>\n<blockquote>\n<p>kk/n -<br>kk<br>k+1k/n kO(n).</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Init : a reservoir with the size k</span><br><span class=\"line\">for  i= k+1 to N</span><br><span class=\"line\">    M=random(1, i);</span><br><span class=\"line\">    if( M &lt; k)</span><br><span class=\"line\">        SWAP the Mth value and ith value</span><br><span class=\"line\">end for</span><br></pre></td></tr></table></figure>\n<ul>\n<li>k/n:</li>\n</ul>\n<ol>\n<li><p>i(i &lt; k), k1, k+1, ik/k+1, n:</p>\n<blockquote>\n<p>i(i &lt; k) =  *   </p>\n</blockquote>\n<p> :</p>\n<blockquote>\n<p>1 <em> k/(k+1) </em> (k+1)/(k+2)  (n-1)/n = k/n</p>\n</blockquote>\n</li>\n<li><p>j(j &gt;= k): </p>\n<blockquote>\n<p> =  * </p>\n</blockquote>\n<p> : </p>\n<blockquote>\n<p>k/j * j/(j+1)  (n-1)/n = k/n</p>\n</blockquote>\n<p> </p>\n</li>\n</ol>\n<ul>\n<li>Leetcode 382 </li>\n</ul>\n<blockquote>\n<p><strong>382</strong>. Linked List Random Node<br>Total Accepted: 20928<br>Total Submissions: 45158<br>Difficulty: Medium<br>Contributors: Admin<br>Given a singly linked list, return a random nodes value from the linked list. Each node must have the same probability of being chosen.</p>\n</blockquote>\n<blockquote>\n<p>Follow up:<br>What if the linked list is extremely large and its length is unknown to you? Could you solve this efficiently without using extra space?</p>\n</blockquote>\n<p><strong>Example:</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Init a singly linked list [1,2,3].</span><br><span class=\"line\">ListNode head = new ListNode(1);</span><br><span class=\"line\">head.next = new ListNode(2);</span><br><span class=\"line\">head.next.next = new ListNode(3);</span><br><span class=\"line\">Solution solution = new Solution(head);</span><br><span class=\"line\"></span><br><span class=\"line\">// getRandom() should return either 1, 2, or 3 randomly. Each element should have equal probability of returning.</span><br><span class=\"line\">solution.getRandom();</span><br></pre></td></tr></table></figure>\n<p>1,Python</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, head)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        @param head The linked list's head.</span></span><br><span class=\"line\"><span class=\"string\">        Note that the head is guaranteed to be not null, so it contains at least one node.</span></span><br><span class=\"line\"><span class=\"string\">        :type head: ListNode</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        self.head = head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getRandom</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        Returns a random node's value.</span></span><br><span class=\"line\"><span class=\"string\">        :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        i = <span class=\"number\">1</span></span><br><span class=\"line\">        head = self.head</span><br><span class=\"line\">        <span class=\"keyword\">while</span> head != <span class=\"literal\">None</span>:</span><br><span class=\"line\">            M = random.randrange(<span class=\"number\">0</span>, i)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> M == <span class=\"number\">0</span>:</span><br><span class=\"line\">                k = head.val</span><br><span class=\"line\">            head = head.next</span><br><span class=\"line\">            i += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> k</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>What if the linked list is extremely large</p>\n</blockquote>\n<p>, 100, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, head)</span>:</span></span><br><span class=\"line\">        self.head = head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getRandom</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        node = self.head</span><br><span class=\"line\">        before = <span class=\"number\">0</span></span><br><span class=\"line\">        buffer = [<span class=\"literal\">None</span>] * <span class=\"number\">100</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> node:</span><br><span class=\"line\">            now = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> node <span class=\"keyword\">and</span> now &lt; <span class=\"number\">100</span>:</span><br><span class=\"line\">                buffer[now] = node</span><br><span class=\"line\">                node = node.next</span><br><span class=\"line\">                now += <span class=\"number\">1</span></span><br><span class=\"line\">            r = random.randrange(now + before)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r &lt; now:</span><br><span class=\"line\">                pick = buffer[r]</span><br><span class=\"line\">            before += now</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pick.val</span><br></pre></td></tr></table></figure>\n<p>AC 50% , orz, ==</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"LeetCode382-\"><a href=\"#LeetCode382-\" class=\"headerlink\" title=\"LeetCode382 \"></a>LeetCode382 </h2><p><strong></strong></p>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>NNNNkk</p>\n</blockquote>\n<ul>\n<li><br><strong></strong></li>\n</ul>\n<blockquote>\n<p>kk/n -<br>kk<br>k+1k/n kO(n).</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Init : a reservoir with the size k</span><br><span class=\"line\">for  i= k+1 to N</span><br><span class=\"line\">    M=random(1, i);</span><br><span class=\"line\">    if( M &lt; k)</span><br><span class=\"line\">        SWAP the Mth value and ith value</span><br><span class=\"line\">end for</span><br></pre></td></tr></table></figure>\n<ul>\n<li>k/n:</li>\n</ul>\n<ol>\n<li><p>i(i &lt; k), k1, k+1, ik/k+1, n:</p>\n<blockquote>\n<p>i(i &lt; k) =  *   </p>\n</blockquote>\n<p> :</p>\n<blockquote>\n<p>1 <em> k/(k+1) </em> (k+1)/(k+2)  (n-1)/n = k/n</p>\n</blockquote>\n</li>\n<li><p>j(j &gt;= k): </p>\n<blockquote>\n<p> =  * </p>\n</blockquote>\n<p> : </p>\n<blockquote>\n<p>k/j * j/(j+1)  (n-1)/n = k/n</p>\n</blockquote>\n<p> </p>\n</li>\n</ol>\n<ul>\n<li>Leetcode 382 </li>\n</ul>\n<blockquote>\n<p><strong>382</strong>. Linked List Random Node<br>Total Accepted: 20928<br>Total Submissions: 45158<br>Difficulty: Medium<br>Contributors: Admin<br>Given a singly linked list, return a random nodes value from the linked list. Each node must have the same probability of being chosen.</p>\n</blockquote>\n<blockquote>\n<p>Follow up:<br>What if the linked list is extremely large and its length is unknown to you? Could you solve this efficiently without using extra space?</p>\n</blockquote>\n<p><strong>Example:</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Init a singly linked list [1,2,3].</span><br><span class=\"line\">ListNode head = new ListNode(1);</span><br><span class=\"line\">head.next = new ListNode(2);</span><br><span class=\"line\">head.next.next = new ListNode(3);</span><br><span class=\"line\">Solution solution = new Solution(head);</span><br><span class=\"line\"></span><br><span class=\"line\">// getRandom() should return either 1, 2, or 3 randomly. Each element should have equal probability of returning.</span><br><span class=\"line\">solution.getRandom();</span><br></pre></td></tr></table></figure>\n<p>1,Python</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, head)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        @param head The linked list's head.</span></span><br><span class=\"line\"><span class=\"string\">        Note that the head is guaranteed to be not null, so it contains at least one node.</span></span><br><span class=\"line\"><span class=\"string\">        :type head: ListNode</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        self.head = head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getRandom</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        Returns a random node's value.</span></span><br><span class=\"line\"><span class=\"string\">        :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        i = <span class=\"number\">1</span></span><br><span class=\"line\">        head = self.head</span><br><span class=\"line\">        <span class=\"keyword\">while</span> head != <span class=\"literal\">None</span>:</span><br><span class=\"line\">            M = random.randrange(<span class=\"number\">0</span>, i)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> M == <span class=\"number\">0</span>:</span><br><span class=\"line\">                k = head.val</span><br><span class=\"line\">            head = head.next</span><br><span class=\"line\">            i += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> k</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>What if the linked list is extremely large</p>\n</blockquote>\n<p>, 100, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, head)</span>:</span></span><br><span class=\"line\">        self.head = head</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getRandom</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        node = self.head</span><br><span class=\"line\">        before = <span class=\"number\">0</span></span><br><span class=\"line\">        buffer = [<span class=\"literal\">None</span>] * <span class=\"number\">100</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> node:</span><br><span class=\"line\">            now = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> node <span class=\"keyword\">and</span> now &lt; <span class=\"number\">100</span>:</span><br><span class=\"line\">                buffer[now] = node</span><br><span class=\"line\">                node = node.next</span><br><span class=\"line\">                now += <span class=\"number\">1</span></span><br><span class=\"line\">            r = random.randrange(now + before)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r &lt; now:</span><br><span class=\"line\">                pick = buffer[r]</span><br><span class=\"line\">            before += now</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pick.val</span><br></pre></td></tr></table></figure>\n<p>AC 50% , orz, ==</p>\n"},{"title":"Python/","date":"2017-02-24T08:33:08.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n\nLeetCode 421. Maximum XOR of Two Numbers in an Array:  \n**\n> Given a non-empty array of numbers, a0, a1, a2,  , an-1, where 0  ai < 231.\n\n> Find the maximum result of ai XOR aj, where 0  i, j < n.\n\n> Could you do this in O(n) runtime?\n\n> Example:\n\n> Input: [3, 10, 5, 25, 2, 8]\n\n> Output: 28\n\n> Explanation: The maximum result is 5 ^ 25 = 28.\n\n**do this in O(n) runtime** O(n^2)\n\n\n\n\n\n> 827maxor8\n\n8701 1****\n \n> maxornew =maxor << 1+ 1;\n\n2maxornewO(n^2)\n\n\n>  x ^ y = z , x ^ z = y , y ^ z = x\n\n maxornew(maxor<<1) ,O(n)\n\nnumbersList[int], LeetCode 32int\n\nnumbersn(1<=n<=32)\n\n```python\ndef findMaximumXOR(self, nums):\n    answer = 0\n    for i in range(32)[::-1]:\n        answer <<= 1\n        prefixes = {num >> i for num in nums}\n        answer += any(answer^1 ^ p in prefixes for p in prefixes)\n        #print bin(answer)[2:]\n    return answer\n```\nO(n^2)O(n)\n\n============================================================================\n\nLeetCode 137. Single Number II\n\n> Given an array of integers, every element appears three times except for one, which appears exactly once. Find that single one.\n\n> Note:\n> Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory? \n\n\nO(n),O(n)\n\n```python\ndef singleNumber(self, nums):\n    \"\"\"\n    :type nums: List[int]\n    :rtype: int\n    \"\"\"\n    numdict = {}\n    for i in nums:\n        if i in numdict:\n            numdict[i]+=1\n        else:\n            numdict[i]=1\n    for i in nums:\n        if numdict[i]==1:\n            return i\n```\n\n\nO(1), \n1. 322\n2. 3\n3. \n4. Python'-'\n\n\n```python\nclass Solution(object):\n    def singleNumber(self, nums):\n        \"\"\"\n        :type nums: List[int]\n        :rtype: int\n        \"\"\"\n        sumlist = [0]*32\n        summary, negcnt = 0, 0\n        for i in nums:\n            negcnt += i < 0\n            i = abs(i)\n            bitwise = format(i, '032b')\n            for j in xrange(32):\n                sumlist[j] += int(bitwise[j])\n        for i in xrange(32):\n            summary += 2**(31-i)*(sumlist[i]%3)\n        return summary*[1,-1][negcnt%3]\n```\n\n O(1)\n\n2n 32nO(n),\n\n\n  x  ~","source":"_posts/bitwise-operation-in-leetcode.md","raw":"title: Python/\ndate: 2017-02-24 16:33:08\ntags:\n- Python\n- Bitwise Operation\ncategories:\n- Leetcode\t\nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/leetcode_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n\nLeetCode 421. Maximum XOR of Two Numbers in an Array:  \n**\n> Given a non-empty array of numbers, a0, a1, a2,  , an-1, where 0  ai < 231.\n\n> Find the maximum result of ai XOR aj, where 0  i, j < n.\n\n> Could you do this in O(n) runtime?\n\n> Example:\n\n> Input: [3, 10, 5, 25, 2, 8]\n\n> Output: 28\n\n> Explanation: The maximum result is 5 ^ 25 = 28.\n\n**do this in O(n) runtime** O(n^2)\n\n\n\n\n\n> 827maxor8\n\n8701 1****\n \n> maxornew =maxor << 1+ 1;\n\n2maxornewO(n^2)\n\n\n>  x ^ y = z , x ^ z = y , y ^ z = x\n\n maxornew(maxor<<1) ,O(n)\n\nnumbersList[int], LeetCode 32int\n\nnumbersn(1<=n<=32)\n\n```python\ndef findMaximumXOR(self, nums):\n    answer = 0\n    for i in range(32)[::-1]:\n        answer <<= 1\n        prefixes = {num >> i for num in nums}\n        answer += any(answer^1 ^ p in prefixes for p in prefixes)\n        #print bin(answer)[2:]\n    return answer\n```\nO(n^2)O(n)\n\n============================================================================\n\nLeetCode 137. Single Number II\n\n> Given an array of integers, every element appears three times except for one, which appears exactly once. Find that single one.\n\n> Note:\n> Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory? \n\n\nO(n),O(n)\n\n```python\ndef singleNumber(self, nums):\n    \"\"\"\n    :type nums: List[int]\n    :rtype: int\n    \"\"\"\n    numdict = {}\n    for i in nums:\n        if i in numdict:\n            numdict[i]+=1\n        else:\n            numdict[i]=1\n    for i in nums:\n        if numdict[i]==1:\n            return i\n```\n\n\nO(1), \n1. 322\n2. 3\n3. \n4. Python'-'\n\n\n```python\nclass Solution(object):\n    def singleNumber(self, nums):\n        \"\"\"\n        :type nums: List[int]\n        :rtype: int\n        \"\"\"\n        sumlist = [0]*32\n        summary, negcnt = 0, 0\n        for i in nums:\n            negcnt += i < 0\n            i = abs(i)\n            bitwise = format(i, '032b')\n            for j in xrange(32):\n                sumlist[j] += int(bitwise[j])\n        for i in xrange(32):\n            summary += 2**(31-i)*(sumlist[i]%3)\n        return summary*[1,-1][negcnt%3]\n```\n\n O(1)\n\n2n 32nO(n),\n\n\n  x  ~","slug":"bitwise-operation-in-leetcode","published":1,"updated":"2019-04-25T01:27:25.274Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69o0007dhyfajnhyloi","content":"<p><br>LeetCode 421. Maximum XOR of Two Numbers in an Array:<br>**</p>\n<blockquote>\n<p>Given a non-empty array of numbers, a0, a1, a2,  , an-1, where 0  ai &lt; 231.</p>\n</blockquote>\n<blockquote>\n<p>Find the maximum result of ai XOR aj, where 0  i, j &lt; n.</p>\n</blockquote>\n<blockquote>\n<p>Could you do this in O(n) runtime?</p>\n</blockquote>\n<blockquote>\n<p>Example:</p>\n</blockquote>\n<blockquote>\n<p>Input: [3, 10, 5, 25, 2, 8]</p>\n</blockquote>\n<blockquote>\n<p>Output: 28</p>\n</blockquote>\n<blockquote>\n<p>Explanation: The maximum result is 5 ^ 25 = 28.</p>\n</blockquote>\n<p><strong>do this in O(n) runtime</strong> O(n^2)</p>\n<p></p>\n<p></p>\n<blockquote>\n<p>827maxor8</p>\n</blockquote>\n<p>8701 1<strong></strong></p>\n<blockquote>\n<p>maxornew =maxor &lt;&lt; 1+ 1;</p>\n</blockquote>\n<p>2maxornewO(n^2)<br></p>\n<blockquote>\n<p> x ^ y = z , x ^ z = y , y ^ z = x</p>\n</blockquote>\n<p> maxornew(maxor&lt;&lt;1) ,O(n)</p>\n<p>numbersList[int], LeetCode 32int</p>\n<p>numbersn(1&lt;=n&lt;=32)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">findMaximumXOR</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    answer = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">32</span>)[::<span class=\"number\">-1</span>]:</span><br><span class=\"line\">        answer &lt;&lt;= <span class=\"number\">1</span></span><br><span class=\"line\">        prefixes = &#123;num &gt;&gt; i <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums&#125;</span><br><span class=\"line\">        answer += any(answer^<span class=\"number\">1</span> ^ p <span class=\"keyword\">in</span> prefixes <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> prefixes)</span><br><span class=\"line\">        <span class=\"comment\">#print bin(answer)[2:]</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> answer</span><br></pre></td></tr></table></figure>\n<p>O(n^2)O(n)</p>\n<p>============================================================================</p>\n<p>LeetCode 137. Single Number II</p>\n<blockquote>\n<p>Given an array of integers, every element appears three times except for one, which appears exactly once. Find that single one.</p>\n</blockquote>\n<blockquote>\n<p>Note:<br>Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory? </p>\n</blockquote>\n<p><br>O(n),O(n)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">singleNumber</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    numdict = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> i <span class=\"keyword\">in</span> numdict:</span><br><span class=\"line\">            numdict[i]+=<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            numdict[i]=<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> numdict[i]==<span class=\"number\">1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> i</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>O(1), </p>\n<ol>\n<li>322</li>\n<li>3</li>\n<li></li>\n<li>Python-<br></li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">singleNumber</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">        :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        sumlist = [<span class=\"number\">0</span>]*<span class=\"number\">32</span></span><br><span class=\"line\">        summary, negcnt = <span class=\"number\">0</span>, <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">            negcnt += i &lt; <span class=\"number\">0</span></span><br><span class=\"line\">            i = abs(i)</span><br><span class=\"line\">            bitwise = format(i, <span class=\"string\">'032b'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> xrange(<span class=\"number\">32</span>):</span><br><span class=\"line\">                sumlist[j] += int(bitwise[j])</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> xrange(<span class=\"number\">32</span>):</span><br><span class=\"line\">            summary += <span class=\"number\">2</span>**(<span class=\"number\">31</span>-i)*(sumlist[i]%<span class=\"number\">3</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> summary*[<span class=\"number\">1</span>,<span class=\"number\">-1</span>][negcnt%<span class=\"number\">3</span>]</span><br></pre></td></tr></table></figure>\n<p> O(1)</p>\n<p>2n 32nO(n),</p>\n<p>  x  ~</p>\n","site":{"data":{}},"excerpt":"","more":"<p><br>LeetCode 421. Maximum XOR of Two Numbers in an Array:<br>**</p>\n<blockquote>\n<p>Given a non-empty array of numbers, a0, a1, a2,  , an-1, where 0  ai &lt; 231.</p>\n</blockquote>\n<blockquote>\n<p>Find the maximum result of ai XOR aj, where 0  i, j &lt; n.</p>\n</blockquote>\n<blockquote>\n<p>Could you do this in O(n) runtime?</p>\n</blockquote>\n<blockquote>\n<p>Example:</p>\n</blockquote>\n<blockquote>\n<p>Input: [3, 10, 5, 25, 2, 8]</p>\n</blockquote>\n<blockquote>\n<p>Output: 28</p>\n</blockquote>\n<blockquote>\n<p>Explanation: The maximum result is 5 ^ 25 = 28.</p>\n</blockquote>\n<p><strong>do this in O(n) runtime</strong> O(n^2)</p>\n<p></p>\n<p></p>\n<blockquote>\n<p>827maxor8</p>\n</blockquote>\n<p>8701 1<strong></strong></p>\n<blockquote>\n<p>maxornew =maxor &lt;&lt; 1+ 1;</p>\n</blockquote>\n<p>2maxornewO(n^2)<br></p>\n<blockquote>\n<p> x ^ y = z , x ^ z = y , y ^ z = x</p>\n</blockquote>\n<p> maxornew(maxor&lt;&lt;1) ,O(n)</p>\n<p>numbersList[int], LeetCode 32int</p>\n<p>numbersn(1&lt;=n&lt;=32)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">findMaximumXOR</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    answer = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">32</span>)[::<span class=\"number\">-1</span>]:</span><br><span class=\"line\">        answer &lt;&lt;= <span class=\"number\">1</span></span><br><span class=\"line\">        prefixes = &#123;num &gt;&gt; i <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> nums&#125;</span><br><span class=\"line\">        answer += any(answer^<span class=\"number\">1</span> ^ p <span class=\"keyword\">in</span> prefixes <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> prefixes)</span><br><span class=\"line\">        <span class=\"comment\">#print bin(answer)[2:]</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> answer</span><br></pre></td></tr></table></figure>\n<p>O(n^2)O(n)</p>\n<p>============================================================================</p>\n<p>LeetCode 137. Single Number II</p>\n<blockquote>\n<p>Given an array of integers, every element appears three times except for one, which appears exactly once. Find that single one.</p>\n</blockquote>\n<blockquote>\n<p>Note:<br>Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory? </p>\n</blockquote>\n<p><br>O(n),O(n)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">singleNumber</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">    :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    numdict = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> i <span class=\"keyword\">in</span> numdict:</span><br><span class=\"line\">            numdict[i]+=<span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            numdict[i]=<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> numdict[i]==<span class=\"number\">1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> i</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>O(1), </p>\n<ol>\n<li>322</li>\n<li>3</li>\n<li></li>\n<li>Python-<br></li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">singleNumber</span><span class=\"params\">(self, nums)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        :type nums: List[int]</span></span><br><span class=\"line\"><span class=\"string\">        :rtype: int</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        sumlist = [<span class=\"number\">0</span>]*<span class=\"number\">32</span></span><br><span class=\"line\">        summary, negcnt = <span class=\"number\">0</span>, <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> nums:</span><br><span class=\"line\">            negcnt += i &lt; <span class=\"number\">0</span></span><br><span class=\"line\">            i = abs(i)</span><br><span class=\"line\">            bitwise = format(i, <span class=\"string\">'032b'</span>)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> xrange(<span class=\"number\">32</span>):</span><br><span class=\"line\">                sumlist[j] += int(bitwise[j])</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> xrange(<span class=\"number\">32</span>):</span><br><span class=\"line\">            summary += <span class=\"number\">2</span>**(<span class=\"number\">31</span>-i)*(sumlist[i]%<span class=\"number\">3</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> summary*[<span class=\"number\">1</span>,<span class=\"number\">-1</span>][negcnt%<span class=\"number\">3</span>]</span><br></pre></td></tr></table></figure>\n<p> O(1)</p>\n<p>2n 32nO(n),</p>\n<p>  x  ~</p>\n"},{"title":"Fluent Python  ","date":"2018-07-28T10:00:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 11. Interfaces From Protocols to ABCs\n### : \n\nABC\n\n\n\n#### Python \n\nPython Python\n\nPython : Python interface  ABC,()\n\n\n\n\n, \n\n\n#### Python\n\nPython Sequence\n\n![Figure-11-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.1.png?raw=true)\n\n\\_\\_iter\\_\\_\\_\\_contains\\_\\_ Python\\_\\_getitem\\_\\_ in\\_\\_getitem\\_\\_\n\n\n#### \n\n> \n> : \n\n\n\n  \n\n\n#### \n\n>  cls clsabc.ABCMeta, isinstance(obj, cls)\n- \n- instance(obj, cls)api\n-  ****\n- \n\n\n#### \n\n\\_\\_contains\\_\\_bisect\n\n#### \n\n##### collections.abc\nPython abccollections.abc abc.ABC\ncollections.abc16:\n\n![Figure-11-2](https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.2.png?raw=true)\n\n- IterableContainer  Sized\n    Iterable \\_\\_iter\\_\\_Container  \\_\\_contains\\_\\_  in Sized \\_\\_len\\_\\_  len() \n\n- SequenceMapping  Set\n\n\n- MappingView\n Python 3  .items().keys()  .values() ItemsView KeysView  ValuesView  Set  3.8.3 \n\n- Callable  Hashable\n collections.abc  collections.abc isinstance  callable()  hashable()  isinstance(my_obj, Hashable)\n\n- Iterator\n Iterable \n\n##### numbers\n\nnumbers:\n\n- Number\n- Complex\n- Real\n- Rational\n- Integral\n\n### \n\nPython()PythonPython\n\n> Python  Python .\n> \"\n\n\n\n","source":"_posts/fluent-python-11.md","raw":"title: Fluent Python  \ndate: 2018-07-28 18:00:00\ntags:\n- Python\n- duck typing\n- protocal\n- abstract basic class\n- ABC\n- fluent python\n- interfaces\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 11. Interfaces From Protocols to ABCs\n### : \n\nABC\n\n\n\n#### Python \n\nPython Python\n\nPython : Python interface  ABC,()\n\n\n\n\n, \n\n\n#### Python\n\nPython Sequence\n\n![Figure-11-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.1.png?raw=true)\n\n\\_\\_iter\\_\\_\\_\\_contains\\_\\_ Python\\_\\_getitem\\_\\_ in\\_\\_getitem\\_\\_\n\n\n#### \n\n> \n> : \n\n\n\n  \n\n\n#### \n\n>  cls clsabc.ABCMeta, isinstance(obj, cls)\n- \n- instance(obj, cls)api\n-  ****\n- \n\n\n#### \n\n\\_\\_contains\\_\\_bisect\n\n#### \n\n##### collections.abc\nPython abccollections.abc abc.ABC\ncollections.abc16:\n\n![Figure-11-2](https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.2.png?raw=true)\n\n- IterableContainer  Sized\n    Iterable \\_\\_iter\\_\\_Container  \\_\\_contains\\_\\_  in Sized \\_\\_len\\_\\_  len() \n\n- SequenceMapping  Set\n\n\n- MappingView\n Python 3  .items().keys()  .values() ItemsView KeysView  ValuesView  Set  3.8.3 \n\n- Callable  Hashable\n collections.abc  collections.abc isinstance  callable()  hashable()  isinstance(my_obj, Hashable)\n\n- Iterator\n Iterable \n\n##### numbers\n\nnumbers:\n\n- Number\n- Complex\n- Real\n- Rational\n- Integral\n\n### \n\nPython()PythonPython\n\n> Python  Python .\n> \"\n\n\n\n","slug":"fluent-python-11","published":1,"updated":"2019-04-25T01:27:24.979Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69p0008dhyft2llnkrx","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-11-Interfaces-From-Protocols-to-ABCs\"><a href=\"#Chapter-11-Interfaces-From-Protocols-to-ABCs\" class=\"headerlink\" title=\"Chapter 11. Interfaces From Protocols to ABCs\"></a>Chapter 11. Interfaces From Protocols to ABCs</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>ABC</p>\n<p></p>\n<h4 id=\"Python-\"><a href=\"#Python-\" class=\"headerlink\" title=\"Python \"></a>Python </h4><p>Python Python</p>\n<p>Python : Python interface  ABC,()</p>\n<p><br></p>\n<p>, </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Python Sequence</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.1.png?raw=true\" alt=\"Figure-11-1\"></p>\n<p>__iter____contains__ Python__getitem__ in__getitem__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p><br>: </p>\n</blockquote>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p> cls clsabc.ABCMeta, isinstance(obj, cls)</p>\n<ul>\n<li></li>\n<li>instance(obj, cls)api</li>\n<li> <strong></strong></li>\n<li></li>\n</ul>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>__contains__bisect</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"collections-abc\"><a href=\"#collections-abc\" class=\"headerlink\" title=\"collections.abc\"></a>collections.abc</h5><p>Python abccollections.abc abc.ABC<br>collections.abc16:</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.2.png?raw=true\" alt=\"Figure-11-2\"></p>\n<ul>\n<li><p>IterableContainer  Sized<br>  Iterable __iter__Container  __contains__  in Sized __len__  len() </p>\n</li>\n<li><p>SequenceMapping  Set<br></p>\n</li>\n<li><p>MappingView<br> Python 3  .items().keys()  .values() ItemsView KeysView  ValuesView  Set  3.8.3 </p>\n</li>\n<li><p>Callable  Hashable<br> collections.abc  collections.abc isinstance  callable()  hashable()  isinstance(my_obj, Hashable)</p>\n</li>\n<li><p>Iterator<br> Iterable </p>\n</li>\n</ul>\n<h5 id=\"numbers\"><a href=\"#numbers\" class=\"headerlink\" title=\"numbers\"></a>numbers</h5><p>numbers:</p>\n<ul>\n<li>Number</li>\n<li>Complex</li>\n<li>Real</li>\n<li>Rational</li>\n<li>Integral</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Python()PythonPython</p>\n<blockquote>\n<p>Python  Python .<br></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-11-Interfaces-From-Protocols-to-ABCs\"><a href=\"#Chapter-11-Interfaces-From-Protocols-to-ABCs\" class=\"headerlink\" title=\"Chapter 11. Interfaces From Protocols to ABCs\"></a>Chapter 11. Interfaces From Protocols to ABCs</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>ABC</p>\n<p></p>\n<h4 id=\"Python-\"><a href=\"#Python-\" class=\"headerlink\" title=\"Python \"></a>Python </h4><p>Python Python</p>\n<p>Python : Python interface  ABC,()</p>\n<p><br></p>\n<p>, </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Python Sequence</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.1.png?raw=true\" alt=\"Figure-11-1\"></p>\n<p>__iter____contains__ Python__getitem__ in__getitem__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p><br>: </p>\n</blockquote>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote>\n<p> cls clsabc.ABCMeta, isinstance(obj, cls)</p>\n<ul>\n<li></li>\n<li>instance(obj, cls)api</li>\n<li> <strong></strong></li>\n<li></li>\n</ul>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>__contains__bisect</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"collections-abc\"><a href=\"#collections-abc\" class=\"headerlink\" title=\"collections.abc\"></a>collections.abc</h5><p>Python abccollections.abc abc.ABC<br>collections.abc16:</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-11.2.png?raw=true\" alt=\"Figure-11-2\"></p>\n<ul>\n<li><p>IterableContainer  Sized<br>  Iterable __iter__Container  __contains__  in Sized __len__  len() </p>\n</li>\n<li><p>SequenceMapping  Set<br></p>\n</li>\n<li><p>MappingView<br> Python 3  .items().keys()  .values() ItemsView KeysView  ValuesView  Set  3.8.3 </p>\n</li>\n<li><p>Callable  Hashable<br> collections.abc  collections.abc isinstance  callable()  hashable()  isinstance(my_obj, Hashable)</p>\n</li>\n<li><p>Iterator<br> Iterable </p>\n</li>\n</ul>\n<h5 id=\"numbers\"><a href=\"#numbers\" class=\"headerlink\" title=\"numbers\"></a>numbers</h5><p>numbers:</p>\n<ul>\n<li>Number</li>\n<li>Complex</li>\n<li>Real</li>\n<li>Rational</li>\n<li>Integral</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Python()PythonPython</p>\n<blockquote>\n<p>Python  Python .<br></p>\n</blockquote>\n"},{"title":"Fluent Python  ","date":"2018-08-29T10:55:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 13. Operator Overloading: Doing It Right\n### : \n\nPython(),.,/[]\n\n:\n\n- Python\n- \n- \n- (==, > ,<=)\n- \n\n\n#### 13.1 \n\nPython \n\n- \n- \n- isandornot\n\n\n#### 13.2 \n\nPython3:\n\n- \\-  \\_\\_neg\\_\\_\n- \\+  \\_\\_pos\\_\\_\n- ~   \\_\\_invert\\_\\_\n\nPython abs(),  \\_\\_abs\\_\\_\n\nselfself \n\n \\-\\+ selfabs~ORMSQL WHERE\n\n#### 13.3  Vector\\+\nVector \n\n> \\+() \\*()\n\n()\n\n:\n\n-  \n- \n\n:\n\n```python\ndef __add__(self, other):\n    pairs = itertools.zip_longest(self, other, fillvalue=0.0)\n    return Vector(a+b for a,b in pairs)\n```\n\n**** \n\n Python   a\\+b\n\n- a\\_\\_add\\_\\_ NotImplemented, a.\\_\\_add\\_\\_(b)\n- \\_\\_add\\_\\_ \\_\\_add\\_\\_NotImplemented, b\\_\\_radd\\_\\_ NotImplementedb.\\_\\_radd\\_\\_(a)\n- b\\_\\_radd\\_\\_\\_\\_radd\\_\\_NotImplemented, TypeError, traceback \n\n:\n![Figure-13-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-13.1.png?raw=true)\n\n> NotImplementedNotImplementedError **return****raise**\n>\n> NotImplemented ErrorNotImplemented Python\n\n#### 13.4 \\*\n\n(scalar product) :\n-    \b\b\b****\n-  ****\n\nNumPy*  numpy.dot()\n\n Vector \\_\\_mul\\_\\_\\_\\_rmul\\_\\_\n\n```python\ndef __mul__(self, scalar):\n    return Vector(n * scalar for n in self)\ndef __rmul__(self, scalar):\n    return self * scalar \n```\n\n> Python 3.5 @ \\_\\_matmul\\_\\_\n\n#### 13.5 \n\nPython \n\n-  ==  \\_\\_eq\\_\\_  \\_\\_gt\\_\\_  \\_\\_lt\\_\\_ \n-  ==  != Python  IDTypeError\n\n> Python3  \\_\\_ne\\_\\_ \\_\\_eq\\_\\_  TypeErrorID\n\n#### 13.6 \n\n> \n>  \n\na += b  a = a + b \\_\\_add\\_\\_ += \n \\_\\_iadd\\_\\_ a += b \n\n\n#### 13.7 \n\nPython \n\n\n\n\n","source":"_posts/fluent-python-13.md","raw":"title: Fluent Python  \ndate: 2018-08-29 18:55:00\ntags:\n- Operator Overloading\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 13. Operator Overloading: Doing It Right\n### : \n\nPython(),.,/[]\n\n:\n\n- Python\n- \n- \n- (==, > ,<=)\n- \n\n\n#### 13.1 \n\nPython \n\n- \n- \n- isandornot\n\n\n#### 13.2 \n\nPython3:\n\n- \\-  \\_\\_neg\\_\\_\n- \\+  \\_\\_pos\\_\\_\n- ~   \\_\\_invert\\_\\_\n\nPython abs(),  \\_\\_abs\\_\\_\n\nselfself \n\n \\-\\+ selfabs~ORMSQL WHERE\n\n#### 13.3  Vector\\+\nVector \n\n> \\+() \\*()\n\n()\n\n:\n\n-  \n- \n\n:\n\n```python\ndef __add__(self, other):\n    pairs = itertools.zip_longest(self, other, fillvalue=0.0)\n    return Vector(a+b for a,b in pairs)\n```\n\n**** \n\n Python   a\\+b\n\n- a\\_\\_add\\_\\_ NotImplemented, a.\\_\\_add\\_\\_(b)\n- \\_\\_add\\_\\_ \\_\\_add\\_\\_NotImplemented, b\\_\\_radd\\_\\_ NotImplementedb.\\_\\_radd\\_\\_(a)\n- b\\_\\_radd\\_\\_\\_\\_radd\\_\\_NotImplemented, TypeError, traceback \n\n:\n![Figure-13-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-13.1.png?raw=true)\n\n> NotImplementedNotImplementedError **return****raise**\n>\n> NotImplemented ErrorNotImplemented Python\n\n#### 13.4 \\*\n\n(scalar product) :\n-    \b\b\b****\n-  ****\n\nNumPy*  numpy.dot()\n\n Vector \\_\\_mul\\_\\_\\_\\_rmul\\_\\_\n\n```python\ndef __mul__(self, scalar):\n    return Vector(n * scalar for n in self)\ndef __rmul__(self, scalar):\n    return self * scalar \n```\n\n> Python 3.5 @ \\_\\_matmul\\_\\_\n\n#### 13.5 \n\nPython \n\n-  ==  \\_\\_eq\\_\\_  \\_\\_gt\\_\\_  \\_\\_lt\\_\\_ \n-  ==  != Python  IDTypeError\n\n> Python3  \\_\\_ne\\_\\_ \\_\\_eq\\_\\_  TypeErrorID\n\n#### 13.6 \n\n> \n>  \n\na += b  a = a + b \\_\\_add\\_\\_ += \n \\_\\_iadd\\_\\_ a += b \n\n\n#### 13.7 \n\nPython \n\n\n\n\n","slug":"fluent-python-13","published":1,"updated":"2019-04-25T01:27:24.933Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69s000bdhyf5yttrd5a","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-13-Operator-Overloading-Doing-It-Right\"><a href=\"#Chapter-13-Operator-Overloading-Doing-It-Right\" class=\"headerlink\" title=\"Chapter 13. Operator Overloading: Doing It Right\"></a>Chapter 13. Operator Overloading: Doing It Right</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>Python(),.,/[]</p>\n<p>:</p>\n<ul>\n<li>Python</li>\n<li></li>\n<li></li>\n<li>(==, &gt; ,&lt;=)</li>\n<li></li>\n</ul>\n<h4 id=\"13-1-\"><a href=\"#13-1-\" class=\"headerlink\" title=\"13.1 \"></a>13.1 </h4><p>Python </p>\n<ul>\n<li></li>\n<li></li>\n<li>isandornot</li>\n</ul>\n<h4 id=\"13-2-\"><a href=\"#13-2-\" class=\"headerlink\" title=\"13.2 \"></a>13.2 </h4><p>Python3:</p>\n<ul>\n<li>-  __neg__</li>\n<li>+  __pos__</li>\n<li>~   __invert__</li>\n</ul>\n<p>Python abs(),  __abs__</p>\n<p>selfself </p>\n<p> -+ selfabs~ORMSQL WHERE</p>\n<h4 id=\"13-3-Vector\"><a href=\"#13-3-Vector\" class=\"headerlink\" title=\"13.3  Vector+\"></a>13.3  Vector+</h4><p>Vector </p>\n<blockquote>\n<p>+() *()</p>\n</blockquote>\n<p>()</p>\n<p>:</p>\n<ul>\n<li> </li>\n<li></li>\n</ul>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__add__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    pairs = itertools.zip_longest(self, other, fillvalue=<span class=\"number\">0.0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Vector(a+b <span class=\"keyword\">for</span> a,b <span class=\"keyword\">in</span> pairs)</span><br></pre></td></tr></table></figure>\n<p><strong></strong> </p>\n<p> Python   a+b</p>\n<ul>\n<li>a__add__ NotImplemented, a.__add__(b)</li>\n<li>__add__ __add__NotImplemented, b__radd__ NotImplementedb.__radd__(a)</li>\n<li>b__radd____radd__NotImplemented, TypeError, traceback </li>\n</ul>\n<p>:<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-13.1.png?raw=true\" alt=\"Figure-13-1\"></p>\n<blockquote>\n<p>NotImplementedNotImplementedError <strong>return</strong><strong>raise</strong></p>\n<p>NotImplemented ErrorNotImplemented Python</p>\n</blockquote>\n<h4 id=\"13-4-\"><a href=\"#13-4-\" class=\"headerlink\" title=\"13.4 *\"></a>13.4 *</h4><p>(scalar product) :</p>\n<ul>\n<li>  \b\b\b<strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p>NumPy*  numpy.dot()</p>\n<p> Vector __mul____rmul__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__mul__</span><span class=\"params\">(self, scalar)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Vector(n * scalar <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> self)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__rmul__</span><span class=\"params\">(self, scalar)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self * scalar</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Python 3.5 @ __matmul__</p>\n</blockquote>\n<h4 id=\"13-5-\"><a href=\"#13-5-\" class=\"headerlink\" title=\"13.5 \"></a>13.5 </h4><p>Python </p>\n<ul>\n<li> ==  __eq__  __gt__  __lt__ </li>\n<li> ==  != Python  IDTypeError</li>\n</ul>\n<blockquote>\n<p>Python3  __ne__ __eq__  TypeErrorID</p>\n</blockquote>\n<h4 id=\"13-6-\"><a href=\"#13-6-\" class=\"headerlink\" title=\"13.6 \"></a>13.6 </h4><blockquote>\n<p><br> </p>\n</blockquote>\n<p>a += b  a = a + b __add__ += <br> __iadd__ a += b </p>\n<h4 id=\"13-7-\"><a href=\"#13-7-\" class=\"headerlink\" title=\"13.7 \"></a>13.7 </h4><p>Python </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-13-Operator-Overloading-Doing-It-Right\"><a href=\"#Chapter-13-Operator-Overloading-Doing-It-Right\" class=\"headerlink\" title=\"Chapter 13. Operator Overloading: Doing It Right\"></a>Chapter 13. Operator Overloading: Doing It Right</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>Python(),.,/[]</p>\n<p>:</p>\n<ul>\n<li>Python</li>\n<li></li>\n<li></li>\n<li>(==, &gt; ,&lt;=)</li>\n<li></li>\n</ul>\n<h4 id=\"13-1-\"><a href=\"#13-1-\" class=\"headerlink\" title=\"13.1 \"></a>13.1 </h4><p>Python </p>\n<ul>\n<li></li>\n<li></li>\n<li>isandornot</li>\n</ul>\n<h4 id=\"13-2-\"><a href=\"#13-2-\" class=\"headerlink\" title=\"13.2 \"></a>13.2 </h4><p>Python3:</p>\n<ul>\n<li>-  __neg__</li>\n<li>+  __pos__</li>\n<li>~   __invert__</li>\n</ul>\n<p>Python abs(),  __abs__</p>\n<p>selfself </p>\n<p> -+ selfabs~ORMSQL WHERE</p>\n<h4 id=\"13-3-Vector\"><a href=\"#13-3-Vector\" class=\"headerlink\" title=\"13.3  Vector+\"></a>13.3  Vector+</h4><p>Vector </p>\n<blockquote>\n<p>+() *()</p>\n</blockquote>\n<p>()</p>\n<p>:</p>\n<ul>\n<li> </li>\n<li></li>\n</ul>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__add__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    pairs = itertools.zip_longest(self, other, fillvalue=<span class=\"number\">0.0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Vector(a+b <span class=\"keyword\">for</span> a,b <span class=\"keyword\">in</span> pairs)</span><br></pre></td></tr></table></figure>\n<p><strong></strong> </p>\n<p> Python   a+b</p>\n<ul>\n<li>a__add__ NotImplemented, a.__add__(b)</li>\n<li>__add__ __add__NotImplemented, b__radd__ NotImplementedb.__radd__(a)</li>\n<li>b__radd____radd__NotImplemented, TypeError, traceback </li>\n</ul>\n<p>:<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-13.1.png?raw=true\" alt=\"Figure-13-1\"></p>\n<blockquote>\n<p>NotImplementedNotImplementedError <strong>return</strong><strong>raise</strong></p>\n<p>NotImplemented ErrorNotImplemented Python</p>\n</blockquote>\n<h4 id=\"13-4-\"><a href=\"#13-4-\" class=\"headerlink\" title=\"13.4 *\"></a>13.4 *</h4><p>(scalar product) :</p>\n<ul>\n<li>  \b\b\b<strong></strong></li>\n<li><strong></strong></li>\n</ul>\n<p>NumPy*  numpy.dot()</p>\n<p> Vector __mul____rmul__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__mul__</span><span class=\"params\">(self, scalar)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Vector(n * scalar <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> self)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__rmul__</span><span class=\"params\">(self, scalar)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self * scalar</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Python 3.5 @ __matmul__</p>\n</blockquote>\n<h4 id=\"13-5-\"><a href=\"#13-5-\" class=\"headerlink\" title=\"13.5 \"></a>13.5 </h4><p>Python </p>\n<ul>\n<li> ==  __eq__  __gt__  __lt__ </li>\n<li> ==  != Python  IDTypeError</li>\n</ul>\n<blockquote>\n<p>Python3  __ne__ __eq__  TypeErrorID</p>\n</blockquote>\n<h4 id=\"13-6-\"><a href=\"#13-6-\" class=\"headerlink\" title=\"13.6 \"></a>13.6 </h4><blockquote>\n<p><br> </p>\n</blockquote>\n<p>a += b  a = a + b __add__ += <br> __iadd__ a += b </p>\n<h4 id=\"13-7-\"><a href=\"#13-7-\" class=\"headerlink\" title=\"13.7 \"></a>13.7 </h4><p>Python </p>\n"},{"title":"fluent python ","date":"2017-11-11T03:17:43.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 2. An Array of Sequences ###\n###  ###\n\n* **Python**\n\t(/)\n\t-   \n\t\tlist, tuple, collections.deque.()\n\t-   \n\t\tstr, bytes, bytearray, memoryview, array.array.\n\t\n\t-   \n\t\tlist, bytearray, array.array, collections.deque, memoryview\n\t- \n\t\ttuple, str, and bytes\n\t\n\t![Figure-2-1](https://raw.githubusercontent.com/aldslvda/fluent-python/master/2.An%20Array%20of%20Sequences/figure_2.1.png)\n\tcollections.abc(abc abstract base classes)\n\tMutableSequenceSequence()\n\t\n* ****  \n\t**1.**    \n\t\n\t- Python   \n\t\n\t```python   \n\tlisti = [i**2 for i in xrange(10)]\n\t```\n\t\n\t- Python2Python3\n\t- map/filter   \n\t\n\t```python\n\tsymbols = '$'\n\tbeyond_ascii = [ord(s) for s in symbols if ord(s) > 127]\n\tbeyond_ascii = list(filter(lambda c: c > 127, map(ord, symbols)))\t\n\t```  \n\t-    \n\t\n\t```python\n\tcolors = ['black', 'white']\n\tsizes = ['S', 'M', 'L']\n\ttshirts = [(color, size) for color in colors for size in sizes]\t\n\t```\n\t**2.** \n\t\n\t- \n\t- array:\n\t\n\t```python\n\tarray.array('I', (ord(symbol) for symbol in symbols))\n  \tarray('I', [36, 162, 163, 165, 8364, 164]) \n\t\n\t```\n  \t- ,  for , for\n  \t\n  \t**3.(tuple)**    \n  \t,    \n  \t\n  \t- for unpacking   \n  \t   1.      \n  \t   2. \n  \t   3. * \n  \t   4.    \n  \t_ *   \n  \t\n  \t  \n  \t```python\n  \tt = (20, 8)\n  \tquotient, remainder = divmod(*t)\n  \t\n  \t```\t\n  **4.namedtuple**   \n  collections.namedtuple \n  \t\n  \n  -    \n  \n  ```python\n  from collections import namedtuple\n  City = namedtuple('City', 'name country population coordinates')\n  tokyo = City('Tokyo', 'JP', 36.933, (35.689722, 139.691667))\n  \n  ```\n  \n  **5.**\n  Python   \n  \n  - :   \n    s[start:end:step] start:end:step []   \n    s.\\_\\_getitem\\_\\_(slice(start,end,step))    \n    start:end:stepslice(start,end,step),\n    \n  - (...)numpy\n  - :  del \n  \n  **6. +\\***   \n  \n  -  a * n  a ,,\n  \n  \n  ```python\n  >>> s = [[1,1,1]]*3\n  >>> s\n[[1, 1, 1], [1, 1, 1], [1, 1, 1]]\n  >>> s[0][0] = 2\n  >>> s\n[[2, 1, 1], [2, 1, 1], [2, 1, 1]]\n  ``` \n  \n  - +=/\\*=:\n    \n    1. += \\_\\_iadd\\_\\_(), a+=ba\\_\\_iadd\\_\\_(),a,a = a+b ,a+ba   \n       *=__imul__()\n    2. \n    \n    ```python\n    >>> t = (1, 2, [30, 40])\n    >>> t[2] += [50, 60]\n    Traceback (most recent call last):\n  \tFile \"<stdin>\", line 1, in <module>\nTypeError: 'tuple' object does not support item assignment\n>>> t\n(1, 2, [30, 40, 50, 60])\n    ```   \n  **7. sortsorted**   \n  list.sortNone.   \n  sorted  \n  reverse() key()\n  \n  **8. bisect**   \n  bisect bisect  insort\t\n  bisect(haystack,needle)    \n  haystack.insert(index, needle)   \n  bisort(seq, num)\n  \n  **9. **\n  \n  - array:array.arraylist\n  - NumPy SciPy, collections.deque","source":"_posts/fluent-python-2.md","raw":"title: fluent python \ndate: 2017-11-11 11:17:43\ntags:\n- Python\n- sequence\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 2. An Array of Sequences ###\n###  ###\n\n* **Python**\n\t(/)\n\t-   \n\t\tlist, tuple, collections.deque.()\n\t-   \n\t\tstr, bytes, bytearray, memoryview, array.array.\n\t\n\t-   \n\t\tlist, bytearray, array.array, collections.deque, memoryview\n\t- \n\t\ttuple, str, and bytes\n\t\n\t![Figure-2-1](https://raw.githubusercontent.com/aldslvda/fluent-python/master/2.An%20Array%20of%20Sequences/figure_2.1.png)\n\tcollections.abc(abc abstract base classes)\n\tMutableSequenceSequence()\n\t\n* ****  \n\t**1.**    \n\t\n\t- Python   \n\t\n\t```python   \n\tlisti = [i**2 for i in xrange(10)]\n\t```\n\t\n\t- Python2Python3\n\t- map/filter   \n\t\n\t```python\n\tsymbols = '$'\n\tbeyond_ascii = [ord(s) for s in symbols if ord(s) > 127]\n\tbeyond_ascii = list(filter(lambda c: c > 127, map(ord, symbols)))\t\n\t```  \n\t-    \n\t\n\t```python\n\tcolors = ['black', 'white']\n\tsizes = ['S', 'M', 'L']\n\ttshirts = [(color, size) for color in colors for size in sizes]\t\n\t```\n\t**2.** \n\t\n\t- \n\t- array:\n\t\n\t```python\n\tarray.array('I', (ord(symbol) for symbol in symbols))\n  \tarray('I', [36, 162, 163, 165, 8364, 164]) \n\t\n\t```\n  \t- ,  for , for\n  \t\n  \t**3.(tuple)**    \n  \t,    \n  \t\n  \t- for unpacking   \n  \t   1.      \n  \t   2. \n  \t   3. * \n  \t   4.    \n  \t_ *   \n  \t\n  \t  \n  \t```python\n  \tt = (20, 8)\n  \tquotient, remainder = divmod(*t)\n  \t\n  \t```\t\n  **4.namedtuple**   \n  collections.namedtuple \n  \t\n  \n  -    \n  \n  ```python\n  from collections import namedtuple\n  City = namedtuple('City', 'name country population coordinates')\n  tokyo = City('Tokyo', 'JP', 36.933, (35.689722, 139.691667))\n  \n  ```\n  \n  **5.**\n  Python   \n  \n  - :   \n    s[start:end:step] start:end:step []   \n    s.\\_\\_getitem\\_\\_(slice(start,end,step))    \n    start:end:stepslice(start,end,step),\n    \n  - (...)numpy\n  - :  del \n  \n  **6. +\\***   \n  \n  -  a * n  a ,,\n  \n  \n  ```python\n  >>> s = [[1,1,1]]*3\n  >>> s\n[[1, 1, 1], [1, 1, 1], [1, 1, 1]]\n  >>> s[0][0] = 2\n  >>> s\n[[2, 1, 1], [2, 1, 1], [2, 1, 1]]\n  ``` \n  \n  - +=/\\*=:\n    \n    1. += \\_\\_iadd\\_\\_(), a+=ba\\_\\_iadd\\_\\_(),a,a = a+b ,a+ba   \n       *=__imul__()\n    2. \n    \n    ```python\n    >>> t = (1, 2, [30, 40])\n    >>> t[2] += [50, 60]\n    Traceback (most recent call last):\n  \tFile \"<stdin>\", line 1, in <module>\nTypeError: 'tuple' object does not support item assignment\n>>> t\n(1, 2, [30, 40, 50, 60])\n    ```   \n  **7. sortsorted**   \n  list.sortNone.   \n  sorted  \n  reverse() key()\n  \n  **8. bisect**   \n  bisect bisect  insort\t\n  bisect(haystack,needle)    \n  haystack.insert(index, needle)   \n  bisort(seq, num)\n  \n  **9. **\n  \n  - array:array.arraylist\n  - NumPy SciPy, collections.deque","slug":"fluent-python-2","published":1,"updated":"2019-04-25T01:27:25.904Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69v000cdhyf1ky72dql","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-2-An-Array-of-Sequences\"><a href=\"#Chapter-2-An-Array-of-Sequences\" class=\"headerlink\" title=\"Chapter 2. An Array of Sequences\"></a>Chapter 2. An Array of Sequences</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p><strong>Python</strong><br>  (/)</p>\n<ul>\n<li><br>  list, tuple, collections.deque.()</li>\n<li><br>  str, bytes, bytearray, memoryview, array.array.<br></li>\n<li><br>  list, bytearray, array.array, collections.deque, memoryview</li>\n<li><br>  tuple, str, and bytes<br><br><img src=\"https://raw.githubusercontent.com/aldslvda/fluent-python/master/2.An%20Array%20of%20Sequences/figure_2.1.png\" alt=\"Figure-2-1\"><br>collections.abc(abc abstract base classes)<br>MutableSequenceSequence()</li>\n</ul>\n</li>\n<li><p><strong></strong><br>  <strong>1.</strong>    </p>\n<ul>\n<li><p>Python   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listi = [i**<span class=\"number\">2</span> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> xrange(<span class=\"number\">10</span>)]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code>- Python2Python3\n- map/filter   \n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">symbols = <span class=\"string\">'$'</span></span><br><span class=\"line\">beyond_ascii = [ord(s) <span class=\"keyword\">for</span> s <span class=\"keyword\">in</span> symbols <span class=\"keyword\">if</span> ord(s) &gt; <span class=\"number\">127</span>]</span><br><span class=\"line\">beyond_ascii = list(filter(<span class=\"keyword\">lambda</span> c: c &gt; <span class=\"number\">127</span>, map(ord, symbols)))\t</span><br><span class=\"line\">```  </span><br><span class=\"line\">-    </span><br><span class=\"line\"></span><br><span class=\"line\">```python</span><br><span class=\"line\">colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'white'</span>]</span><br><span class=\"line\">sizes = [<span class=\"string\">'S'</span>, <span class=\"string\">'M'</span>, <span class=\"string\">'L'</span>]</span><br><span class=\"line\">tshirts = [(color, size) <span class=\"keyword\">for</span> color <span class=\"keyword\">in</span> colors <span class=\"keyword\">for</span> size <span class=\"keyword\">in</span> sizes]</span><br></pre></td></tr></table></figure>\n\n**2.** \n\n- \n- array:\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.array(<span class=\"string\">'I'</span>, (ord(symbol) <span class=\"keyword\">for</span> symbol <span class=\"keyword\">in</span> symbols))</span><br><span class=\"line\"> \tarray(<span class=\"string\">'I'</span>, [<span class=\"number\">36</span>, <span class=\"number\">162</span>, <span class=\"number\">163</span>, <span class=\"number\">165</span>, <span class=\"number\">8364</span>, <span class=\"number\">164</span>])</span><br></pre></td></tr></table></figure>\n\n  - ,  for , for\n\n  **3.(tuple)**    \n  ,    \n\n  - for unpacking   \n     1.      \n     2. \n     3. * \n     4.    \n  _ *   \n  \n\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \tt = (<span class=\"number\">20</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">  \tquotient, remainder = divmod(*t)</span><br><span class=\"line\">  \t</span><br><span class=\"line\">  \t```\t</span><br><span class=\"line\">  **<span class=\"number\">4.</span>namedtuple**   </span><br><span class=\"line\">  collections.namedtuple </span><br><span class=\"line\">  \t</span><br><span class=\"line\">  </span><br><span class=\"line\">  -    </span><br><span class=\"line\">  </span><br><span class=\"line\">  ```python</span><br><span class=\"line\">  <span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\">  City = namedtuple(<span class=\"string\">'City'</span>, <span class=\"string\">'name country population coordinates'</span>)</span><br><span class=\"line\">  tokyo = City(<span class=\"string\">'Tokyo'</span>, <span class=\"string\">'JP'</span>, <span class=\"number\">36.933</span>, (<span class=\"number\">35.689722</span>, <span class=\"number\">139.691667</span>))</span><br></pre></td></tr></table></figure>\n</code></pre><p>  <strong>5.</strong><br>  Python   </p>\n<ul>\n<li><p>:<br>s[start:end:step] start:end:step []<br>s.__getitem__(slice(start,end,step))<br>start:end:stepslice(start,end,step),</p>\n</li>\n<li><p>()numpy</p>\n</li>\n<li><p>:  del </p>\n<p><strong>6. +*</strong>   </p>\n</li>\n<li><p> a * n  a ,,<br></p>\n<pre><code class=\"python\"><span class=\"meta\">&gt;&gt;&gt; </span>s = [[<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>]]*<span class=\"number\">3</span>\n<span class=\"meta\">&gt;&gt;&gt; </span>s\n[[<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]]\n<span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">2</span>\n<span class=\"meta\">&gt;&gt;&gt; </span>s\n[[<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]]\n</code></pre>\n</li>\n<li><p>+=/*=:</p>\n<ol>\n<li>+= __iadd__(), a+=ba__iadd__(),a,a = a+b ,a+ba<br>*=<strong>imul</strong>()</li>\n<li></li>\n</ol>\n<pre><code class=\"python\"><span class=\"meta\">&gt;&gt;&gt; </span>t = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])\n<span class=\"meta\">&gt;&gt;&gt; </span>t[<span class=\"number\">2</span>] += [<span class=\"number\">50</span>, <span class=\"number\">60</span>]\nTraceback (most recent call last):\n  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;\nTypeError: <span class=\"string\">'tuple'</span> object does <span class=\"keyword\">not</span> support item assignment\n<span class=\"meta\">&gt;&gt;&gt; </span>t\n(<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>, <span class=\"number\">60</span>])\n</code></pre>\n<p><strong>7. sortsorted</strong><br>list.sortNone.<br>sorted<br>reverse() key()</p>\n<p><strong>8. bisect</strong><br>bisect bisect  insort<br>bisect(haystack,needle)<br>haystack.insert(index, needle)<br>bisort(seq, num)</p>\n<p><strong>9. </strong></p>\n</li>\n<li><p>array:array.arraylist</p>\n</li>\n<li>NumPy SciPy, collections.deque</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-2-An-Array-of-Sequences\"><a href=\"#Chapter-2-An-Array-of-Sequences\" class=\"headerlink\" title=\"Chapter 2. An Array of Sequences\"></a>Chapter 2. An Array of Sequences</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p><strong>Python</strong><br>  (/)</p>\n<ul>\n<li><br>  list, tuple, collections.deque.()</li>\n<li><br>  str, bytes, bytearray, memoryview, array.array.<br></li>\n<li><br>  list, bytearray, array.array, collections.deque, memoryview</li>\n<li><br>  tuple, str, and bytes<br><br><img src=\"https://raw.githubusercontent.com/aldslvda/fluent-python/master/2.An%20Array%20of%20Sequences/figure_2.1.png\" alt=\"Figure-2-1\"><br>collections.abc(abc abstract base classes)<br>MutableSequenceSequence()</li>\n</ul>\n</li>\n<li><p><strong></strong><br>  <strong>1.</strong>    </p>\n<ul>\n<li><p>Python   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listi = [i**<span class=\"number\">2</span> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> xrange(<span class=\"number\">10</span>)]</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<pre><code>- Python2Python3\n- map/filter   \n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">symbols = <span class=\"string\">'$'</span></span><br><span class=\"line\">beyond_ascii = [ord(s) <span class=\"keyword\">for</span> s <span class=\"keyword\">in</span> symbols <span class=\"keyword\">if</span> ord(s) &gt; <span class=\"number\">127</span>]</span><br><span class=\"line\">beyond_ascii = list(filter(<span class=\"keyword\">lambda</span> c: c &gt; <span class=\"number\">127</span>, map(ord, symbols)))\t</span><br><span class=\"line\">```  </span><br><span class=\"line\">-    </span><br><span class=\"line\"></span><br><span class=\"line\">```python</span><br><span class=\"line\">colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'white'</span>]</span><br><span class=\"line\">sizes = [<span class=\"string\">'S'</span>, <span class=\"string\">'M'</span>, <span class=\"string\">'L'</span>]</span><br><span class=\"line\">tshirts = [(color, size) <span class=\"keyword\">for</span> color <span class=\"keyword\">in</span> colors <span class=\"keyword\">for</span> size <span class=\"keyword\">in</span> sizes]</span><br></pre></td></tr></table></figure>\n\n**2.** \n\n- \n- array:\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.array(<span class=\"string\">'I'</span>, (ord(symbol) <span class=\"keyword\">for</span> symbol <span class=\"keyword\">in</span> symbols))</span><br><span class=\"line\"> \tarray(<span class=\"string\">'I'</span>, [<span class=\"number\">36</span>, <span class=\"number\">162</span>, <span class=\"number\">163</span>, <span class=\"number\">165</span>, <span class=\"number\">8364</span>, <span class=\"number\">164</span>])</span><br></pre></td></tr></table></figure>\n\n  - ,  for , for\n\n  **3.(tuple)**    \n  ,    \n\n  - for unpacking   \n     1.      \n     2. \n     3. * \n     4.    \n  _ *   \n  \n\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \tt = (<span class=\"number\">20</span>, <span class=\"number\">8</span>)</span><br><span class=\"line\">  \tquotient, remainder = divmod(*t)</span><br><span class=\"line\">  \t</span><br><span class=\"line\">  \t```\t</span><br><span class=\"line\">  **<span class=\"number\">4.</span>namedtuple**   </span><br><span class=\"line\">  collections.namedtuple </span><br><span class=\"line\">  \t</span><br><span class=\"line\">  </span><br><span class=\"line\">  -    </span><br><span class=\"line\">  </span><br><span class=\"line\">  ```python</span><br><span class=\"line\">  <span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\">  City = namedtuple(<span class=\"string\">'City'</span>, <span class=\"string\">'name country population coordinates'</span>)</span><br><span class=\"line\">  tokyo = City(<span class=\"string\">'Tokyo'</span>, <span class=\"string\">'JP'</span>, <span class=\"number\">36.933</span>, (<span class=\"number\">35.689722</span>, <span class=\"number\">139.691667</span>))</span><br></pre></td></tr></table></figure>\n</code></pre><p>  <strong>5.</strong><br>  Python   </p>\n<ul>\n<li><p>:<br>s[start:end:step] start:end:step []<br>s.__getitem__(slice(start,end,step))<br>start:end:stepslice(start,end,step),</p>\n</li>\n<li><p>()numpy</p>\n</li>\n<li><p>:  del </p>\n<p><strong>6. +*</strong>   </p>\n</li>\n<li><p> a * n  a ,,<br></p>\n<pre><code class=\"python\"><span class=\"meta\">&gt;&gt;&gt; </span>s = [[<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>]]*<span class=\"number\">3</span>\n<span class=\"meta\">&gt;&gt;&gt; </span>s\n[[<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]]\n<span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">2</span>\n<span class=\"meta\">&gt;&gt;&gt; </span>s\n[[<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>], [<span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]]\n</code></pre>\n</li>\n<li><p>+=/*=:</p>\n<ol>\n<li>+= __iadd__(), a+=ba__iadd__(),a,a = a+b ,a+ba<br>*=<strong>imul</strong>()</li>\n<li></li>\n</ol>\n<pre><code class=\"python\"><span class=\"meta\">&gt;&gt;&gt; </span>t = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])\n<span class=\"meta\">&gt;&gt;&gt; </span>t[<span class=\"number\">2</span>] += [<span class=\"number\">50</span>, <span class=\"number\">60</span>]\nTraceback (most recent call last):\n  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;\nTypeError: <span class=\"string\">'tuple'</span> object does <span class=\"keyword\">not</span> support item assignment\n<span class=\"meta\">&gt;&gt;&gt; </span>t\n(<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>, <span class=\"number\">50</span>, <span class=\"number\">60</span>])\n</code></pre>\n<p><strong>7. sortsorted</strong><br>list.sortNone.<br>sorted<br>reverse() key()</p>\n<p><strong>8. bisect</strong><br>bisect bisect  insort<br>bisect(haystack,needle)<br>haystack.insert(index, needle)<br>bisort(seq, num)</p>\n<p><strong>9. </strong></p>\n</li>\n<li><p>array:array.arraylist</p>\n</li>\n<li>NumPy SciPy, collections.deque</li>\n</ul>\n"},{"title":"Fluent Python  ","date":"2018-07-28T19:55:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n\n## Fluent Python ##\n### Chapter 12. Inheritance: For Good or For Worse\n### : \n\n> \n>                                       Alan Kay\n\nPython\n- \n- \n\n#### 12.1 \n\nPython(C)****\n\n\n\ncollections\n\n#### 12.2 \n\n  \n\n![Figure-12-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.1.png?raw=true)\n\npythonPython(Method Resolution OrderMRO), Python\\_\\_mro\\_\\_objecttenserflowVariable\n\n```python\n>>> import tensorflow as tf\n>>> tf.Variable.__mro__\n>>> (<class 'tensorflow.python.ops.variables.Variable'>, <class 'tensorflow.python.training.checkpointable.base.CheckpointableBase'>, <class 'object'>)\n\n```\n\n:\n- super()Foo_son.super().bar(), : \n- , super()Foo.bar()\n\n D  class D(C, B): D \\_\\_mro\\_\\_  C  B \n\n#### 12.3 \n\nGUITkinter\n![Figure-12-2](https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.2.png?raw=true)\n\n\n- Toplevel Tkinter \n- Widget\n- Button\n- Entry\n- Text\n\n\nTkinterTkinter********\n\n\n#### 12.4 \n\n> \n>                                                             Alan Kay\n\n \n\n\n\n- \n    ****\n    -  \n    - \n    \n\n- \n    \n\n- (mixin)\n    mixin class************\n\n- \n    Mixin (djangoGenericViews)\n\n- \n    \n    \n\n- \n    \n\n- \n     Grady Booch aggregate class\n    **\n\n- \n    \n\n\n#### 12.5  \n\nPythonMRO","source":"_posts/fluent-python-12.md","raw":"title: Fluent Python  \ndate: 2018-07-29 03:55:00\ntags:\n- Python\n- inheritance\n- multiple inheritance\n- mro\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n\n## Fluent Python ##\n### Chapter 12. Inheritance: For Good or For Worse\n### : \n\n> \n>                                       Alan Kay\n\nPython\n- \n- \n\n#### 12.1 \n\nPython(C)****\n\n\n\ncollections\n\n#### 12.2 \n\n  \n\n![Figure-12-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.1.png?raw=true)\n\npythonPython(Method Resolution OrderMRO), Python\\_\\_mro\\_\\_objecttenserflowVariable\n\n```python\n>>> import tensorflow as tf\n>>> tf.Variable.__mro__\n>>> (<class 'tensorflow.python.ops.variables.Variable'>, <class 'tensorflow.python.training.checkpointable.base.CheckpointableBase'>, <class 'object'>)\n\n```\n\n:\n- super()Foo_son.super().bar(), : \n- , super()Foo.bar()\n\n D  class D(C, B): D \\_\\_mro\\_\\_  C  B \n\n#### 12.3 \n\nGUITkinter\n![Figure-12-2](https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.2.png?raw=true)\n\n\n- Toplevel Tkinter \n- Widget\n- Button\n- Entry\n- Text\n\n\nTkinterTkinter********\n\n\n#### 12.4 \n\n> \n>                                                             Alan Kay\n\n \n\n\n\n- \n    ****\n    -  \n    - \n    \n\n- \n    \n\n- (mixin)\n    mixin class************\n\n- \n    Mixin (djangoGenericViews)\n\n- \n    \n    \n\n- \n    \n\n- \n     Grady Booch aggregate class\n    **\n\n- \n    \n\n\n#### 12.5  \n\nPythonMRO","slug":"fluent-python-12","published":1,"updated":"2019-04-25T01:27:25.927Z","comments":1,"layout":"post","link":"","_id":"cjuw5c69z000gdhyfrfktj815","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-12-Inheritance-For-Good-or-For-Worse\"><a href=\"#Chapter-12-Inheritance-For-Good-or-For-Worse\" class=\"headerlink\" title=\"Chapter 12. Inheritance: For Good or For Worse\"></a>Chapter 12. Inheritance: For Good or For Worse</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><blockquote>\n<p><br>                                      Alan Kay</p>\n</blockquote>\n<p>Python</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"12-1-\"><a href=\"#12-1-\" class=\"headerlink\" title=\"12.1 \"></a>12.1 </h4><p>Python(C)<strong></strong></p>\n<p></p>\n<p>collections</p>\n<h4 id=\"12-2-\"><a href=\"#12-2-\" class=\"headerlink\" title=\"12.2 \"></a>12.2 </h4><p>  </p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.1.png?raw=true\" alt=\"Figure-12-1\"></p>\n<p>pythonPython(Method Resolution OrderMRO), Python__mro__objecttenserflowVariable</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> tensorflow <span class=\"keyword\">as</span> tf</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tf.Variable.__mro__</span><br><span class=\"line\">&gt;&gt;&gt; (&lt;class 'tensorflow.python.ops.variables.Variable'&gt;, &lt;class 'tensorflow.python.training.checkpointable.base.CheckpointableBase'&gt;, &lt;class 'object'&gt;)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>super()Foo_son.super().bar(), : </li>\n<li>, super()Foo.bar()</li>\n</ul>\n<p> D  class D(C, B): D __mro__  C  B </p>\n<h4 id=\"12-3-\"><a href=\"#12-3-\" class=\"headerlink\" title=\"12.3 \"></a>12.3 </h4><p>GUITkinter<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.2.png?raw=true\" alt=\"Figure-12-2\"></p>\n<p></p>\n<ul>\n<li>Toplevel Tkinter </li>\n<li>Widget</li>\n<li>Button</li>\n<li>Entry</li>\n<li>Text</li>\n</ul>\n<p>TkinterTkinter<strong></strong><strong></strong></p>\n<h4 id=\"12-4-\"><a href=\"#12-4-\" class=\"headerlink\" title=\"12.4 \"></a>12.4 </h4><blockquote>\n<p><br>                                                            Alan Kay</p>\n</blockquote>\n<p> </p>\n<p></p>\n<ul>\n<li><p><br>  <strong></strong></p>\n<ul>\n<li> </li>\n<li><br></li>\n</ul>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p>(mixin)<br>  mixin class<strong></strong><strong></strong><strong></strong></p>\n</li>\n<li><p><br>  Mixin (djangoGenericViews)</p>\n</li>\n<li><p><br>  <br>  </p>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p><br>   Grady Booch aggregate class<br>  <em></em></p>\n</li>\n<li><p><br>  </p>\n</li>\n</ul>\n<h4 id=\"12-5-\"><a href=\"#12-5-\" class=\"headerlink\" title=\"12.5  \"></a>12.5  </h4><p>PythonMRO</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-12-Inheritance-For-Good-or-For-Worse\"><a href=\"#Chapter-12-Inheritance-For-Good-or-For-Worse\" class=\"headerlink\" title=\"Chapter 12. Inheritance: For Good or For Worse\"></a>Chapter 12. Inheritance: For Good or For Worse</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><blockquote>\n<p><br>                                      Alan Kay</p>\n</blockquote>\n<p>Python</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"12-1-\"><a href=\"#12-1-\" class=\"headerlink\" title=\"12.1 \"></a>12.1 </h4><p>Python(C)<strong></strong></p>\n<p></p>\n<p>collections</p>\n<h4 id=\"12-2-\"><a href=\"#12-2-\" class=\"headerlink\" title=\"12.2 \"></a>12.2 </h4><p>  </p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.1.png?raw=true\" alt=\"Figure-12-1\"></p>\n<p>pythonPython(Method Resolution OrderMRO), Python__mro__objecttenserflowVariable</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> tensorflow <span class=\"keyword\">as</span> tf</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tf.Variable.__mro__</span><br><span class=\"line\">&gt;&gt;&gt; (&lt;class 'tensorflow.python.ops.variables.Variable'&gt;, &lt;class 'tensorflow.python.training.checkpointable.base.CheckpointableBase'&gt;, &lt;class 'object'&gt;)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>super()Foo_son.super().bar(), : </li>\n<li>, super()Foo.bar()</li>\n</ul>\n<p> D  class D(C, B): D __mro__  C  B </p>\n<h4 id=\"12-3-\"><a href=\"#12-3-\" class=\"headerlink\" title=\"12.3 \"></a>12.3 </h4><p>GUITkinter<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-12.2.png?raw=true\" alt=\"Figure-12-2\"></p>\n<p></p>\n<ul>\n<li>Toplevel Tkinter </li>\n<li>Widget</li>\n<li>Button</li>\n<li>Entry</li>\n<li>Text</li>\n</ul>\n<p>TkinterTkinter<strong></strong><strong></strong></p>\n<h4 id=\"12-4-\"><a href=\"#12-4-\" class=\"headerlink\" title=\"12.4 \"></a>12.4 </h4><blockquote>\n<p><br>                                                            Alan Kay</p>\n</blockquote>\n<p> </p>\n<p></p>\n<ul>\n<li><p><br>  <strong></strong></p>\n<ul>\n<li> </li>\n<li><br></li>\n</ul>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p>(mixin)<br>  mixin class<strong></strong><strong></strong><strong></strong></p>\n</li>\n<li><p><br>  Mixin (djangoGenericViews)</p>\n</li>\n<li><p><br>  <br>  </p>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p><br>   Grady Booch aggregate class<br>  <em></em></p>\n</li>\n<li><p><br>  </p>\n</li>\n</ul>\n<h4 id=\"12-5-\"><a href=\"#12-5-\" class=\"headerlink\" title=\"12.5  \"></a>12.5  </h4><p>PythonMRO</p>\n"},{"title":"fluent python ","date":"2017-07-14T10:32:42.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 1. The Python Data Model ###\n### Python ###\n* magic method/dunder method (double underscores (i.e., \\_\\_getitem__()))\n* ****,\n\t- Iteration \n\t- Collections \n\t- Attribute access \n\t- Operator overloading \n\t- Function and method invocation \n\t- Object creation and destruction \n\t- String representation and formatting \n\t- Managed contexts (i.e., with blocks)   \n* namedtuple   \n\n    ```python  \n    >>> import collections\n    >>> Card = collections.namedtuple('Card', ['x','y'])    \n    >>> card = Card(11,22)  \n    >>> print card.x\n    11\n    >>> print card.y\n    22 \n    >>> x, y = card\n    >>> print x,y\n    11 22   \n\t```\n\n* \n\t- ****.size()? .length()? \\_\\_len__()len(object)\n\t- Pythonrandom.choice  \n\t- \\_\\_getitem__()(iterable),(index slicing)\n\n* \n\t- Pythonlen(my_obj)my\\_obj.\\_\\_len\\_\\_()\n\t- list, str, bytearraylen()CPython PyVarObjectob_size__len__()PyVarObjectC\n\t- for__iter__()\n\t-  leniterstr()\n\t- \n* ([](https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-2/numeric_types.py))\n\t- \\_\\_repr\\_\\_ <Vector object at 0x10e100070>    \n\t  \\_\\_repr\\_\\_%r Vector(1, 2)  Vector('1', '2')    \n\t  \\_\\_repr\\_\\_     \n\t  \\_\\_str\\_\\_ \\_\\_str\\_\\_str() print\\_\\_str\\_\\_\\_\\_repr\\_\\_Python\\_\\_str\\_\\_\\_\\_repr\\_\\_([StackOverflow](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python))    \n\t- \\_\\_add\\_\\_\\_\\_mul\\_\\_+*\n\t- : Python(if, while)bool  \n\t  True\\_\\_bool\\_\\_\\_\\_len\\_\\_\\_\\_bool\\_\\_,bool()\\_\\_bool\\_\\_\\_\\_len\\_\\_len()0False    \n\t  \n* \n\tThe Python Language Reference[Data Model](https://docs.python.org/3/reference/datamodel.html)8347\n\n* \n\t- Pythonic\n\t- Pythondebuglog\\_\\_repr\\_\\_\\_\\_str\\_\\_\n\t- [FrenchDeck](https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-1/card_deck.py)\n\t- Python \ndecimal.Decimal  fractions.Fraction\n\n","source":"_posts/fluent-python-chapter1-note.md","raw":"title: fluent python \ndate: 2017-07-14 18:32:42\ntags:\n- Python\n- magic method\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 1. The Python Data Model ###\n### Python ###\n* magic method/dunder method (double underscores (i.e., \\_\\_getitem__()))\n* ****,\n\t- Iteration \n\t- Collections \n\t- Attribute access \n\t- Operator overloading \n\t- Function and method invocation \n\t- Object creation and destruction \n\t- String representation and formatting \n\t- Managed contexts (i.e., with blocks)   \n* namedtuple   \n\n    ```python  \n    >>> import collections\n    >>> Card = collections.namedtuple('Card', ['x','y'])    \n    >>> card = Card(11,22)  \n    >>> print card.x\n    11\n    >>> print card.y\n    22 \n    >>> x, y = card\n    >>> print x,y\n    11 22   \n\t```\n\n* \n\t- ****.size()? .length()? \\_\\_len__()len(object)\n\t- Pythonrandom.choice  \n\t- \\_\\_getitem__()(iterable),(index slicing)\n\n* \n\t- Pythonlen(my_obj)my\\_obj.\\_\\_len\\_\\_()\n\t- list, str, bytearraylen()CPython PyVarObjectob_size__len__()PyVarObjectC\n\t- for__iter__()\n\t-  leniterstr()\n\t- \n* ([](https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-2/numeric_types.py))\n\t- \\_\\_repr\\_\\_ <Vector object at 0x10e100070>    \n\t  \\_\\_repr\\_\\_%r Vector(1, 2)  Vector('1', '2')    \n\t  \\_\\_repr\\_\\_     \n\t  \\_\\_str\\_\\_ \\_\\_str\\_\\_str() print\\_\\_str\\_\\_\\_\\_repr\\_\\_Python\\_\\_str\\_\\_\\_\\_repr\\_\\_([StackOverflow](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python))    \n\t- \\_\\_add\\_\\_\\_\\_mul\\_\\_+*\n\t- : Python(if, while)bool  \n\t  True\\_\\_bool\\_\\_\\_\\_len\\_\\_\\_\\_bool\\_\\_,bool()\\_\\_bool\\_\\_\\_\\_len\\_\\_len()0False    \n\t  \n* \n\tThe Python Language Reference[Data Model](https://docs.python.org/3/reference/datamodel.html)8347\n\n* \n\t- Pythonic\n\t- Pythondebuglog\\_\\_repr\\_\\_\\_\\_str\\_\\_\n\t- [FrenchDeck](https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-1/card_deck.py)\n\t- Python \ndecimal.Decimal  fractions.Fraction\n\n","slug":"fluent-python-chapter1-note","published":1,"updated":"2019-04-25T01:27:24.910Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6a1000idhyfqe8tfl72","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-1-The-Python-Data-Model\"><a href=\"#Chapter-1-The-Python-Data-Model\" class=\"headerlink\" title=\"Chapter 1. The Python Data Model\"></a>Chapter 1. The Python Data Model</h3><h3 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h3><ul>\n<li>magic method/dunder method (double underscores (i.e., __getitem__()))</li>\n<li><strong></strong>,<ul>\n<li>Iteration </li>\n<li>Collections </li>\n<li>Attribute access </li>\n<li>Operator overloading </li>\n<li>Function and method invocation </li>\n<li>Object creation and destruction </li>\n<li>String representation and formatting </li>\n<li>Managed contexts (i.e., with blocks)   </li>\n</ul>\n</li>\n<li><p>namedtuple   </p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> collections</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Card = collections.namedtuple(<span class=\"string\">'Card'</span>, [<span class=\"string\">'x'</span>,<span class=\"string\">'y'</span>])    </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>card = Card(<span class=\"number\">11</span>,<span class=\"number\">22</span>)  </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> card.x</span><br><span class=\"line\"><span class=\"number\">11</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> card.y</span><br><span class=\"line\"><span class=\"number\">22</span> </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>x, y = card</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> x,y</span><br><span class=\"line\"><span class=\"number\">11</span> <span class=\"number\">22</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<ul>\n<li><strong></strong>.size()? .length()? __len__()len(object)</li>\n<li>Pythonrandom.choice  </li>\n<li>__getitem__()(iterable),(index slicing)</li>\n</ul>\n</li>\n<li><p></p>\n<ul>\n<li>Pythonlen(my_obj)my_obj.__len__()</li>\n<li>list, str, bytearraylen()CPython PyVarObjectob_size<strong>len</strong>()PyVarObjectC</li>\n<li>for<strong>iter</strong>()</li>\n<li> leniterstr()</li>\n<li></li>\n</ul>\n</li>\n<li><p>(<a href=\"https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-2/numeric_types.py\" target=\"_blank\" rel=\"noopener\"></a>)</p>\n<ul>\n<li>__repr__ <vector object at 0x10e100070><br>__repr__%r Vector(1, 2)  Vector(1, 2)<br>__repr__ <br>__str__ __str__str() print__str____repr__Python__str____repr__(<a href=\"https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python\" target=\"_blank\" rel=\"noopener\">StackOverflow</a>)    </vector></li>\n<li>__add____mul__+*</li>\n<li>: Python(if, while)bool<br>True__bool____len____bool__,bool()__bool____len__len()0False    </li>\n</ul>\n</li>\n<li><p><br>  The Python Language Reference<a href=\"https://docs.python.org/3/reference/datamodel.html\" target=\"_blank\" rel=\"noopener\">Data Model</a>8347</p>\n</li>\n<li><p></p>\n<ul>\n<li>Pythonic</li>\n<li>Pythondebuglog__repr____str__</li>\n<li><a href=\"https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-1/card_deck.py\" target=\"_blank\" rel=\"noopener\">FrenchDeck</a></li>\n<li>Python <br>decimal.Decimal  fractions.Fraction</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-1-The-Python-Data-Model\"><a href=\"#Chapter-1-The-Python-Data-Model\" class=\"headerlink\" title=\"Chapter 1. The Python Data Model\"></a>Chapter 1. The Python Data Model</h3><h3 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h3><ul>\n<li>magic method/dunder method (double underscores (i.e., __getitem__()))</li>\n<li><strong></strong>,<ul>\n<li>Iteration </li>\n<li>Collections </li>\n<li>Attribute access </li>\n<li>Operator overloading </li>\n<li>Function and method invocation </li>\n<li>Object creation and destruction </li>\n<li>String representation and formatting </li>\n<li>Managed contexts (i.e., with blocks)   </li>\n</ul>\n</li>\n<li><p>namedtuple   </p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> collections</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Card = collections.namedtuple(<span class=\"string\">'Card'</span>, [<span class=\"string\">'x'</span>,<span class=\"string\">'y'</span>])    </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>card = Card(<span class=\"number\">11</span>,<span class=\"number\">22</span>)  </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> card.x</span><br><span class=\"line\"><span class=\"number\">11</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> card.y</span><br><span class=\"line\"><span class=\"number\">22</span> </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>x, y = card</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span> x,y</span><br><span class=\"line\"><span class=\"number\">11</span> <span class=\"number\">22</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<ul>\n<li><strong></strong>.size()? .length()? __len__()len(object)</li>\n<li>Pythonrandom.choice  </li>\n<li>__getitem__()(iterable),(index slicing)</li>\n</ul>\n</li>\n<li><p></p>\n<ul>\n<li>Pythonlen(my_obj)my_obj.__len__()</li>\n<li>list, str, bytearraylen()CPython PyVarObjectob_size<strong>len</strong>()PyVarObjectC</li>\n<li>for<strong>iter</strong>()</li>\n<li> leniterstr()</li>\n<li></li>\n</ul>\n</li>\n<li><p>(<a href=\"https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-2/numeric_types.py\" target=\"_blank\" rel=\"noopener\"></a>)</p>\n<ul>\n<li>__repr__ <vector object at 0x10e100070><br>__repr__%r Vector(1, 2)  Vector(1, 2)<br>__repr__ <br>__str__ __str__str() print__str____repr__Python__str____repr__(<a href=\"https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python\" target=\"_blank\" rel=\"noopener\">StackOverflow</a>)    </vector></li>\n<li>__add____mul__+*</li>\n<li>: Python(if, while)bool<br>True__bool____len____bool__,bool()__bool____len__len()0False    </li>\n</ul>\n</li>\n<li><p><br>  The Python Language Reference<a href=\"https://docs.python.org/3/reference/datamodel.html\" target=\"_blank\" rel=\"noopener\">Data Model</a>8347</p>\n</li>\n<li><p></p>\n<ul>\n<li>Pythonic</li>\n<li>Pythondebuglog__repr____str__</li>\n<li><a href=\"https://github.com/aldslvda/fluent-python/blob/master/1.The%20Python%20Data%20Model/1-1/card_deck.py\" target=\"_blank\" rel=\"noopener\">FrenchDeck</a></li>\n<li>Python <br>decimal.Decimal  fractions.Fraction</li>\n</ul>\n</li>\n</ul>\n"},{"title":"2017","date":"2017-01-02T04:11:27.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/nichijou_logo1.jpeg?raw=true"],"toc":true,"comment":true,"_content":"\n## 2017\n#### Pelicangithub page\n2017  , github233333   \n\nxD\n\n```python\nprint 'Hello, My blog!'\n```\nxixi\n\n ","source":"_posts/hello.md","raw":"title: 2017\ndate: 2017-01-02 12:11:27\ntags:\n- flag\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/nichijou_logo1.jpeg?raw=true\"\ntoc: true\ncomment: true\n---\n\n## 2017\n#### Pelicangithub page\n2017  , github233333   \n\nxD\n\n```python\nprint 'Hello, My blog!'\n```\nxixi\n\n ","slug":"hello","published":1,"updated":"2019-04-25T01:27:25.981Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6a3000mdhyfn49h0msc","content":"<h2 id=\"2017\"><a href=\"#2017\" class=\"headerlink\" title=\"2017\"></a>2017</h2><h4 id=\"Pelicangithub-page\"><a href=\"#Pelicangithub-page\" class=\"headerlink\" title=\"Pelicangithub page\"></a>Pelicangithub page</h4><p>2017  , github233333   </p>\n<p>xD</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">'Hello, My blog!'</span></span><br></pre></td></tr></table></figure>\n<p>xixi</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"2017\"><a href=\"#2017\" class=\"headerlink\" title=\"2017\"></a>2017</h2><h4 id=\"Pelicangithub-page\"><a href=\"#Pelicangithub-page\" class=\"headerlink\" title=\"Pelicangithub page\"></a>Pelicangithub page</h4><p>2017  , github233333   </p>\n<p>xD</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">'Hello, My blog!'</span></span><br></pre></td></tr></table></figure>\n<p>xixi</p>\n"},{"title":"jetbrain","date":"2017-09-26T08:40:06.000Z","toc":true,"comment":true,"_content":"\n\n![](https://github.com/aldslvda/blog-images/blob/master/idea_crack.png?raw=true)","source":"_posts/jetbrain_crack.md","raw":"title: jetbrain\ndate: 2017-09-26 16:40:06\ntags:\n- software\n- crack\n- jetbrains\ncategories:\n- \ntoc: true\ncomment: true\n---\n\n\n![](https://github.com/aldslvda/blog-images/blob/master/idea_crack.png?raw=true)","slug":"jetbrain_crack","published":1,"updated":"2019-04-25T01:27:25.777Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjuw5c6a4000odhyf2i26figm","content":"<p></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/idea_crack.png?raw=true\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/idea_crack.png?raw=true\" alt=\"\"></p>\n"},{"title":"VPSTCP BBR ","date":"2017-04-13T17:47:02.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/google_tcp_bbr.png?raw=true"],"toc":true,"comment":true,"_content":"\n## 1. BBR\n  \n  \n****youtube1080p480p  \nTCP*BBRBottleneck Bandwidth and RTT)*  Linux Kernel 4.9 BBR\n\n## 2. Ubuntu\n BBR Linux Kernel 4.9 VPS:  \n\n- \n\n```bash\n$uname -a\n```\n\n 4.9, ~  \n\n- ubuntu[](http://kernel.ubuntu.com/~kernel-ppa/mainline/)   \n  \n  \n  > http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n  \n- deb\n\n```bash\n$ wget http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n```\n- \n\n```bash\n$ dpkg -i linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n```\n- \n\n```bash\n$ dpkg-l|grep linux-image\n```\n- \n\n```bash\n$ apt-get purge ${old_linux_image}\n```\n-  grub \n\n```bash\n$ update-grub\n$ reboot\n```\n- ~\n\n## 3.  BBR \n\n-  sysctl.config\n\n```bash\n$ echo\"net.core.default_qdisc=fq\">>/etc/sysctl.conf\n$ echo\"net.ipv4.tcp_congestion_control=bbr\">>/etc/sysctl.conf\n```\n\n- \n\n```bash\n$ sysctl-p\n```\n\n- \n\n```bash\n$ sysctl net.ipv4.tcp_available_congestion_control\n```\n  \n\n> net.ipv4.tcp*_*available*_*congestion_control=bbr cubic ren\n\n\n## 4.  TCP BBR\n\n\n```bash\nsed-i'/net\\.core\\.default_qdisc=fq/d'/etc/sysctl.conf\nsed-i'/net\\.ipv4\\.tcp_congestion_control=bbr/d'/etc/sysctl.conf\nsysctl-p\nreboot\n```\n **-VPS** BBR\n\n\n","source":"_posts/ubuntu_tcp_bbr.md","raw":"title: VPSTCP BBR \ndate: 2017-04-14 09:47:02+08:00\ntags:\n- ubuntu\n- vps\n- tcp-bbr\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/google_tcp_bbr.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## 1. BBR\n  \n  \n****youtube1080p480p  \nTCP*BBRBottleneck Bandwidth and RTT)*  Linux Kernel 4.9 BBR\n\n## 2. Ubuntu\n BBR Linux Kernel 4.9 VPS:  \n\n- \n\n```bash\n$uname -a\n```\n\n 4.9, ~  \n\n- ubuntu[](http://kernel.ubuntu.com/~kernel-ppa/mainline/)   \n  \n  \n  > http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n  \n- deb\n\n```bash\n$ wget http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n```\n- \n\n```bash\n$ dpkg -i linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\n```\n- \n\n```bash\n$ dpkg-l|grep linux-image\n```\n- \n\n```bash\n$ apt-get purge ${old_linux_image}\n```\n-  grub \n\n```bash\n$ update-grub\n$ reboot\n```\n- ~\n\n## 3.  BBR \n\n-  sysctl.config\n\n```bash\n$ echo\"net.core.default_qdisc=fq\">>/etc/sysctl.conf\n$ echo\"net.ipv4.tcp_congestion_control=bbr\">>/etc/sysctl.conf\n```\n\n- \n\n```bash\n$ sysctl-p\n```\n\n- \n\n```bash\n$ sysctl net.ipv4.tcp_available_congestion_control\n```\n  \n\n> net.ipv4.tcp*_*available*_*congestion_control=bbr cubic ren\n\n\n## 4.  TCP BBR\n\n\n```bash\nsed-i'/net\\.core\\.default_qdisc=fq/d'/etc/sysctl.conf\nsed-i'/net\\.ipv4\\.tcp_congestion_control=bbr/d'/etc/sysctl.conf\nsysctl-p\nreboot\n```\n **-VPS** BBR\n\n\n","slug":"ubuntu_tcp_bbr","published":1,"updated":"2019-04-25T01:27:25.000Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6a6000tdhyfwa2wevr2","content":"<h2 id=\"1-BBR\"><a href=\"#1-BBR\" class=\"headerlink\" title=\"1. BBR\"></a>1. BBR</h2><p><br><br><strong></strong>youtube1080p480p<br>TCP<em>BBRBottleneck Bandwidth and RTT)</em>  Linux Kernel 4.9 BBR</p>\n<h2 id=\"2-Ubuntu\"><a href=\"#2-Ubuntu\" class=\"headerlink\" title=\"2. Ubuntu\"></a>2. Ubuntu</h2><p> BBR Linux Kernel 4.9 VPS:  </p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$uname</span> -a</span><br></pre></td></tr></table></figure>\n<p> 4.9, ~  </p>\n<ul>\n<li><p>ubuntu<a href=\"http://kernel.ubuntu.com/~kernel-ppa/mainline/\" target=\"_blank\" rel=\"noopener\"></a><br></p>\n<blockquote>\n<p><a href=\"http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\" target=\"_blank\" rel=\"noopener\">http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</a></p>\n</blockquote>\n</li>\n<li><p>deb</p>\n</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ wget http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dpkg -i linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dpkg<span class=\"_\">-l</span>|grep linux-image</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ apt-get purge <span class=\"variable\">$&#123;old_linux_image&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li> grub </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ update-grub</span><br><span class=\"line\">$ reboot</span><br></pre></td></tr></table></figure>\n<ul>\n<li>~</li>\n</ul>\n<h2 id=\"3--BBR-\"><a href=\"#3--BBR-\" class=\"headerlink\" title=\"3.  BBR \"></a>3.  BBR </h2><ul>\n<li> sysctl.config</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span><span class=\"string\">\"net.core.default_qdisc=fq\"</span>&gt;&gt;/etc/sysctl.conf</span><br><span class=\"line\">$ <span class=\"built_in\">echo</span><span class=\"string\">\"net.ipv4.tcp_congestion_control=bbr\"</span>&gt;&gt;/etc/sysctl.conf</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sysctl-p</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<blockquote>\n<p>net.ipv4.tcp<em>_</em>available<em>_</em>congestion_control=bbr cubic ren<br></p>\n</blockquote>\n<h2 id=\"4--TCP-BBR\"><a href=\"#4--TCP-BBR\" class=\"headerlink\" title=\"4.  TCP BBR\"></a>4.  TCP BBR</h2><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed-i<span class=\"string\">'/net\\.core\\.default_qdisc=fq/d'</span>/etc/sysctl.conf</span><br><span class=\"line\">sed-i<span class=\"string\">'/net\\.ipv4\\.tcp_congestion_control=bbr/d'</span>/etc/sysctl.conf</span><br><span class=\"line\">sysctl-p</span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n<p> <strong>-VPS</strong> BBR</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-BBR\"><a href=\"#1-BBR\" class=\"headerlink\" title=\"1. BBR\"></a>1. BBR</h2><p><br><br><strong></strong>youtube1080p480p<br>TCP<em>BBRBottleneck Bandwidth and RTT)</em>  Linux Kernel 4.9 BBR</p>\n<h2 id=\"2-Ubuntu\"><a href=\"#2-Ubuntu\" class=\"headerlink\" title=\"2. Ubuntu\"></a>2. Ubuntu</h2><p> BBR Linux Kernel 4.9 VPS:  </p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$uname</span> -a</span><br></pre></td></tr></table></figure>\n<p> 4.9, ~  </p>\n<ul>\n<li><p>ubuntu<a href=\"http://kernel.ubuntu.com/~kernel-ppa/mainline/\" target=\"_blank\" rel=\"noopener\"></a><br></p>\n<blockquote>\n<p><a href=\"http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb\" target=\"_blank\" rel=\"noopener\">http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</a></p>\n</blockquote>\n</li>\n<li><p>deb</p>\n</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ wget http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11-rc6/linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dpkg -i linux-image-4.11.0-041100rc6-generic_4.11.0-041100rc6.201704091331_amd64.deb</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dpkg<span class=\"_\">-l</span>|grep linux-image</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ apt-get purge <span class=\"variable\">$&#123;old_linux_image&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li> grub </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ update-grub</span><br><span class=\"line\">$ reboot</span><br></pre></td></tr></table></figure>\n<ul>\n<li>~</li>\n</ul>\n<h2 id=\"3--BBR-\"><a href=\"#3--BBR-\" class=\"headerlink\" title=\"3.  BBR \"></a>3.  BBR </h2><ul>\n<li> sysctl.config</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span><span class=\"string\">\"net.core.default_qdisc=fq\"</span>&gt;&gt;/etc/sysctl.conf</span><br><span class=\"line\">$ <span class=\"built_in\">echo</span><span class=\"string\">\"net.ipv4.tcp_congestion_control=bbr\"</span>&gt;&gt;/etc/sysctl.conf</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sysctl-p</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<blockquote>\n<p>net.ipv4.tcp<em>_</em>available<em>_</em>congestion_control=bbr cubic ren<br></p>\n</blockquote>\n<h2 id=\"4--TCP-BBR\"><a href=\"#4--TCP-BBR\" class=\"headerlink\" title=\"4.  TCP BBR\"></a>4.  TCP BBR</h2><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed-i<span class=\"string\">'/net\\.core\\.default_qdisc=fq/d'</span>/etc/sysctl.conf</span><br><span class=\"line\">sed-i<span class=\"string\">'/net\\.ipv4\\.tcp_congestion_control=bbr/d'</span>/etc/sysctl.conf</span><br><span class=\"line\">sysctl-p</span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n<p> <strong>-VPS</strong> BBR</p>\n"},{"title":"Fluent Python:(2)  ","date":"2017-12-19T09:01:13.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 6. Design Patterns with First-Class Functions ###\n### . (2)  \nPython\n\n\n\n#### \n![UML](https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.2.png?raw=true)\n\nUML\"\", PasteCommand Document OpenCommand \n\n\n\n Command execute Command  execute UML MacroCommand  execute() \n\nPython:\n\n>  \n\nCommandcommandcommand.excute(),command()MacroCommand(\\_\\_call\\_\\_)\n\n```python   \nclass MacroCommand:\n    \"\"\"\"\"\"\n    def __init__(self, commands):\n        self.commands = list(commands)\n    def __call__(self):\n        for command in self.commands:\n            command()\n```\n\n(), Python:   \n\n- \n- \n\nPython  __call__\n\n#### \n\nPython:\n\n>  API executerundoIt Python  API ()\n\n#### Python\nJava/C#Python   \nFluent-Python:    \n\n- Python Cookbook 3 David Beazley  Brian K. Jones 8.21  NodeVisitor \n- Learning Python Design PatternsGennadiy Zlobin Packt \n- Python Tarek Ziad Python  14  Python  7 \n- [Failed Project: Python 3 Patterns,Recipes and Idioms](http://www.mindviewinc.com/Books/Python3Patterns/Index.php)(Last updated  2015-08-04)\n- Head First (Java)\n- Ruby Russ Olsen  Python\n- ()\n","source":"_posts/fluent-python-6-2.md","raw":"title: Fluent Python:(2)  \ndate: 2017-12-19 17:01:13\ntags:\n- Python\n- design pattern\n- The Command pattern\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 6. Design Patterns with First-Class Functions ###\n### . (2)  \nPython\n\n\n\n#### \n![UML](https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.2.png?raw=true)\n\nUML\"\", PasteCommand Document OpenCommand \n\n\n\n Command execute Command  execute UML MacroCommand  execute() \n\nPython:\n\n>  \n\nCommandcommandcommand.excute(),command()MacroCommand(\\_\\_call\\_\\_)\n\n```python   \nclass MacroCommand:\n    \"\"\"\"\"\"\n    def __init__(self, commands):\n        self.commands = list(commands)\n    def __call__(self):\n        for command in self.commands:\n            command()\n```\n\n(), Python:   \n\n- \n- \n\nPython  __call__\n\n#### \n\nPython:\n\n>  API executerundoIt Python  API ()\n\n#### Python\nJava/C#Python   \nFluent-Python:    \n\n- Python Cookbook 3 David Beazley  Brian K. Jones 8.21  NodeVisitor \n- Learning Python Design PatternsGennadiy Zlobin Packt \n- Python Tarek Ziad Python  14  Python  7 \n- [Failed Project: Python 3 Patterns,Recipes and Idioms](http://www.mindviewinc.com/Books/Python3Patterns/Index.php)(Last updated  2015-08-04)\n- Head First (Java)\n- Ruby Russ Olsen  Python\n- ()\n","slug":"fluent-python-6-2","published":1,"updated":"2019-04-25T01:27:25.339Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6a8000vdhyf73dmqsyc","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-6-Design-Patterns-with-First-Class-Functions\"><a href=\"#Chapter-6-Design-Patterns-with-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 6. Design Patterns with First-Class Functions\"></a>Chapter 6. Design Patterns with First-Class Functions</h3><h3 id=\"--2--\"><a href=\"#--2--\" class=\"headerlink\" title=\". (2)  \"></a>. (2)  </h3><p>Python</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.2.png?raw=true\" alt=\"UML\"></p>\n<p>UML, PasteCommand Document OpenCommand </p>\n<p></p>\n<p> Command execute Command  execute UML MacroCommand  execute() </p>\n<p>Python:</p>\n<blockquote>\n<p> </p>\n</blockquote>\n<p>Commandcommandcommand.excute(),command()MacroCommand(__call__)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacroCommand</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, commands)</span>:</span></span><br><span class=\"line\">        self.commands = list(commands)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> command <span class=\"keyword\">in</span> self.commands:</span><br><span class=\"line\">            command()</span><br></pre></td></tr></table></figure>\n<p>(), Python:   </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>Python  <strong>call</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python:</p>\n<blockquote>\n<p> API executerundoIt Python  API ()</p>\n</blockquote>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Java/C#Python<br>Fluent-Python:    </p>\n<ul>\n<li>Python Cookbook 3 David Beazley  Brian K. Jones 8.21  NodeVisitor </li>\n<li>Learning Python Design PatternsGennadiy Zlobin Packt </li>\n<li>Python Tarek Ziad Python  14  Python  7 </li>\n<li><a href=\"http://www.mindviewinc.com/Books/Python3Patterns/Index.php\" target=\"_blank\" rel=\"noopener\">Failed Project: Python 3 Patterns,Recipes and Idioms</a>(Last updated  2015-08-04)</li>\n<li>Head First (Java)</li>\n<li>Ruby Russ Olsen  Python</li>\n<li>()</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-6-Design-Patterns-with-First-Class-Functions\"><a href=\"#Chapter-6-Design-Patterns-with-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 6. Design Patterns with First-Class Functions\"></a>Chapter 6. Design Patterns with First-Class Functions</h3><h3 id=\"--2--\"><a href=\"#--2--\" class=\"headerlink\" title=\". (2)  \"></a>. (2)  </h3><p>Python</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.2.png?raw=true\" alt=\"UML\"></p>\n<p>UML, PasteCommand Document OpenCommand </p>\n<p></p>\n<p> Command execute Command  execute UML MacroCommand  execute() </p>\n<p>Python:</p>\n<blockquote>\n<p> </p>\n</blockquote>\n<p>Commandcommandcommand.excute(),command()MacroCommand(__call__)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MacroCommand</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, commands)</span>:</span></span><br><span class=\"line\">        self.commands = list(commands)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> command <span class=\"keyword\">in</span> self.commands:</span><br><span class=\"line\">            command()</span><br></pre></td></tr></table></figure>\n<p>(), Python:   </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<p>Python  <strong>call</strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python:</p>\n<blockquote>\n<p> API executerundoIt Python  API ()</p>\n</blockquote>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Java/C#Python<br>Fluent-Python:    </p>\n<ul>\n<li>Python Cookbook 3 David Beazley  Brian K. Jones 8.21  NodeVisitor </li>\n<li>Learning Python Design PatternsGennadiy Zlobin Packt </li>\n<li>Python Tarek Ziad Python  14  Python  7 </li>\n<li><a href=\"http://www.mindviewinc.com/Books/Python3Patterns/Index.php\" target=\"_blank\" rel=\"noopener\">Failed Project: Python 3 Patterns,Recipes and Idioms</a>(Last updated  2015-08-04)</li>\n<li>Head First (Java)</li>\n<li>Ruby Russ Olsen  Python</li>\n<li>()</li>\n</ul>\n"},{"title":"BiliBili","date":"2017-02-05T07:22:36.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/bilibili_banner.png?raw=true"],"toc":true,"comment":true,"_content":"\n\n## BiliBili\n\nBilibili Appbilibili****B\n\n### av\nB\n\n```\nhttp://www.bilibili.com/video/av1608918/\n```\n\nav**param**\n\n```\nparam = '1608918'\n```\n\n### \nBappHTTPURL\n\n```\nhttps://app.bilibili.com/x/v2/view?actionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&sign=3fa3c3fa6557094b5680066009b41897&ts=1482977603\n```\n\nURL\n\n- actionKey=appkey \n- aid=7725070 param \n- appkey=27eb53fc9058f8c3  \n- build=4070&device=phone&from=1&mobi_app=iphone&platform=ios  \n- sign=3fa3c3fa6557094b5680066009b41897 \n- ts=1482977603 \n\n**sign**\n\n#### (1) sign\n\n```\nactionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&ts=1482977603\n```\n\n#### (2) 1secretKey\n\n   secretKeyappKey \n\n```\n{\"27eb53fc9058f8c3\":\"c2ed53a74eeefe3cf99fbd01d8c9c375\",\n\"q7R5WBWXdV1T5DO6\":\"HxibjZZ04WxYn6xVS1q0pIZvxf8b2fOa\"}\n```\n\n   secretKey\n\n```\nc2ed53a74eeefe3cf99fbd01d8c9c375\n```\n   \n\n```\nactionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&ts=1482977603c2ed53a74eeefe3cf99fbd01d8c9c375\n```\n\n#### (3) 2md5\n\n```\n3fa3c3fa6557094b5680066009b41897\n```\nsign\n\nURLGETjson\n\t\n```python\n{\n    \"code\":0,\n    \"data\":{\n        \"aid\":7725070,\n        \"tid\":20,\n        \"tname\":\"\",\n        \"copyright\":1,\n        \"pic\":\"http://i1.hdslb.com/bfs/archive/e0ccafafc5ad49cea65818dcf512858cea00ed88.jpg\",\n        \"title\":\"kuromi[963] - [  ] - [fgocos\",\n        \"pubdate\":1482839192,\n        \"ctime\":1482839192,\n        \"desc\":\"  :sm16595856 dancer: @kuromi :@ :@papa ------------------------------------------------- fgo~5 saberww~~xdd &gt;&lt;~~~~\",\n        \"state\":0,\n        \"attribute\":1622016,\n        \"duration\":493,\n        \"tags\":[],\n        \"rights\":{\n            \"bp\":0,\n            \"elec\":1,\n            \"download\":1,\n            \"movie\":0,\n            \"pay\":0,\n            \"hd5\":0\n        },\n        \"owner\":{\n            \"mid\":427657,\n            \"name\":\"\",\n            \"face\":\"http://i2.hdslb.com/bfs/face/8ec946923ce70e990cf1b05dc3cb14bda6c0d0e0.jpg\"\n        },\n        \"stat\":{\n            \"view\":170984,\n            \"danmaku\":874,\n            \"reply\":387,\n            \"favorite\":5513,\n            \"coin\":3277,\n            \"share\":183,\n            \"now_rank\":0,\n            \"his_rank\":0\n        },\n        \"pages\":[\n            {\n                \"cid\":12662538,\n                \"page\":1,\n                \"from\":\"vupload\",\n                \"link\":\"\",\n                \"has_alias\":0,\n                \"weblink\":\"\",\n                \"part\":\"\",\n                \"rich_vid\":\"\",\n                \"vid\":\"vupload_12662538\"\n            }\n        ],\n        \"owner_ext\":{},\n        \"req_user\":{},\n        \"online\":0,\n        \"tag\":[],\n        \"relates\":[]\n    },\n    \"message\":\"\"\n}\n```\n\n\ndatapages\n\n```python\n{\n    \"pages\":[\n        {\n            \"cid\":12662538,\n            \"page\":1,\n            \"from\":\"vupload\",\n            \"link\":\"\",\n            \"has_alias\":0,\n            \"weblink\":\"\",\n            \"part\":\"\",\n            \"rich_vid\":\"\",\n            \"vid\":\"vupload_12662538\"\n        }\n    ]\n}\n```\n\n****bCDNb**P**pages****,**cid**\n\n### \nHTTP\n\n```\nhttps://interface.bilibili.com/playurl?device=phone&otype=json&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&appkey=YvirImLGlLANCLvM&platform=iphone&build=4070&quality=2&sign=ae1954356fbd510073f636d9ca2d36e7\n```\n\n\n\n- device=phone  \n- otype=json \n- buvid=3168fe38e580b16a02c2cc9beceaf6b7  \n- cid=12662538 cid \n- appkey=YvirImLGlLANCLvM  \n- platform=iphone \n- build=4070 \n- quality=2\n- sign=ae1954356fbd510073f636d9ca2d36e7 sign\n\nappKeyobject-c,\n\n```c\nstring check_tv_box(string key, int addsum) { \n  \tconst char* sz = key.c_str(); \n    int len = key.length(); \n    int add = addsum;\n    // unsigned char out[17] = {0};\n    unsigned char* out = new unsigned char[len + 1]; \n    memset(out, 0, (len + 1) * sizeof(unsigned char)); \n    for (int i = 0; i < len; i++) {\n        int index = 0; \n        unsigned char ch = (unsigned char)sz[i]; \n        int num = ch + add; \n        num = (num - 65) % 57 + 65; \n        while (90 < num && 97 > num) {\n            add = (index * add) + add; index ++;\n            num = ch + add; num = (num - 65) % 57 + 65;\n        }\n    out[i] = (unsigned char)num;\n    }\n    string outString = (char*)out; delete [] out; return outString;\n}\nstring sz = \"VsfoFjIDZshujsdt\"; \nint add = 3; \nstring out1 = check_tv_box(sz, add);\n```\nappKey\"VsfoFjIDZshujsdt3out1appKeyYvirImLGlLANCLvM\n\nsigncheck_tv_box()sign\n\n#### (1) \n\t\n```c\nstring sz2 = \"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow\"; \nadd = 9; \nstring out2 = check_tv_box(sz2, add);\n```\n\t\nappKey\"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow9.JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM\n\t\n\n\n#### (2)  \n\n```\nappkey=YvirImLGlLANCLvM&build=4070&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&device=phone&otype=json&platform=iphone&quality=2\n```\n\n#### (3) 1 \n\n```\nappkey=YvirImLGlLANCLvM&build=4070&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&device=phone&otype=json&platform=iphone&quality=2JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM\n```\n\n#### (4) 3md5 \n\n```\nae1954356fbd510073f636d9ca2d36e7\n```\n\nappKeysignURL\njson\n\n```python\n{\n    \"from\":\"local\",\n    \"result\":\"suee\",\n    \"format\":\"hdmp4\",\n    \"timelength\":493546,\n    \"accept_format\":\"mp4,hdmp4,flv\",\n    \"accept_quality\":[\n        3,\n        2,\n        1\n    ],\n    \"seek_param\":\"start\",\n    \"seek_type\":\"second\",\n    \"durl\":[\n        {\n            \"order\":1,\n            \"length\":493546,\n            \"size\":72091760,\n            \"url\":\" http://ws.acgvideo.com/a/2d/12662538-1-hd.mp4?wsTime=1482992010&wsSecret2=de4372d19062d035396dd2625976ca1a&oi=3664534074&rate=2000\"\n        }\n    ]\n}\n```\ndurlurl\n\n\n### ==\nappb23333\n\n==\n\n\n\n \n","source":"_posts/bilibili_download.md","raw":"title: BiliBili\ndate: 2017-02-05 15:22:36\ntags:\n- Python\n- \n- bilibili\t\ncategories:\n- \t\nphotos:\t\n- \"https://github.com/aldslvda/blog-images/blob/master/bilibili_banner.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n\n## BiliBili\n\nBilibili Appbilibili****B\n\n### av\nB\n\n```\nhttp://www.bilibili.com/video/av1608918/\n```\n\nav**param**\n\n```\nparam = '1608918'\n```\n\n### \nBappHTTPURL\n\n```\nhttps://app.bilibili.com/x/v2/view?actionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&sign=3fa3c3fa6557094b5680066009b41897&ts=1482977603\n```\n\nURL\n\n- actionKey=appkey \n- aid=7725070 param \n- appkey=27eb53fc9058f8c3  \n- build=4070&device=phone&from=1&mobi_app=iphone&platform=ios  \n- sign=3fa3c3fa6557094b5680066009b41897 \n- ts=1482977603 \n\n**sign**\n\n#### (1) sign\n\n```\nactionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&ts=1482977603\n```\n\n#### (2) 1secretKey\n\n   secretKeyappKey \n\n```\n{\"27eb53fc9058f8c3\":\"c2ed53a74eeefe3cf99fbd01d8c9c375\",\n\"q7R5WBWXdV1T5DO6\":\"HxibjZZ04WxYn6xVS1q0pIZvxf8b2fOa\"}\n```\n\n   secretKey\n\n```\nc2ed53a74eeefe3cf99fbd01d8c9c375\n```\n   \n\n```\nactionKey=appkey&aid=7725070&appkey=27eb53fc9058f8c3&build=4070&device=phone&from=1&mobi_app=iphone&platform=ios&ts=1482977603c2ed53a74eeefe3cf99fbd01d8c9c375\n```\n\n#### (3) 2md5\n\n```\n3fa3c3fa6557094b5680066009b41897\n```\nsign\n\nURLGETjson\n\t\n```python\n{\n    \"code\":0,\n    \"data\":{\n        \"aid\":7725070,\n        \"tid\":20,\n        \"tname\":\"\",\n        \"copyright\":1,\n        \"pic\":\"http://i1.hdslb.com/bfs/archive/e0ccafafc5ad49cea65818dcf512858cea00ed88.jpg\",\n        \"title\":\"kuromi[963] - [  ] - [fgocos\",\n        \"pubdate\":1482839192,\n        \"ctime\":1482839192,\n        \"desc\":\"  :sm16595856 dancer: @kuromi :@ :@papa ------------------------------------------------- fgo~5 saberww~~xdd &gt;&lt;~~~~\",\n        \"state\":0,\n        \"attribute\":1622016,\n        \"duration\":493,\n        \"tags\":[],\n        \"rights\":{\n            \"bp\":0,\n            \"elec\":1,\n            \"download\":1,\n            \"movie\":0,\n            \"pay\":0,\n            \"hd5\":0\n        },\n        \"owner\":{\n            \"mid\":427657,\n            \"name\":\"\",\n            \"face\":\"http://i2.hdslb.com/bfs/face/8ec946923ce70e990cf1b05dc3cb14bda6c0d0e0.jpg\"\n        },\n        \"stat\":{\n            \"view\":170984,\n            \"danmaku\":874,\n            \"reply\":387,\n            \"favorite\":5513,\n            \"coin\":3277,\n            \"share\":183,\n            \"now_rank\":0,\n            \"his_rank\":0\n        },\n        \"pages\":[\n            {\n                \"cid\":12662538,\n                \"page\":1,\n                \"from\":\"vupload\",\n                \"link\":\"\",\n                \"has_alias\":0,\n                \"weblink\":\"\",\n                \"part\":\"\",\n                \"rich_vid\":\"\",\n                \"vid\":\"vupload_12662538\"\n            }\n        ],\n        \"owner_ext\":{},\n        \"req_user\":{},\n        \"online\":0,\n        \"tag\":[],\n        \"relates\":[]\n    },\n    \"message\":\"\"\n}\n```\n\n\ndatapages\n\n```python\n{\n    \"pages\":[\n        {\n            \"cid\":12662538,\n            \"page\":1,\n            \"from\":\"vupload\",\n            \"link\":\"\",\n            \"has_alias\":0,\n            \"weblink\":\"\",\n            \"part\":\"\",\n            \"rich_vid\":\"\",\n            \"vid\":\"vupload_12662538\"\n        }\n    ]\n}\n```\n\n****bCDNb**P**pages****,**cid**\n\n### \nHTTP\n\n```\nhttps://interface.bilibili.com/playurl?device=phone&otype=json&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&appkey=YvirImLGlLANCLvM&platform=iphone&build=4070&quality=2&sign=ae1954356fbd510073f636d9ca2d36e7\n```\n\n\n\n- device=phone  \n- otype=json \n- buvid=3168fe38e580b16a02c2cc9beceaf6b7  \n- cid=12662538 cid \n- appkey=YvirImLGlLANCLvM  \n- platform=iphone \n- build=4070 \n- quality=2\n- sign=ae1954356fbd510073f636d9ca2d36e7 sign\n\nappKeyobject-c,\n\n```c\nstring check_tv_box(string key, int addsum) { \n  \tconst char* sz = key.c_str(); \n    int len = key.length(); \n    int add = addsum;\n    // unsigned char out[17] = {0};\n    unsigned char* out = new unsigned char[len + 1]; \n    memset(out, 0, (len + 1) * sizeof(unsigned char)); \n    for (int i = 0; i < len; i++) {\n        int index = 0; \n        unsigned char ch = (unsigned char)sz[i]; \n        int num = ch + add; \n        num = (num - 65) % 57 + 65; \n        while (90 < num && 97 > num) {\n            add = (index * add) + add; index ++;\n            num = ch + add; num = (num - 65) % 57 + 65;\n        }\n    out[i] = (unsigned char)num;\n    }\n    string outString = (char*)out; delete [] out; return outString;\n}\nstring sz = \"VsfoFjIDZshujsdt\"; \nint add = 3; \nstring out1 = check_tv_box(sz, add);\n```\nappKey\"VsfoFjIDZshujsdt3out1appKeyYvirImLGlLANCLvM\n\nsigncheck_tv_box()sign\n\n#### (1) \n\t\n```c\nstring sz2 = \"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow\"; \nadd = 9; \nstring out2 = check_tv_box(sz2, add);\n```\n\t\nappKey\"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow9.JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM\n\t\n\n\n#### (2)  \n\n```\nappkey=YvirImLGlLANCLvM&build=4070&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&device=phone&otype=json&platform=iphone&quality=2\n```\n\n#### (3) 1 \n\n```\nappkey=YvirImLGlLANCLvM&build=4070&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid=12662538&device=phone&otype=json&platform=iphone&quality=2JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM\n```\n\n#### (4) 3md5 \n\n```\nae1954356fbd510073f636d9ca2d36e7\n```\n\nappKeysignURL\njson\n\n```python\n{\n    \"from\":\"local\",\n    \"result\":\"suee\",\n    \"format\":\"hdmp4\",\n    \"timelength\":493546,\n    \"accept_format\":\"mp4,hdmp4,flv\",\n    \"accept_quality\":[\n        3,\n        2,\n        1\n    ],\n    \"seek_param\":\"start\",\n    \"seek_type\":\"second\",\n    \"durl\":[\n        {\n            \"order\":1,\n            \"length\":493546,\n            \"size\":72091760,\n            \"url\":\" http://ws.acgvideo.com/a/2d/12662538-1-hd.mp4?wsTime=1482992010&wsSecret2=de4372d19062d035396dd2625976ca1a&oi=3664534074&rate=2000\"\n        }\n    ]\n}\n```\ndurlurl\n\n\n### ==\nappb23333\n\n==\n\n\n\n \n","slug":"bilibili_download","published":1,"updated":"2019-04-25T01:27:25.381Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6g30035dhyfcxlkg0em","content":"<h2 id=\"BiliBili\"><a href=\"#BiliBili\" class=\"headerlink\" title=\"BiliBili\"></a>BiliBili</h2><p>Bilibili Appbilibili<strong></strong>B</p>\n<h3 id=\"av\"><a href=\"#av\" class=\"headerlink\" title=\"av\"></a>av</h3><p>B</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.bilibili.com/video/av1608918/</span><br></pre></td></tr></table></figure>\n<p>av<strong>param</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">param = &apos;1608918&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>BappHTTPURL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://app.bilibili.com/x/v2/view?actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;sign=3fa3c3fa6557094b5680066009b41897&amp;ts=1482977603</span><br></pre></td></tr></table></figure>\n<p>URL</p>\n<ul>\n<li>actionKey=appkey </li>\n<li>aid=7725070 param </li>\n<li>appkey=27eb53fc9058f8c3  </li>\n<li>build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios  </li>\n<li>sign=3fa3c3fa6557094b5680066009b41897 </li>\n<li>ts=1482977603 </li>\n</ul>\n<p><strong>sign</strong></p>\n<h4 id=\"1-sign\"><a href=\"#1-sign\" class=\"headerlink\" title=\"(1) sign\"></a>(1) sign</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;ts=1482977603</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-1secretKey\"><a href=\"#2-1secretKey\" class=\"headerlink\" title=\"(2) 1secretKey\"></a>(2) 1secretKey</h4><p>   secretKeyappKey </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;27eb53fc9058f8c3&quot;:&quot;c2ed53a74eeefe3cf99fbd01d8c9c375&quot;,</span><br><span class=\"line\">&quot;q7R5WBWXdV1T5DO6&quot;:&quot;HxibjZZ04WxYn6xVS1q0pIZvxf8b2fOa&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p>   secretKey</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c2ed53a74eeefe3cf99fbd01d8c9c375</span><br></pre></td></tr></table></figure>\n<p>   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;ts=1482977603c2ed53a74eeefe3cf99fbd01d8c9c375</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-2md5\"><a href=\"#3-2md5\" class=\"headerlink\" title=\"(3) 2md5\"></a>(3) 2md5</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">3fa3c3fa6557094b5680066009b41897</span><br></pre></td></tr></table></figure>\n<p>sign</p>\n<p>URLGETjson</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"code\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"string\">\"data\"</span>:&#123;</span><br><span class=\"line\">        <span class=\"string\">\"aid\"</span>:<span class=\"number\">7725070</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tid\"</span>:<span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tname\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"copyright\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"string\">\"pic\"</span>:<span class=\"string\">\"http://i1.hdslb.com/bfs/archive/e0ccafafc5ad49cea65818dcf512858cea00ed88.jpg\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"title\"</span>:<span class=\"string\">\"kuromi[963] - [  ] - [fgocos\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"pubdate\"</span>:<span class=\"number\">1482839192</span>,</span><br><span class=\"line\">        <span class=\"string\">\"ctime\"</span>:<span class=\"number\">1482839192</span>,</span><br><span class=\"line\">        <span class=\"string\">\"desc\"</span>:<span class=\"string\">\"  :sm16595856 dancer: @kuromi :@ :@papa ------------------------------------------------- fgo~5 saberww~~xdd &amp;gt;&amp;lt;~~~~\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"state\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">\"attribute\"</span>:<span class=\"number\">1622016</span>,</span><br><span class=\"line\">        <span class=\"string\">\"duration\"</span>:<span class=\"number\">493</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tags\"</span>:[],</span><br><span class=\"line\">        <span class=\"string\">\"rights\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"bp\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"elec\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"download\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"movie\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"pay\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"hd5\"</span>:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"owner\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"mid\"</span>:<span class=\"number\">427657</span>,</span><br><span class=\"line\">            <span class=\"string\">\"name\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"face\"</span>:<span class=\"string\">\"http://i2.hdslb.com/bfs/face/8ec946923ce70e990cf1b05dc3cb14bda6c0d0e0.jpg\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"stat\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"view\"</span>:<span class=\"number\">170984</span>,</span><br><span class=\"line\">            <span class=\"string\">\"danmaku\"</span>:<span class=\"number\">874</span>,</span><br><span class=\"line\">            <span class=\"string\">\"reply\"</span>:<span class=\"number\">387</span>,</span><br><span class=\"line\">            <span class=\"string\">\"favorite\"</span>:<span class=\"number\">5513</span>,</span><br><span class=\"line\">            <span class=\"string\">\"coin\"</span>:<span class=\"number\">3277</span>,</span><br><span class=\"line\">            <span class=\"string\">\"share\"</span>:<span class=\"number\">183</span>,</span><br><span class=\"line\">            <span class=\"string\">\"now_rank\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"his_rank\"</span>:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"pages\"</span>:[</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"string\">\"cid\"</span>:<span class=\"number\">12662538</span>,</span><br><span class=\"line\">                <span class=\"string\">\"page\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"string\">\"from\"</span>:<span class=\"string\">\"vupload\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"link\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"has_alias\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"string\">\"weblink\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"part\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"rich_vid\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"vid\"</span>:<span class=\"string\">\"vupload_12662538\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"string\">\"owner_ext\"</span>:&#123;&#125;,</span><br><span class=\"line\">        <span class=\"string\">\"req_user\"</span>:&#123;&#125;,</span><br><span class=\"line\">        <span class=\"string\">\"online\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tag\"</span>:[],</span><br><span class=\"line\">        <span class=\"string\">\"relates\"</span>:[]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"message\"</span>:<span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br>datapages</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"pages\"</span>:[</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">\"cid\"</span>:<span class=\"number\">12662538</span>,</span><br><span class=\"line\">            <span class=\"string\">\"page\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"from\"</span>:<span class=\"string\">\"vupload\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"link\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"has_alias\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"weblink\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"part\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"rich_vid\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"vid\"</span>:<span class=\"string\">\"vupload_12662538\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>bCDNb<strong>P</strong>pages<strong></strong>,<strong>cid</strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HTTP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://interface.bilibili.com/playurl?device=phone&amp;otype=json&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;appkey=YvirImLGlLANCLvM&amp;platform=iphone&amp;build=4070&amp;quality=2&amp;sign=ae1954356fbd510073f636d9ca2d36e7</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>device=phone  </li>\n<li>otype=json </li>\n<li>buvid=3168fe38e580b16a02c2cc9beceaf6b7  </li>\n<li>cid=12662538 cid </li>\n<li>appkey=YvirImLGlLANCLvM  </li>\n<li>platform=iphone </li>\n<li>build=4070 </li>\n<li>quality=2</li>\n<li>sign=ae1954356fbd510073f636d9ca2d36e7 sign</li>\n</ul>\n<p>appKeyobject-c,</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">check_tv_box</span><span class=\"params\">(<span class=\"built_in\">string</span> key, <span class=\"keyword\">int</span> addsum)</span> </span>&#123; </span><br><span class=\"line\">  \t<span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* sz = key.c_str(); </span><br><span class=\"line\">    <span class=\"keyword\">int</span> len = key.length(); </span><br><span class=\"line\">    <span class=\"keyword\">int</span> add = addsum;</span><br><span class=\"line\">    <span class=\"comment\">// unsigned char out[17] = &#123;0&#125;;</span></span><br><span class=\"line\">    <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>* out = <span class=\"keyword\">new</span> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>[len + <span class=\"number\">1</span>]; </span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(out, <span class=\"number\">0</span>, (len + <span class=\"number\">1</span>) * <span class=\"keyword\">sizeof</span>(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)); </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> index = <span class=\"number\">0</span>; </span><br><span class=\"line\">        <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> ch = (<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)sz[i]; </span><br><span class=\"line\">        <span class=\"keyword\">int</span> num = ch + add; </span><br><span class=\"line\">        num = (num - <span class=\"number\">65</span>) % <span class=\"number\">57</span> + <span class=\"number\">65</span>; </span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"number\">90</span> &lt; num &amp;&amp; <span class=\"number\">97</span> &gt; num) &#123;</span><br><span class=\"line\">            add = (index * add) + add; index ++;</span><br><span class=\"line\">            num = ch + add; num = (num - <span class=\"number\">65</span>) % <span class=\"number\">57</span> + <span class=\"number\">65</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    out[i] = (<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)num;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> outString = (<span class=\"keyword\">char</span>*)out; <span class=\"keyword\">delete</span> [] out; <span class=\"keyword\">return</span> outString;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">string</span> sz = <span class=\"string\">\"VsfoFjIDZshujsdt\"</span>; </span><br><span class=\"line\"><span class=\"keyword\">int</span> add = <span class=\"number\">3</span>; </span><br><span class=\"line\"><span class=\"built_in\">string</span> out1 = check_tv_box(sz, add);</span><br></pre></td></tr></table></figure>\n<p>appKeyVsfoFjIDZshujsdt3out1appKeyYvirImLGlLANCLvM</p>\n<p>signcheck_tv_box()sign</p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"(1) \"></a>(1) </h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> sz2 = <span class=\"string\">\"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow\"</span>; </span><br><span class=\"line\">add = <span class=\"number\">9</span>; </span><br><span class=\"line\"><span class=\"built_in\">string</span> out2 = check_tv_box(sz2, add);</span><br></pre></td></tr></table></figure>\n<p>appKeyzEcQEUTunrHlLvYiGXyefkmJPmDQEtow9.JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM</p>\n<p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"(2) \"></a>(2) </h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appkey=YvirImLGlLANCLvM&amp;build=4070&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;device=phone&amp;otype=json&amp;platform=iphone&amp;quality=2</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-1\"><a href=\"#3-1\" class=\"headerlink\" title=\"(3) 1\"></a>(3) 1</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appkey=YvirImLGlLANCLvM&amp;build=4070&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;device=phone&amp;otype=json&amp;platform=iphone&amp;quality=2JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-3md5\"><a href=\"#4-3md5\" class=\"headerlink\" title=\"(4) 3md5\"></a>(4) 3md5</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ae1954356fbd510073f636d9ca2d36e7</span><br></pre></td></tr></table></figure>\n<p>appKeysignURL<br>json</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"from\"</span>:<span class=\"string\">\"local\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"result\"</span>:<span class=\"string\">\"suee\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"format\"</span>:<span class=\"string\">\"hdmp4\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"timelength\"</span>:<span class=\"number\">493546</span>,</span><br><span class=\"line\">    <span class=\"string\">\"accept_format\"</span>:<span class=\"string\">\"mp4,hdmp4,flv\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"accept_quality\"</span>:[</span><br><span class=\"line\">        <span class=\"number\">3</span>,</span><br><span class=\"line\">        <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"number\">1</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"seek_param\"</span>:<span class=\"string\">\"start\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"seek_type\"</span>:<span class=\"string\">\"second\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"durl\"</span>:[</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">\"order\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"length\"</span>:<span class=\"number\">493546</span>,</span><br><span class=\"line\">            <span class=\"string\">\"size\"</span>:<span class=\"number\">72091760</span>,</span><br><span class=\"line\">            <span class=\"string\">\"url\"</span>:<span class=\"string\">\" http://ws.acgvideo.com/a/2d/12662538-1-hd.mp4?wsTime=1482992010&amp;wsSecret2=de4372d19062d035396dd2625976ca1a&amp;oi=3664534074&amp;rate=2000\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>durlurl</p>\n<h3 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"==\"></a>==</h3><p>appb23333</p>\n<p>==</p>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"BiliBili\"><a href=\"#BiliBili\" class=\"headerlink\" title=\"BiliBili\"></a>BiliBili</h2><p>Bilibili Appbilibili<strong></strong>B</p>\n<h3 id=\"av\"><a href=\"#av\" class=\"headerlink\" title=\"av\"></a>av</h3><p>B</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.bilibili.com/video/av1608918/</span><br></pre></td></tr></table></figure>\n<p>av<strong>param</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">param = &apos;1608918&apos;</span><br></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>BappHTTPURL</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://app.bilibili.com/x/v2/view?actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;sign=3fa3c3fa6557094b5680066009b41897&amp;ts=1482977603</span><br></pre></td></tr></table></figure>\n<p>URL</p>\n<ul>\n<li>actionKey=appkey </li>\n<li>aid=7725070 param </li>\n<li>appkey=27eb53fc9058f8c3  </li>\n<li>build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios  </li>\n<li>sign=3fa3c3fa6557094b5680066009b41897 </li>\n<li>ts=1482977603 </li>\n</ul>\n<p><strong>sign</strong></p>\n<h4 id=\"1-sign\"><a href=\"#1-sign\" class=\"headerlink\" title=\"(1) sign\"></a>(1) sign</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;ts=1482977603</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-1secretKey\"><a href=\"#2-1secretKey\" class=\"headerlink\" title=\"(2) 1secretKey\"></a>(2) 1secretKey</h4><p>   secretKeyappKey </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;27eb53fc9058f8c3&quot;:&quot;c2ed53a74eeefe3cf99fbd01d8c9c375&quot;,</span><br><span class=\"line\">&quot;q7R5WBWXdV1T5DO6&quot;:&quot;HxibjZZ04WxYn6xVS1q0pIZvxf8b2fOa&quot;&#125;</span><br></pre></td></tr></table></figure>\n<p>   secretKey</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c2ed53a74eeefe3cf99fbd01d8c9c375</span><br></pre></td></tr></table></figure>\n<p>   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actionKey=appkey&amp;aid=7725070&amp;appkey=27eb53fc9058f8c3&amp;build=4070&amp;device=phone&amp;from=1&amp;mobi_app=iphone&amp;platform=ios&amp;ts=1482977603c2ed53a74eeefe3cf99fbd01d8c9c375</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-2md5\"><a href=\"#3-2md5\" class=\"headerlink\" title=\"(3) 2md5\"></a>(3) 2md5</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">3fa3c3fa6557094b5680066009b41897</span><br></pre></td></tr></table></figure>\n<p>sign</p>\n<p>URLGETjson</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"code\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"string\">\"data\"</span>:&#123;</span><br><span class=\"line\">        <span class=\"string\">\"aid\"</span>:<span class=\"number\">7725070</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tid\"</span>:<span class=\"number\">20</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tname\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"copyright\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"string\">\"pic\"</span>:<span class=\"string\">\"http://i1.hdslb.com/bfs/archive/e0ccafafc5ad49cea65818dcf512858cea00ed88.jpg\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"title\"</span>:<span class=\"string\">\"kuromi[963] - [  ] - [fgocos\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"pubdate\"</span>:<span class=\"number\">1482839192</span>,</span><br><span class=\"line\">        <span class=\"string\">\"ctime\"</span>:<span class=\"number\">1482839192</span>,</span><br><span class=\"line\">        <span class=\"string\">\"desc\"</span>:<span class=\"string\">\"  :sm16595856 dancer: @kuromi :@ :@papa ------------------------------------------------- fgo~5 saberww~~xdd &amp;gt;&amp;lt;~~~~\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"state\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">\"attribute\"</span>:<span class=\"number\">1622016</span>,</span><br><span class=\"line\">        <span class=\"string\">\"duration\"</span>:<span class=\"number\">493</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tags\"</span>:[],</span><br><span class=\"line\">        <span class=\"string\">\"rights\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"bp\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"elec\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"download\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"movie\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"pay\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"hd5\"</span>:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"owner\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"mid\"</span>:<span class=\"number\">427657</span>,</span><br><span class=\"line\">            <span class=\"string\">\"name\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"face\"</span>:<span class=\"string\">\"http://i2.hdslb.com/bfs/face/8ec946923ce70e990cf1b05dc3cb14bda6c0d0e0.jpg\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"stat\"</span>:&#123;</span><br><span class=\"line\">            <span class=\"string\">\"view\"</span>:<span class=\"number\">170984</span>,</span><br><span class=\"line\">            <span class=\"string\">\"danmaku\"</span>:<span class=\"number\">874</span>,</span><br><span class=\"line\">            <span class=\"string\">\"reply\"</span>:<span class=\"number\">387</span>,</span><br><span class=\"line\">            <span class=\"string\">\"favorite\"</span>:<span class=\"number\">5513</span>,</span><br><span class=\"line\">            <span class=\"string\">\"coin\"</span>:<span class=\"number\">3277</span>,</span><br><span class=\"line\">            <span class=\"string\">\"share\"</span>:<span class=\"number\">183</span>,</span><br><span class=\"line\">            <span class=\"string\">\"now_rank\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"his_rank\"</span>:<span class=\"number\">0</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"pages\"</span>:[</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"string\">\"cid\"</span>:<span class=\"number\">12662538</span>,</span><br><span class=\"line\">                <span class=\"string\">\"page\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"string\">\"from\"</span>:<span class=\"string\">\"vupload\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"link\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"has_alias\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"string\">\"weblink\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"part\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"rich_vid\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"vid\"</span>:<span class=\"string\">\"vupload_12662538\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"string\">\"owner_ext\"</span>:&#123;&#125;,</span><br><span class=\"line\">        <span class=\"string\">\"req_user\"</span>:&#123;&#125;,</span><br><span class=\"line\">        <span class=\"string\">\"online\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"string\">\"tag\"</span>:[],</span><br><span class=\"line\">        <span class=\"string\">\"relates\"</span>:[]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"message\"</span>:<span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br>datapages</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"pages\"</span>:[</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">\"cid\"</span>:<span class=\"number\">12662538</span>,</span><br><span class=\"line\">            <span class=\"string\">\"page\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"from\"</span>:<span class=\"string\">\"vupload\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"link\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"has_alias\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"string\">\"weblink\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"part\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"rich_vid\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"vid\"</span>:<span class=\"string\">\"vupload_12662538\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong>bCDNb<strong>P</strong>pages<strong></strong>,<strong>cid</strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HTTP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://interface.bilibili.com/playurl?device=phone&amp;otype=json&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;appkey=YvirImLGlLANCLvM&amp;platform=iphone&amp;build=4070&amp;quality=2&amp;sign=ae1954356fbd510073f636d9ca2d36e7</span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>device=phone  </li>\n<li>otype=json </li>\n<li>buvid=3168fe38e580b16a02c2cc9beceaf6b7  </li>\n<li>cid=12662538 cid </li>\n<li>appkey=YvirImLGlLANCLvM  </li>\n<li>platform=iphone </li>\n<li>build=4070 </li>\n<li>quality=2</li>\n<li>sign=ae1954356fbd510073f636d9ca2d36e7 sign</li>\n</ul>\n<p>appKeyobject-c,</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">check_tv_box</span><span class=\"params\">(<span class=\"built_in\">string</span> key, <span class=\"keyword\">int</span> addsum)</span> </span>&#123; </span><br><span class=\"line\">  \t<span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* sz = key.c_str(); </span><br><span class=\"line\">    <span class=\"keyword\">int</span> len = key.length(); </span><br><span class=\"line\">    <span class=\"keyword\">int</span> add = addsum;</span><br><span class=\"line\">    <span class=\"comment\">// unsigned char out[17] = &#123;0&#125;;</span></span><br><span class=\"line\">    <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>* out = <span class=\"keyword\">new</span> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>[len + <span class=\"number\">1</span>]; </span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(out, <span class=\"number\">0</span>, (len + <span class=\"number\">1</span>) * <span class=\"keyword\">sizeof</span>(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)); </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> index = <span class=\"number\">0</span>; </span><br><span class=\"line\">        <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> ch = (<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)sz[i]; </span><br><span class=\"line\">        <span class=\"keyword\">int</span> num = ch + add; </span><br><span class=\"line\">        num = (num - <span class=\"number\">65</span>) % <span class=\"number\">57</span> + <span class=\"number\">65</span>; </span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"number\">90</span> &lt; num &amp;&amp; <span class=\"number\">97</span> &gt; num) &#123;</span><br><span class=\"line\">            add = (index * add) + add; index ++;</span><br><span class=\"line\">            num = ch + add; num = (num - <span class=\"number\">65</span>) % <span class=\"number\">57</span> + <span class=\"number\">65</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    out[i] = (<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)num;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> outString = (<span class=\"keyword\">char</span>*)out; <span class=\"keyword\">delete</span> [] out; <span class=\"keyword\">return</span> outString;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">string</span> sz = <span class=\"string\">\"VsfoFjIDZshujsdt\"</span>; </span><br><span class=\"line\"><span class=\"keyword\">int</span> add = <span class=\"number\">3</span>; </span><br><span class=\"line\"><span class=\"built_in\">string</span> out1 = check_tv_box(sz, add);</span><br></pre></td></tr></table></figure>\n<p>appKeyVsfoFjIDZshujsdt3out1appKeyYvirImLGlLANCLvM</p>\n<p>signcheck_tv_box()sign</p>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"(1) \"></a>(1) </h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> sz2 = <span class=\"string\">\"zEcQEUTunrHlLvYiGXyefkmJPmDQEtow\"</span>; </span><br><span class=\"line\">add = <span class=\"number\">9</span>; </span><br><span class=\"line\"><span class=\"built_in\">string</span> out2 = check_tv_box(sz2, add);</span><br></pre></td></tr></table></figure>\n<p>appKeyzEcQEUTunrHlLvYiGXyefkmJPmDQEtow9.JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM</p>\n<p></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"(2) \"></a>(2) </h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appkey=YvirImLGlLANCLvM&amp;build=4070&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;device=phone&amp;otype=json&amp;platform=iphone&amp;quality=2</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-1\"><a href=\"#3-1\" class=\"headerlink\" title=\"(3) 1\"></a>(3) 1</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appkey=YvirImLGlLANCLvM&amp;build=4070&amp;buvid=3168fe38e580b16a02c2cc9beceaf6b7&amp;cid=12662538&amp;device=phone&amp;otype=json&amp;platform=iphone&amp;quality=2JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM</span><br></pre></td></tr></table></figure>\n<h4 id=\"4-3md5\"><a href=\"#4-3md5\" class=\"headerlink\" title=\"(4) 3md5\"></a>(4) 3md5</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ae1954356fbd510073f636d9ca2d36e7</span><br></pre></td></tr></table></figure>\n<p>appKeysignURL<br>json</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"from\"</span>:<span class=\"string\">\"local\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"result\"</span>:<span class=\"string\">\"suee\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"format\"</span>:<span class=\"string\">\"hdmp4\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"timelength\"</span>:<span class=\"number\">493546</span>,</span><br><span class=\"line\">    <span class=\"string\">\"accept_format\"</span>:<span class=\"string\">\"mp4,hdmp4,flv\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"accept_quality\"</span>:[</span><br><span class=\"line\">        <span class=\"number\">3</span>,</span><br><span class=\"line\">        <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"number\">1</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"seek_param\"</span>:<span class=\"string\">\"start\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"seek_type\"</span>:<span class=\"string\">\"second\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"durl\"</span>:[</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">\"order\"</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">            <span class=\"string\">\"length\"</span>:<span class=\"number\">493546</span>,</span><br><span class=\"line\">            <span class=\"string\">\"size\"</span>:<span class=\"number\">72091760</span>,</span><br><span class=\"line\">            <span class=\"string\">\"url\"</span>:<span class=\"string\">\" http://ws.acgvideo.com/a/2d/12662538-1-hd.mp4?wsTime=1482992010&amp;wsSecret2=de4372d19062d035396dd2625976ca1a&amp;oi=3664534074&amp;rate=2000\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>durlurl</p>\n<h3 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"==\"></a>==</h3><p>appb23333</p>\n<p>==</p>\n<p></p>\n"},{"title":"fluent python  ","date":"2018-09-20T10:00:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python \n### Chapter 14. Iterables, Iterators, and GeneratorsOperator\n### : \n\n (Iterator Pattern).\nPython\n\n>  Python ****\n\nPython3   range() Python2 3\n\nPython :  \n- for\n- \n- \n-  \n- \n- \\*\n\n\n- iter()\n- Python\n- \n- \n- \n- yeild from \n-  \n\n#### 14.1 \n\nSentence \n\n```python\nimport re\nimport reprlib\n    RE_WORD = re.compile('\\w+')\n    class Sentence:\n        def __init__(self, text):\n            self.text = text\n            self.words = RE_WORD.findall(text)\n        def __getitem__(self, index):\n            return self.words[index]\n        def __len__(self):\n            return len(self.words)\n        def __repr__(self):\n            return 'Sentence(%s)' % reprlib.repr(self.text)\n```\n\niter x  iter(x)\n iter \n(1)  \\_\\_iter\\_\\_ \n(2)  \\_\\_iter\\_\\_  \\_\\_getitem\\_\\_ Python  0 \n(3) Python  TypeError C object is not iterableC C \n Python  \\_\\_getitem\\_\\_  \\_\\_iter\\_\\_ \n\n#### 14.2 \n\n\n>  iter \\_\\_iter\\_\\_   \n> \\_\\_getitem\\_\\_   \n> Python \n\nwhilefor\n\n```python\n# for \ns = 'ABC'\nfor char in s:\n    print(char)\n\n# while \ns = 'ABC'\nit = iter(s) \nwhile True:\n    try:\n        print(next(it)) \n    except StopIteration: \n        del it \n    break \n```\n\n\n- \\_\\_next\\_\\_   \n     StopIteration \n- \\_\\_iter\\_\\_   \n     self for \n    \n collections.abc.Iterator  \\_\\_next\\_\\_  Iterable \\_\\_iter\\_\\_  Iterable \n\n\\_\\_next\\_\\_ \\_\\_iter\\_\\_  Iterator.\\_\\_init\\_\\_\n\n#### 14.3 \n\n\n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\n\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n        self.words = RE_WORD.findall(text)\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        return SentenceIterator(self.words)\n\n\nclass SentenceIterator:\n    def __init__(self, words):\n        self.words = words\n        self.index = 0\n    def __next__(self):\n        try:\n            word = self.words[self.index]\n        except IndexError:\n            raise StopIteration()\n        self.index += 1\n        return word\n    def __iter__(self):\n        return self\n```\n\nSentence\\_\\_next\\_\\_ Sentence****\n\n>  \n> 1. \n> 2. (iter())\n> 3. \n\n#### 14.4 \n\nPython\n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n        self.words = RE_WORD.findall(text)\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        for word in self.words:\n            yield word\n        return\n```\n\n\n>  Python  yield \n\n#### 14.5 \n\nre.finditerre.findall \n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        for match in RE_WORD.finditer(self.text):\n            yield match.group()\n```\n\nfinditerSentence\n\n#### 14.6 \n\n, \n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        return (match.group() for match in RE_WORD.finditer(self.text))\n```\n\n#### 14.7 yeild from \n\n> : yeild from Python3.3\n\n for \n  \n\n\n```python\n>>> def chain(*iterables):\n...     for it in iterables:\n...         for i in it:\n...             yield i\n...\n>>> s = 'ABC'\n>>> t = tuple(range(3))\n>>> list(chain(s, t))\n['A', 'B', 'C', 0, 1, 2]\n```\n\nchain\n\n```python\n>>> def chain(*iterables):\n...     for i in iterables:\n...     yield from i\n...\n>>> list(chain(s, t))\n['A', 'B', 'C', 0, 1, 2]\n```\n\nyield from i  for  \n\n#### 14.8 iter()\n Python  x  iter(x), , iter()   \n\niter  StopIteration \n\n\n```python\n# 1\nfrom random import randint\ndef d6():\n    return randint(1, 6)\n\nd6_iter = iter(d6, 1)\nfor roll in d6_iter:\n    print(roll)\n```\n\n#### 14.9 \n\n> Python 2.5 PEP 342  Coroutines via Enhanced Generatorshttps://www.python.org/dev/peps/pep-0342/  .send()  ****\n\n .\\_\\_next\\_\\_() .send()  yield .send()  .send()  yield .send()  .\\_\\_next\\_\\_() \n\n> - \n> - \n> - \n> - \n> -  yield \n>       \n>    <div align = right>David Beazley  A Curious Course on Coroutines and Concurrency</div>\n\n ![233](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)\n\n#### 14.9 \nPython , Python grokPython ","source":"_posts/fluent-python-14.md","raw":"title: fluent python  \ndate: 2018-09-20 18:00:00\ntags:\n- Python\n- Iterable\n- Iterator\n- Generator\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python \n### Chapter 14. Iterables, Iterators, and GeneratorsOperator\n### : \n\n (Iterator Pattern).\nPython\n\n>  Python ****\n\nPython3   range() Python2 3\n\nPython :  \n- for\n- \n- \n-  \n- \n- \\*\n\n\n- iter()\n- Python\n- \n- \n- \n- yeild from \n-  \n\n#### 14.1 \n\nSentence \n\n```python\nimport re\nimport reprlib\n    RE_WORD = re.compile('\\w+')\n    class Sentence:\n        def __init__(self, text):\n            self.text = text\n            self.words = RE_WORD.findall(text)\n        def __getitem__(self, index):\n            return self.words[index]\n        def __len__(self):\n            return len(self.words)\n        def __repr__(self):\n            return 'Sentence(%s)' % reprlib.repr(self.text)\n```\n\niter x  iter(x)\n iter \n(1)  \\_\\_iter\\_\\_ \n(2)  \\_\\_iter\\_\\_  \\_\\_getitem\\_\\_ Python  0 \n(3) Python  TypeError C object is not iterableC C \n Python  \\_\\_getitem\\_\\_  \\_\\_iter\\_\\_ \n\n#### 14.2 \n\n\n>  iter \\_\\_iter\\_\\_   \n> \\_\\_getitem\\_\\_   \n> Python \n\nwhilefor\n\n```python\n# for \ns = 'ABC'\nfor char in s:\n    print(char)\n\n# while \ns = 'ABC'\nit = iter(s) \nwhile True:\n    try:\n        print(next(it)) \n    except StopIteration: \n        del it \n    break \n```\n\n\n- \\_\\_next\\_\\_   \n     StopIteration \n- \\_\\_iter\\_\\_   \n     self for \n    \n collections.abc.Iterator  \\_\\_next\\_\\_  Iterable \\_\\_iter\\_\\_  Iterable \n\n\\_\\_next\\_\\_ \\_\\_iter\\_\\_  Iterator.\\_\\_init\\_\\_\n\n#### 14.3 \n\n\n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\n\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n        self.words = RE_WORD.findall(text)\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        return SentenceIterator(self.words)\n\n\nclass SentenceIterator:\n    def __init__(self, words):\n        self.words = words\n        self.index = 0\n    def __next__(self):\n        try:\n            word = self.words[self.index]\n        except IndexError:\n            raise StopIteration()\n        self.index += 1\n        return word\n    def __iter__(self):\n        return self\n```\n\nSentence\\_\\_next\\_\\_ Sentence****\n\n>  \n> 1. \n> 2. (iter())\n> 3. \n\n#### 14.4 \n\nPython\n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n        self.words = RE_WORD.findall(text)\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        for word in self.words:\n            yield word\n        return\n```\n\n\n>  Python  yield \n\n#### 14.5 \n\nre.finditerre.findall \n\n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        for match in RE_WORD.finditer(self.text):\n            yield match.group()\n```\n\nfinditerSentence\n\n#### 14.6 \n\n, \n```python\nimport re\nimport reprlib\nRE_WORD = re.compile('\\w+')\nclass Sentence:\n    def __init__(self, text):\n        self.text = text\n    def __repr__(self):\n        return 'Sentence(%s)' % reprlib.repr(self.text)\n    def __iter__(self):\n        return (match.group() for match in RE_WORD.finditer(self.text))\n```\n\n#### 14.7 yeild from \n\n> : yeild from Python3.3\n\n for \n  \n\n\n```python\n>>> def chain(*iterables):\n...     for it in iterables:\n...         for i in it:\n...             yield i\n...\n>>> s = 'ABC'\n>>> t = tuple(range(3))\n>>> list(chain(s, t))\n['A', 'B', 'C', 0, 1, 2]\n```\n\nchain\n\n```python\n>>> def chain(*iterables):\n...     for i in iterables:\n...     yield from i\n...\n>>> list(chain(s, t))\n['A', 'B', 'C', 0, 1, 2]\n```\n\nyield from i  for  \n\n#### 14.8 iter()\n Python  x  iter(x), , iter()   \n\niter  StopIteration \n\n\n```python\n# 1\nfrom random import randint\ndef d6():\n    return randint(1, 6)\n\nd6_iter = iter(d6, 1)\nfor roll in d6_iter:\n    print(roll)\n```\n\n#### 14.9 \n\n> Python 2.5 PEP 342  Coroutines via Enhanced Generatorshttps://www.python.org/dev/peps/pep-0342/  .send()  ****\n\n .\\_\\_next\\_\\_() .send()  yield .send()  .send()  yield .send()  .\\_\\_next\\_\\_() \n\n> - \n> - \n> - \n> - \n> -  yield \n>       \n>    <div align = right>David Beazley  A Curious Course on Coroutines and Concurrency</div>\n\n ![233](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)\n\n#### 14.9 \nPython , Python grokPython ","slug":"fluent-python-14","published":1,"updated":"2019-04-25T01:27:24.792Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6g50037dhyfcom9vc6w","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-14-Iterables-Iterators-and-GeneratorsOperator\"><a href=\"#Chapter-14-Iterables-Iterators-and-GeneratorsOperator\" class=\"headerlink\" title=\"Chapter 14. Iterables, Iterators, and GeneratorsOperator\"></a>Chapter 14. Iterables, Iterators, and GeneratorsOperator</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p> (Iterator Pattern).<br>Python</p>\n<blockquote>\n<p> Python <strong></strong></p>\n</blockquote>\n<p>Python3   range() Python2 3</p>\n<p>Python :  </p>\n<ul>\n<li>for</li>\n<li></li>\n<li></li>\n<li> </li>\n<li></li>\n<li>*</li>\n</ul>\n<p></p>\n<ul>\n<li>iter()</li>\n<li>Python</li>\n<li></li>\n<li></li>\n<li></li>\n<li>yeild from </li>\n<li> </li>\n</ul>\n<h4 id=\"14-1-\"><a href=\"#14-1-\" class=\"headerlink\" title=\"14.1 \"></a>14.1 </h4><p>Sentence </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">    RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">            self.text = text</span><br><span class=\"line\">            self.words = RE_WORD.findall(text)</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.words[index]</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> len(self.words)</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br></pre></td></tr></table></figure>\n<p>iter x  iter(x)<br> iter <br>(1)  __iter__ <br>(2)  __iter__  __getitem__ Python  0 <br>(3) Python  TypeError C object is not iterableC C <br> Python  __getitem__  __iter__ </p>\n<h4 id=\"14-2-\"><a href=\"#14-2-\" class=\"headerlink\" title=\"14.2 \"></a>14.2 </h4><p></p>\n<blockquote>\n<p> iter __iter__ <br>__getitem__ <br>Python </p>\n</blockquote>\n<p>whilefor</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># for </span></span><br><span class=\"line\">s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> char <span class=\"keyword\">in</span> s:</span><br><span class=\"line\">    print(char)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># while </span></span><br><span class=\"line\">s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\">it = iter(s) </span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        print(next(it)) </span><br><span class=\"line\">    <span class=\"keyword\">except</span> StopIteration: </span><br><span class=\"line\">        <span class=\"keyword\">del</span> it </span><br><span class=\"line\">    <span class=\"keyword\">break</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>__next__<br>   StopIteration </li>\n<li>__iter__<br>   self for </li>\n</ul>\n<p> collections.abc.Iterator  __next__  Iterable __iter__  Iterable </p>\n<p>__next__ __iter__  Iterator.__init__</p>\n<h4 id=\"14-3-\"><a href=\"#14-3-\" class=\"headerlink\" title=\"14.3 \"></a>14.3 </h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">        self.words = RE_WORD.findall(text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> SentenceIterator(self.words)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SentenceIterator</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, words)</span>:</span></span><br><span class=\"line\">        self.words = words</span><br><span class=\"line\">        self.index = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            word = self.words[self.index]</span><br><span class=\"line\">        <span class=\"keyword\">except</span> IndexError:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> StopIteration()</span><br><span class=\"line\">        self.index += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> word</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br></pre></td></tr></table></figure>\n<p>Sentence__next__ Sentence<strong></strong></p>\n<blockquote>\n<p> </p>\n<ol>\n<li></li>\n<li>(iter())</li>\n<li></li>\n</ol>\n</blockquote>\n<h4 id=\"14-4-\"><a href=\"#14-4-\" class=\"headerlink\" title=\"14.4 \"></a>14.4 </h4><p>Python</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">        self.words = RE_WORD.findall(text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> word <span class=\"keyword\">in</span> self.words:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> word</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p> Python  yield </p>\n</blockquote>\n<h4 id=\"14-5-\"><a href=\"#14-5-\" class=\"headerlink\" title=\"14.5 \"></a>14.5 </h4><p>re.finditerre.findall </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> match <span class=\"keyword\">in</span> RE_WORD.finditer(self.text):</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> match.group()</span><br></pre></td></tr></table></figure>\n<p>finditerSentence</p>\n<h4 id=\"14-6-\"><a href=\"#14-6-\" class=\"headerlink\" title=\"14.6 \"></a>14.6 </h4><p>, <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (match.group() <span class=\"keyword\">for</span> match <span class=\"keyword\">in</span> RE_WORD.finditer(self.text))</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"14-7-yeild-from\"><a href=\"#14-7-yeild-from\" class=\"headerlink\" title=\"14.7 yeild from\"></a>14.7 yeild from</h4><blockquote>\n<p>: yeild from Python3.3</p>\n</blockquote>\n<p> for <br><br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">chain</span><span class=\"params\">(*iterables)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> it <span class=\"keyword\">in</span> iterables:</span><br><span class=\"line\"><span class=\"meta\">... </span>        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> it:</span><br><span class=\"line\"><span class=\"meta\">... </span>            <span class=\"keyword\">yield</span> i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t = tuple(range(<span class=\"number\">3</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(chain(s, t))</span><br><span class=\"line\">[<span class=\"string\">'A'</span>, <span class=\"string\">'B'</span>, <span class=\"string\">'C'</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br></pre></td></tr></table></figure>\n<p>chain</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">chain</span><span class=\"params\">(*iterables)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> iterables:</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">yield</span> <span class=\"keyword\">from</span> i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(chain(s, t))</span><br><span class=\"line\">[<span class=\"string\">'A'</span>, <span class=\"string\">'B'</span>, <span class=\"string\">'C'</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br></pre></td></tr></table></figure>\n<p>yield from i  for  </p>\n<h4 id=\"14-8-iter-\"><a href=\"#14-8-iter-\" class=\"headerlink\" title=\"14.8 iter()\"></a>14.8 iter()</h4><p> Python  x  iter(x), , iter()   </p>\n<p>iter  StopIteration </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> random <span class=\"keyword\">import</span> randint</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">d6</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> randint(<span class=\"number\">1</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">d6_iter = iter(d6, <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> roll <span class=\"keyword\">in</span> d6_iter:</span><br><span class=\"line\">    print(roll)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"14-9-\"><a href=\"#14-9-\" class=\"headerlink\" title=\"14.9 \"></a>14.9 </h4><blockquote>\n<p>Python 2.5 PEP 342  Coroutines via Enhanced Generators<a href=\"https://www.python.org/dev/peps/pep-0342/\" target=\"_blank\" rel=\"noopener\">https://www.python.org/dev/peps/pep-0342/</a>  .send()  <strong></strong></p>\n</blockquote>\n<p> .__next__() .send()  yield .send()  .send()  yield .send()  .__next__() </p>\n<blockquote>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><p> yield </p>\n <div align=\"right\">David Beazley  A Curious Course on Coroutines and Concurrency</div>\n</li>\n</ul>\n</blockquote>\n<p> <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt=\"233\"></p>\n<h4 id=\"14-9-\"><a href=\"#14-9-\" class=\"headerlink\" title=\"14.9 \"></a>14.9 </h4><p>Python , Python grokPython </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-14-Iterables-Iterators-and-GeneratorsOperator\"><a href=\"#Chapter-14-Iterables-Iterators-and-GeneratorsOperator\" class=\"headerlink\" title=\"Chapter 14. Iterables, Iterators, and GeneratorsOperator\"></a>Chapter 14. Iterables, Iterators, and GeneratorsOperator</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p> (Iterator Pattern).<br>Python</p>\n<blockquote>\n<p> Python <strong></strong></p>\n</blockquote>\n<p>Python3   range() Python2 3</p>\n<p>Python :  </p>\n<ul>\n<li>for</li>\n<li></li>\n<li></li>\n<li> </li>\n<li></li>\n<li>*</li>\n</ul>\n<p></p>\n<ul>\n<li>iter()</li>\n<li>Python</li>\n<li></li>\n<li></li>\n<li></li>\n<li>yeild from </li>\n<li> </li>\n</ul>\n<h4 id=\"14-1-\"><a href=\"#14-1-\" class=\"headerlink\" title=\"14.1 \"></a>14.1 </h4><p>Sentence </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">    RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">            self.text = text</span><br><span class=\"line\">            self.words = RE_WORD.findall(text)</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.words[index]</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> len(self.words)</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br></pre></td></tr></table></figure>\n<p>iter x  iter(x)<br> iter <br>(1)  __iter__ <br>(2)  __iter__  __getitem__ Python  0 <br>(3) Python  TypeError C object is not iterableC C <br> Python  __getitem__  __iter__ </p>\n<h4 id=\"14-2-\"><a href=\"#14-2-\" class=\"headerlink\" title=\"14.2 \"></a>14.2 </h4><p></p>\n<blockquote>\n<p> iter __iter__ <br>__getitem__ <br>Python </p>\n</blockquote>\n<p>whilefor</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># for </span></span><br><span class=\"line\">s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> char <span class=\"keyword\">in</span> s:</span><br><span class=\"line\">    print(char)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># while </span></span><br><span class=\"line\">s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\">it = iter(s) </span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        print(next(it)) </span><br><span class=\"line\">    <span class=\"keyword\">except</span> StopIteration: </span><br><span class=\"line\">        <span class=\"keyword\">del</span> it </span><br><span class=\"line\">    <span class=\"keyword\">break</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>__next__<br>   StopIteration </li>\n<li>__iter__<br>   self for </li>\n</ul>\n<p> collections.abc.Iterator  __next__  Iterable __iter__  Iterable </p>\n<p>__next__ __iter__  Iterator.__init__</p>\n<h4 id=\"14-3-\"><a href=\"#14-3-\" class=\"headerlink\" title=\"14.3 \"></a>14.3 </h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">        self.words = RE_WORD.findall(text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> SentenceIterator(self.words)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SentenceIterator</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, words)</span>:</span></span><br><span class=\"line\">        self.words = words</span><br><span class=\"line\">        self.index = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__next__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            word = self.words[self.index]</span><br><span class=\"line\">        <span class=\"keyword\">except</span> IndexError:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> StopIteration()</span><br><span class=\"line\">        self.index += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> word</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self</span><br></pre></td></tr></table></figure>\n<p>Sentence__next__ Sentence<strong></strong></p>\n<blockquote>\n<p> </p>\n<ol>\n<li></li>\n<li>(iter())</li>\n<li></li>\n</ol>\n</blockquote>\n<h4 id=\"14-4-\"><a href=\"#14-4-\" class=\"headerlink\" title=\"14.4 \"></a>14.4 </h4><p>Python</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">        self.words = RE_WORD.findall(text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> word <span class=\"keyword\">in</span> self.words:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> word</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p> Python  yield </p>\n</blockquote>\n<h4 id=\"14-5-\"><a href=\"#14-5-\" class=\"headerlink\" title=\"14.5 \"></a>14.5 </h4><p>re.finditerre.findall </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> match <span class=\"keyword\">in</span> RE_WORD.finditer(self.text):</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> match.group()</span><br></pre></td></tr></table></figure>\n<p>finditerSentence</p>\n<h4 id=\"14-6-\"><a href=\"#14-6-\" class=\"headerlink\" title=\"14.6 \"></a>14.6 </h4><p>, <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\">RE_WORD = re.compile(<span class=\"string\">'\\w+'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sentence</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, text)</span>:</span></span><br><span class=\"line\">        self.text = text</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Sentence(%s)'</span> % reprlib.repr(self.text)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (match.group() <span class=\"keyword\">for</span> match <span class=\"keyword\">in</span> RE_WORD.finditer(self.text))</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"14-7-yeild-from\"><a href=\"#14-7-yeild-from\" class=\"headerlink\" title=\"14.7 yeild from\"></a>14.7 yeild from</h4><blockquote>\n<p>: yeild from Python3.3</p>\n</blockquote>\n<p> for <br><br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">chain</span><span class=\"params\">(*iterables)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> it <span class=\"keyword\">in</span> iterables:</span><br><span class=\"line\"><span class=\"meta\">... </span>        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> it:</span><br><span class=\"line\"><span class=\"meta\">... </span>            <span class=\"keyword\">yield</span> i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s = <span class=\"string\">'ABC'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t = tuple(range(<span class=\"number\">3</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(chain(s, t))</span><br><span class=\"line\">[<span class=\"string\">'A'</span>, <span class=\"string\">'B'</span>, <span class=\"string\">'C'</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br></pre></td></tr></table></figure>\n<p>chain</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">chain</span><span class=\"params\">(*iterables)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> iterables:</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">yield</span> <span class=\"keyword\">from</span> i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(chain(s, t))</span><br><span class=\"line\">[<span class=\"string\">'A'</span>, <span class=\"string\">'B'</span>, <span class=\"string\">'C'</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br></pre></td></tr></table></figure>\n<p>yield from i  for  </p>\n<h4 id=\"14-8-iter-\"><a href=\"#14-8-iter-\" class=\"headerlink\" title=\"14.8 iter()\"></a>14.8 iter()</h4><p> Python  x  iter(x), , iter()   </p>\n<p>iter  StopIteration </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> random <span class=\"keyword\">import</span> randint</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">d6</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> randint(<span class=\"number\">1</span>, <span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">d6_iter = iter(d6, <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> roll <span class=\"keyword\">in</span> d6_iter:</span><br><span class=\"line\">    print(roll)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"14-9-\"><a href=\"#14-9-\" class=\"headerlink\" title=\"14.9 \"></a>14.9 </h4><blockquote>\n<p>Python 2.5 PEP 342  Coroutines via Enhanced Generators<a href=\"https://www.python.org/dev/peps/pep-0342/\" target=\"_blank\" rel=\"noopener\">https://www.python.org/dev/peps/pep-0342/</a>  .send()  <strong></strong></p>\n</blockquote>\n<p> .__next__() .send()  yield .send()  .send()  yield .send()  .__next__() </p>\n<blockquote>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><p> yield </p>\n <div align=\"right\">David Beazley  A Curious Course on Coroutines and Concurrency</div>\n</li>\n</ul>\n</blockquote>\n<p> <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt=\"233\"></p>\n<h4 id=\"14-9-\"><a href=\"#14-9-\" class=\"headerlink\" title=\"14.9 \"></a>14.9 </h4><p>Python , Python grokPython </p>\n"},{"title":"Fluent Python ","date":"2018-05-07T10:38:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 10. Sequence Hacking, Hashing, and Slicing\n### : \n\n Vector2dPython\n\n -  \\_\\_len\\_\\_  \\_\\_getitem\\_\\_\n - \n -  Vector \n - \n - \n -  __getattr__  Vector2d \n\n\n#### Vector\n\n, vector\n\n```python  \nfrom array import array\nimport reprlib\nimport math\nclass Vector:\n    typecode = 'd'\n    def __init__(self, components):\n        # vector_components\n        # self._components\n        self._components = array(self.typecode, components)\n    def __iter__(self):\n        return iter(self._components)\n    def __repr__(self):\n        #  reprlib.repr()  self._components \n        components = reprlib.repr(self._components)\n        components = components[components.find('['):-1]\n        return 'Vector({})'.format(components)\n    def __str__(self):\n        return str(tuple(self))\n    def __bytes__(self):\n        return (bytes([ord(self.typecode)])+bytes(self._components))\n    def __eq__(self, other):\n        return tuple(self) == tuple(other)\n    def __abs__(self):\n        return math.sqrt(sum(x * x for x in self))\n    def __bool__(self):\n        return bool(abs(self))\n    @classmethod\n    def frombytes(cls, octets):\n        typecode = chr(octets[0])\n        memv = memoryview(octets[1:]).cast(typecode)\n        return cls(memv)\n\n```\n_ reprlib.repr  '...' _    \n\n_ repr()  \\_\\_repr\\_\\_ _ \n\n#### \n Python \nPython  \\_\\_len\\_\\_  \\_\\_getitem\\_\\_  SpamSpam \n\n_ _\n\n \\_\\_getitem\\_\\_  \\_\\_len\\_\\_\n\n#### Vector:\n\\_\\_len\\_\\_  \\_\\_getitem\\_\\_\n\n```python\nclass Vector:\n    # \n    # ...\n    def __len__(self):\n        return len(self._components)\n    def __getitem__(self, index):\n        return self._components[index]\n```\n Vector\n\n##### \n\n:\n\n```python   \n>>> class MySeq:\n...     def __getitem__(self, index):\n...         return index\n... \n>>> s = MySeq()\n>>> s[1]\n1\n>>> s[1:4]\nslice(1, 4, None)\n>>> s[1:4:2]\nslice(1, 4, 2)\n>>> s[1:4:2, 9]\n(slice(1, 4, 2), 9)\n>>> s[1:4:2, 7:9]\n(slice(1, 4, 2), slice(7, 9, None))\n\n```\n\nslice(1, 4, 2)  1, 4, step2()\n\nslice indices   \n\n> S.indices(len) -> (start, stop, stride)\n len  S startstopstride\n\n\nindices  startstop stride \n 5  'ABCDE'\n\n```python\n>>> slice(None, 10, 2).indices(5)\n(0, 5, 2)\n>>> slice(-3, None, None).indices(5)\n(2, 5, 1)\n```\n'ABCDE'[:10:2]  'ABCDE'[0:5:2]   \n'ABCDE'[-3:]  'ABCDE'[2:5:1]\n\n##### \\_\\_getitem\\_\\_\n\nVector\\_\\_getitem\\_\\_ :\n\n```python\ndef __getitem__(self, index):\n    cls = type(self)\n    if isinstance(index, slice):\n        return cls(self._components[index])\n    elif isinstance(index, numbers.Integral):   \n        return self._components[index]\n    else:\n        msg = '{cls.__name__} indices must be integers'\n        raise TypeError(msg.format(cls=cls))\n```\n\nslicegetitem_components  Vector \n\n#### Vector  \n\n\n```python\n>>> v = Vector(range(10))\n>>> v.x\n0.0\n>>> v.y, v.z, v.t\n(1.0, 2.0, 3.0)\n```\n\nPython:\n\n>   my_obj.x Python  my_obj  x my_obj.__class__  my_obj  __getattr__  self  'x'\n\nVector \\_\\_getattr\\_\\_:\n\n```python\nshortcut_names = 'xyzt'\ndef __getattr__(self, name):\n    cls = type(self)\n    if len(name) == 1:\n        pos = cls.shortcut_names.find(name)\n    if 0 <= pos < len(self._components):\n        return self._components[pos]\n    msg = '{.__name__!r} object has no attribute {!r}'\n    raise AttributeError(msg.format(cls, name)\n```\n\n\n\n```python\n>>> v = Vector(range(5))\n>>> v\nVector([0.0, 1.0, 2.0, 3.0, 4.0])\n>>> v.x\n0.0\n>>> v.x = 10\n>>> v.x\n10\n>>> v\nVector([0.0, 1.0, 2.0, 3.0, 4.0])\n```\n\nv.xVectorVectorx\n\n\\_\\_setattr\\_\\_\n```python\ndef __setattr__(self, name, value):\n    cls = type(self)\n    if len(name) == 1:\n        if name in cls.shortcut_names:\n            error = 'readonly attribute {attr_name!r}'\n        elif name.islower():\n            error = \"can't set attributes 'a' to 'z' in {cls_name!r}\"\n        else:\n            error = ''\n    if error:\n        msg = error.format(cls_name=cls.__name__, attr_name=name)\n        raise AttributeError(msg)\n    super().__setattr__(name, value)\n```\n\n\n __getattr__  __setattr__ \n __setitem__  v[0] = 1.1  __setattr__  v.x = 1.1 \n\n#### Vector \n\\_\\_hash\\_\\_\\_\\_eq\\_\\_\n^v[0] ^ v[1] ^ v[2]...reduce\n![Figure-10-1](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-1.jpg)\n\n\n```python\n>>> n = 0\n>>> for i in range(1, 6):\n...     n ^= i\n...\n>>> n\n1 >>> import functools\n>>> functools.reduce(lambda a, b: a^b, range(6))\n1 >>> import operator\n>>> functools.reduce(operator.xor, range(6))\n1\n```\n\n  lambda\n\n\\_\\_hash\\_\\_:\n\n```python\ndef __hash__(self):\n    hashes = (hash(x) for x in self._components)\n    return functools.reduce(operator.xor, hashes, 0)\n```\n\n![Figure-10-2](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-2.jpg)\n> mapreduce\n\n\\_\\_eq\\_\\_()\n```python\ndef __eq__(self, other):\n    if len(self) != len(other):\n        return False\n    for a, b in zip(self, other):\n        if a != b:\n            return False\n    return True\n\ndef __eq__(self, other):\n    return len(self) == len(other) and all(a == b for a, b in zip(self, other))\n```\n\n#### \nVector  \\_\\_format\\_\\_  Vector2d  Vector  n (n)  'p'  'h'\n\n\n```python\nimport itertools\ndef angle(self, n):\n    r = math.sqrt(sum(x * x for x in self[n:]))\n    a = math.atan2(r, self[n-1])\n    if (n == len(self) - 1) and (self[-1] < 0):\n        return math.pi * 2 - a\n    else:\n        return a\ndef angles(self):\n    return (self.angle(n) for n in range(1, len(self)))\ndef __format__(self, fmt_spec=''):\n    if fmt_spec.endswith('h'): # \n        fmt_spec = fmt_spec[:-1]\n        coords = itertools.chain([abs(self)],\n        self.angles())\n        outer_fmt = '<{}>'\n    else:\n        coords = self\n        outer_fmt = '({})'\n        components = (format(c, fmt_spec) for c in coords)\n    return outer_fmt.format(', '.join(components))\n```\n\n#### \n\n Python  Vector  Python \n\n\n\n","source":"_posts/fluent-python-10.md","raw":"title: Fluent Python \ndate: 2018-05-07 18:38:00\ntags:\n- Python\n- \n- pythonic\n- duck typing\n- slicing\n- reduce\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 10. Sequence Hacking, Hashing, and Slicing\n### : \n\n Vector2dPython\n\n -  \\_\\_len\\_\\_  \\_\\_getitem\\_\\_\n - \n -  Vector \n - \n - \n -  __getattr__  Vector2d \n\n\n#### Vector\n\n, vector\n\n```python  \nfrom array import array\nimport reprlib\nimport math\nclass Vector:\n    typecode = 'd'\n    def __init__(self, components):\n        # vector_components\n        # self._components\n        self._components = array(self.typecode, components)\n    def __iter__(self):\n        return iter(self._components)\n    def __repr__(self):\n        #  reprlib.repr()  self._components \n        components = reprlib.repr(self._components)\n        components = components[components.find('['):-1]\n        return 'Vector({})'.format(components)\n    def __str__(self):\n        return str(tuple(self))\n    def __bytes__(self):\n        return (bytes([ord(self.typecode)])+bytes(self._components))\n    def __eq__(self, other):\n        return tuple(self) == tuple(other)\n    def __abs__(self):\n        return math.sqrt(sum(x * x for x in self))\n    def __bool__(self):\n        return bool(abs(self))\n    @classmethod\n    def frombytes(cls, octets):\n        typecode = chr(octets[0])\n        memv = memoryview(octets[1:]).cast(typecode)\n        return cls(memv)\n\n```\n_ reprlib.repr  '...' _    \n\n_ repr()  \\_\\_repr\\_\\_ _ \n\n#### \n Python \nPython  \\_\\_len\\_\\_  \\_\\_getitem\\_\\_  SpamSpam \n\n_ _\n\n \\_\\_getitem\\_\\_  \\_\\_len\\_\\_\n\n#### Vector:\n\\_\\_len\\_\\_  \\_\\_getitem\\_\\_\n\n```python\nclass Vector:\n    # \n    # ...\n    def __len__(self):\n        return len(self._components)\n    def __getitem__(self, index):\n        return self._components[index]\n```\n Vector\n\n##### \n\n:\n\n```python   \n>>> class MySeq:\n...     def __getitem__(self, index):\n...         return index\n... \n>>> s = MySeq()\n>>> s[1]\n1\n>>> s[1:4]\nslice(1, 4, None)\n>>> s[1:4:2]\nslice(1, 4, 2)\n>>> s[1:4:2, 9]\n(slice(1, 4, 2), 9)\n>>> s[1:4:2, 7:9]\n(slice(1, 4, 2), slice(7, 9, None))\n\n```\n\nslice(1, 4, 2)  1, 4, step2()\n\nslice indices   \n\n> S.indices(len) -> (start, stop, stride)\n len  S startstopstride\n\n\nindices  startstop stride \n 5  'ABCDE'\n\n```python\n>>> slice(None, 10, 2).indices(5)\n(0, 5, 2)\n>>> slice(-3, None, None).indices(5)\n(2, 5, 1)\n```\n'ABCDE'[:10:2]  'ABCDE'[0:5:2]   \n'ABCDE'[-3:]  'ABCDE'[2:5:1]\n\n##### \\_\\_getitem\\_\\_\n\nVector\\_\\_getitem\\_\\_ :\n\n```python\ndef __getitem__(self, index):\n    cls = type(self)\n    if isinstance(index, slice):\n        return cls(self._components[index])\n    elif isinstance(index, numbers.Integral):   \n        return self._components[index]\n    else:\n        msg = '{cls.__name__} indices must be integers'\n        raise TypeError(msg.format(cls=cls))\n```\n\nslicegetitem_components  Vector \n\n#### Vector  \n\n\n```python\n>>> v = Vector(range(10))\n>>> v.x\n0.0\n>>> v.y, v.z, v.t\n(1.0, 2.0, 3.0)\n```\n\nPython:\n\n>   my_obj.x Python  my_obj  x my_obj.__class__  my_obj  __getattr__  self  'x'\n\nVector \\_\\_getattr\\_\\_:\n\n```python\nshortcut_names = 'xyzt'\ndef __getattr__(self, name):\n    cls = type(self)\n    if len(name) == 1:\n        pos = cls.shortcut_names.find(name)\n    if 0 <= pos < len(self._components):\n        return self._components[pos]\n    msg = '{.__name__!r} object has no attribute {!r}'\n    raise AttributeError(msg.format(cls, name)\n```\n\n\n\n```python\n>>> v = Vector(range(5))\n>>> v\nVector([0.0, 1.0, 2.0, 3.0, 4.0])\n>>> v.x\n0.0\n>>> v.x = 10\n>>> v.x\n10\n>>> v\nVector([0.0, 1.0, 2.0, 3.0, 4.0])\n```\n\nv.xVectorVectorx\n\n\\_\\_setattr\\_\\_\n```python\ndef __setattr__(self, name, value):\n    cls = type(self)\n    if len(name) == 1:\n        if name in cls.shortcut_names:\n            error = 'readonly attribute {attr_name!r}'\n        elif name.islower():\n            error = \"can't set attributes 'a' to 'z' in {cls_name!r}\"\n        else:\n            error = ''\n    if error:\n        msg = error.format(cls_name=cls.__name__, attr_name=name)\n        raise AttributeError(msg)\n    super().__setattr__(name, value)\n```\n\n\n __getattr__  __setattr__ \n __setitem__  v[0] = 1.1  __setattr__  v.x = 1.1 \n\n#### Vector \n\\_\\_hash\\_\\_\\_\\_eq\\_\\_\n^v[0] ^ v[1] ^ v[2]...reduce\n![Figure-10-1](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-1.jpg)\n\n\n```python\n>>> n = 0\n>>> for i in range(1, 6):\n...     n ^= i\n...\n>>> n\n1 >>> import functools\n>>> functools.reduce(lambda a, b: a^b, range(6))\n1 >>> import operator\n>>> functools.reduce(operator.xor, range(6))\n1\n```\n\n  lambda\n\n\\_\\_hash\\_\\_:\n\n```python\ndef __hash__(self):\n    hashes = (hash(x) for x in self._components)\n    return functools.reduce(operator.xor, hashes, 0)\n```\n\n![Figure-10-2](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-2.jpg)\n> mapreduce\n\n\\_\\_eq\\_\\_()\n```python\ndef __eq__(self, other):\n    if len(self) != len(other):\n        return False\n    for a, b in zip(self, other):\n        if a != b:\n            return False\n    return True\n\ndef __eq__(self, other):\n    return len(self) == len(other) and all(a == b for a, b in zip(self, other))\n```\n\n#### \nVector  \\_\\_format\\_\\_  Vector2d  Vector  n (n)  'p'  'h'\n\n\n```python\nimport itertools\ndef angle(self, n):\n    r = math.sqrt(sum(x * x for x in self[n:]))\n    a = math.atan2(r, self[n-1])\n    if (n == len(self) - 1) and (self[-1] < 0):\n        return math.pi * 2 - a\n    else:\n        return a\ndef angles(self):\n    return (self.angle(n) for n in range(1, len(self)))\ndef __format__(self, fmt_spec=''):\n    if fmt_spec.endswith('h'): # \n        fmt_spec = fmt_spec[:-1]\n        coords = itertools.chain([abs(self)],\n        self.angles())\n        outer_fmt = '<{}>'\n    else:\n        coords = self\n        outer_fmt = '({})'\n        components = (format(c, fmt_spec) for c in coords)\n    return outer_fmt.format(', '.join(components))\n```\n\n#### \n\n Python  Vector  Python \n\n\n\n","slug":"fluent-python-10","published":1,"updated":"2019-04-25T01:27:25.107Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6g90039dhyfcraxn4wk","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-10-Sequence-Hacking-Hashing-and-Slicing\"><a href=\"#Chapter-10-Sequence-Hacking-Hashing-and-Slicing\" class=\"headerlink\" title=\"Chapter 10. Sequence Hacking, Hashing, and Slicing\"></a>Chapter 10. Sequence Hacking, Hashing, and Slicing</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p> Vector2dPython</p>\n<ul>\n<li> __len__  __getitem__</li>\n<li></li>\n<li> Vector </li>\n<li></li>\n<li></li>\n<li> <strong>getattr</strong>  Vector2d </li>\n</ul>\n<h4 id=\"Vector\"><a href=\"#Vector\" class=\"headerlink\" title=\"Vector\"></a>Vector</h4><p>, vector</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> array <span class=\"keyword\">import</span> array</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector</span>:</span></span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, components)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># vector_components</span></span><br><span class=\"line\">        <span class=\"comment\"># self._components</span></span><br><span class=\"line\">        self._components = array(self.typecode, components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> iter(self._components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\">#  reprlib.repr()  self._components </span></span><br><span class=\"line\">        components = reprlib.repr(self._components)</span><br><span class=\"line\">        components = components[components.find(<span class=\"string\">'['</span>):<span class=\"number\">-1</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Vector(&#123;&#125;)'</span>.format(components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__str__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(tuple(self))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bytes__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (bytes([ord(self.typecode)])+bytes(self._components))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tuple(self) == tuple(other)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__abs__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.sqrt(sum(x * x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bool__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> bool(abs(self))</span><br><span class=\"line\"><span class=\"meta\">    @classmethod</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">frombytes</span><span class=\"params\">(cls, octets)</span>:</span></span><br><span class=\"line\">        typecode = chr(octets[<span class=\"number\">0</span>])</span><br><span class=\"line\">        memv = memoryview(octets[<span class=\"number\">1</span>:]).cast(typecode)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(memv)</span><br></pre></td></tr></table></figure>\n<p><em> reprlib.repr   </em>    </p>\n<p><em> repr()  \\</em>_repr__ _ </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python <br>Python  __len__  __getitem__  SpamSpam </p>\n<p><em> </em></p>\n<p> __getitem__  __len__</p>\n<h4 id=\"Vector-\"><a href=\"#Vector-\" class=\"headerlink\" title=\"Vector:\"></a>Vector:</h4><p>__len__  __getitem__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"comment\"># ...</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> len(self._components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[index]</span><br></pre></td></tr></table></figure>\n<p> Vector</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySeq</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>        <span class=\"keyword\">return</span> index</span><br><span class=\"line\"><span class=\"meta\">... </span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s = MySeq()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>]</span><br><span class=\"line\">slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"literal\">None</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>]</span><br><span class=\"line\">slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\">(slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>), <span class=\"number\">9</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>, <span class=\"number\">7</span>:<span class=\"number\">9</span>]</span><br><span class=\"line\">(slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>), slice(<span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"literal\">None</span>))</span><br></pre></td></tr></table></figure>\n<p>slice(1, 4, 2)  1, 4, step2()</p>\n<p>slice indices   </p>\n<blockquote>\n<p>S.indices(len) -&gt; (start, stop, stride)<br> len  S startstopstride<br></p>\n</blockquote>\n<p>indices  startstop stride <br> 5  ABCDE</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>slice(<span class=\"literal\">None</span>, <span class=\"number\">10</span>, <span class=\"number\">2</span>).indices(<span class=\"number\">5</span>)</span><br><span class=\"line\">(<span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>slice(<span class=\"number\">-3</span>, <span class=\"literal\">None</span>, <span class=\"literal\">None</span>).indices(<span class=\"number\">5</span>)</span><br><span class=\"line\">(<span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p>ABCDE[:10:2]  ABCDE[0:5:2]<br>ABCDE[-3:]  ABCDE[2:5:1]</p>\n<h5 id=\"-getitem-\"><a href=\"#-getitem-\" class=\"headerlink\" title=\"__getitem__\"></a>__getitem__</h5><p>Vector__getitem__ :</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> isinstance(index, slice):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(self._components[index])</span><br><span class=\"line\">    <span class=\"keyword\">elif</span> isinstance(index, numbers.Integral):   </span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[index]</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        msg = <span class=\"string\">'&#123;cls.__name__&#125; indices must be integers'</span></span><br><span class=\"line\">        <span class=\"keyword\">raise</span> TypeError(msg.format(cls=cls))</span><br></pre></td></tr></table></figure>\n<p>slicegetitem_components  Vector </p>\n<h4 id=\"Vector--\"><a href=\"#Vector--\" class=\"headerlink\" title=\"Vector  \"></a>Vector  </h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v = Vector(range(<span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.y, v.z, v.t</span><br><span class=\"line\">(<span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>)</span><br></pre></td></tr></table></figure>\n<p>Python:</p>\n<blockquote>\n<p>  my_obj.x Python  my_obj  x my_obj.<strong>class</strong>  my_obj  <strong>getattr</strong>  self  x</p>\n</blockquote>\n<p>Vector __getattr__:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shortcut_names = <span class=\"string\">'xyzt'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getattr__</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(name) == <span class=\"number\">1</span>:</span><br><span class=\"line\">        pos = cls.shortcut_names.find(name)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> &lt;= pos &lt; len(self._components):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[pos]</span><br><span class=\"line\">    msg = <span class=\"string\">'&#123;.__name__!r&#125; object has no attribute &#123;!r&#125;'</span></span><br><span class=\"line\">    <span class=\"keyword\">raise</span> AttributeError(msg.format(cls, name)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v = Vector(range(<span class=\"number\">5</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v</span><br><span class=\"line\">Vector([<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>, <span class=\"number\">4.0</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v</span><br><span class=\"line\">Vector([<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>, <span class=\"number\">4.0</span>])</span><br></pre></td></tr></table></figure>\n<p>v.xVectorVectorx</p>\n<p>__setattr__<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setattr__</span><span class=\"params\">(self, name, value)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(name) == <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> name <span class=\"keyword\">in</span> cls.shortcut_names:</span><br><span class=\"line\">            error = <span class=\"string\">'readonly attribute &#123;attr_name!r&#125;'</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> name.islower():</span><br><span class=\"line\">            error = <span class=\"string\">\"can't set attributes 'a' to 'z' in &#123;cls_name!r&#125;\"</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            error = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> error:</span><br><span class=\"line\">        msg = error.format(cls_name=cls.__name__, attr_name=name)</span><br><span class=\"line\">        <span class=\"keyword\">raise</span> AttributeError(msg)</span><br><span class=\"line\">    super().__setattr__(name, value)</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<p> <strong>getattr</strong>  <strong>setattr</strong> <br> <strong>setitem</strong>  v[0] = 1.1  <strong>setattr</strong>  v.x = 1.1 </p>\n<h4 id=\"Vector-\"><a href=\"#Vector-\" class=\"headerlink\" title=\"Vector \"></a>Vector </h4><p>__hash____eq__<br>^v[0] ^ v[1] ^ v[2]reduce<br><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-1.jpg\" alt=\"Figure-10-1\"></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>n = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\"><span class=\"meta\">... </span>    n ^= i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>n</span><br><span class=\"line\"><span class=\"number\">1</span> &gt;&gt;&gt; <span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>functools.reduce(<span class=\"keyword\">lambda</span> a, b: a^b, range(<span class=\"number\">6</span>))</span><br><span class=\"line\"><span class=\"number\">1</span> &gt;&gt;&gt; <span class=\"keyword\">import</span> operator</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>functools.reduce(operator.xor, range(<span class=\"number\">6</span>))</span><br><span class=\"line\"><span class=\"number\">1</span></span><br></pre></td></tr></table></figure></p>\n<p>  lambda</p>\n<p>__hash__:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__hash__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    hashes = (hash(x) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self._components)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> functools.reduce(operator.xor, hashes, <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-2.jpg\" alt=\"Figure-10-2\"></p>\n<blockquote>\n<p>mapreduce</p>\n</blockquote>\n<p>__eq__()<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(self) != len(other):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> a, b <span class=\"keyword\">in</span> zip(self, other):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> a != b:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> len(self) == len(other) <span class=\"keyword\">and</span> all(a == b <span class=\"keyword\">for</span> a, b <span class=\"keyword\">in</span> zip(self, other))</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Vector  __format__  Vector2d  Vector  n (n)  p  h<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> itertools</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angle</span><span class=\"params\">(self, n)</span>:</span></span><br><span class=\"line\">    r = math.sqrt(sum(x * x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self[n:]))</span><br><span class=\"line\">    a = math.atan2(r, self[n<span class=\"number\">-1</span>])</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n == len(self) - <span class=\"number\">1</span>) <span class=\"keyword\">and</span> (self[<span class=\"number\">-1</span>] &lt; <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.pi * <span class=\"number\">2</span> - a</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angles</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (self.angle(n) <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, len(self)))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> fmt_spec.endswith(<span class=\"string\">'h'</span>): <span class=\"comment\"># </span></span><br><span class=\"line\">        fmt_spec = fmt_spec[:<span class=\"number\">-1</span>]</span><br><span class=\"line\">        coords = itertools.chain([abs(self)],</span><br><span class=\"line\">        self.angles())</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'&lt;&#123;&#125;&gt;'</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        coords = self</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'(&#123;&#125;)'</span></span><br><span class=\"line\">        components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> coords)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> outer_fmt.format(<span class=\"string\">', '</span>.join(components))</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python  Vector  Python </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-10-Sequence-Hacking-Hashing-and-Slicing\"><a href=\"#Chapter-10-Sequence-Hacking-Hashing-and-Slicing\" class=\"headerlink\" title=\"Chapter 10. Sequence Hacking, Hashing, and Slicing\"></a>Chapter 10. Sequence Hacking, Hashing, and Slicing</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p> Vector2dPython</p>\n<ul>\n<li> __len__  __getitem__</li>\n<li></li>\n<li> Vector </li>\n<li></li>\n<li></li>\n<li> <strong>getattr</strong>  Vector2d </li>\n</ul>\n<h4 id=\"Vector\"><a href=\"#Vector\" class=\"headerlink\" title=\"Vector\"></a>Vector</h4><p>, vector</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> array <span class=\"keyword\">import</span> array</span><br><span class=\"line\"><span class=\"keyword\">import</span> reprlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector</span>:</span></span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, components)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># vector_components</span></span><br><span class=\"line\">        <span class=\"comment\"># self._components</span></span><br><span class=\"line\">        self._components = array(self.typecode, components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> iter(self._components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\">#  reprlib.repr()  self._components </span></span><br><span class=\"line\">        components = reprlib.repr(self._components)</span><br><span class=\"line\">        components = components[components.find(<span class=\"string\">'['</span>):<span class=\"number\">-1</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Vector(&#123;&#125;)'</span>.format(components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__str__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(tuple(self))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bytes__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (bytes([ord(self.typecode)])+bytes(self._components))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tuple(self) == tuple(other)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__abs__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.sqrt(sum(x * x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self))</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bool__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> bool(abs(self))</span><br><span class=\"line\"><span class=\"meta\">    @classmethod</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">frombytes</span><span class=\"params\">(cls, octets)</span>:</span></span><br><span class=\"line\">        typecode = chr(octets[<span class=\"number\">0</span>])</span><br><span class=\"line\">        memv = memoryview(octets[<span class=\"number\">1</span>:]).cast(typecode)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(memv)</span><br></pre></td></tr></table></figure>\n<p><em> reprlib.repr   </em>    </p>\n<p><em> repr()  \\</em>_repr__ _ </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python <br>Python  __len__  __getitem__  SpamSpam </p>\n<p><em> </em></p>\n<p> __getitem__  __len__</p>\n<h4 id=\"Vector-\"><a href=\"#Vector-\" class=\"headerlink\" title=\"Vector:\"></a>Vector:</h4><p>__len__  __getitem__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"comment\"># ...</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> len(self._components)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[index]</span><br></pre></td></tr></table></figure>\n<p> Vector</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySeq</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>        <span class=\"keyword\">return</span> index</span><br><span class=\"line\"><span class=\"meta\">... </span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s = MySeq()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>]</span><br><span class=\"line\">slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"literal\">None</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>]</span><br><span class=\"line\">slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>, <span class=\"number\">9</span>]</span><br><span class=\"line\">(slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>), <span class=\"number\">9</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s[<span class=\"number\">1</span>:<span class=\"number\">4</span>:<span class=\"number\">2</span>, <span class=\"number\">7</span>:<span class=\"number\">9</span>]</span><br><span class=\"line\">(slice(<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">2</span>), slice(<span class=\"number\">7</span>, <span class=\"number\">9</span>, <span class=\"literal\">None</span>))</span><br></pre></td></tr></table></figure>\n<p>slice(1, 4, 2)  1, 4, step2()</p>\n<p>slice indices   </p>\n<blockquote>\n<p>S.indices(len) -&gt; (start, stop, stride)<br> len  S startstopstride<br></p>\n</blockquote>\n<p>indices  startstop stride <br> 5  ABCDE</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>slice(<span class=\"literal\">None</span>, <span class=\"number\">10</span>, <span class=\"number\">2</span>).indices(<span class=\"number\">5</span>)</span><br><span class=\"line\">(<span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>slice(<span class=\"number\">-3</span>, <span class=\"literal\">None</span>, <span class=\"literal\">None</span>).indices(<span class=\"number\">5</span>)</span><br><span class=\"line\">(<span class=\"number\">2</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p>ABCDE[:10:2]  ABCDE[0:5:2]<br>ABCDE[-3:]  ABCDE[2:5:1]</p>\n<h5 id=\"-getitem-\"><a href=\"#-getitem-\" class=\"headerlink\" title=\"__getitem__\"></a>__getitem__</h5><p>Vector__getitem__ :</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, index)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> isinstance(index, slice):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(self._components[index])</span><br><span class=\"line\">    <span class=\"keyword\">elif</span> isinstance(index, numbers.Integral):   </span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[index]</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        msg = <span class=\"string\">'&#123;cls.__name__&#125; indices must be integers'</span></span><br><span class=\"line\">        <span class=\"keyword\">raise</span> TypeError(msg.format(cls=cls))</span><br></pre></td></tr></table></figure>\n<p>slicegetitem_components  Vector </p>\n<h4 id=\"Vector--\"><a href=\"#Vector--\" class=\"headerlink\" title=\"Vector  \"></a>Vector  </h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v = Vector(range(<span class=\"number\">10</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.y, v.z, v.t</span><br><span class=\"line\">(<span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>)</span><br></pre></td></tr></table></figure>\n<p>Python:</p>\n<blockquote>\n<p>  my_obj.x Python  my_obj  x my_obj.<strong>class</strong>  my_obj  <strong>getattr</strong>  self  x</p>\n</blockquote>\n<p>Vector __getattr__:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shortcut_names = <span class=\"string\">'xyzt'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getattr__</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(name) == <span class=\"number\">1</span>:</span><br><span class=\"line\">        pos = cls.shortcut_names.find(name)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> &lt;= pos &lt; len(self._components):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self._components[pos]</span><br><span class=\"line\">    msg = <span class=\"string\">'&#123;.__name__!r&#125; object has no attribute &#123;!r&#125;'</span></span><br><span class=\"line\">    <span class=\"keyword\">raise</span> AttributeError(msg.format(cls, name)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v = Vector(range(<span class=\"number\">5</span>))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v</span><br><span class=\"line\">Vector([<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>, <span class=\"number\">4.0</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v.x</span><br><span class=\"line\"><span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v</span><br><span class=\"line\">Vector([<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">2.0</span>, <span class=\"number\">3.0</span>, <span class=\"number\">4.0</span>])</span><br></pre></td></tr></table></figure>\n<p>v.xVectorVectorx</p>\n<p>__setattr__<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setattr__</span><span class=\"params\">(self, name, value)</span>:</span></span><br><span class=\"line\">    cls = type(self)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(name) == <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> name <span class=\"keyword\">in</span> cls.shortcut_names:</span><br><span class=\"line\">            error = <span class=\"string\">'readonly attribute &#123;attr_name!r&#125;'</span></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> name.islower():</span><br><span class=\"line\">            error = <span class=\"string\">\"can't set attributes 'a' to 'z' in &#123;cls_name!r&#125;\"</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            error = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> error:</span><br><span class=\"line\">        msg = error.format(cls_name=cls.__name__, attr_name=name)</span><br><span class=\"line\">        <span class=\"keyword\">raise</span> AttributeError(msg)</span><br><span class=\"line\">    super().__setattr__(name, value)</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<p> <strong>getattr</strong>  <strong>setattr</strong> <br> <strong>setitem</strong>  v[0] = 1.1  <strong>setattr</strong>  v.x = 1.1 </p>\n<h4 id=\"Vector-\"><a href=\"#Vector-\" class=\"headerlink\" title=\"Vector \"></a>Vector </h4><p>__hash____eq__<br>^v[0] ^ v[1] ^ v[2]reduce<br><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-1.jpg\" alt=\"Figure-10-1\"></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>n = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\"><span class=\"meta\">... </span>    n ^= i</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>n</span><br><span class=\"line\"><span class=\"number\">1</span> &gt;&gt;&gt; <span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>functools.reduce(<span class=\"keyword\">lambda</span> a, b: a^b, range(<span class=\"number\">6</span>))</span><br><span class=\"line\"><span class=\"number\">1</span> &gt;&gt;&gt; <span class=\"keyword\">import</span> operator</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>functools.reduce(operator.xor, range(<span class=\"number\">6</span>))</span><br><span class=\"line\"><span class=\"number\">1</span></span><br></pre></td></tr></table></figure></p>\n<p>  lambda</p>\n<p>__hash__:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__hash__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    hashes = (hash(x) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self._components)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> functools.reduce(operator.xor, hashes, <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-10-2.jpg\" alt=\"Figure-10-2\"></p>\n<blockquote>\n<p>mapreduce</p>\n</blockquote>\n<p>__eq__()<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(self) != len(other):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> a, b <span class=\"keyword\">in</span> zip(self, other):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> a != b:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> len(self) == len(other) <span class=\"keyword\">and</span> all(a == b <span class=\"keyword\">for</span> a, b <span class=\"keyword\">in</span> zip(self, other))</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Vector  __format__  Vector2d  Vector  n (n)  p  h<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> itertools</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angle</span><span class=\"params\">(self, n)</span>:</span></span><br><span class=\"line\">    r = math.sqrt(sum(x * x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> self[n:]))</span><br><span class=\"line\">    a = math.atan2(r, self[n<span class=\"number\">-1</span>])</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n == len(self) - <span class=\"number\">1</span>) <span class=\"keyword\">and</span> (self[<span class=\"number\">-1</span>] &lt; <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.pi * <span class=\"number\">2</span> - a</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angles</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (self.angle(n) <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, len(self)))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> fmt_spec.endswith(<span class=\"string\">'h'</span>): <span class=\"comment\"># </span></span><br><span class=\"line\">        fmt_spec = fmt_spec[:<span class=\"number\">-1</span>]</span><br><span class=\"line\">        coords = itertools.chain([abs(self)],</span><br><span class=\"line\">        self.angles())</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'&lt;&#123;&#125;&gt;'</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        coords = self</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'(&#123;&#125;)'</span></span><br><span class=\"line\">        components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> coords)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> outer_fmt.format(<span class=\"string\">', '</span>.join(components))</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python  Vector  Python </p>\n"},{"title":"fluent python ","date":"2017-11-23T13:25:19.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 3. Dictionaries and Sets ###\n###  ###\ndict  Python \n\n\\_\\_builtins\\_\\_.\\_\\_dict\\_\\_     \nPython python   \n   \n\n*\n\n####  ####\n![Figure-3-1](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png)\ncollections.abc  Mapping  MutableMapping ,\n dict    \n dict collections.User.Dict ****\n\n dict ****\n##### \n \\_\\_hash\\_\\_() \\_\\_eq\\_\\_() \n\nPython[https://docs.python.org/3/glossary.html#term-hashable](https://docs.python.org/3/glossary.html#term-hashable)    \n\\_\\_eq\\_\\_\n##### \n\n```python\n>>> a = dict(one=1, two=2, three=3)\n>>> b = {'one': 1, 'two': 2, 'three': 3}\n>>> c = dict(zip(['one', 'two', 'three'], [1, 2, 3]))\n>>> d = dict([('two', 2), ('one', 1), ('three', 3)])\n>>> e = dict({'three': 3, 'one': 1, 'two': 2})\n>>> a == b == c == d == e\nTrue\n```\n, \n\n```python\n>>> DIAL_CODES = [ \n...  (86, 'China'),\n...  (91, 'India'),\n...  (1, 'United States'),\n...  (62, 'Indonesia'),\n...  (55, 'Brazil'),\n...  (92, 'Pakistan'),\n...  (880, 'Bangladesh'),\n...  (234, 'Nigeria'),\n...  (7, 'Russia'),\n...  (81, 'Japan'),\n... ]\n>>> country_code = {country: code for code, country in DIAL_CODES}\n\n```\n\n####  ####\n\n setdefault()\n\n   \n2.1:\n   \n```python\nmy_dict.setdefault(key, []).append(new_value)\n\n```\n2.2  \n\n```python\nif key not in my_dict:\n\tmy_dict[key] = []\nmy_dict[key].append(new_value)\n\n```\n\n2.12.22.12.22-3(key)\n\n#### (flexible key lookup) ####\n\ndefaultdictdict,\\_\\_missing\\_\\_\n##### defaultdict #####\n\ndd = defaultdict(list),dd[key]keydefaultdictlist()keydd   \ndefault_factory\n\n#####  \\_\\_missing\\_\\_() #####\n\ndict\\_\\_missing\\_\\_\\_\\_getitem\\_\\_\\_\\_missing\\_\\_\n\n####  ####\n- collections.OrderedDict:\n- collections,ChainMap:\n- collections.Counter: , most_common(n) n\n- collections.UserDict: dictPython\n\n#### UserDict ####\n UserDict  dict  UserDict \n\n```python\nimport collections\nclass StrKeyDict(collections.UserDict):\n    def __missing__(self, key):\n        if isinstance(key, str):\n            raise KeyError(key)\n        return self[str(key)]\n    def __contains__(self, key):\n        return str(key) in self.data\n    def __setitem__(self, key, item):\n        self.data[str(key)] = item\n```\n\nUserDict data,dict \n\n####  ####\n\n\n\nPython 3.3 types  MappingProxyType\n\n\\*      \n   \n\n\n\n####  ####\n\n\n a  ba | b a & b  a - b  Python \n\n set  frozenset\n   \n\n##### set Literals: #####\n{12..}set()\n\n##### () #####\n\n```python\n{chr(i) for i in range(32, 256) if 'SIGN' in name(chr(i),'')}\n```\n\n#####  #####\n\n![Figure-3-2](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png)\n\n\n#### dictset ####\nPython   \n \n- Python\n\t\n\n##### dict #####\n\n- hashable\n\t   \n\t(1)  hash()  __hash__()    \n\t(2)  __eq__()    \n\t(3)  a == b  hash(a) == hash(b)  id() \n\n- \n\t****\n\n- \n\t\n\n- \n\thash\n\t\n- \n\t****\n\n##### set #####\nsetdict:   \n\n- \n- \n- \n- \n- \n\n","source":"_posts/fluent-python-3.md","raw":"title: fluent python \ndate: 2017-11-23 21:25:19\ntags:\n- Python\n- dict\n- set\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 3. Dictionaries and Sets ###\n###  ###\ndict  Python \n\n\\_\\_builtins\\_\\_.\\_\\_dict\\_\\_     \nPython python   \n   \n\n*\n\n####  ####\n![Figure-3-1](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png)\ncollections.abc  Mapping  MutableMapping ,\n dict    \n dict collections.User.Dict ****\n\n dict ****\n##### \n \\_\\_hash\\_\\_() \\_\\_eq\\_\\_() \n\nPython[https://docs.python.org/3/glossary.html#term-hashable](https://docs.python.org/3/glossary.html#term-hashable)    \n\\_\\_eq\\_\\_\n##### \n\n```python\n>>> a = dict(one=1, two=2, three=3)\n>>> b = {'one': 1, 'two': 2, 'three': 3}\n>>> c = dict(zip(['one', 'two', 'three'], [1, 2, 3]))\n>>> d = dict([('two', 2), ('one', 1), ('three', 3)])\n>>> e = dict({'three': 3, 'one': 1, 'two': 2})\n>>> a == b == c == d == e\nTrue\n```\n, \n\n```python\n>>> DIAL_CODES = [ \n...  (86, 'China'),\n...  (91, 'India'),\n...  (1, 'United States'),\n...  (62, 'Indonesia'),\n...  (55, 'Brazil'),\n...  (92, 'Pakistan'),\n...  (880, 'Bangladesh'),\n...  (234, 'Nigeria'),\n...  (7, 'Russia'),\n...  (81, 'Japan'),\n... ]\n>>> country_code = {country: code for code, country in DIAL_CODES}\n\n```\n\n####  ####\n\n setdefault()\n\n   \n2.1:\n   \n```python\nmy_dict.setdefault(key, []).append(new_value)\n\n```\n2.2  \n\n```python\nif key not in my_dict:\n\tmy_dict[key] = []\nmy_dict[key].append(new_value)\n\n```\n\n2.12.22.12.22-3(key)\n\n#### (flexible key lookup) ####\n\ndefaultdictdict,\\_\\_missing\\_\\_\n##### defaultdict #####\n\ndd = defaultdict(list),dd[key]keydefaultdictlist()keydd   \ndefault_factory\n\n#####  \\_\\_missing\\_\\_() #####\n\ndict\\_\\_missing\\_\\_\\_\\_getitem\\_\\_\\_\\_missing\\_\\_\n\n####  ####\n- collections.OrderedDict:\n- collections,ChainMap:\n- collections.Counter: , most_common(n) n\n- collections.UserDict: dictPython\n\n#### UserDict ####\n UserDict  dict  UserDict \n\n```python\nimport collections\nclass StrKeyDict(collections.UserDict):\n    def __missing__(self, key):\n        if isinstance(key, str):\n            raise KeyError(key)\n        return self[str(key)]\n    def __contains__(self, key):\n        return str(key) in self.data\n    def __setitem__(self, key, item):\n        self.data[str(key)] = item\n```\n\nUserDict data,dict \n\n####  ####\n\n\n\nPython 3.3 types  MappingProxyType\n\n\\*      \n   \n\n\n\n####  ####\n\n\n a  ba | b a & b  a - b  Python \n\n set  frozenset\n   \n\n##### set Literals: #####\n{12..}set()\n\n##### () #####\n\n```python\n{chr(i) for i in range(32, 256) if 'SIGN' in name(chr(i),'')}\n```\n\n#####  #####\n\n![Figure-3-2](https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png)\n\n\n#### dictset ####\nPython   \n \n- Python\n\t\n\n##### dict #####\n\n- hashable\n\t   \n\t(1)  hash()  __hash__()    \n\t(2)  __eq__()    \n\t(3)  a == b  hash(a) == hash(b)  id() \n\n- \n\t****\n\n- \n\t\n\n- \n\thash\n\t\n- \n\t****\n\n##### set #####\nsetdict:   \n\n- \n- \n- \n- \n- \n\n","slug":"fluent-python-3","published":1,"updated":"2019-04-25T01:27:24.956Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6ga003adhyfr6fuwcnh","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-3-Dictionaries-and-Sets\"><a href=\"#Chapter-3-Dictionaries-and-Sets\" class=\"headerlink\" title=\"Chapter 3. Dictionaries and Sets\"></a>Chapter 3. Dictionaries and Sets</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>dict  Python <br><br>__builtins__.__dict__<br>Python python<br>   </p>\n<p>*</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png\" alt=\"Figure-3-1\"><br>collections.abc  Mapping  MutableMapping ,<br> dict <br> dict collections.User.Dict <strong></strong></p>\n<p> dict <strong></strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> __hash__() __eq__() </p>\n<p>Python<a href=\"https://docs.python.org/3/glossary.html#term-hashable\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/glossary.html#term-hashable</a><br>__eq__</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = dict(one=<span class=\"number\">1</span>, two=<span class=\"number\">2</span>, three=<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = &#123;<span class=\"string\">'one'</span>: <span class=\"number\">1</span>, <span class=\"string\">'two'</span>: <span class=\"number\">2</span>, <span class=\"string\">'three'</span>: <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c = dict(zip([<span class=\"string\">'one'</span>, <span class=\"string\">'two'</span>, <span class=\"string\">'three'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>d = dict([(<span class=\"string\">'two'</span>, <span class=\"number\">2</span>), (<span class=\"string\">'one'</span>, <span class=\"number\">1</span>), (<span class=\"string\">'three'</span>, <span class=\"number\">3</span>)])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>e = dict(&#123;<span class=\"string\">'three'</span>: <span class=\"number\">3</span>, <span class=\"string\">'one'</span>: <span class=\"number\">1</span>, <span class=\"string\">'two'</span>: <span class=\"number\">2</span>&#125;)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a == b == c == d == e</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n<p>, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>DIAL_CODES = [ </span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">86</span>, <span class=\"string\">'China'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">91</span>, <span class=\"string\">'India'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">1</span>, <span class=\"string\">'United States'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">62</span>, <span class=\"string\">'Indonesia'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">55</span>, <span class=\"string\">'Brazil'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">92</span>, <span class=\"string\">'Pakistan'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">880</span>, <span class=\"string\">'Bangladesh'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">234</span>, <span class=\"string\">'Nigeria'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">7</span>, <span class=\"string\">'Russia'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">81</span>, <span class=\"string\">'Japan'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>country_code = &#123;country: code <span class=\"keyword\">for</span> code, country <span class=\"keyword\">in</span> DIAL_CODES&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> setdefault()</p>\n<p><br>2.1:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_dict.setdefault(key, []).append(new_value)</span><br></pre></td></tr></table></figure>\n<p>2.2  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> key <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> my_dict:</span><br><span class=\"line\">\tmy_dict[key] = []</span><br><span class=\"line\">my_dict[key].append(new_value)</span><br></pre></td></tr></table></figure>\n<p>2.12.22.12.22-3(key)</p>\n<h4 id=\"-flexible-key-lookup\"><a href=\"#-flexible-key-lookup\" class=\"headerlink\" title=\"(flexible key lookup)\"></a>(flexible key lookup)</h4><p>defaultdictdict,__missing__</p>\n<h5 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h5><p>dd = defaultdict(list),dd[key]keydefaultdictlist()keydd<br>default_factory</p>\n<h5 id=\"-missing\"><a href=\"#-missing\" class=\"headerlink\" title=\" __missing__()\"></a> __missing__()</h5><p>dict__missing____getitem____missing__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>collections.OrderedDict:</li>\n<li>collections,ChainMap:</li>\n<li>collections.Counter: , most_common(n) n</li>\n<li>collections.UserDict: dictPython</li>\n</ul>\n<h4 id=\"UserDict\"><a href=\"#UserDict\" class=\"headerlink\" title=\"UserDict\"></a>UserDict</h4><p> UserDict  dict  UserDict </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> collections</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrKeyDict</span><span class=\"params\">(collections.UserDict)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__missing__</span><span class=\"params\">(self, key)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> isinstance(key, str):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> KeyError(key)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self[str(key)]</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__contains__</span><span class=\"params\">(self, key)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(key) <span class=\"keyword\">in</span> self.data</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setitem__</span><span class=\"params\">(self, key, item)</span>:</span></span><br><span class=\"line\">        self.data[str(key)] = item</span><br></pre></td></tr></table></figure>\n<p>UserDict data,dict </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>Python 3.3 types  MappingProxyType</p>\n<p>* <br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p> a  ba | b a &amp; b  a - b  Python </p>\n<p> set  frozenset<br>   </p>\n<h5 id=\"set-Literals-\"><a href=\"#set-Literals-\" class=\"headerlink\" title=\"set Literals:\"></a>set Literals:</h5><p>{12..}set()</p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;chr(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">32</span>, <span class=\"number\">256</span>) <span class=\"keyword\">if</span> <span class=\"string\">'SIGN'</span> <span class=\"keyword\">in</span> name(chr(i),<span class=\"string\">''</span>)&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png\" alt=\"Figure-3-2\"></p>\n<h4 id=\"dictset\"><a href=\"#dictset\" class=\"headerlink\" title=\"dictset\"></a>dictset</h4><p>Python   </p>\n<ul>\n<li>Python<br>  </li>\n</ul>\n<h5 id=\"dict\"><a href=\"#dict\" class=\"headerlink\" title=\"dict\"></a>dict</h5><ul>\n<li><p>hashable<br>  <br>  (1)  hash()  <strong>hash</strong>() <br>  (2)  <strong>eq</strong>() <br>  (3)  a == b  hash(a) == hash(b)  id() </p>\n</li>\n<li><p><br>  <strong></strong></p>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p><br>  hash</p>\n</li>\n<li><p><br>  <strong></strong></p>\n</li>\n</ul>\n<h5 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h5><p>setdict:   </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-3-Dictionaries-and-Sets\"><a href=\"#Chapter-3-Dictionaries-and-Sets\" class=\"headerlink\" title=\"Chapter 3. Dictionaries and Sets\"></a>Chapter 3. Dictionaries and Sets</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>dict  Python <br><br>__builtins__.__dict__<br>Python python<br>   </p>\n<p>*</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png\" alt=\"Figure-3-1\"><br>collections.abc  Mapping  MutableMapping ,<br> dict <br> dict collections.User.Dict <strong></strong></p>\n<p> dict <strong></strong></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> __hash__() __eq__() </p>\n<p>Python<a href=\"https://docs.python.org/3/glossary.html#term-hashable\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/glossary.html#term-hashable</a><br>__eq__</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = dict(one=<span class=\"number\">1</span>, two=<span class=\"number\">2</span>, three=<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = &#123;<span class=\"string\">'one'</span>: <span class=\"number\">1</span>, <span class=\"string\">'two'</span>: <span class=\"number\">2</span>, <span class=\"string\">'three'</span>: <span class=\"number\">3</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c = dict(zip([<span class=\"string\">'one'</span>, <span class=\"string\">'two'</span>, <span class=\"string\">'three'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]))</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>d = dict([(<span class=\"string\">'two'</span>, <span class=\"number\">2</span>), (<span class=\"string\">'one'</span>, <span class=\"number\">1</span>), (<span class=\"string\">'three'</span>, <span class=\"number\">3</span>)])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>e = dict(&#123;<span class=\"string\">'three'</span>: <span class=\"number\">3</span>, <span class=\"string\">'one'</span>: <span class=\"number\">1</span>, <span class=\"string\">'two'</span>: <span class=\"number\">2</span>&#125;)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a == b == c == d == e</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n<p>, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>DIAL_CODES = [ </span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">86</span>, <span class=\"string\">'China'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">91</span>, <span class=\"string\">'India'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">1</span>, <span class=\"string\">'United States'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">62</span>, <span class=\"string\">'Indonesia'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">55</span>, <span class=\"string\">'Brazil'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">92</span>, <span class=\"string\">'Pakistan'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">880</span>, <span class=\"string\">'Bangladesh'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">234</span>, <span class=\"string\">'Nigeria'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">7</span>, <span class=\"string\">'Russia'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span> (<span class=\"number\">81</span>, <span class=\"string\">'Japan'</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>country_code = &#123;country: code <span class=\"keyword\">for</span> code, country <span class=\"keyword\">in</span> DIAL_CODES&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> setdefault()</p>\n<p><br>2.1:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">my_dict.setdefault(key, []).append(new_value)</span><br></pre></td></tr></table></figure>\n<p>2.2  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> key <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> my_dict:</span><br><span class=\"line\">\tmy_dict[key] = []</span><br><span class=\"line\">my_dict[key].append(new_value)</span><br></pre></td></tr></table></figure>\n<p>2.12.22.12.22-3(key)</p>\n<h4 id=\"-flexible-key-lookup\"><a href=\"#-flexible-key-lookup\" class=\"headerlink\" title=\"(flexible key lookup)\"></a>(flexible key lookup)</h4><p>defaultdictdict,__missing__</p>\n<h5 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h5><p>dd = defaultdict(list),dd[key]keydefaultdictlist()keydd<br>default_factory</p>\n<h5 id=\"-missing\"><a href=\"#-missing\" class=\"headerlink\" title=\" __missing__()\"></a> __missing__()</h5><p>dict__missing____getitem____missing__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>collections.OrderedDict:</li>\n<li>collections,ChainMap:</li>\n<li>collections.Counter: , most_common(n) n</li>\n<li>collections.UserDict: dictPython</li>\n</ul>\n<h4 id=\"UserDict\"><a href=\"#UserDict\" class=\"headerlink\" title=\"UserDict\"></a>UserDict</h4><p> UserDict  dict  UserDict </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> collections</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StrKeyDict</span><span class=\"params\">(collections.UserDict)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__missing__</span><span class=\"params\">(self, key)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> isinstance(key, str):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> KeyError(key)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self[str(key)]</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__contains__</span><span class=\"params\">(self, key)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(key) <span class=\"keyword\">in</span> self.data</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setitem__</span><span class=\"params\">(self, key, item)</span>:</span></span><br><span class=\"line\">        self.data[str(key)] = item</span><br></pre></td></tr></table></figure>\n<p>UserDict data,dict </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>Python 3.3 types  MappingProxyType</p>\n<p>* <br><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p> a  ba | b a &amp; b  a - b  Python </p>\n<p> set  frozenset<br>   </p>\n<h5 id=\"set-Literals-\"><a href=\"#set-Literals-\" class=\"headerlink\" title=\"set Literals:\"></a>set Literals:</h5><p>{12..}set()</p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;chr(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">32</span>, <span class=\"number\">256</span>) <span class=\"keyword\">if</span> <span class=\"string\">'SIGN'</span> <span class=\"keyword\">in</span> name(chr(i),<span class=\"string\">''</span>)&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><img src=\"https://raw.githubusercontent.com/aldslvda/blog-images/master/fluent-python-3.1.png\" alt=\"Figure-3-2\"></p>\n<h4 id=\"dictset\"><a href=\"#dictset\" class=\"headerlink\" title=\"dictset\"></a>dictset</h4><p>Python   </p>\n<ul>\n<li>Python<br>  </li>\n</ul>\n<h5 id=\"dict\"><a href=\"#dict\" class=\"headerlink\" title=\"dict\"></a>dict</h5><ul>\n<li><p>hashable<br>  <br>  (1)  hash()  <strong>hash</strong>() <br>  (2)  <strong>eq</strong>() <br>  (3)  a == b  hash(a) == hash(b)  id() </p>\n</li>\n<li><p><br>  <strong></strong></p>\n</li>\n<li><p><br>  </p>\n</li>\n<li><p><br>  hash</p>\n</li>\n<li><p><br>  <strong></strong></p>\n</li>\n</ul>\n<h5 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h5><p>setdict:   </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n"},{"title":"fluent python ","date":"2017-11-26T16:03:27.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 4. Texts versus Bytes ###\n### .   ###\n\\* : Python3\nPython 3 (text)(Bytes)Unicode\n\n####  ####\n\nPython3strUnicode, Python2str\nUnicode :   \n\n-  0~1 114 111(0x10fff) Unicode 4~6U+ A  U+0041 U+20AC U+1D11E Unicode 6.3  Python 3.4 10% \n\n-  UTF-8 AU+0041 \\x41 UTF-16LE \\x41\\x00U+20AC UTF-8 \\xe2\\x82\\xac UTF-16LE \\xac\\x20\n\n(code points)(Bytes)\n\n####  ####\n1. Python Python 3  bytes  Python 2.6 bytearray    \n2. bytes  bytearray  0~255(0x0~0xff)   \nbytesbytes1bytes.     \n3. bytearray  bytearray    \n4. format  format_map Unicode casefoldisdecimalisidentifierisnumericisprintable  encodestr  bytes  bytearray  endswithreplacestriptranslateupper bytes  str re .   \n5.  str  fromhex: \n\n```python\nbytes.fromhex('31 4B CE A9')\nb'1K\\xce\\xa9'\n```\n\nbytesbytearray:\n\n- strencoding\n- 0~0xff\n- (buffer protocol, bytes, bytearray, memory view, array.array)\n\n#### (struct and memory view) ####\nstruct bytesbytearray  memoryview ,    \nmemoryview    \n\n```python\nimport struct\nfmt = '<3s3sHH' \n#< 3s3s  3 HH  16 \nwith open('filter.gif', 'rb') as fp:\n    img = memoryview(fp.read()) \n    #\n\nheader = img[:10] \n#header\nbytes(header) \n# b'GIF89a+\\x02\\xe6\\x00'\nstruct.unpack(fmt, header) \n# (b'GIF', b'89a', 555, 230) ,,,\ndel header \n# , \ndel img\n```\n\n####  ####\nPython  100 codec, encoder/decoder 'utf_8''utf8''utf-8'  'U8'open()str.encode()bytes.decode()  encoding \n\n```python\n>>> for codec in ['latin_1', 'utf_8', 'utf_16']:\n... print(codec, 'El Nio'.encode(codec), sep='\\t')\n...\nlatin_1 b'El Ni\\xf1o'\nutf_8 b'El Ni\\xc3\\xb1o'\nutf_16 b'\\xff\\xfeE\\x00l\\x00 \\x00N\\x00i\\x00\\xf1\\x00o\\x00'\n```\n\n ASCII  GB2312 UnicodeUTF  Unicode   \n\n:\n\n- latin1:  cp1252  Unicodelatin1 cp1252 \n- cp1252:Microsoft  latin1 Windows ANSI ANSI \n- cp437: IBM PC  latin1 \n- gb2312:\n- utf-8: Web  8   ASCII  ASCII  UTF-8 \n- utf-16le: UTF-16  16  UTF-16 surrogate pair U+FFFF \n\n####  ####\n##### UnicodeEncodeError #####\n**** UnicodeEncodeError\n\n##### UnicodeDecodeError #####\n ASCII  UTF-8  UTF-16 UnicodeDecodeError    \n8\n\n##### SyntaxError #####\nPython 3  UTF-8 Python 2 2.5  ASCII .py  UTF-8 SyntaxError   \n#encoding:${encoding_name}\n\n#####  #####\n/ HTTP  XML   \n:  b'\\x00'  16  32 8 b'\\x20\\x00'  UTF-16LE U+0020    \n Chardethttps://pypi.python.org/pypi/chardet 30 .    \n\n##### BOM #####\nutf-16BOMbyte-order mark\n88   \nUTF-16 UTF-16LEUTF-16BE BOM    \nword UTF-16  UTF-32UTF-8  BOM   \n\n####  ####\nUnicode )\n![Figure-4-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-4.1.png?raw=true)\n\n:\n\n-  encoding= \n-  Chardet\n\n#### Unicode  ####\n Unicode '' 'e\\u0301' canonical equivalentPython     \nUnicode unicodedata.normalize  Unicode 'NFC''NFD''NFKC'  'NFKD'   \nNFCNormalization Form C NFD \nNFKC  NFKD K compatibility    \n****\n\n#### API ####\n#####  #####\n\n\\d  \\w  ASCII  ASCII  Unicode \n\n```python\nimport re\nre_numbers_str = re.compile(r'\\d+')\nre_words_str = re.compile(r'\\w+')\nre_numbers_bytes = re.compile(rb'\\d+')\nre_words_bytes = re.compile(rb'\\w+')\ntext_str = (\"Ramanujan saw \\u0be7\\u0bed\\u0be8\\u0bef\" \n\" as 1729 = 1 + 12 = 9 + 10.\") \ntext_bytes = text_str.encode('utf_8') \nprint('Text', repr(text_str), sep='\\n ')\nprint('Numbers')\nprint(' str :', re_numbers_str.findall(text_str)) \nprint(' bytes:', re_numbers_bytes.findall(text_bytes)) \nprint('Words')\nprint(' str :', re_words_str.findall(text_str)) \nprint(' bytes:', re_words_bytes.findall(text_bytes)) \n```\n\n:\n  \n> Text   \n>  'Ramanujan saw  as 1729 = 1 + 12 = 9 + 10.'   \n> Numbers   \n>  str : ['', '1729', '1', '12', '9', '10']   \n>  bytes: [b'1729', b'1', b'12', b'9', b'10']   \n> Words   \n>  str : ['Ramanujan', 'saw', '', 'as', '1729', '1', '12', '9', '10']   \n>  bytes: [b'Ramanujan', b'saw', b'as', b'1729', b'1', b'12', b'9', b'10']   \n\n##### os #####\nGNU/Linux  Unicode\n    \nos sys.getfilesystemencoding()  Unicode    \n\n\n####  ####\n1.  Unicode 80%  UTF-8 Python 3    \n2. /Unicode,   \n3. Unicode     \n4. Python 3.3  str  latin1  1  2  4 \n5. Python 3  int Python 2  long \n","source":"_posts/fluent-python-4.md","raw":"title: fluent python \ndate: 2017-11-27 00:03:27\ntags:\n- Python\n- bytes\n- unicode\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 4. Texts versus Bytes ###\n### .   ###\n\\* : Python3\nPython 3 (text)(Bytes)Unicode\n\n####  ####\n\nPython3strUnicode, Python2str\nUnicode :   \n\n-  0~1 114 111(0x10fff) Unicode 4~6U+ A  U+0041 U+20AC U+1D11E Unicode 6.3  Python 3.4 10% \n\n-  UTF-8 AU+0041 \\x41 UTF-16LE \\x41\\x00U+20AC UTF-8 \\xe2\\x82\\xac UTF-16LE \\xac\\x20\n\n(code points)(Bytes)\n\n####  ####\n1. Python Python 3  bytes  Python 2.6 bytearray    \n2. bytes  bytearray  0~255(0x0~0xff)   \nbytesbytes1bytes.     \n3. bytearray  bytearray    \n4. format  format_map Unicode casefoldisdecimalisidentifierisnumericisprintable  encodestr  bytes  bytearray  endswithreplacestriptranslateupper bytes  str re .   \n5.  str  fromhex: \n\n```python\nbytes.fromhex('31 4B CE A9')\nb'1K\\xce\\xa9'\n```\n\nbytesbytearray:\n\n- strencoding\n- 0~0xff\n- (buffer protocol, bytes, bytearray, memory view, array.array)\n\n#### (struct and memory view) ####\nstruct bytesbytearray  memoryview ,    \nmemoryview    \n\n```python\nimport struct\nfmt = '<3s3sHH' \n#< 3s3s  3 HH  16 \nwith open('filter.gif', 'rb') as fp:\n    img = memoryview(fp.read()) \n    #\n\nheader = img[:10] \n#header\nbytes(header) \n# b'GIF89a+\\x02\\xe6\\x00'\nstruct.unpack(fmt, header) \n# (b'GIF', b'89a', 555, 230) ,,,\ndel header \n# , \ndel img\n```\n\n####  ####\nPython  100 codec, encoder/decoder 'utf_8''utf8''utf-8'  'U8'open()str.encode()bytes.decode()  encoding \n\n```python\n>>> for codec in ['latin_1', 'utf_8', 'utf_16']:\n... print(codec, 'El Nio'.encode(codec), sep='\\t')\n...\nlatin_1 b'El Ni\\xf1o'\nutf_8 b'El Ni\\xc3\\xb1o'\nutf_16 b'\\xff\\xfeE\\x00l\\x00 \\x00N\\x00i\\x00\\xf1\\x00o\\x00'\n```\n\n ASCII  GB2312 UnicodeUTF  Unicode   \n\n:\n\n- latin1:  cp1252  Unicodelatin1 cp1252 \n- cp1252:Microsoft  latin1 Windows ANSI ANSI \n- cp437: IBM PC  latin1 \n- gb2312:\n- utf-8: Web  8   ASCII  ASCII  UTF-8 \n- utf-16le: UTF-16  16  UTF-16 surrogate pair U+FFFF \n\n####  ####\n##### UnicodeEncodeError #####\n**** UnicodeEncodeError\n\n##### UnicodeDecodeError #####\n ASCII  UTF-8  UTF-16 UnicodeDecodeError    \n8\n\n##### SyntaxError #####\nPython 3  UTF-8 Python 2 2.5  ASCII .py  UTF-8 SyntaxError   \n#encoding:${encoding_name}\n\n#####  #####\n/ HTTP  XML   \n:  b'\\x00'  16  32 8 b'\\x20\\x00'  UTF-16LE U+0020    \n Chardethttps://pypi.python.org/pypi/chardet 30 .    \n\n##### BOM #####\nutf-16BOMbyte-order mark\n88   \nUTF-16 UTF-16LEUTF-16BE BOM    \nword UTF-16  UTF-32UTF-8  BOM   \n\n####  ####\nUnicode )\n![Figure-4-1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-4.1.png?raw=true)\n\n:\n\n-  encoding= \n-  Chardet\n\n#### Unicode  ####\n Unicode '' 'e\\u0301' canonical equivalentPython     \nUnicode unicodedata.normalize  Unicode 'NFC''NFD''NFKC'  'NFKD'   \nNFCNormalization Form C NFD \nNFKC  NFKD K compatibility    \n****\n\n#### API ####\n#####  #####\n\n\\d  \\w  ASCII  ASCII  Unicode \n\n```python\nimport re\nre_numbers_str = re.compile(r'\\d+')\nre_words_str = re.compile(r'\\w+')\nre_numbers_bytes = re.compile(rb'\\d+')\nre_words_bytes = re.compile(rb'\\w+')\ntext_str = (\"Ramanujan saw \\u0be7\\u0bed\\u0be8\\u0bef\" \n\" as 1729 = 1 + 12 = 9 + 10.\") \ntext_bytes = text_str.encode('utf_8') \nprint('Text', repr(text_str), sep='\\n ')\nprint('Numbers')\nprint(' str :', re_numbers_str.findall(text_str)) \nprint(' bytes:', re_numbers_bytes.findall(text_bytes)) \nprint('Words')\nprint(' str :', re_words_str.findall(text_str)) \nprint(' bytes:', re_words_bytes.findall(text_bytes)) \n```\n\n:\n  \n> Text   \n>  'Ramanujan saw  as 1729 = 1 + 12 = 9 + 10.'   \n> Numbers   \n>  str : ['', '1729', '1', '12', '9', '10']   \n>  bytes: [b'1729', b'1', b'12', b'9', b'10']   \n> Words   \n>  str : ['Ramanujan', 'saw', '', 'as', '1729', '1', '12', '9', '10']   \n>  bytes: [b'Ramanujan', b'saw', b'as', b'1729', b'1', b'12', b'9', b'10']   \n\n##### os #####\nGNU/Linux  Unicode\n    \nos sys.getfilesystemencoding()  Unicode    \n\n\n####  ####\n1.  Unicode 80%  UTF-8 Python 3    \n2. /Unicode,   \n3. Unicode     \n4. Python 3.3  str  latin1  1  2  4 \n5. Python 3  int Python 2  long \n","slug":"fluent-python-4","published":1,"updated":"2019-04-25T01:27:25.242Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gb003cdhyfze1raqis","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-4-Texts-versus-Bytes\"><a href=\"#Chapter-4-Texts-versus-Bytes\" class=\"headerlink\" title=\"Chapter 4. Texts versus Bytes\"></a>Chapter 4. Texts versus Bytes</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\".  \"></a>.  </h3><p>* : Python3<br>Python 3 (text)(Bytes)Unicode</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Python3strUnicode, Python2str<br>Unicode :   </p>\n<ul>\n<li><p> 0~1 114 111(0x10fff) Unicode 4~6U+ A  U+0041 U+20AC U+1D11E Unicode 6.3  Python 3.4 10% </p>\n</li>\n<li><p> UTF-8 AU+0041 \\x41 UTF-16LE \\x41\\x00U+20AC UTF-8 \\xe2\\x82\\xac UTF-16LE \\xac\\x20</p>\n</li>\n</ul>\n<p>(code points)(Bytes)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li>Python Python 3  bytes  Python 2.6 bytearray    </li>\n<li>bytes  bytearray  0~255(0x0~0xff)<br>bytesbytes1bytes.     </li>\n<li>bytearray  bytearray    </li>\n<li>format  format_map Unicode casefoldisdecimalisidentifierisnumericisprintable  encodestr  bytes  bytearray  endswithreplacestriptranslateupper bytes  str re .   </li>\n<li> str  fromhex: </li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bytes.fromhex(<span class=\"string\">'31 4B CE A9'</span>)</span><br><span class=\"line\"><span class=\"string\">b'1K\\xce\\xa9'</span></span><br></pre></td></tr></table></figure>\n<p>bytesbytearray:</p>\n<ul>\n<li>strencoding</li>\n<li>0~0xff</li>\n<li>(buffer protocol, bytes, bytearray, memory view, array.array)</li>\n</ul>\n<h4 id=\"-struct-and-memory-view\"><a href=\"#-struct-and-memory-view\" class=\"headerlink\" title=\"(struct and memory view)\"></a>(struct and memory view)</h4><p>struct bytesbytearray  memoryview , <br>memoryview    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\">fmt = <span class=\"string\">'&lt;3s3sHH'</span> </span><br><span class=\"line\"><span class=\"comment\">#&lt; 3s3s  3 HH  16 </span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'filter.gif'</span>, <span class=\"string\">'rb'</span>) <span class=\"keyword\">as</span> fp:</span><br><span class=\"line\">    img = memoryview(fp.read()) </span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">header = img[:<span class=\"number\">10</span>] </span><br><span class=\"line\"><span class=\"comment\">#header</span></span><br><span class=\"line\">bytes(header) </span><br><span class=\"line\"><span class=\"comment\"># b'GIF89a+\\x02\\xe6\\x00'</span></span><br><span class=\"line\">struct.unpack(fmt, header) </span><br><span class=\"line\"><span class=\"comment\"># (b'GIF', b'89a', 555, 230) ,,,</span></span><br><span class=\"line\"><span class=\"keyword\">del</span> header </span><br><span class=\"line\"><span class=\"comment\"># , </span></span><br><span class=\"line\"><span class=\"keyword\">del</span> img</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python  100 codec, encoder/decoder utf_8utf8utf-8  U8open()str.encode()bytes.decode()  encoding </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> codec <span class=\"keyword\">in</span> [<span class=\"string\">'latin_1'</span>, <span class=\"string\">'utf_8'</span>, <span class=\"string\">'utf_16'</span>]:</span><br><span class=\"line\"><span class=\"meta\">... </span>print(codec, <span class=\"string\">'El Nio'</span>.encode(codec), sep=<span class=\"string\">'\\t'</span>)</span><br><span class=\"line\">...</span><br><span class=\"line\">latin_1 <span class=\"string\">b'El Ni\\xf1o'</span></span><br><span class=\"line\">utf_8 <span class=\"string\">b'El Ni\\xc3\\xb1o'</span></span><br><span class=\"line\">utf_16 <span class=\"string\">b'\\xff\\xfeE\\x00l\\x00 \\x00N\\x00i\\x00\\xf1\\x00o\\x00'</span></span><br></pre></td></tr></table></figure>\n<p> ASCII  GB2312 UnicodeUTF  Unicode   </p>\n<p>:</p>\n<ul>\n<li>latin1:  cp1252  Unicodelatin1 cp1252 </li>\n<li>cp1252:Microsoft  latin1 Windows ANSI ANSI </li>\n<li>cp437: IBM PC  latin1 </li>\n<li>gb2312:</li>\n<li>utf-8: Web  8   ASCII  ASCII  UTF-8 </li>\n<li>utf-16le: UTF-16  16  UTF-16 surrogate pair U+FFFF </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"UnicodeEncodeError\"><a href=\"#UnicodeEncodeError\" class=\"headerlink\" title=\"UnicodeEncodeError\"></a>UnicodeEncodeError</h5><p><strong></strong> UnicodeEncodeError</p>\n<h5 id=\"UnicodeDecodeError\"><a href=\"#UnicodeDecodeError\" class=\"headerlink\" title=\"UnicodeDecodeError\"></a>UnicodeDecodeError</h5><p> ASCII  UTF-8  UTF-16 UnicodeDecodeError<br>8</p>\n<h5 id=\"SyntaxError\"><a href=\"#SyntaxError\" class=\"headerlink\" title=\"SyntaxError\"></a>SyntaxError</h5><p>Python 3  UTF-8 Python 2 2.5  ASCII .py  UTF-8 SyntaxError<br>#encoding:${encoding_name}</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>/ HTTP  XML<br>:  b\\x00  16  32 8 b\\x20\\x00  UTF-16LE U+0020<br> Chardet<a href=\"https://pypi.python.org/pypi/chardet\" target=\"_blank\" rel=\"noopener\">https://pypi.python.org/pypi/chardet</a> 30 .    </p>\n<h5 id=\"BOM\"><a href=\"#BOM\" class=\"headerlink\" title=\"BOM\"></a>BOM</h5><p>utf-16BOMbyte-order mark<br>88<br>UTF-16 UTF-16LEUTF-16BE BOM<br>word UTF-16  UTF-32UTF-8  BOM   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Unicode )<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-4.1.png?raw=true\" alt=\"Figure-4-1\"></p>\n<p>:</p>\n<ul>\n<li> encoding= </li>\n<li> Chardet</li>\n</ul>\n<h4 id=\"Unicode-\"><a href=\"#Unicode-\" class=\"headerlink\" title=\"Unicode \"></a>Unicode </h4><p> Unicode  e\\u0301 canonical equivalentPython <br>Unicode unicodedata.normalize  Unicode NFCNFDNFKC  NFKD<br>NFCNormalization Form C NFD <br>NFKC  NFKD K compatibility<br><strong></strong></p>\n<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>\\d  \\w  ASCII  ASCII  Unicode </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\">re_numbers_str = re.compile(<span class=\"string\">r'\\d+'</span>)</span><br><span class=\"line\">re_words_str = re.compile(<span class=\"string\">r'\\w+'</span>)</span><br><span class=\"line\">re_numbers_bytes = re.compile(r<span class=\"string\">b'\\d+'</span>)</span><br><span class=\"line\">re_words_bytes = re.compile(r<span class=\"string\">b'\\w+'</span>)</span><br><span class=\"line\">text_str = (<span class=\"string\">\"Ramanujan saw \\u0be7\\u0bed\\u0be8\\u0bef\"</span> </span><br><span class=\"line\"><span class=\"string\">\" as 1729 = 1 + 12 = 9 + 10.\"</span>) </span><br><span class=\"line\">text_bytes = text_str.encode(<span class=\"string\">'utf_8'</span>) </span><br><span class=\"line\">print(<span class=\"string\">'Text'</span>, repr(text_str), sep=<span class=\"string\">'\\n '</span>)</span><br><span class=\"line\">print(<span class=\"string\">'Numbers'</span>)</span><br><span class=\"line\">print(<span class=\"string\">' str :'</span>, re_numbers_str.findall(text_str)) </span><br><span class=\"line\">print(<span class=\"string\">' bytes:'</span>, re_numbers_bytes.findall(text_bytes)) </span><br><span class=\"line\">print(<span class=\"string\">'Words'</span>)</span><br><span class=\"line\">print(<span class=\"string\">' str :'</span>, re_words_str.findall(text_str)) </span><br><span class=\"line\">print(<span class=\"string\">' bytes:'</span>, re_words_bytes.findall(text_bytes))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>Text<br> Ramanujan saw  as 1729 = 1 + 12 = 9 + 10.<br>Numbers<br> str : [, 1729, 1, 12, 9, 10]<br> bytes: [b1729, b1, b12, b9, b10]<br>Words<br> str : [Ramanujan, saw, , as, 1729, 1, 12, 9, 10]<br> bytes: [bRamanujan, bsaw, bas, b1729, b1, b12, b9, b10]   </p>\n</blockquote>\n<h5 id=\"os\"><a href=\"#os\" class=\"headerlink\" title=\"os\"></a>os</h5><p>GNU/Linux  Unicode<br><br>os sys.getfilesystemencoding()  Unicode <br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li> Unicode 80%  UTF-8 Python 3    </li>\n<li>/Unicode,   </li>\n<li>Unicode     </li>\n<li>Python 3.3  str  latin1  1  2  4 </li>\n<li>Python 3  int Python 2  long </li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-4-Texts-versus-Bytes\"><a href=\"#Chapter-4-Texts-versus-Bytes\" class=\"headerlink\" title=\"Chapter 4. Texts versus Bytes\"></a>Chapter 4. Texts versus Bytes</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\".  \"></a>.  </h3><p>* : Python3<br>Python 3 (text)(Bytes)Unicode</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Python3strUnicode, Python2str<br>Unicode :   </p>\n<ul>\n<li><p> 0~1 114 111(0x10fff) Unicode 4~6U+ A  U+0041 U+20AC U+1D11E Unicode 6.3  Python 3.4 10% </p>\n</li>\n<li><p> UTF-8 AU+0041 \\x41 UTF-16LE \\x41\\x00U+20AC UTF-8 \\xe2\\x82\\xac UTF-16LE \\xac\\x20</p>\n</li>\n</ul>\n<p>(code points)(Bytes)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li>Python Python 3  bytes  Python 2.6 bytearray    </li>\n<li>bytes  bytearray  0~255(0x0~0xff)<br>bytesbytes1bytes.     </li>\n<li>bytearray  bytearray    </li>\n<li>format  format_map Unicode casefoldisdecimalisidentifierisnumericisprintable  encodestr  bytes  bytearray  endswithreplacestriptranslateupper bytes  str re .   </li>\n<li> str  fromhex: </li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bytes.fromhex(<span class=\"string\">'31 4B CE A9'</span>)</span><br><span class=\"line\"><span class=\"string\">b'1K\\xce\\xa9'</span></span><br></pre></td></tr></table></figure>\n<p>bytesbytearray:</p>\n<ul>\n<li>strencoding</li>\n<li>0~0xff</li>\n<li>(buffer protocol, bytes, bytearray, memory view, array.array)</li>\n</ul>\n<h4 id=\"-struct-and-memory-view\"><a href=\"#-struct-and-memory-view\" class=\"headerlink\" title=\"(struct and memory view)\"></a>(struct and memory view)</h4><p>struct bytesbytearray  memoryview , <br>memoryview    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\">fmt = <span class=\"string\">'&lt;3s3sHH'</span> </span><br><span class=\"line\"><span class=\"comment\">#&lt; 3s3s  3 HH  16 </span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'filter.gif'</span>, <span class=\"string\">'rb'</span>) <span class=\"keyword\">as</span> fp:</span><br><span class=\"line\">    img = memoryview(fp.read()) </span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\">header = img[:<span class=\"number\">10</span>] </span><br><span class=\"line\"><span class=\"comment\">#header</span></span><br><span class=\"line\">bytes(header) </span><br><span class=\"line\"><span class=\"comment\"># b'GIF89a+\\x02\\xe6\\x00'</span></span><br><span class=\"line\">struct.unpack(fmt, header) </span><br><span class=\"line\"><span class=\"comment\"># (b'GIF', b'89a', 555, 230) ,,,</span></span><br><span class=\"line\"><span class=\"keyword\">del</span> header </span><br><span class=\"line\"><span class=\"comment\"># , </span></span><br><span class=\"line\"><span class=\"keyword\">del</span> img</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python  100 codec, encoder/decoder utf_8utf8utf-8  U8open()str.encode()bytes.decode()  encoding </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> codec <span class=\"keyword\">in</span> [<span class=\"string\">'latin_1'</span>, <span class=\"string\">'utf_8'</span>, <span class=\"string\">'utf_16'</span>]:</span><br><span class=\"line\"><span class=\"meta\">... </span>print(codec, <span class=\"string\">'El Nio'</span>.encode(codec), sep=<span class=\"string\">'\\t'</span>)</span><br><span class=\"line\">...</span><br><span class=\"line\">latin_1 <span class=\"string\">b'El Ni\\xf1o'</span></span><br><span class=\"line\">utf_8 <span class=\"string\">b'El Ni\\xc3\\xb1o'</span></span><br><span class=\"line\">utf_16 <span class=\"string\">b'\\xff\\xfeE\\x00l\\x00 \\x00N\\x00i\\x00\\xf1\\x00o\\x00'</span></span><br></pre></td></tr></table></figure>\n<p> ASCII  GB2312 UnicodeUTF  Unicode   </p>\n<p>:</p>\n<ul>\n<li>latin1:  cp1252  Unicodelatin1 cp1252 </li>\n<li>cp1252:Microsoft  latin1 Windows ANSI ANSI </li>\n<li>cp437: IBM PC  latin1 </li>\n<li>gb2312:</li>\n<li>utf-8: Web  8   ASCII  ASCII  UTF-8 </li>\n<li>utf-16le: UTF-16  16  UTF-16 surrogate pair U+FFFF </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"UnicodeEncodeError\"><a href=\"#UnicodeEncodeError\" class=\"headerlink\" title=\"UnicodeEncodeError\"></a>UnicodeEncodeError</h5><p><strong></strong> UnicodeEncodeError</p>\n<h5 id=\"UnicodeDecodeError\"><a href=\"#UnicodeDecodeError\" class=\"headerlink\" title=\"UnicodeDecodeError\"></a>UnicodeDecodeError</h5><p> ASCII  UTF-8  UTF-16 UnicodeDecodeError<br>8</p>\n<h5 id=\"SyntaxError\"><a href=\"#SyntaxError\" class=\"headerlink\" title=\"SyntaxError\"></a>SyntaxError</h5><p>Python 3  UTF-8 Python 2 2.5  ASCII .py  UTF-8 SyntaxError<br>#encoding:${encoding_name}</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>/ HTTP  XML<br>:  b\\x00  16  32 8 b\\x20\\x00  UTF-16LE U+0020<br> Chardet<a href=\"https://pypi.python.org/pypi/chardet\" target=\"_blank\" rel=\"noopener\">https://pypi.python.org/pypi/chardet</a> 30 .    </p>\n<h5 id=\"BOM\"><a href=\"#BOM\" class=\"headerlink\" title=\"BOM\"></a>BOM</h5><p>utf-16BOMbyte-order mark<br>88<br>UTF-16 UTF-16LEUTF-16BE BOM<br>word UTF-16  UTF-32UTF-8  BOM   </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Unicode )<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-4.1.png?raw=true\" alt=\"Figure-4-1\"></p>\n<p>:</p>\n<ul>\n<li> encoding= </li>\n<li> Chardet</li>\n</ul>\n<h4 id=\"Unicode-\"><a href=\"#Unicode-\" class=\"headerlink\" title=\"Unicode \"></a>Unicode </h4><p> Unicode  e\\u0301 canonical equivalentPython <br>Unicode unicodedata.normalize  Unicode NFCNFDNFKC  NFKD<br>NFCNormalization Form C NFD <br>NFKC  NFKD K compatibility<br><strong></strong></p>\n<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>\\d  \\w  ASCII  ASCII  Unicode </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\">re_numbers_str = re.compile(<span class=\"string\">r'\\d+'</span>)</span><br><span class=\"line\">re_words_str = re.compile(<span class=\"string\">r'\\w+'</span>)</span><br><span class=\"line\">re_numbers_bytes = re.compile(r<span class=\"string\">b'\\d+'</span>)</span><br><span class=\"line\">re_words_bytes = re.compile(r<span class=\"string\">b'\\w+'</span>)</span><br><span class=\"line\">text_str = (<span class=\"string\">\"Ramanujan saw \\u0be7\\u0bed\\u0be8\\u0bef\"</span> </span><br><span class=\"line\"><span class=\"string\">\" as 1729 = 1 + 12 = 9 + 10.\"</span>) </span><br><span class=\"line\">text_bytes = text_str.encode(<span class=\"string\">'utf_8'</span>) </span><br><span class=\"line\">print(<span class=\"string\">'Text'</span>, repr(text_str), sep=<span class=\"string\">'\\n '</span>)</span><br><span class=\"line\">print(<span class=\"string\">'Numbers'</span>)</span><br><span class=\"line\">print(<span class=\"string\">' str :'</span>, re_numbers_str.findall(text_str)) </span><br><span class=\"line\">print(<span class=\"string\">' bytes:'</span>, re_numbers_bytes.findall(text_bytes)) </span><br><span class=\"line\">print(<span class=\"string\">'Words'</span>)</span><br><span class=\"line\">print(<span class=\"string\">' str :'</span>, re_words_str.findall(text_str)) </span><br><span class=\"line\">print(<span class=\"string\">' bytes:'</span>, re_words_bytes.findall(text_bytes))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>Text<br> Ramanujan saw  as 1729 = 1 + 12 = 9 + 10.<br>Numbers<br> str : [, 1729, 1, 12, 9, 10]<br> bytes: [b1729, b1, b12, b9, b10]<br>Words<br> str : [Ramanujan, saw, , as, 1729, 1, 12, 9, 10]<br> bytes: [bRamanujan, bsaw, bas, b1729, b1, b12, b9, b10]   </p>\n</blockquote>\n<h5 id=\"os\"><a href=\"#os\" class=\"headerlink\" title=\"os\"></a>os</h5><p>GNU/Linux  Unicode<br><br>os sys.getfilesystemencoding()  Unicode <br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li> Unicode 80%  UTF-8 Python 3    </li>\n<li>/Unicode,   </li>\n<li>Unicode     </li>\n<li>Python 3.3  str  latin1  1  2  4 </li>\n<li>Python 3  int Python 2  long </li>\n</ol>\n"},{"title":"fluent python ","date":"2017-12-13T13:21:21.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 5. First Class Functions ###\n### . \n:   \n\n\n- \n- \n- \n- \n\nPython\n\n#### \n\n```python\n\n>>> print.__doc__\n\"print(value, ..., sep=' ', end='\\\\n', file=sys.stdout, flush=False)\\n\\nPrints the values to a stream, or to sys.stdout by default.\\nOptional keyword arguments:\\nfile:  a file-like object (stream); defaults to the current sys.stdout.\\nsep:   string inserted between values, default a space.\\nend:   string appended after the last value, default a newline.\\nflush: whether to forcibly flush the stream.\"\n>>> type(print)\n<class 'builtin_function_or_method'>\n\n```\n\nprint\\_\\_doc\\_\\_, builtin\\_function\\_or\\_method\n\n```python\n\n>> def plus(a):\n...     return a+1\n...\n>>> map(plus, range(10))\n<map object at 0x109553c50>\n>>> list(map(plus, range(10)))\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n```\n\n   \n\n\n####     \nhigher-orderfunctionmap\n\n##### \nmapfilterreduce\n\n- Pythonmap/filterPython2map/filterPython3   \n\nreduce\n\n```python\n\n>>> from functools import reduce \n>>> from operator import add \n>>> reduce(add, range(100)) \n4950\n>>> sum(100)\n4950\n\n```\n\nsum  reduce      \nall()any(), all()True,True,False; any()TrueTrue\n\n####   \n \n\nlamdapythonlambda\n\n\"Functional Programming HOWTO\" lambda:\n\n- lambda       \n-        \n- lambda    \n- \n\n#### \nPython 7\n\n- :    \n    lambdadef  \n- : \n    CPython   \n- :\n    C   \n- :\n       \n- :\n    \n- :\n    \\_\\_call\\_\\_  \n- :\n    yeild, \n\n#### \npython\\_\\_call\\_\\_\n\n```python\n\nimport random\nclass BingoCage:\n    def __init__(self, items):\n        self._items = list(items)\n        random.shuffle(self._items)\n    def pick(self):\n        try:\n            return self._items.pop()\n        except IndexError:\n            raise LookupError('pick from empty BingoCage')\n    def __call__(self):\n        return self.pick()\n\n```\nBingoCagepick  \n\n \\_\\_call\\_\\_  BingoCage  [ memoization ]\n\n  \n\n####     \nPythonPython3 keyword-only argument**  \n\ntaghtml\n\n```python\n\ndef tag(name, *content, cls=None, **attrs):\n    \"\"\"HTML\"\"\"\n    if cls is not None:\n        attrs['class'] = cls\n    if attrs:\n        attr_str = ''.join(' %s=\"%s\"' % (attr, value)\n                        for attr, value in sorted(attrs.items()))\n    else:\n        attr_str = ''\n    if content:\n        return '\\n'.join('<%s%s>%s</%s>' %\n                (name, attr_str, c, name) for c in content)\n    else:\n        return '<%s%s />' % (name, attr_str)\n\n```\n\n\n\n```python\n\n>>> tag('br')\n'<br />'\n>>> tag('p', 'hello')\n'<p>hello</p>'\n>>> print(tag('p', 'hello', 'world'))\n<p>hello</p>\n<p>world</p>\n>>> tag('p', 'hello', id=33)\n'<p id=\"33\">hello</p>'\n>>> print(tag('p', 'hello', 'world', cls='sidebar'))\n<p class=\"sidebar\">hello</p>\n<p class=\"sidebar\">world</p>\n>>> tag(content='testing', name=\"img\")\n'<img content=\"testing\" />'\n>>> my_tag = {'name': 'img', 'title': 'Sunset Boulevard',\n... 'src': 'sunset.jpg', 'cls': 'framed'}\n>>> tag(**my_tag)\n'<img class=\"framed\" src=\"sunset.jpg\" title=\"Sunset Boulevard\" />'\n\n```\n\n####     \nweb: \n\n```python\n\nimport bobo\n@bobo.query('/')\ndef hello(person):\n    return 'Hello %s!' % person\n\n```\nbobowebbobo.query()hello()hello()personperson403.\n\n \\_\\_defaults\\_\\_  \\_\\_kwdefaults\\_\\_  \\_\\_code\\_\\_  code \n\n[clip.py](https://github.com/aldslvda/readings/blob/master/Fluent-Python/5.%20First%20Class%20Functions/clip.py)\n\n```python\n\ndef clip(text, max_len=80):\n    \"\"\"max_len\n    \"\"\"\n    end = None\n    if len(text) > max_len:\n        space_before = text.rfind(' ', 0, max_len)\n        if space_before >= 0:\n            end = space_before\n        else:\n            space_after = text.rfind(' ', max_len)\n        if space_after >= 0:\n            end = space_after\n            if end is None: # \n                end = len(text)\n    return text[:end].rstrip()\n\n```\n\n\n\n```python\n\n>>> from clip import clip\n>>> clip.__defaults__\n(80,)\n>>> clip.__code__\n<code object clip at 0x10dadcc90, file \"/Users/NickAl/study/github/readings/Fluent-Python/5. First Class Functions/clip.py\", line 2>\n>>> clip.__code__.co_varnames\n('text', 'max_len', 'end', 'space_before', 'space_after')\n>>> clip.__code__.co_argcount\n2\n\n```\n\n \\_\\_code\\_\\_.co\\_varnames N N \\_\\_code\\\\_.co\\_argcount  *  **  \\_\\_defaults\\_\\_ \n\ninspect \n\n```python\n>>> from clip import clip\n>>> from inspect import signature\n>>> sig = signature(clip)\n>>> sig\n<Signature (text, max_len=80)>\n>>> for name, param in sig.parameters.items():\n...     print(param.kind, ':', name, '=', param.default)\n...\nPOSITIONAL_OR_KEYWORD : text = <class 'inspect._empty'>\nPOSITIONAL_OR_KEYWORD : max_len = 80\n\n```\n\ninspect.signature  inspect.Signature  parameters  inspect.Parameter \n\ninspect.Signaturekind5:\n\n- POSITIONAL\\_OR\\_KEYWORD: Python \n- VAR\\_POSITIONAL:\n- VAR\\_KEYWORD:\n- KEYWORD\\_ONLY:Python 3 \n- POSITIONAL\\_ONLY:Python  C  divmod\n\n#### \n\nPython 3 , \nclip.pyclip\\_with\\_anno, \n\n```python\n\ndef clip_with_anno(text:str, max_len: 'int > 0' = 80) -> str:\n\n```\n\n```python\n\n>>> from clip import clip_with_anno\n>>> clip_with_anno.__annotations__\n{'text': <class 'str'>, 'max_len': 'int > 0', 'return': <class 'str'>}\n\n```\n\nPython\n\n#### Python\n\n##### operator\nreduceoperator\n\n```python\n\nfrom functools import reduce\nfrom operator import mul\n\ndef fact(n):\n    return reduce(lambda a, b: a*b, range(1, n+1))\ndef fact_with_mul(n):\n    return reduce(mul, range(1, n+1))\n\n```\n\nmullambda\noperator:\n\n- attrgetter  itemgetter\n- methodcaller \n\n##### functools.partial\nfunctools.partial **** API.\n\n```python\n\n>>> from operator import mul\n>>> from functools import partial\n>>> triple = partial(mul, 3)\n>>> triple(7)\n21\n>>> list(map(triple, range(1, 10)))\n[3, 6, 9, 12, 15, 18, 21, 24, 27]\n\n```\n\n#### \nPythonlambda\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true)\n\nTo be continued ... ![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true)\n","source":"_posts/fluent-python-5.md","raw":"title: fluent python \ndate: 2017-12-13 21:21:21\ntags:\n- Python\n- functional\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 5. First Class Functions ###\n### . \n:   \n\n\n- \n- \n- \n- \n\nPython\n\n#### \n\n```python\n\n>>> print.__doc__\n\"print(value, ..., sep=' ', end='\\\\n', file=sys.stdout, flush=False)\\n\\nPrints the values to a stream, or to sys.stdout by default.\\nOptional keyword arguments:\\nfile:  a file-like object (stream); defaults to the current sys.stdout.\\nsep:   string inserted between values, default a space.\\nend:   string appended after the last value, default a newline.\\nflush: whether to forcibly flush the stream.\"\n>>> type(print)\n<class 'builtin_function_or_method'>\n\n```\n\nprint\\_\\_doc\\_\\_, builtin\\_function\\_or\\_method\n\n```python\n\n>> def plus(a):\n...     return a+1\n...\n>>> map(plus, range(10))\n<map object at 0x109553c50>\n>>> list(map(plus, range(10)))\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n```\n\n   \n\n\n####     \nhigher-orderfunctionmap\n\n##### \nmapfilterreduce\n\n- Pythonmap/filterPython2map/filterPython3   \n\nreduce\n\n```python\n\n>>> from functools import reduce \n>>> from operator import add \n>>> reduce(add, range(100)) \n4950\n>>> sum(100)\n4950\n\n```\n\nsum  reduce      \nall()any(), all()True,True,False; any()TrueTrue\n\n####   \n \n\nlamdapythonlambda\n\n\"Functional Programming HOWTO\" lambda:\n\n- lambda       \n-        \n- lambda    \n- \n\n#### \nPython 7\n\n- :    \n    lambdadef  \n- : \n    CPython   \n- :\n    C   \n- :\n       \n- :\n    \n- :\n    \\_\\_call\\_\\_  \n- :\n    yeild, \n\n#### \npython\\_\\_call\\_\\_\n\n```python\n\nimport random\nclass BingoCage:\n    def __init__(self, items):\n        self._items = list(items)\n        random.shuffle(self._items)\n    def pick(self):\n        try:\n            return self._items.pop()\n        except IndexError:\n            raise LookupError('pick from empty BingoCage')\n    def __call__(self):\n        return self.pick()\n\n```\nBingoCagepick  \n\n \\_\\_call\\_\\_  BingoCage  [ memoization ]\n\n  \n\n####     \nPythonPython3 keyword-only argument**  \n\ntaghtml\n\n```python\n\ndef tag(name, *content, cls=None, **attrs):\n    \"\"\"HTML\"\"\"\n    if cls is not None:\n        attrs['class'] = cls\n    if attrs:\n        attr_str = ''.join(' %s=\"%s\"' % (attr, value)\n                        for attr, value in sorted(attrs.items()))\n    else:\n        attr_str = ''\n    if content:\n        return '\\n'.join('<%s%s>%s</%s>' %\n                (name, attr_str, c, name) for c in content)\n    else:\n        return '<%s%s />' % (name, attr_str)\n\n```\n\n\n\n```python\n\n>>> tag('br')\n'<br />'\n>>> tag('p', 'hello')\n'<p>hello</p>'\n>>> print(tag('p', 'hello', 'world'))\n<p>hello</p>\n<p>world</p>\n>>> tag('p', 'hello', id=33)\n'<p id=\"33\">hello</p>'\n>>> print(tag('p', 'hello', 'world', cls='sidebar'))\n<p class=\"sidebar\">hello</p>\n<p class=\"sidebar\">world</p>\n>>> tag(content='testing', name=\"img\")\n'<img content=\"testing\" />'\n>>> my_tag = {'name': 'img', 'title': 'Sunset Boulevard',\n... 'src': 'sunset.jpg', 'cls': 'framed'}\n>>> tag(**my_tag)\n'<img class=\"framed\" src=\"sunset.jpg\" title=\"Sunset Boulevard\" />'\n\n```\n\n####     \nweb: \n\n```python\n\nimport bobo\n@bobo.query('/')\ndef hello(person):\n    return 'Hello %s!' % person\n\n```\nbobowebbobo.query()hello()hello()personperson403.\n\n \\_\\_defaults\\_\\_  \\_\\_kwdefaults\\_\\_  \\_\\_code\\_\\_  code \n\n[clip.py](https://github.com/aldslvda/readings/blob/master/Fluent-Python/5.%20First%20Class%20Functions/clip.py)\n\n```python\n\ndef clip(text, max_len=80):\n    \"\"\"max_len\n    \"\"\"\n    end = None\n    if len(text) > max_len:\n        space_before = text.rfind(' ', 0, max_len)\n        if space_before >= 0:\n            end = space_before\n        else:\n            space_after = text.rfind(' ', max_len)\n        if space_after >= 0:\n            end = space_after\n            if end is None: # \n                end = len(text)\n    return text[:end].rstrip()\n\n```\n\n\n\n```python\n\n>>> from clip import clip\n>>> clip.__defaults__\n(80,)\n>>> clip.__code__\n<code object clip at 0x10dadcc90, file \"/Users/NickAl/study/github/readings/Fluent-Python/5. First Class Functions/clip.py\", line 2>\n>>> clip.__code__.co_varnames\n('text', 'max_len', 'end', 'space_before', 'space_after')\n>>> clip.__code__.co_argcount\n2\n\n```\n\n \\_\\_code\\_\\_.co\\_varnames N N \\_\\_code\\\\_.co\\_argcount  *  **  \\_\\_defaults\\_\\_ \n\ninspect \n\n```python\n>>> from clip import clip\n>>> from inspect import signature\n>>> sig = signature(clip)\n>>> sig\n<Signature (text, max_len=80)>\n>>> for name, param in sig.parameters.items():\n...     print(param.kind, ':', name, '=', param.default)\n...\nPOSITIONAL_OR_KEYWORD : text = <class 'inspect._empty'>\nPOSITIONAL_OR_KEYWORD : max_len = 80\n\n```\n\ninspect.signature  inspect.Signature  parameters  inspect.Parameter \n\ninspect.Signaturekind5:\n\n- POSITIONAL\\_OR\\_KEYWORD: Python \n- VAR\\_POSITIONAL:\n- VAR\\_KEYWORD:\n- KEYWORD\\_ONLY:Python 3 \n- POSITIONAL\\_ONLY:Python  C  divmod\n\n#### \n\nPython 3 , \nclip.pyclip\\_with\\_anno, \n\n```python\n\ndef clip_with_anno(text:str, max_len: 'int > 0' = 80) -> str:\n\n```\n\n```python\n\n>>> from clip import clip_with_anno\n>>> clip_with_anno.__annotations__\n{'text': <class 'str'>, 'max_len': 'int > 0', 'return': <class 'str'>}\n\n```\n\nPython\n\n#### Python\n\n##### operator\nreduceoperator\n\n```python\n\nfrom functools import reduce\nfrom operator import mul\n\ndef fact(n):\n    return reduce(lambda a, b: a*b, range(1, n+1))\ndef fact_with_mul(n):\n    return reduce(mul, range(1, n+1))\n\n```\n\nmullambda\noperator:\n\n- attrgetter  itemgetter\n- methodcaller \n\n##### functools.partial\nfunctools.partial **** API.\n\n```python\n\n>>> from operator import mul\n>>> from functools import partial\n>>> triple = partial(mul, 3)\n>>> triple(7)\n21\n>>> list(map(triple, range(1, 10)))\n[3, 6, 9, 12, 15, 18, 21, 24, 27]\n\n```\n\n#### \nPythonlambda\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true)\n\nTo be continued ... ![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true)\n","slug":"fluent-python-5","published":1,"updated":"2019-04-25T01:27:25.755Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gd003fdhyffmae0td5","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-5-First-Class-Functions\"><a href=\"#Chapter-5-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 5. First Class Functions\"></a>Chapter 5. First Class Functions</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\". \"></a>. </h3><p>:<br></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>Python</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span>.__doc__</span><br><span class=\"line\"><span class=\"string\">\"print(value, ..., sep=' ', end='\\\\n', file=sys.stdout, flush=False)\\n\\nPrints the values to a stream, or to sys.stdout by default.\\nOptional keyword arguments:\\nfile:  a file-like object (stream); defaults to the current sys.stdout.\\nsep:   string inserted between values, default a space.\\nend:   string appended after the last value, default a newline.\\nflush: whether to forcibly flush the stream.\"</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>type(<span class=\"keyword\">print</span>)</span><br><span class=\"line\">&lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">builtin_function_or_method</span>'&gt;</span></span><br></pre></td></tr></table></figure>\n<p>print__doc__, builtin_function_or_method</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&gt;&gt; <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">return</span> a+<span class=\"number\">1</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>map(plus, range(<span class=\"number\">10</span>))</span><br><span class=\"line\">&lt;map object at <span class=\"number\">0x109553c50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(map(plus, range(<span class=\"number\">10</span>)))</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>higher-orderfunctionmap</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mapfilterreduce</p>\n<ul>\n<li>Pythonmap/filterPython2map/filterPython3   </li>\n</ul>\n<p>reduce</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> reduce </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> add </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>reduce(add, range(<span class=\"number\">100</span>)) </span><br><span class=\"line\"><span class=\"number\">4950</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sum(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"number\">4950</span></span><br></pre></td></tr></table></figure>\n<p>sum  reduce <br>all()any(), all()True,True,False; any()TrueTrue</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p>lamdapythonlambda</p>\n<p>Functional Programming HOWTO lambda:</p>\n<ul>\n<li>lambda       </li>\n<li>       </li>\n<li>lambda    </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python 7</p>\n<ul>\n<li>:<br>  lambdadef  </li>\n<li>:<br>  CPython   </li>\n<li>:<br>  C   </li>\n<li>:<br>     </li>\n<li>:<br>  </li>\n<li>:<br>  __call__  </li>\n<li>:<br>  yeild, </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>python__call__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BingoCage</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, items)</span>:</span></span><br><span class=\"line\">        self._items = list(items)</span><br><span class=\"line\">        random.shuffle(self._items)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> self._items.pop()</span><br><span class=\"line\">        <span class=\"keyword\">except</span> IndexError:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> LookupError(<span class=\"string\">'pick from empty BingoCage'</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.pick()</span><br></pre></td></tr></table></figure>\n<p>BingoCagepick  </p>\n<p> __call__  BingoCage  [ memoization ]</p>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonPython3 keyword-only argument<em></em>  </p>\n<p>taghtml</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag</span><span class=\"params\">(name, *content, cls=None, **attrs)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"HTML\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cls <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">        attrs[<span class=\"string\">'class'</span>] = cls</span><br><span class=\"line\">    <span class=\"keyword\">if</span> attrs:</span><br><span class=\"line\">        attr_str = <span class=\"string\">''</span>.join(<span class=\"string\">' %s=\"%s\"'</span> % (attr, value)</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> attr, value <span class=\"keyword\">in</span> sorted(attrs.items()))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        attr_str = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> content:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'\\n'</span>.join(<span class=\"string\">'&lt;%s%s&gt;%s&lt;/%s&gt;'</span> %</span><br><span class=\"line\">                (name, attr_str, c, name) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> content)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&lt;%s%s /&gt;'</span> % (name, attr_str)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'br'</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;br /&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;p&gt;hello&lt;/p&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>print(tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>))</span><br><span class=\"line\">&lt;p&gt;hello&lt;/p&gt;</span><br><span class=\"line\">&lt;p&gt;world&lt;/p&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, id=<span class=\"number\">33</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;p id=\"33\"&gt;hello&lt;/p&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>print(tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>, cls=<span class=\"string\">'sidebar'</span>))</span><br><span class=\"line\">&lt;p class=\"sidebar\"&gt;hello&lt;/p&gt;</span><br><span class=\"line\">&lt;p class=\"sidebar\"&gt;world&lt;/p&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(content=<span class=\"string\">'testing'</span>, name=<span class=\"string\">\"img\"</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;img content=\"testing\" /&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>my_tag = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'img'</span>, <span class=\"string\">'title'</span>: <span class=\"string\">'Sunset Boulevard'</span>,</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"string\">'src'</span>: <span class=\"string\">'sunset.jpg'</span>, <span class=\"string\">'cls'</span>: <span class=\"string\">'framed'</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(**my_tag)</span><br><span class=\"line\"><span class=\"string\">'&lt;img class=\"framed\" src=\"sunset.jpg\" title=\"Sunset Boulevard\" /&gt;'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>web: </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> bobo</span><br><span class=\"line\"><span class=\"meta\">@bobo.query('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(person)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello %s!'</span> % person</span><br></pre></td></tr></table></figure>\n<p>bobowebbobo.query()hello()hello()personperson403.</p>\n<p> __defaults__  __kwdefaults__  __code__  code </p>\n<p><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/5.%20First%20Class%20Functions/clip.py\" target=\"_blank\" rel=\"noopener\">clip.py</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clip</span><span class=\"params\">(text, max_len=<span class=\"number\">80</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"max_len</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    end = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(text) &gt; max_len:</span><br><span class=\"line\">        space_before = text.rfind(<span class=\"string\">' '</span>, <span class=\"number\">0</span>, max_len)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> space_before &gt;= <span class=\"number\">0</span>:</span><br><span class=\"line\">            end = space_before</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            space_after = text.rfind(<span class=\"string\">' '</span>, max_len)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> space_after &gt;= <span class=\"number\">0</span>:</span><br><span class=\"line\">            end = space_after</span><br><span class=\"line\">            <span class=\"keyword\">if</span> end <span class=\"keyword\">is</span> <span class=\"literal\">None</span>: <span class=\"comment\"># </span></span><br><span class=\"line\">                end = len(text)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> text[:end].rstrip()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__defaults__</span><br><span class=\"line\">(<span class=\"number\">80</span>,)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__</span><br><span class=\"line\">&lt;code object clip at <span class=\"number\">0x10dadcc90</span>, file <span class=\"string\">\"/Users/NickAl/study/github/readings/Fluent-Python/5. First Class Functions/clip.py\"</span>, line <span class=\"number\">2</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__.co_varnames</span><br><span class=\"line\">(<span class=\"string\">'text'</span>, <span class=\"string\">'max_len'</span>, <span class=\"string\">'end'</span>, <span class=\"string\">'space_before'</span>, <span class=\"string\">'space_after'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__.co_argcount</span><br><span class=\"line\"><span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p> __code__.co_varnames N N __code\\_.co_argcount  *  **  __defaults__ </p>\n<p>inspect </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> inspect <span class=\"keyword\">import</span> signature</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sig = signature(clip)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sig</span><br><span class=\"line\">&lt;Signature (text, max_len=<span class=\"number\">80</span>)&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> name, param <span class=\"keyword\">in</span> sig.parameters.items():</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(param.kind, <span class=\"string\">':'</span>, name, <span class=\"string\">'='</span>, param.default)</span><br><span class=\"line\">...</span><br><span class=\"line\">POSITIONAL_OR_KEYWORD : text = &lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">inspect</span>.<span class=\"title\">_empty</span>'&gt;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">POSITIONAL_OR_KEYWORD</span> :</span> max_len = <span class=\"number\">80</span></span><br></pre></td></tr></table></figure>\n<p>inspect.signature  inspect.Signature  parameters  inspect.Parameter </p>\n<p>inspect.Signaturekind5:</p>\n<ul>\n<li>POSITIONAL_OR_KEYWORD: Python </li>\n<li>VAR_POSITIONAL:</li>\n<li>VAR_KEYWORD:</li>\n<li>KEYWORD_ONLY:Python 3 </li>\n<li>POSITIONAL_ONLY:Python  C  divmod</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python 3 , <br>clip.pyclip_with_anno, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clip_with_anno</span><span class=\"params\">(text:str, max_len: <span class=\"string\">'int &gt; 0'</span> = <span class=\"number\">80</span>)</span> -&gt; str:</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip_with_anno</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip_with_anno.__annotations__</span><br><span class=\"line\">&#123;'text': &lt;class 'str'&gt;, 'max_len': 'int &gt; 0', 'return': &lt;class 'str'&gt;&#125;</span><br></pre></td></tr></table></figure>\n<p>Python</p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><h5 id=\"operator\"><a href=\"#operator\" class=\"headerlink\" title=\"operator\"></a>operator</h5><p>reduceoperator</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> reduce</span><br><span class=\"line\"><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> mul</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fact</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> reduce(<span class=\"keyword\">lambda</span> a, b: a*b, range(<span class=\"number\">1</span>, n+<span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fact_with_mul</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> reduce(mul, range(<span class=\"number\">1</span>, n+<span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure>\n<p>mullambda<br>operator:</p>\n<ul>\n<li>attrgetter  itemgetter</li>\n<li>methodcaller </li>\n</ul>\n<h5 id=\"functools-partial\"><a href=\"#functools-partial\" class=\"headerlink\" title=\"functools.partial\"></a>functools.partial</h5><p>functools.partial <strong></strong> API.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> mul</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> partial</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>triple = partial(mul, <span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>triple(<span class=\"number\">7</span>)</span><br><span class=\"line\"><span class=\"number\">21</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(map(triple, range(<span class=\"number\">1</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">[<span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">9</span>, <span class=\"number\">12</span>, <span class=\"number\">15</span>, <span class=\"number\">18</span>, <span class=\"number\">21</span>, <span class=\"number\">24</span>, <span class=\"number\">27</span>]</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Pythonlambda</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true\" alt=\"1\"></p>\n<p>To be continued  <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true\" alt=\"1\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-5-First-Class-Functions\"><a href=\"#Chapter-5-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 5. First Class Functions\"></a>Chapter 5. First Class Functions</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\". \"></a>. </h3><p>:<br></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>Python</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">print</span>.__doc__</span><br><span class=\"line\"><span class=\"string\">\"print(value, ..., sep=' ', end='\\\\n', file=sys.stdout, flush=False)\\n\\nPrints the values to a stream, or to sys.stdout by default.\\nOptional keyword arguments:\\nfile:  a file-like object (stream); defaults to the current sys.stdout.\\nsep:   string inserted between values, default a space.\\nend:   string appended after the last value, default a newline.\\nflush: whether to forcibly flush the stream.\"</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>type(<span class=\"keyword\">print</span>)</span><br><span class=\"line\">&lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">builtin_function_or_method</span>'&gt;</span></span><br></pre></td></tr></table></figure>\n<p>print__doc__, builtin_function_or_method</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&gt;&gt; <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plus</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">return</span> a+<span class=\"number\">1</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>map(plus, range(<span class=\"number\">10</span>))</span><br><span class=\"line\">&lt;map object at <span class=\"number\">0x109553c50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(map(plus, range(<span class=\"number\">10</span>)))</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>]</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>higher-orderfunctionmap</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>mapfilterreduce</p>\n<ul>\n<li>Pythonmap/filterPython2map/filterPython3   </li>\n</ul>\n<p>reduce</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> reduce </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> add </span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>reduce(add, range(<span class=\"number\">100</span>)) </span><br><span class=\"line\"><span class=\"number\">4950</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sum(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"number\">4950</span></span><br></pre></td></tr></table></figure>\n<p>sum  reduce <br>all()any(), all()True,True,False; any()TrueTrue</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> </p>\n<p>lamdapythonlambda</p>\n<p>Functional Programming HOWTO lambda:</p>\n<ul>\n<li>lambda       </li>\n<li>       </li>\n<li>lambda    </li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python 7</p>\n<ul>\n<li>:<br>  lambdadef  </li>\n<li>:<br>  CPython   </li>\n<li>:<br>  C   </li>\n<li>:<br>     </li>\n<li>:<br>  </li>\n<li>:<br>  __call__  </li>\n<li>:<br>  yeild, </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>python__call__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BingoCage</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, items)</span>:</span></span><br><span class=\"line\">        self._items = list(items)</span><br><span class=\"line\">        random.shuffle(self._items)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> self._items.pop()</span><br><span class=\"line\">        <span class=\"keyword\">except</span> IndexError:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> LookupError(<span class=\"string\">'pick from empty BingoCage'</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.pick()</span><br></pre></td></tr></table></figure>\n<p>BingoCagepick  </p>\n<p> __call__  BingoCage  [ memoization ]</p>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonPython3 keyword-only argument<em></em>  </p>\n<p>taghtml</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag</span><span class=\"params\">(name, *content, cls=None, **attrs)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"HTML\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cls <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">        attrs[<span class=\"string\">'class'</span>] = cls</span><br><span class=\"line\">    <span class=\"keyword\">if</span> attrs:</span><br><span class=\"line\">        attr_str = <span class=\"string\">''</span>.join(<span class=\"string\">' %s=\"%s\"'</span> % (attr, value)</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> attr, value <span class=\"keyword\">in</span> sorted(attrs.items()))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        attr_str = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> content:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'\\n'</span>.join(<span class=\"string\">'&lt;%s%s&gt;%s&lt;/%s&gt;'</span> %</span><br><span class=\"line\">                (name, attr_str, c, name) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> content)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&lt;%s%s /&gt;'</span> % (name, attr_str)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'br'</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;br /&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;p&gt;hello&lt;/p&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>print(tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>))</span><br><span class=\"line\">&lt;p&gt;hello&lt;/p&gt;</span><br><span class=\"line\">&lt;p&gt;world&lt;/p&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, id=<span class=\"number\">33</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;p id=\"33\"&gt;hello&lt;/p&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>print(tag(<span class=\"string\">'p'</span>, <span class=\"string\">'hello'</span>, <span class=\"string\">'world'</span>, cls=<span class=\"string\">'sidebar'</span>))</span><br><span class=\"line\">&lt;p class=\"sidebar\"&gt;hello&lt;/p&gt;</span><br><span class=\"line\">&lt;p class=\"sidebar\"&gt;world&lt;/p&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(content=<span class=\"string\">'testing'</span>, name=<span class=\"string\">\"img\"</span>)</span><br><span class=\"line\"><span class=\"string\">'&lt;img content=\"testing\" /&gt;'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>my_tag = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'img'</span>, <span class=\"string\">'title'</span>: <span class=\"string\">'Sunset Boulevard'</span>,</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"string\">'src'</span>: <span class=\"string\">'sunset.jpg'</span>, <span class=\"string\">'cls'</span>: <span class=\"string\">'framed'</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>tag(**my_tag)</span><br><span class=\"line\"><span class=\"string\">'&lt;img class=\"framed\" src=\"sunset.jpg\" title=\"Sunset Boulevard\" /&gt;'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>web: </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> bobo</span><br><span class=\"line\"><span class=\"meta\">@bobo.query('/')</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">(person)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello %s!'</span> % person</span><br></pre></td></tr></table></figure>\n<p>bobowebbobo.query()hello()hello()personperson403.</p>\n<p> __defaults__  __kwdefaults__  __code__  code </p>\n<p><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/5.%20First%20Class%20Functions/clip.py\" target=\"_blank\" rel=\"noopener\">clip.py</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clip</span><span class=\"params\">(text, max_len=<span class=\"number\">80</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"max_len</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    end = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(text) &gt; max_len:</span><br><span class=\"line\">        space_before = text.rfind(<span class=\"string\">' '</span>, <span class=\"number\">0</span>, max_len)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> space_before &gt;= <span class=\"number\">0</span>:</span><br><span class=\"line\">            end = space_before</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            space_after = text.rfind(<span class=\"string\">' '</span>, max_len)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> space_after &gt;= <span class=\"number\">0</span>:</span><br><span class=\"line\">            end = space_after</span><br><span class=\"line\">            <span class=\"keyword\">if</span> end <span class=\"keyword\">is</span> <span class=\"literal\">None</span>: <span class=\"comment\"># </span></span><br><span class=\"line\">                end = len(text)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> text[:end].rstrip()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__defaults__</span><br><span class=\"line\">(<span class=\"number\">80</span>,)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__</span><br><span class=\"line\">&lt;code object clip at <span class=\"number\">0x10dadcc90</span>, file <span class=\"string\">\"/Users/NickAl/study/github/readings/Fluent-Python/5. First Class Functions/clip.py\"</span>, line <span class=\"number\">2</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__.co_varnames</span><br><span class=\"line\">(<span class=\"string\">'text'</span>, <span class=\"string\">'max_len'</span>, <span class=\"string\">'end'</span>, <span class=\"string\">'space_before'</span>, <span class=\"string\">'space_after'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip.__code__.co_argcount</span><br><span class=\"line\"><span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p> __code__.co_varnames N N __code\\_.co_argcount  *  **  __defaults__ </p>\n<p>inspect </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> inspect <span class=\"keyword\">import</span> signature</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sig = signature(clip)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sig</span><br><span class=\"line\">&lt;Signature (text, max_len=<span class=\"number\">80</span>)&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> name, param <span class=\"keyword\">in</span> sig.parameters.items():</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(param.kind, <span class=\"string\">':'</span>, name, <span class=\"string\">'='</span>, param.default)</span><br><span class=\"line\">...</span><br><span class=\"line\">POSITIONAL_OR_KEYWORD : text = &lt;<span class=\"class\"><span class=\"keyword\">class</span> '<span class=\"title\">inspect</span>.<span class=\"title\">_empty</span>'&gt;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">POSITIONAL_OR_KEYWORD</span> :</span> max_len = <span class=\"number\">80</span></span><br></pre></td></tr></table></figure>\n<p>inspect.signature  inspect.Signature  parameters  inspect.Parameter </p>\n<p>inspect.Signaturekind5:</p>\n<ul>\n<li>POSITIONAL_OR_KEYWORD: Python </li>\n<li>VAR_POSITIONAL:</li>\n<li>VAR_KEYWORD:</li>\n<li>KEYWORD_ONLY:Python 3 </li>\n<li>POSITIONAL_ONLY:Python  C  divmod</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python 3 , <br>clip.pyclip_with_anno, </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clip_with_anno</span><span class=\"params\">(text:str, max_len: <span class=\"string\">'int &gt; 0'</span> = <span class=\"number\">80</span>)</span> -&gt; str:</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> clip <span class=\"keyword\">import</span> clip_with_anno</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>clip_with_anno.__annotations__</span><br><span class=\"line\">&#123;'text': &lt;class 'str'&gt;, 'max_len': 'int &gt; 0', 'return': &lt;class 'str'&gt;&#125;</span><br></pre></td></tr></table></figure>\n<p>Python</p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><h5 id=\"operator\"><a href=\"#operator\" class=\"headerlink\" title=\"operator\"></a>operator</h5><p>reduceoperator</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> reduce</span><br><span class=\"line\"><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> mul</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fact</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> reduce(<span class=\"keyword\">lambda</span> a, b: a*b, range(<span class=\"number\">1</span>, n+<span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fact_with_mul</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> reduce(mul, range(<span class=\"number\">1</span>, n+<span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure>\n<p>mullambda<br>operator:</p>\n<ul>\n<li>attrgetter  itemgetter</li>\n<li>methodcaller </li>\n</ul>\n<h5 id=\"functools-partial\"><a href=\"#functools-partial\" class=\"headerlink\" title=\"functools.partial\"></a>functools.partial</h5><p>functools.partial <strong></strong> API.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> operator <span class=\"keyword\">import</span> mul</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> partial</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>triple = partial(mul, <span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>triple(<span class=\"number\">7</span>)</span><br><span class=\"line\"><span class=\"number\">21</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>list(map(triple, range(<span class=\"number\">1</span>, <span class=\"number\">10</span>)))</span><br><span class=\"line\">[<span class=\"number\">3</span>, <span class=\"number\">6</span>, <span class=\"number\">9</span>, <span class=\"number\">12</span>, <span class=\"number\">15</span>, <span class=\"number\">18</span>, <span class=\"number\">21</span>, <span class=\"number\">24</span>, <span class=\"number\">27</span>]</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Pythonlambda</p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true\" alt=\"1\"></p>\n<p>To be continued  <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true\" alt=\"1\"></p>\n"},{"title":"Fluent Python ","date":"2018-04-25T09:39:00.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 8. Object References, Mutability,and Recycling\n### :   \n\n Python     \n Python  bug    \n\n#### \n\nPythonJava   \n\"\":\n\n```python    \n>>> a = [1,2,3]\n>>> b=a\n>>> a.append(4)\n>>> b\n[1, 2, 3, 4]\n```\n![](https://github.com/aldslvda/blog-images/blob/master/fluent-python-8.1.png?raw=true)    \n\n Python \n\n#### \n:\n\n```python    \n>>> charles = {'name': 'Charles L. Dodgson', 'born': 1832}\n>>> lewis = charles\n>>> lewis is charles\nTrue\n>>> id(charles), id(lewis)\n(4300473992, 4300473992)\n>>> lewis['balance'] = 950\n>>> charles\n{'name': 'Charles L. Dodgson', 'balance': 950, 'born': 1832}\n>>> alex = {'name': 'Charles L. Dodgson', 'born': 1832, 'balance': 950}\n>>> alex == charles\nTrue\n>>> alex is not charles\nTrue\n>>> id(alex)\n4382361712\n```\n\nlewis  charles  alex  charles alex charles == \n\n>  is id() \n\n##### is==\n==  is   \n Python  ==  is   \n\n#####   \n Python   tuple \n\n:\n\n```python    \n>>> t1 = (1, 2, [30, 40])\n>>> t2 = (1, 2, [30, 40])\n>>> t1 == t2\nTrue\n>>> id(t1[-1])\n4302515784\n>>> t1[-1].append(99)\n>>> t1\n(1, 2, [30, 40, 99])\n>>> id(t1[-1])\n4302515784\n>>> t1 == t2\nFalse\n```\n\n#### \n\n: \n\n```python    \n>>> l1 = [3, [55, 44], (7, 8, 9)]\n>>> l2 = list(l1)\n>>> l2\n[3, [55, 44], (7, 8, 9)]\n>>> l2 == l1\nTrue\n>>> l2 is l1\nFalse\n```\nl2l1l2 = l1[:]  \n\n [:] (l1, l2 )  \n\n(deepcopy),:    \n\n\n```python     \nclass Bus:\n    def __init__(self, passengers=None):\n        if passengers is None:\n            self.passengers = []\n        else:\n            self.passengers = list(passengers)\n    def pick(self, name):\n        self.passengers.append(name)\n    def drop(self, name):\n        self.passengers.remove(name)\n```\n\n:\n```python     \n>>> from bus import Bus\n>>> import copy\n>>> bus1 = Bus(['Alice', 'Bill', 'Claire', 'David'])\n>>> bus2 = copy.copy(bus1)\n>>> bus3 = copy.deepcopy(bus1)\n>>> id(bus1), id(bus2), id(bus3)\n(4571562840, 4571563288, 4571563512)\n>>> bus1.drop('Bill')\n>>> bus2.passengers\n['Alice', 'Claire', 'David']\n>>> id(bus1.passengers), id(bus2.passengers), id(bus3.passengers)\n(4571550024, 4571550024, 4566929352)\n>>> bus3.passengers\n['Alice', 'Bill', 'Claire', 'David']\n```\n\nbus2 bus1 bus3\n\ndeepcopy \n\n```python     \n>>> a = [10, 20]\n>>> b = [a, 30]\n>>> a.append(b)\n>>> a\n[10, 20, [[...], 30]]\n>>> from copy import deepcopy\n>>> c = deepcopy(a)\n>>> c\n[10, 20, [[...], 30]]   \n```\n\n\n\n#### \n\nPython call by sharing),       \n    \n\n****:\n\n```python    \n>>> def f(a, b):\n... a += b\n... return a\n...\n>>> x = 1\n>>> y = 2\n>>> f(x, y)\n3 >>> x, y\n(1, 2)\n>>> a = [1, 2]\n>>> b = [3, 4]\n>>> f(a, b)\n[1, 2, 3, 4]\n>>> a, b\n([1, 2, 3, 4], [3, 4])\n>>> t = (10, 20)\n>>> u = (30, 40)\n>>> f(t, u)\n(10, 20, 30, 40)\n>>> t, u\n((10, 20), (30, 40))\n```\n\n##### \n\n\n#####     \n \n\n```python   \nclass TwilightBus:\n    def __init__(self, passengers=None):\n        if passengers is None:\n            self.passengers = []\n        else:\n            self.passengers = passengers\n    def pick(self, name):\n        self.passengers.append(name)\n    def drop(self, name):\n        self.passengers.remove(name)\n\nbasketball_team = ['Sue', 'Tina', 'Maya', 'Diana', 'Pat']\nbus = TwilightBus(basketball_team)\nbus.drop('Tina')\nbus.drop('Pat')\nprint(basketball_team)\n>>> ['Sue', 'Maya', 'Diana']\n\n```\n\nbuspassengers basketball_teampassengersbasketball_team\n\n(__init__)\n\n```python\ndef __init__(self, passengers=None):\n    if passengers is None:\n        self.passengers = []\n    else:\n        self.passengers = list(passengers)\n```\n\npassengers\n\n#### del\n\n\ndel del  \n\n CPython CPython \\_\\_del\\_\\_ CPython2.0 \n_ Python \\_\\_del\\_\\_ _\n\nweakref\n\n```python\nimport weakref\ns1 = {1, 2, 3}\ns2 = s1\ndef bye():\n    print('goodbye')\nender = weakref.finalize(s1, bye)\n\n>>> ender.alive\nTrue\n>>> del s1\n>>> ender.alive\nTrue\n>>> s2 = 'sapm'\ngoodbye\n>>> ender.alive\nFalse\n```\n\n#### \n\n\nreferent\n\n\n\nweakrefweakref.ref weakref  finalize WeakKeyDictionaryWeakValueDictionaryWeakSet finalize weakref.ref \n\n##### WeakValueDictionary\n\nWeakValueDictionary  WeakValueDictionaryWeakValueDictionary \n\n\n\n```python    \nclass Cheese:\n    def __init__(self, kind):\n        self.kind = kind\n    def __repr__(self):\n        return 'Cheese(%r)' % self.kind\n\n>>> import weakref\n>>> stock = weakref.WeakValueDictionary()\n>>> catalog = [Cheese('Red Leicester'), Cheese('Tilsit'), Cheese('Brie'), Cheese('Parmesan')]\n>>> for cheese in catalog:\n... stock[cheese.kind] = cheese\n...\n>>> sorted(stock.keys())\n['Brie', 'Parmesan', 'Red Leicester', 'Tilsit']\n>>> del catalog\n>>> sorted(stock.keys())\n['Parmesan']\n>>> del cheese\n>>> sorted(stock.keys())\n[]\n\n```\nParmesan forcheesecheese\n\n##### \n\n Python  list  dictint  tuple \n\n#### \n Python \n\n Python     \n-   \n-  +=  *=    \n-    \n-    \n- \n","source":"_posts/fluent-python-8.md","raw":"title: Fluent Python \ndate: 2018-04-25 17:39:00\ntags:\n- Python\n- \n- \n- Mutability\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 8. Object References, Mutability,and Recycling\n### :   \n\n Python     \n Python  bug    \n\n#### \n\nPythonJava   \n\"\":\n\n```python    \n>>> a = [1,2,3]\n>>> b=a\n>>> a.append(4)\n>>> b\n[1, 2, 3, 4]\n```\n![](https://github.com/aldslvda/blog-images/blob/master/fluent-python-8.1.png?raw=true)    \n\n Python \n\n#### \n:\n\n```python    \n>>> charles = {'name': 'Charles L. Dodgson', 'born': 1832}\n>>> lewis = charles\n>>> lewis is charles\nTrue\n>>> id(charles), id(lewis)\n(4300473992, 4300473992)\n>>> lewis['balance'] = 950\n>>> charles\n{'name': 'Charles L. Dodgson', 'balance': 950, 'born': 1832}\n>>> alex = {'name': 'Charles L. Dodgson', 'born': 1832, 'balance': 950}\n>>> alex == charles\nTrue\n>>> alex is not charles\nTrue\n>>> id(alex)\n4382361712\n```\n\nlewis  charles  alex  charles alex charles == \n\n>  is id() \n\n##### is==\n==  is   \n Python  ==  is   \n\n#####   \n Python   tuple \n\n:\n\n```python    \n>>> t1 = (1, 2, [30, 40])\n>>> t2 = (1, 2, [30, 40])\n>>> t1 == t2\nTrue\n>>> id(t1[-1])\n4302515784\n>>> t1[-1].append(99)\n>>> t1\n(1, 2, [30, 40, 99])\n>>> id(t1[-1])\n4302515784\n>>> t1 == t2\nFalse\n```\n\n#### \n\n: \n\n```python    \n>>> l1 = [3, [55, 44], (7, 8, 9)]\n>>> l2 = list(l1)\n>>> l2\n[3, [55, 44], (7, 8, 9)]\n>>> l2 == l1\nTrue\n>>> l2 is l1\nFalse\n```\nl2l1l2 = l1[:]  \n\n [:] (l1, l2 )  \n\n(deepcopy),:    \n\n\n```python     \nclass Bus:\n    def __init__(self, passengers=None):\n        if passengers is None:\n            self.passengers = []\n        else:\n            self.passengers = list(passengers)\n    def pick(self, name):\n        self.passengers.append(name)\n    def drop(self, name):\n        self.passengers.remove(name)\n```\n\n:\n```python     \n>>> from bus import Bus\n>>> import copy\n>>> bus1 = Bus(['Alice', 'Bill', 'Claire', 'David'])\n>>> bus2 = copy.copy(bus1)\n>>> bus3 = copy.deepcopy(bus1)\n>>> id(bus1), id(bus2), id(bus3)\n(4571562840, 4571563288, 4571563512)\n>>> bus1.drop('Bill')\n>>> bus2.passengers\n['Alice', 'Claire', 'David']\n>>> id(bus1.passengers), id(bus2.passengers), id(bus3.passengers)\n(4571550024, 4571550024, 4566929352)\n>>> bus3.passengers\n['Alice', 'Bill', 'Claire', 'David']\n```\n\nbus2 bus1 bus3\n\ndeepcopy \n\n```python     \n>>> a = [10, 20]\n>>> b = [a, 30]\n>>> a.append(b)\n>>> a\n[10, 20, [[...], 30]]\n>>> from copy import deepcopy\n>>> c = deepcopy(a)\n>>> c\n[10, 20, [[...], 30]]   \n```\n\n\n\n#### \n\nPython call by sharing),       \n    \n\n****:\n\n```python    \n>>> def f(a, b):\n... a += b\n... return a\n...\n>>> x = 1\n>>> y = 2\n>>> f(x, y)\n3 >>> x, y\n(1, 2)\n>>> a = [1, 2]\n>>> b = [3, 4]\n>>> f(a, b)\n[1, 2, 3, 4]\n>>> a, b\n([1, 2, 3, 4], [3, 4])\n>>> t = (10, 20)\n>>> u = (30, 40)\n>>> f(t, u)\n(10, 20, 30, 40)\n>>> t, u\n((10, 20), (30, 40))\n```\n\n##### \n\n\n#####     \n \n\n```python   \nclass TwilightBus:\n    def __init__(self, passengers=None):\n        if passengers is None:\n            self.passengers = []\n        else:\n            self.passengers = passengers\n    def pick(self, name):\n        self.passengers.append(name)\n    def drop(self, name):\n        self.passengers.remove(name)\n\nbasketball_team = ['Sue', 'Tina', 'Maya', 'Diana', 'Pat']\nbus = TwilightBus(basketball_team)\nbus.drop('Tina')\nbus.drop('Pat')\nprint(basketball_team)\n>>> ['Sue', 'Maya', 'Diana']\n\n```\n\nbuspassengers basketball_teampassengersbasketball_team\n\n(__init__)\n\n```python\ndef __init__(self, passengers=None):\n    if passengers is None:\n        self.passengers = []\n    else:\n        self.passengers = list(passengers)\n```\n\npassengers\n\n#### del\n\n\ndel del  \n\n CPython CPython \\_\\_del\\_\\_ CPython2.0 \n_ Python \\_\\_del\\_\\_ _\n\nweakref\n\n```python\nimport weakref\ns1 = {1, 2, 3}\ns2 = s1\ndef bye():\n    print('goodbye')\nender = weakref.finalize(s1, bye)\n\n>>> ender.alive\nTrue\n>>> del s1\n>>> ender.alive\nTrue\n>>> s2 = 'sapm'\ngoodbye\n>>> ender.alive\nFalse\n```\n\n#### \n\n\nreferent\n\n\n\nweakrefweakref.ref weakref  finalize WeakKeyDictionaryWeakValueDictionaryWeakSet finalize weakref.ref \n\n##### WeakValueDictionary\n\nWeakValueDictionary  WeakValueDictionaryWeakValueDictionary \n\n\n\n```python    \nclass Cheese:\n    def __init__(self, kind):\n        self.kind = kind\n    def __repr__(self):\n        return 'Cheese(%r)' % self.kind\n\n>>> import weakref\n>>> stock = weakref.WeakValueDictionary()\n>>> catalog = [Cheese('Red Leicester'), Cheese('Tilsit'), Cheese('Brie'), Cheese('Parmesan')]\n>>> for cheese in catalog:\n... stock[cheese.kind] = cheese\n...\n>>> sorted(stock.keys())\n['Brie', 'Parmesan', 'Red Leicester', 'Tilsit']\n>>> del catalog\n>>> sorted(stock.keys())\n['Parmesan']\n>>> del cheese\n>>> sorted(stock.keys())\n[]\n\n```\nParmesan forcheesecheese\n\n##### \n\n Python  list  dictint  tuple \n\n#### \n Python \n\n Python     \n-   \n-  +=  *=    \n-    \n-    \n- \n","slug":"fluent-python-8","published":1,"updated":"2019-04-25T01:27:25.960Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gf003hdhyfm7x4jv32","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-8-Object-References-Mutability-and-Recycling\"><a href=\"#Chapter-8-Object-References-Mutability-and-Recycling\" class=\"headerlink\" title=\"Chapter 8. Object References, Mutability,and Recycling\"></a>Chapter 8. Object References, Mutability,and Recycling</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\":\"></a>:</h3><p> Python <br> Python  bug    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonJava<br>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b=a</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a.append(<span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-8.1.png?raw=true\" alt=\"\">    </p>\n<p> Python </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>charles = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis = charles</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis <span class=\"keyword\">is</span> charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(charles), id(lewis)</span><br><span class=\"line\">(<span class=\"number\">4300473992</span>, <span class=\"number\">4300473992</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis[<span class=\"string\">'balance'</span>] = <span class=\"number\">950</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>charles</span><br><span class=\"line\">&#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'balance'</span>: <span class=\"number\">950</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>, <span class=\"string\">'balance'</span>: <span class=\"number\">950</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex == charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(alex)</span><br><span class=\"line\"><span class=\"number\">4382361712</span></span><br></pre></td></tr></table></figure>\n<p>lewis  charles  alex  charles alex charles == </p>\n<blockquote>\n<p> is id() </p>\n</blockquote>\n<h5 id=\"is\"><a href=\"#is\" class=\"headerlink\" title=\"is==\"></a>is==</h5><p>==  is <br> Python  ==  is   </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> Python   tuple </p>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t2 = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 == t2</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(t1[<span class=\"number\">-1</span>])</span><br><span class=\"line\"><span class=\"number\">4302515784</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1[<span class=\"number\">-1</span>].append(<span class=\"number\">99</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1</span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>, <span class=\"number\">99</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(t1[<span class=\"number\">-1</span>])</span><br><span class=\"line\"><span class=\"number\">4302515784</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 == t2</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>: </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l1 = [<span class=\"number\">3</span>, [<span class=\"number\">55</span>, <span class=\"number\">44</span>], (<span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 = list(l1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2</span><br><span class=\"line\">[<span class=\"number\">3</span>, [<span class=\"number\">55</span>, <span class=\"number\">44</span>], (<span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 == l1</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 <span class=\"keyword\">is</span> l1</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<p>l2l1l2 = l1[:]  </p>\n<p> [:] (l1, l2 )  </p>\n<p>(deepcopy),:<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bus</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            self.passengers = []</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.passengers = list(passengers)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.append(name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">drop</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.remove(name)</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> bus <span class=\"keyword\">import</span> Bus</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> copy</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus1 = Bus([<span class=\"string\">'Alice'</span>, <span class=\"string\">'Bill'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus2 = copy.copy(bus1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus3 = copy.deepcopy(bus1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(bus1), id(bus2), id(bus3)</span><br><span class=\"line\">(<span class=\"number\">4571562840</span>, <span class=\"number\">4571563288</span>, <span class=\"number\">4571563512</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus1.drop(<span class=\"string\">'Bill'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus2.passengers</span><br><span class=\"line\">[<span class=\"string\">'Alice'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(bus1.passengers), id(bus2.passengers), id(bus3.passengers)</span><br><span class=\"line\">(<span class=\"number\">4571550024</span>, <span class=\"number\">4571550024</span>, <span class=\"number\">4566929352</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus3.passengers</span><br><span class=\"line\">[<span class=\"string\">'Alice'</span>, <span class=\"string\">'Bill'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>]</span><br></pre></td></tr></table></figure></p>\n<p>bus2 bus1 bus3</p>\n<p>deepcopy </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">10</span>, <span class=\"number\">20</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = [a, <span class=\"number\">30</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a.append(b)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">20</span>, [[...], <span class=\"number\">30</span>]]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> copy <span class=\"keyword\">import</span> deepcopy</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c = deepcopy(a)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">20</span>, [[...], <span class=\"number\">30</span>]]</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python call by sharing), <br>    </p>\n<p><strong></strong>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span><span class=\"params\">(a, b)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>a += b</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">return</span> a</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>x = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>y = <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(x, y)</span><br><span class=\"line\"><span class=\"number\">3</span> &gt;&gt;&gt; x, y</span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = [<span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(a, b)</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a, b</span><br><span class=\"line\">([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>], [<span class=\"number\">3</span>, <span class=\"number\">4</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t = (<span class=\"number\">10</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>u = (<span class=\"number\">30</span>, <span class=\"number\">40</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(t, u)</span><br><span class=\"line\">(<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t, u</span><br><span class=\"line\">((<span class=\"number\">10</span>, <span class=\"number\">20</span>), (<span class=\"number\">30</span>, <span class=\"number\">40</span>))</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TwilightBus</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            self.passengers = []</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.passengers = passengers</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.append(name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">drop</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.remove(name)</span><br><span class=\"line\"></span><br><span class=\"line\">basketball_team = [<span class=\"string\">'Sue'</span>, <span class=\"string\">'Tina'</span>, <span class=\"string\">'Maya'</span>, <span class=\"string\">'Diana'</span>, <span class=\"string\">'Pat'</span>]</span><br><span class=\"line\">bus = TwilightBus(basketball_team)</span><br><span class=\"line\">bus.drop(<span class=\"string\">'Tina'</span>)</span><br><span class=\"line\">bus.drop(<span class=\"string\">'Pat'</span>)</span><br><span class=\"line\">print(basketball_team)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[<span class=\"string\">'Sue'</span>, <span class=\"string\">'Maya'</span>, <span class=\"string\">'Diana'</span>]</span><br></pre></td></tr></table></figure>\n<p>buspassengers basketball_teampassengersbasketball_team</p>\n<p>(<strong>init</strong>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">        self.passengers = []</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        self.passengers = list(passengers)</span><br></pre></td></tr></table></figure>\n<p>passengers</p>\n<h4 id=\"del\"><a href=\"#del\" class=\"headerlink\" title=\"del\"></a>del</h4><p></p>\n<p>del del  </p>\n<p> CPython CPython __del__ CPython2.0 <br><em> Python \\</em>_del__ _</p>\n<p>weakref</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> weakref</span><br><span class=\"line\">s1 = &#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;</span><br><span class=\"line\">s2 = s1</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bye</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'goodbye'</span>)</span><br><span class=\"line\">ender = weakref.finalize(s1, bye)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> s1</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s2 = <span class=\"string\">'sapm'</span></span><br><span class=\"line\">goodbye</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>referent</p>\n<p></p>\n<p>weakrefweakref.ref weakref  finalize WeakKeyDictionaryWeakValueDictionaryWeakSet finalize weakref.ref </p>\n<h5 id=\"WeakValueDictionary\"><a href=\"#WeakValueDictionary\" class=\"headerlink\" title=\"WeakValueDictionary\"></a>WeakValueDictionary</h5><p>WeakValueDictionary  WeakValueDictionaryWeakValueDictionary </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cheese</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, kind)</span>:</span></span><br><span class=\"line\">        self.kind = kind</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Cheese(%r)'</span> % self.kind</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> weakref</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>stock = weakref.WeakValueDictionary()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>catalog = [Cheese(<span class=\"string\">'Red Leicester'</span>), Cheese(<span class=\"string\">'Tilsit'</span>), Cheese(<span class=\"string\">'Brie'</span>), Cheese(<span class=\"string\">'Parmesan'</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> cheese <span class=\"keyword\">in</span> catalog:</span><br><span class=\"line\"><span class=\"meta\">... </span>stock[cheese.kind] = cheese</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[<span class=\"string\">'Brie'</span>, <span class=\"string\">'Parmesan'</span>, <span class=\"string\">'Red Leicester'</span>, <span class=\"string\">'Tilsit'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> catalog</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[<span class=\"string\">'Parmesan'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> cheese</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[]</span><br></pre></td></tr></table></figure>\n<p>Parmesan forcheesecheese</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> Python  list  dictint  tuple </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python </p>\n<p> Python     </p>\n<ul>\n<li>  </li>\n<li> +=  *=    </li>\n<li>   </li>\n<li>   </li>\n<li></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-8-Object-References-Mutability-and-Recycling\"><a href=\"#Chapter-8-Object-References-Mutability-and-Recycling\" class=\"headerlink\" title=\"Chapter 8. Object References, Mutability,and Recycling\"></a>Chapter 8. Object References, Mutability,and Recycling</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\":\"></a>:</h3><p> Python <br> Python  bug    </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PythonJava<br>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b=a</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a.append(<span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-8.1.png?raw=true\" alt=\"\">    </p>\n<p> Python </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>charles = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis = charles</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis <span class=\"keyword\">is</span> charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(charles), id(lewis)</span><br><span class=\"line\">(<span class=\"number\">4300473992</span>, <span class=\"number\">4300473992</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>lewis[<span class=\"string\">'balance'</span>] = <span class=\"number\">950</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>charles</span><br><span class=\"line\">&#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'balance'</span>: <span class=\"number\">950</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex = &#123;<span class=\"string\">'name'</span>: <span class=\"string\">'Charles L. Dodgson'</span>, <span class=\"string\">'born'</span>: <span class=\"number\">1832</span>, <span class=\"string\">'balance'</span>: <span class=\"number\">950</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex == charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>alex <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> charles</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(alex)</span><br><span class=\"line\"><span class=\"number\">4382361712</span></span><br></pre></td></tr></table></figure>\n<p>lewis  charles  alex  charles alex charles == </p>\n<blockquote>\n<p> is id() </p>\n</blockquote>\n<h5 id=\"is\"><a href=\"#is\" class=\"headerlink\" title=\"is==\"></a>is==</h5><p>==  is <br> Python  ==  is   </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> Python   tuple </p>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t2 = (<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 == t2</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(t1[<span class=\"number\">-1</span>])</span><br><span class=\"line\"><span class=\"number\">4302515784</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1[<span class=\"number\">-1</span>].append(<span class=\"number\">99</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1</span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, [<span class=\"number\">30</span>, <span class=\"number\">40</span>, <span class=\"number\">99</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(t1[<span class=\"number\">-1</span>])</span><br><span class=\"line\"><span class=\"number\">4302515784</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t1 == t2</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>: </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l1 = [<span class=\"number\">3</span>, [<span class=\"number\">55</span>, <span class=\"number\">44</span>], (<span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 = list(l1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2</span><br><span class=\"line\">[<span class=\"number\">3</span>, [<span class=\"number\">55</span>, <span class=\"number\">44</span>], (<span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 == l1</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>l2 <span class=\"keyword\">is</span> l1</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<p>l2l1l2 = l1[:]  </p>\n<p> [:] (l1, l2 )  </p>\n<p>(deepcopy),:<br></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bus</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            self.passengers = []</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.passengers = list(passengers)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.append(name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">drop</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.remove(name)</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> bus <span class=\"keyword\">import</span> Bus</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> copy</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus1 = Bus([<span class=\"string\">'Alice'</span>, <span class=\"string\">'Bill'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus2 = copy.copy(bus1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus3 = copy.deepcopy(bus1)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(bus1), id(bus2), id(bus3)</span><br><span class=\"line\">(<span class=\"number\">4571562840</span>, <span class=\"number\">4571563288</span>, <span class=\"number\">4571563512</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus1.drop(<span class=\"string\">'Bill'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus2.passengers</span><br><span class=\"line\">[<span class=\"string\">'Alice'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>id(bus1.passengers), id(bus2.passengers), id(bus3.passengers)</span><br><span class=\"line\">(<span class=\"number\">4571550024</span>, <span class=\"number\">4571550024</span>, <span class=\"number\">4566929352</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>bus3.passengers</span><br><span class=\"line\">[<span class=\"string\">'Alice'</span>, <span class=\"string\">'Bill'</span>, <span class=\"string\">'Claire'</span>, <span class=\"string\">'David'</span>]</span><br></pre></td></tr></table></figure></p>\n<p>bus2 bus1 bus3</p>\n<p>deepcopy </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">10</span>, <span class=\"number\">20</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = [a, <span class=\"number\">30</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a.append(b)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">20</span>, [[...], <span class=\"number\">30</span>]]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> copy <span class=\"keyword\">import</span> deepcopy</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c = deepcopy(a)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>c</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">20</span>, [[...], <span class=\"number\">30</span>]]</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python call by sharing), <br>    </p>\n<p><strong></strong>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span><span class=\"params\">(a, b)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>a += b</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">return</span> a</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>x = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>y = <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(x, y)</span><br><span class=\"line\"><span class=\"number\">3</span> &gt;&gt;&gt; x, y</span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = [<span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = [<span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(a, b)</span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a, b</span><br><span class=\"line\">([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>], [<span class=\"number\">3</span>, <span class=\"number\">4</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t = (<span class=\"number\">10</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>u = (<span class=\"number\">30</span>, <span class=\"number\">40</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f(t, u)</span><br><span class=\"line\">(<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>t, u</span><br><span class=\"line\">((<span class=\"number\">10</span>, <span class=\"number\">20</span>), (<span class=\"number\">30</span>, <span class=\"number\">40</span>))</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TwilightBus</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            self.passengers = []</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.passengers = passengers</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">pick</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.append(name)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">drop</span><span class=\"params\">(self, name)</span>:</span></span><br><span class=\"line\">        self.passengers.remove(name)</span><br><span class=\"line\"></span><br><span class=\"line\">basketball_team = [<span class=\"string\">'Sue'</span>, <span class=\"string\">'Tina'</span>, <span class=\"string\">'Maya'</span>, <span class=\"string\">'Diana'</span>, <span class=\"string\">'Pat'</span>]</span><br><span class=\"line\">bus = TwilightBus(basketball_team)</span><br><span class=\"line\">bus.drop(<span class=\"string\">'Tina'</span>)</span><br><span class=\"line\">bus.drop(<span class=\"string\">'Pat'</span>)</span><br><span class=\"line\">print(basketball_team)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[<span class=\"string\">'Sue'</span>, <span class=\"string\">'Maya'</span>, <span class=\"string\">'Diana'</span>]</span><br></pre></td></tr></table></figure>\n<p>buspassengers basketball_teampassengersbasketball_team</p>\n<p>(<strong>init</strong>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, passengers=None)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> passengers <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">        self.passengers = []</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        self.passengers = list(passengers)</span><br></pre></td></tr></table></figure>\n<p>passengers</p>\n<h4 id=\"del\"><a href=\"#del\" class=\"headerlink\" title=\"del\"></a>del</h4><p></p>\n<p>del del  </p>\n<p> CPython CPython __del__ CPython2.0 <br><em> Python \\</em>_del__ _</p>\n<p>weakref</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> weakref</span><br><span class=\"line\">s1 = &#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>&#125;</span><br><span class=\"line\">s2 = s1</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bye</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'goodbye'</span>)</span><br><span class=\"line\">ender = weakref.finalize(s1, bye)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> s1</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>s2 = <span class=\"string\">'sapm'</span></span><br><span class=\"line\">goodbye</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ender.alive</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>referent</p>\n<p></p>\n<p>weakrefweakref.ref weakref  finalize WeakKeyDictionaryWeakValueDictionaryWeakSet finalize weakref.ref </p>\n<h5 id=\"WeakValueDictionary\"><a href=\"#WeakValueDictionary\" class=\"headerlink\" title=\"WeakValueDictionary\"></a>WeakValueDictionary</h5><p>WeakValueDictionary  WeakValueDictionaryWeakValueDictionary </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cheese</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, kind)</span>:</span></span><br><span class=\"line\">        self.kind = kind</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'Cheese(%r)'</span> % self.kind</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> weakref</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>stock = weakref.WeakValueDictionary()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>catalog = [Cheese(<span class=\"string\">'Red Leicester'</span>), Cheese(<span class=\"string\">'Tilsit'</span>), Cheese(<span class=\"string\">'Brie'</span>), Cheese(<span class=\"string\">'Parmesan'</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> cheese <span class=\"keyword\">in</span> catalog:</span><br><span class=\"line\"><span class=\"meta\">... </span>stock[cheese.kind] = cheese</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[<span class=\"string\">'Brie'</span>, <span class=\"string\">'Parmesan'</span>, <span class=\"string\">'Red Leicester'</span>, <span class=\"string\">'Tilsit'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> catalog</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[<span class=\"string\">'Parmesan'</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">del</span> cheese</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>sorted(stock.keys())</span><br><span class=\"line\">[]</span><br></pre></td></tr></table></figure>\n<p>Parmesan forcheesecheese</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> Python  list  dictint  tuple </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python </p>\n<p> Python     </p>\n<ul>\n<li>  </li>\n<li> +=  *=    </li>\n<li>   </li>\n<li>   </li>\n<li></li>\n</ul>\n"},{"title":"Fluent Python ","date":"2018-04-26T02:04:24.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 9. A Pythonic Object\n### : Pythonic \n\n Python duck typing\n\n  \n-  repr()bytes()\n- \n-  format()  str.format() \n- \n-  dict \n-  \\_\\_slots\\_\\_ \n\n#### \nPython   \n\n- repr() \n- str() \n\n\\_\\_bytes\\_\\_ \\_\\_format\\_\\_\\_\\_bytes\\_\\_  \\_\\_str\\_\\_ bytes()  \\_\\_format\\_\\_  format()  str.format() .\n\n#### \n\n\n\n```python  \nfrom array import array\nimport math\nclass Vector2d:\n    # typecode  Vector2d \n    typecode = 'd'\n    # \n    def __init__(self, x, y):\n        self.x = float(x)\n        self.y = float(y)\n    #  __iter__  Vector2d x, y = my_vector\n    def __iter__(self):\n        return (i for i in (self.x, self.y))\n    # __repr__  {!r}  Vector2d  *self  x  y  format \n    def __repr__(self):\n        class_name = type(self).__name__\n        return '{}({!r}, {!r})'.format(class_name, *self)\n    def __str__(self):\n        return str(tuple(self))\n    #  typecode  Vector2d \n    def __bytes__(self):\n        return (bytes([ord(self.typecode)])+bytes(array(self.typecode, self)))\n    # \n    def __eq__(self, other):\n        return tuple(self) == tuple(other)\n    # x^2+y^2\n    def __abs__(self):\n        return math.hypot(self.x, self.y)\n    # \n    def __bool__(self):\n        return bool(abs(self))\n\n```\n\n#### \n\nvectorvectorvector\n\nvector2d_v1.py\n\n```python   \nfrom vector2d_v0 import Vector2d as vec\n\nclass Vector2d(vec):\n    # \n    @classmethod\n    # cls\n    def frombytes(cls, octets):\n        typecode = chr(octets[0])\n        # memoryviewtypecode \n        memv = memoryview(octets[1:]).cast(typecode)\n        # memoryview, \n        return cls(*memv)\n```\n\n#### classmethod  staticmethod\npython classmethod  staticmethod\n\n- classmethod classmethod \n- staticmethod \n\n#### \n format()  str.format() .\\_\\_format\\_\\_(format_spec) format_spec format(my_obj, format_spec) str.format() {} .\n\n```python   \n>>> brl = 1/2.43\n>>> brl\n0.4115226337448559\n>>> format(brl, '0.4f') #1\n'0.4115'\n>>> '1 BRL = {rate:0.2f} USD'.format(rate=brl) #2\n'1 BRL = 0.41 USD'\n\n```\n1'0.4f'\n2'0.2f', 'rate''{0.mass:5.3e}' '0.mass', '5.3e'\n\n****: ,  format_spec \n\n\n\n```python    \ndef __format__(self, fmt_spec=''):\n    components = (format(c, fmt_spec) for c in self)\n    return '({}, {})'.format(*components)\n```\n\n\n\n```python    \n>>> v1 = Vector2d(3, 4)\n>>> format(v1)\n'(3.0, 4.0)'\n>>> format(v1, '.2f')\n'(3.00, 4.00)'\n>>> format(v1, '.3e')\n'(3.000e+00, 4.000e+00)'\n```\n\np,  'p'  <r, > r \n\n\n\n```python    \ndef angle(self):\n    return math.atan2(self.y, self.x)\n\ndef __format__(self, fmt_spec=''):\n    if fmt_spec.endswith('p'):\n        fmt_spec = fmt_spec[:-1]\n        coords = (abs(self), self.angle())\n        outer_fmt = '<{}, {}>'\n    else:\n        coords = self \n        outer_fmt = '({}, {})'\n        components = (format(c, fmt_spec) for c in coords)\n    return outer_fmt.format(*components)\n```\n\n\n#### (hashable)Vector2d\n vector2d_v3.py\nVector2d Vector2d\\_\\_hash\\_\\_Vector2d\n\nVector2d(@property(getter)):\n\n```python   \ndef __init__(self, x, y):\n    self.__x = float(x)\n    self.__y = float(y)\n@property\ndef x(self):\n    return self.__x\n@property\ndef y(self):\n    return self.__y\n\n```\n\nxy\\_\\_hash\\_\\_:\n```python     \ndef __hash__(self):\n    return hash(self.x) ^ hash(self.y)\n``` \n_ properties,\\_\\_hash\\_\\_\\_\\_eq\\_\\_hash_\n\n#### Python\n\n \\_\\_mood Python  \\_\\_dict\\_\\_ \n Dog \\_\\_mood  \\_Dog\\_\\_mood Beagle\n \\_Beagle\\_\\_moodname mangling\n\n_ _\n\nPython  self._x \n\n Vector2d  \\_\\_slots\\_\\_\n\n#### \\_\\_slots\\_\\_\nPython  \\_\\_dict\\_\\_  3.9.3  \\_\\_slots\\_\\_ \n\n```python   \nclass Vector2d:\n    __slots__ = ('__x', '__y')\n    typecode = 'd'\n```\n\n \\_\\_slots\\_\\_ Python  \\_\\_dict\\_\\_ \n\n\\_\\_slots\\_\\_  \\_\\_slots\\_\\_  \\_\\_slots\\_\\_  \\_\\_slots\\_\\_  '\\_\\_dict\\_\\_'  \\_\\_slots\\_\\_  '\\_\\_weakref\\_\\_'  \\_\\_slots\\_\\_\n\n\n#### \nPython \n\nDjango\n\n#### \n Python    \n\n\n- \\_\\_repr\\_\\_\\_\\_str\\_\\_\\_\\_format\\_\\_  \\_\\_bytes\\_\\_\n- \\_\\_abs\\_\\_\\_\\_bool\\_\\_ \\_\\_hash\\_\\_\n-  \\_\\_hash\\_\\_  \\_\\_eq\\_\\_ \n\n****\n\n\\_\\_slots\\_\\_\n\n\n\n\nTo build Pythonic objects, observe how real Python objects behave.\n                             Ancient Chinese proverb\n\n\n\n\n","source":"_posts/fluent-python-9.md","raw":"title: Fluent Python \ndate: 2018-04-26 10:04:24\ntags:\n- Python\n- \n- pythonic\n- duck typing\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 9. A Pythonic Object\n### : Pythonic \n\n Python duck typing\n\n  \n-  repr()bytes()\n- \n-  format()  str.format() \n- \n-  dict \n-  \\_\\_slots\\_\\_ \n\n#### \nPython   \n\n- repr() \n- str() \n\n\\_\\_bytes\\_\\_ \\_\\_format\\_\\_\\_\\_bytes\\_\\_  \\_\\_str\\_\\_ bytes()  \\_\\_format\\_\\_  format()  str.format() .\n\n#### \n\n\n\n```python  \nfrom array import array\nimport math\nclass Vector2d:\n    # typecode  Vector2d \n    typecode = 'd'\n    # \n    def __init__(self, x, y):\n        self.x = float(x)\n        self.y = float(y)\n    #  __iter__  Vector2d x, y = my_vector\n    def __iter__(self):\n        return (i for i in (self.x, self.y))\n    # __repr__  {!r}  Vector2d  *self  x  y  format \n    def __repr__(self):\n        class_name = type(self).__name__\n        return '{}({!r}, {!r})'.format(class_name, *self)\n    def __str__(self):\n        return str(tuple(self))\n    #  typecode  Vector2d \n    def __bytes__(self):\n        return (bytes([ord(self.typecode)])+bytes(array(self.typecode, self)))\n    # \n    def __eq__(self, other):\n        return tuple(self) == tuple(other)\n    # x^2+y^2\n    def __abs__(self):\n        return math.hypot(self.x, self.y)\n    # \n    def __bool__(self):\n        return bool(abs(self))\n\n```\n\n#### \n\nvectorvectorvector\n\nvector2d_v1.py\n\n```python   \nfrom vector2d_v0 import Vector2d as vec\n\nclass Vector2d(vec):\n    # \n    @classmethod\n    # cls\n    def frombytes(cls, octets):\n        typecode = chr(octets[0])\n        # memoryviewtypecode \n        memv = memoryview(octets[1:]).cast(typecode)\n        # memoryview, \n        return cls(*memv)\n```\n\n#### classmethod  staticmethod\npython classmethod  staticmethod\n\n- classmethod classmethod \n- staticmethod \n\n#### \n format()  str.format() .\\_\\_format\\_\\_(format_spec) format_spec format(my_obj, format_spec) str.format() {} .\n\n```python   \n>>> brl = 1/2.43\n>>> brl\n0.4115226337448559\n>>> format(brl, '0.4f') #1\n'0.4115'\n>>> '1 BRL = {rate:0.2f} USD'.format(rate=brl) #2\n'1 BRL = 0.41 USD'\n\n```\n1'0.4f'\n2'0.2f', 'rate''{0.mass:5.3e}' '0.mass', '5.3e'\n\n****: ,  format_spec \n\n\n\n```python    \ndef __format__(self, fmt_spec=''):\n    components = (format(c, fmt_spec) for c in self)\n    return '({}, {})'.format(*components)\n```\n\n\n\n```python    \n>>> v1 = Vector2d(3, 4)\n>>> format(v1)\n'(3.0, 4.0)'\n>>> format(v1, '.2f')\n'(3.00, 4.00)'\n>>> format(v1, '.3e')\n'(3.000e+00, 4.000e+00)'\n```\n\np,  'p'  <r, > r \n\n\n\n```python    \ndef angle(self):\n    return math.atan2(self.y, self.x)\n\ndef __format__(self, fmt_spec=''):\n    if fmt_spec.endswith('p'):\n        fmt_spec = fmt_spec[:-1]\n        coords = (abs(self), self.angle())\n        outer_fmt = '<{}, {}>'\n    else:\n        coords = self \n        outer_fmt = '({}, {})'\n        components = (format(c, fmt_spec) for c in coords)\n    return outer_fmt.format(*components)\n```\n\n\n#### (hashable)Vector2d\n vector2d_v3.py\nVector2d Vector2d\\_\\_hash\\_\\_Vector2d\n\nVector2d(@property(getter)):\n\n```python   \ndef __init__(self, x, y):\n    self.__x = float(x)\n    self.__y = float(y)\n@property\ndef x(self):\n    return self.__x\n@property\ndef y(self):\n    return self.__y\n\n```\n\nxy\\_\\_hash\\_\\_:\n```python     \ndef __hash__(self):\n    return hash(self.x) ^ hash(self.y)\n``` \n_ properties,\\_\\_hash\\_\\_\\_\\_eq\\_\\_hash_\n\n#### Python\n\n \\_\\_mood Python  \\_\\_dict\\_\\_ \n Dog \\_\\_mood  \\_Dog\\_\\_mood Beagle\n \\_Beagle\\_\\_moodname mangling\n\n_ _\n\nPython  self._x \n\n Vector2d  \\_\\_slots\\_\\_\n\n#### \\_\\_slots\\_\\_\nPython  \\_\\_dict\\_\\_  3.9.3  \\_\\_slots\\_\\_ \n\n```python   \nclass Vector2d:\n    __slots__ = ('__x', '__y')\n    typecode = 'd'\n```\n\n \\_\\_slots\\_\\_ Python  \\_\\_dict\\_\\_ \n\n\\_\\_slots\\_\\_  \\_\\_slots\\_\\_  \\_\\_slots\\_\\_  \\_\\_slots\\_\\_  '\\_\\_dict\\_\\_'  \\_\\_slots\\_\\_  '\\_\\_weakref\\_\\_'  \\_\\_slots\\_\\_\n\n\n#### \nPython \n\nDjango\n\n#### \n Python    \n\n\n- \\_\\_repr\\_\\_\\_\\_str\\_\\_\\_\\_format\\_\\_  \\_\\_bytes\\_\\_\n- \\_\\_abs\\_\\_\\_\\_bool\\_\\_ \\_\\_hash\\_\\_\n-  \\_\\_hash\\_\\_  \\_\\_eq\\_\\_ \n\n****\n\n\\_\\_slots\\_\\_\n\n\n\n\nTo build Pythonic objects, observe how real Python objects behave.\n                             Ancient Chinese proverb\n\n\n\n\n","slug":"fluent-python-9","published":1,"updated":"2019-04-25T01:27:25.881Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gj003kdhyfu5efkt5f","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-9-A-Pythonic-Object\"><a href=\"#Chapter-9-A-Pythonic-Object\" class=\"headerlink\" title=\"Chapter 9. A Pythonic Object\"></a>Chapter 9. A Pythonic Object</h3><h3 id=\"-Pythonic-\"><a href=\"#-Pythonic-\" class=\"headerlink\" title=\": Pythonic \"></a>: Pythonic </h3><p> Python duck typing</p>\n<p>  </p>\n<ul>\n<li> repr()bytes()</li>\n<li></li>\n<li> format()  str.format() </li>\n<li></li>\n<li> dict </li>\n<li> __slots__ </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python   </p>\n<ul>\n<li>repr() </li>\n<li>str() </li>\n</ul>\n<p>__bytes__ __format____bytes__  __str__ bytes()  __format__  format()  str.format() .</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> array <span class=\"keyword\">import</span> array</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># typecode  Vector2d </span></span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, x, y)</span>:</span></span><br><span class=\"line\">        self.x = float(x)</span><br><span class=\"line\">        self.y = float(y)</span><br><span class=\"line\">    <span class=\"comment\">#  __iter__  Vector2d x, y = my_vector</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> (self.x, self.y))</span><br><span class=\"line\">    <span class=\"comment\"># __repr__  &#123;!r&#125;  Vector2d  *self  x  y  format </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        class_name = type(self).__name__</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&#123;&#125;(&#123;!r&#125;, &#123;!r&#125;)'</span>.format(class_name, *self)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__str__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(tuple(self))</span><br><span class=\"line\">    <span class=\"comment\">#  typecode  Vector2d </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bytes__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (bytes([ord(self.typecode)])+bytes(array(self.typecode, self)))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tuple(self) == tuple(other)</span><br><span class=\"line\">    <span class=\"comment\"># x^2+y^2</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__abs__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.hypot(self.x, self.y)</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bool__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> bool(abs(self))</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vectorvectorvector</p>\n<p>vector2d_v1.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> vector2d_v0 <span class=\"keyword\">import</span> Vector2d <span class=\"keyword\">as</span> vec</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span><span class=\"params\">(vec)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"meta\">    @classmethod</span></span><br><span class=\"line\">    <span class=\"comment\"># cls</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">frombytes</span><span class=\"params\">(cls, octets)</span>:</span></span><br><span class=\"line\">        typecode = chr(octets[<span class=\"number\">0</span>])</span><br><span class=\"line\">        <span class=\"comment\"># memoryviewtypecode </span></span><br><span class=\"line\">        memv = memoryview(octets[<span class=\"number\">1</span>:]).cast(typecode)</span><br><span class=\"line\">        <span class=\"comment\"># memoryview, </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(*memv)</span><br></pre></td></tr></table></figure>\n<h4 id=\"classmethod--staticmethod\"><a href=\"#classmethod--staticmethod\" class=\"headerlink\" title=\"classmethod  staticmethod\"></a>classmethod  staticmethod</h4><p>python classmethod  staticmethod</p>\n<ul>\n<li>classmethod classmethod </li>\n<li>staticmethod </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> format()  str.format() .__format__(format_spec) format_spec format(my_obj, format_spec) str.format() {} .</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>brl = <span class=\"number\">1</span>/<span class=\"number\">2.43</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>brl</span><br><span class=\"line\"><span class=\"number\">0.4115226337448559</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(brl, <span class=\"string\">'0.4f'</span>) <span class=\"comment\">#1</span></span><br><span class=\"line\"><span class=\"string\">'0.4115'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">'1 BRL = &#123;rate:0.2f&#125; USD'</span>.format(rate=brl) <span class=\"comment\">#2</span></span><br><span class=\"line\"><span class=\"string\">'1 BRL = 0.41 USD'</span></span><br></pre></td></tr></table></figure>\n<p>10.4f<br>20.2f, rate{0.mass:5.3e} 0.mass, 5.3e</p>\n<p><strong></strong>: ,  format_spec </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> self)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'(&#123;&#125;, &#123;&#125;)'</span>.format(*components)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v1 = Vector2d(<span class=\"number\">3</span>, <span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1)</span><br><span class=\"line\"><span class=\"string\">'(3.0, 4.0)'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1, <span class=\"string\">'.2f'</span>)</span><br><span class=\"line\"><span class=\"string\">'(3.00, 4.00)'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1, <span class=\"string\">'.3e'</span>)</span><br><span class=\"line\"><span class=\"string\">'(3.000e+00, 4.000e+00)'</span></span><br></pre></td></tr></table></figure>\n<p>p,  p  &lt;r, &gt; r </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angle</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> math.atan2(self.y, self.x)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> fmt_spec.endswith(<span class=\"string\">'p'</span>):</span><br><span class=\"line\">        fmt_spec = fmt_spec[:<span class=\"number\">-1</span>]</span><br><span class=\"line\">        coords = (abs(self), self.angle())</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'&lt;&#123;&#125;, &#123;&#125;&gt;'</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        coords = self </span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'(&#123;&#125;, &#123;&#125;)'</span></span><br><span class=\"line\">        components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> coords)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> outer_fmt.format(*components)</span><br></pre></td></tr></table></figure>\n<h4 id=\"-hashable-Vector2d\"><a href=\"#-hashable-Vector2d\" class=\"headerlink\" title=\"(hashable)Vector2d\"></a>(hashable)Vector2d</h4><p> vector2d_v3.py<br>Vector2d Vector2d__hash__Vector2d</p>\n<p>Vector2d(@property(getter)):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, x, y)</span>:</span></span><br><span class=\"line\">    self.__x = float(x)</span><br><span class=\"line\">    self.__y = float(y)</span><br><span class=\"line\"><span class=\"meta\">@property</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">x</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self.__x</span><br><span class=\"line\"><span class=\"meta\">@property</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">y</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self.__y</span><br></pre></td></tr></table></figure>\n<p>xy__hash__:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__hash__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hash(self.x) ^ hash(self.y)</span><br><span class=\"line\">``` </span><br><span class=\"line\">_ properties,\\_\\_hash\\_\\_\\_\\_eq\\_\\_hash_</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### Python</span></span><br><span class=\"line\"></span><br><span class=\"line\"> \\_\\_mood Python  \\_\\_dict\\_\\_ </span><br><span class=\"line\"> Dog \\_\\_mood  \\_Dog\\_\\_mood Beagle</span><br><span class=\"line\"> \\_Beagle\\_\\_moodname mangling</span><br><span class=\"line\"></span><br><span class=\"line\">_ _</span><br><span class=\"line\"></span><br><span class=\"line\">Python  self._x </span><br><span class=\"line\"></span><br><span class=\"line\"> Vector2d  \\_\\_slots\\_\\_</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### \\_\\_slots\\_\\_</span></span><br><span class=\"line\">Python  \\_\\_dict\\_\\_  <span class=\"number\">3.9</span><span class=\"number\">.3</span>  \\_\\_slots\\_\\_ </span><br><span class=\"line\"></span><br><span class=\"line\">```python   </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span>:</span></span><br><span class=\"line\">    __slots__ = (<span class=\"string\">'__x'</span>, <span class=\"string\">'__y'</span>)</span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br></pre></td></tr></table></figure></p>\n<p> __slots__ Python  __dict__ </p>\n<p>__slots__  __slots__  __slots__  __slots__  __dict__  __slots__  __weakref__  __slots__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python </p>\n<p>Django</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python <br></p>\n<ul>\n<li>__repr____str____format__  __bytes__</li>\n<li>__abs____bool__ __hash__</li>\n<li> __hash__  __eq__ </li>\n</ul>\n<p><strong></strong></p>\n<p>__slots__</p>\n<p></p>\n<p><br>To build Pythonic objects, observe how real Python objects behave.<br>                             Ancient Chinese proverb</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-9-A-Pythonic-Object\"><a href=\"#Chapter-9-A-Pythonic-Object\" class=\"headerlink\" title=\"Chapter 9. A Pythonic Object\"></a>Chapter 9. A Pythonic Object</h3><h3 id=\"-Pythonic-\"><a href=\"#-Pythonic-\" class=\"headerlink\" title=\": Pythonic \"></a>: Pythonic </h3><p> Python duck typing</p>\n<p>  </p>\n<ul>\n<li> repr()bytes()</li>\n<li></li>\n<li> format()  str.format() </li>\n<li></li>\n<li> dict </li>\n<li> __slots__ </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python   </p>\n<ul>\n<li>repr() </li>\n<li>str() </li>\n</ul>\n<p>__bytes__ __format____bytes__  __str__ bytes()  __format__  format()  str.format() .</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> array <span class=\"keyword\">import</span> array</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># typecode  Vector2d </span></span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, x, y)</span>:</span></span><br><span class=\"line\">        self.x = float(x)</span><br><span class=\"line\">        self.y = float(y)</span><br><span class=\"line\">    <span class=\"comment\">#  __iter__  Vector2d x, y = my_vector</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> (self.x, self.y))</span><br><span class=\"line\">    <span class=\"comment\"># __repr__  &#123;!r&#125;  Vector2d  *self  x  y  format </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        class_name = type(self).__name__</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&#123;&#125;(&#123;!r&#125;, &#123;!r&#125;)'</span>.format(class_name, *self)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__str__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> str(tuple(self))</span><br><span class=\"line\">    <span class=\"comment\">#  typecode  Vector2d </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bytes__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (bytes([ord(self.typecode)])+bytes(array(self.typecode, self)))</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__eq__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tuple(self) == tuple(other)</span><br><span class=\"line\">    <span class=\"comment\"># x^2+y^2</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__abs__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> math.hypot(self.x, self.y)</span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__bool__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> bool(abs(self))</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vectorvectorvector</p>\n<p>vector2d_v1.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> vector2d_v0 <span class=\"keyword\">import</span> Vector2d <span class=\"keyword\">as</span> vec</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span><span class=\"params\">(vec)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"meta\">    @classmethod</span></span><br><span class=\"line\">    <span class=\"comment\"># cls</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">frombytes</span><span class=\"params\">(cls, octets)</span>:</span></span><br><span class=\"line\">        typecode = chr(octets[<span class=\"number\">0</span>])</span><br><span class=\"line\">        <span class=\"comment\"># memoryviewtypecode </span></span><br><span class=\"line\">        memv = memoryview(octets[<span class=\"number\">1</span>:]).cast(typecode)</span><br><span class=\"line\">        <span class=\"comment\"># memoryview, </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls(*memv)</span><br></pre></td></tr></table></figure>\n<h4 id=\"classmethod--staticmethod\"><a href=\"#classmethod--staticmethod\" class=\"headerlink\" title=\"classmethod  staticmethod\"></a>classmethod  staticmethod</h4><p>python classmethod  staticmethod</p>\n<ul>\n<li>classmethod classmethod </li>\n<li>staticmethod </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> format()  str.format() .__format__(format_spec) format_spec format(my_obj, format_spec) str.format() {} .</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>brl = <span class=\"number\">1</span>/<span class=\"number\">2.43</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>brl</span><br><span class=\"line\"><span class=\"number\">0.4115226337448559</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(brl, <span class=\"string\">'0.4f'</span>) <span class=\"comment\">#1</span></span><br><span class=\"line\"><span class=\"string\">'0.4115'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">'1 BRL = &#123;rate:0.2f&#125; USD'</span>.format(rate=brl) <span class=\"comment\">#2</span></span><br><span class=\"line\"><span class=\"string\">'1 BRL = 0.41 USD'</span></span><br></pre></td></tr></table></figure>\n<p>10.4f<br>20.2f, rate{0.mass:5.3e} 0.mass, 5.3e</p>\n<p><strong></strong>: ,  format_spec </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> self)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'(&#123;&#125;, &#123;&#125;)'</span>.format(*components)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>v1 = Vector2d(<span class=\"number\">3</span>, <span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1)</span><br><span class=\"line\"><span class=\"string\">'(3.0, 4.0)'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1, <span class=\"string\">'.2f'</span>)</span><br><span class=\"line\"><span class=\"string\">'(3.00, 4.00)'</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>format(v1, <span class=\"string\">'.3e'</span>)</span><br><span class=\"line\"><span class=\"string\">'(3.000e+00, 4.000e+00)'</span></span><br></pre></td></tr></table></figure>\n<p>p,  p  &lt;r, &gt; r </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">angle</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> math.atan2(self.y, self.x)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__format__</span><span class=\"params\">(self, fmt_spec=<span class=\"string\">''</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> fmt_spec.endswith(<span class=\"string\">'p'</span>):</span><br><span class=\"line\">        fmt_spec = fmt_spec[:<span class=\"number\">-1</span>]</span><br><span class=\"line\">        coords = (abs(self), self.angle())</span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'&lt;&#123;&#125;, &#123;&#125;&gt;'</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        coords = self </span><br><span class=\"line\">        outer_fmt = <span class=\"string\">'(&#123;&#125;, &#123;&#125;)'</span></span><br><span class=\"line\">        components = (format(c, fmt_spec) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> coords)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> outer_fmt.format(*components)</span><br></pre></td></tr></table></figure>\n<h4 id=\"-hashable-Vector2d\"><a href=\"#-hashable-Vector2d\" class=\"headerlink\" title=\"(hashable)Vector2d\"></a>(hashable)Vector2d</h4><p> vector2d_v3.py<br>Vector2d Vector2d__hash__Vector2d</p>\n<p>Vector2d(@property(getter)):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, x, y)</span>:</span></span><br><span class=\"line\">    self.__x = float(x)</span><br><span class=\"line\">    self.__y = float(y)</span><br><span class=\"line\"><span class=\"meta\">@property</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">x</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self.__x</span><br><span class=\"line\"><span class=\"meta\">@property</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">y</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> self.__y</span><br></pre></td></tr></table></figure>\n<p>xy__hash__:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__hash__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> hash(self.x) ^ hash(self.y)</span><br><span class=\"line\">``` </span><br><span class=\"line\">_ properties,\\_\\_hash\\_\\_\\_\\_eq\\_\\_hash_</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### Python</span></span><br><span class=\"line\"></span><br><span class=\"line\"> \\_\\_mood Python  \\_\\_dict\\_\\_ </span><br><span class=\"line\"> Dog \\_\\_mood  \\_Dog\\_\\_mood Beagle</span><br><span class=\"line\"> \\_Beagle\\_\\_moodname mangling</span><br><span class=\"line\"></span><br><span class=\"line\">_ _</span><br><span class=\"line\"></span><br><span class=\"line\">Python  self._x </span><br><span class=\"line\"></span><br><span class=\"line\"> Vector2d  \\_\\_slots\\_\\_</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### \\_\\_slots\\_\\_</span></span><br><span class=\"line\">Python  \\_\\_dict\\_\\_  <span class=\"number\">3.9</span><span class=\"number\">.3</span>  \\_\\_slots\\_\\_ </span><br><span class=\"line\"></span><br><span class=\"line\">```python   </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vector2d</span>:</span></span><br><span class=\"line\">    __slots__ = (<span class=\"string\">'__x'</span>, <span class=\"string\">'__y'</span>)</span><br><span class=\"line\">    typecode = <span class=\"string\">'d'</span></span><br></pre></td></tr></table></figure></p>\n<p> __slots__ Python  __dict__ </p>\n<p>__slots__  __slots__  __slots__  __slots__  __dict__  __slots__  __weakref__  __slots__</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Python </p>\n<p>Django</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> Python <br></p>\n<ul>\n<li>__repr____str____format__  __bytes__</li>\n<li>__abs____bool__ __hash__</li>\n<li> __hash__  __eq__ </li>\n</ul>\n<p><strong></strong></p>\n<p>__slots__</p>\n<p></p>\n<p><br>To build Pythonic objects, observe how real Python objects behave.<br>                             Ancient Chinese proverb</p>\n"},{"title":"Fluent Python:(1)  ","date":"2017-12-17T13:27:33.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n\n## Fluent Python ##\n### Chapter 6. Design Patterns with First-Class Functions ###\n### . (1)  \nPython\n\n\n#### \n\n##### \n\n\n> \n\n\n![1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.1.png?raw=true)\n\nUML:\n\n> :   \n> 1.  1000  5%    \n> 2.  20  10%   \n> 3.  10  7%    \n>   \n\nUML:\n\n- :  Order   \n- : Promotion     \n- : \"\"fidelityPromoBulkPromo LargeOrderPromo \n\nUML discount\nPython()Promotion\n[6.1](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.1.py)\n\n```python    \n#coding=utf8\nfrom abc import ABC, abstractmethod\nfrom collections import namedtuple\nCustomer = namedtuple('Customer', 'name fidelity')\nclass LineItem:\n    def __init__(self, product, quantity, price):\n        self.product = product\n        self.quantity = quantity\n        self.price = price\n    def total(self):\n        return self.price * self.quantity\nclass Order: # \n    def __init__(self, customer, cart, promotion=None):\n        self.customer = customer\n        self.cart = list(cart)\n        self.promotion = promotion\n    def total(self):\n        if not hasattr(self, '__total'):\n            self.__total = sum(item.total() for item in self.cart)\n        return self.__total\n    def due(self):\n        if self.promotion is None:\n            discount = 0\n        else:\n            discount = self.promotion.discount(self)\n        return self.total() - discount\n    def __repr__(self):\n        fmt = '<Order total: {:.2f} due: {:.2f}>'\n        return fmt.format(self.total(), self.due())\nclass Promotion(ABC) : # \n    @abstractmethod\n    def discount(self, order):\n    \"\"\"\"\"\"\n    \nclass FidelityPromo(Promotion): # \n    \"\"\"10005%\"\"\"\n    def discount(self, order):\n        return order.total() * .05 if order.customer.fidelity >= 1000 else 0\nclass BulkItemPromo(Promotion): # \n    \"\"\"2010%\"\"\"\n    def discount(self, order):\n        discount = 0\n        for item in order.cart:\n            if item.quantity >= 20:\n                discount += item.total() * .1\n        return discount\nclass LargeOrderPromo(Promotion): # \n    \"\"\"107%\"\"\"\n    def discount(self, order):\n        distinct_items = {item.product for item in order.cart}\n        if len(distinct_items) >= 10:\n            return order.total() * .07\n    return 0   \n```\n Promotion(ABC)@abstractmethod\n\nOrder:\n\n```python     \n>>> joe = Customer('John Doe', 0)\n>>> ann = Customer('Ann Smith', 1100)\n>>> cart = [LineItem('banana', 4, .5),\n... LineItem('apple', 10, 1.5),\n... LineItem('watermellon', 5, 5.0)]\n>>> Order(joe, cart, FidelityPromo())\n<Order total: 42.00 due: 42.00>\n>>> Order(ann, cart, FidelityPromo())\n<Order total: 42.00 due: 39.90>\n>>> banana_cart = [LineItem('banana', 30, .5),\n... LineItem('apple', 10, 1.5)]\n>>> Order(joe, banana_cart, BulkItemPromo())\n<Order total: 30.00 due: 28.50>\n>>> long_order = [LineItem(str(item_code), 1, 1.0)\n... for item_code in range(10)]\n>>> Order(joe, long_order, LargeOrderPromo())\n<Order total: 10.00 due: 9.30>\n>>> Order(joe, cart, LargeOrderPromo())\n<Order total: 42.00 due: 42.00>\n```\n\n##### \n\ndiscount, \n[6.3](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.3.py)\n\n```python\n#coding:utf-8\nfrom collections import namedtuple\n\nCustomer = namedtuple('Customer', 'name fidelity')\n\nclass LineItem:\n    def __init__(self, product, quantity, price):\n        self.product = product\n        self.quantity = quantity\n        self.price = price\n    def total(self):\n        return self.price * self.quantity\n\nclass Order: # \n    def __init__(self, customer, cart, promotion=None):\n        self.customer = customer\n        self.cart = list(cart)\n        self.promotion = promotion\n    def total(self):\n        if not hasattr(self, '__total'):\n            self.__total = sum(item.total() for item in self.cart)\n            return self.__total\n    def due(self):\n        if self.promotion is None:\n            discount = 0\n        else:\n            discount = self.promotion(self)\n        return self.total() - discount\n    def __repr__(self):\n        fmt = '<Order total: {:.2f} due: {:.2f}>'\n        return fmt.format(self.total(), self.due())\ndef fidelity_promo(order):\n    \"\"\"10005%\"\"\"\n    return order.total() * .05 if order.customer.fidelity >= 1000 else 0\ndef bulk_item_promo(order):\n    \"\"\"2010%\"\"\"\n    discount = 0\n    for item in order.cart:\n        if item.quantity >= 20:\n            discount += item.total() * .1\n    return discount\ndef large_order_promo(order):\n    \"\"\"107%\"\"\"\n    distinct_items = {item.product for item in order.cart}\n    if len(distinct_items) >= 10:\n        return order.total() * .07\n    return 0    \n```\n****    \n:   \n\n```python\n>>> joe = Customer('John Doe', 0)\n>>> ann = Customer('Ann Smith', 1100)\n>>> cart = [LineItem('banana', 4, .5),\n... LineItem('apple', 10, 1.5),\n... LineItem('watermellon', 5, 5.0)]\n>>> Order(joe, cart, fidelity_promo)\n<Order total: 42.00 due: 42.00>\n>>> Order(ann, cart, fidelity_promo)\n<Order total: 42.00 due: 39.90>\n>>> banana_cart = [LineItem('banana', 30, .5),\n... LineItem('apple', 10, 1.5)]\n>>> Order(joe, banana_cart, bulk_item_promo)\n<Order total: 30.00 due: 28.50>\n>>> long_order = [LineItem(str(item_code), 1, 1.0)\n... for item_code in range(10)]\n>>> Order(joe, long_order, large_order_promo)\n<Order total: 10.00 due: 9.30>\n>>> Order(joe, cart, large_order_promo)\n<Order total: 42.00 due: 42.00>    \n```\n\nOrder6.1\n\nflyweight   Order \n\n**** Python ****\n\n\n\n##### ()\n:\n\n```python    \npromos = [fidelity_promo, bulk_item_promo, large_order_promo]\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\nbest\\_promoOrder:promosbest\\_promo\n\n##### \nglobals(),![](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)\n\nbest\\_promo:    \n\n```python   \npromos = [globals()[name] for name in globals()\n            if name.endswith('_promo')\n                and name != 'best_promo']\ndef best_promo(order):\n\"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\n\n(promotions.py)best_promo   \n\n```python   \npromos = [func for name, func in\n            inspect.getmembers(promotions, inspect.isfunction)]\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\npromotions****\n\n#### \n:   \n  \n>  \"\"\"\"     \n\n()\n\n[](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/design-pattern-mentioned.md)\n\n\n![](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/17.png?raw=true)\n\n\n\n","source":"_posts/fluent-python-6-1.md","raw":"title: Fluent Python:(1)  \ndate: 2017-12-17 21:27:33\ntags:\n- Python\n- design pattern\n- The Strategy pattern\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n\n## Fluent Python ##\n### Chapter 6. Design Patterns with First-Class Functions ###\n### . (1)  \nPython\n\n\n#### \n\n##### \n\n\n> \n\n\n![1](https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.1.png?raw=true)\n\nUML:\n\n> :   \n> 1.  1000  5%    \n> 2.  20  10%   \n> 3.  10  7%    \n>   \n\nUML:\n\n- :  Order   \n- : Promotion     \n- : \"\"fidelityPromoBulkPromo LargeOrderPromo \n\nUML discount\nPython()Promotion\n[6.1](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.1.py)\n\n```python    \n#coding=utf8\nfrom abc import ABC, abstractmethod\nfrom collections import namedtuple\nCustomer = namedtuple('Customer', 'name fidelity')\nclass LineItem:\n    def __init__(self, product, quantity, price):\n        self.product = product\n        self.quantity = quantity\n        self.price = price\n    def total(self):\n        return self.price * self.quantity\nclass Order: # \n    def __init__(self, customer, cart, promotion=None):\n        self.customer = customer\n        self.cart = list(cart)\n        self.promotion = promotion\n    def total(self):\n        if not hasattr(self, '__total'):\n            self.__total = sum(item.total() for item in self.cart)\n        return self.__total\n    def due(self):\n        if self.promotion is None:\n            discount = 0\n        else:\n            discount = self.promotion.discount(self)\n        return self.total() - discount\n    def __repr__(self):\n        fmt = '<Order total: {:.2f} due: {:.2f}>'\n        return fmt.format(self.total(), self.due())\nclass Promotion(ABC) : # \n    @abstractmethod\n    def discount(self, order):\n    \"\"\"\"\"\"\n    \nclass FidelityPromo(Promotion): # \n    \"\"\"10005%\"\"\"\n    def discount(self, order):\n        return order.total() * .05 if order.customer.fidelity >= 1000 else 0\nclass BulkItemPromo(Promotion): # \n    \"\"\"2010%\"\"\"\n    def discount(self, order):\n        discount = 0\n        for item in order.cart:\n            if item.quantity >= 20:\n                discount += item.total() * .1\n        return discount\nclass LargeOrderPromo(Promotion): # \n    \"\"\"107%\"\"\"\n    def discount(self, order):\n        distinct_items = {item.product for item in order.cart}\n        if len(distinct_items) >= 10:\n            return order.total() * .07\n    return 0   \n```\n Promotion(ABC)@abstractmethod\n\nOrder:\n\n```python     \n>>> joe = Customer('John Doe', 0)\n>>> ann = Customer('Ann Smith', 1100)\n>>> cart = [LineItem('banana', 4, .5),\n... LineItem('apple', 10, 1.5),\n... LineItem('watermellon', 5, 5.0)]\n>>> Order(joe, cart, FidelityPromo())\n<Order total: 42.00 due: 42.00>\n>>> Order(ann, cart, FidelityPromo())\n<Order total: 42.00 due: 39.90>\n>>> banana_cart = [LineItem('banana', 30, .5),\n... LineItem('apple', 10, 1.5)]\n>>> Order(joe, banana_cart, BulkItemPromo())\n<Order total: 30.00 due: 28.50>\n>>> long_order = [LineItem(str(item_code), 1, 1.0)\n... for item_code in range(10)]\n>>> Order(joe, long_order, LargeOrderPromo())\n<Order total: 10.00 due: 9.30>\n>>> Order(joe, cart, LargeOrderPromo())\n<Order total: 42.00 due: 42.00>\n```\n\n##### \n\ndiscount, \n[6.3](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.3.py)\n\n```python\n#coding:utf-8\nfrom collections import namedtuple\n\nCustomer = namedtuple('Customer', 'name fidelity')\n\nclass LineItem:\n    def __init__(self, product, quantity, price):\n        self.product = product\n        self.quantity = quantity\n        self.price = price\n    def total(self):\n        return self.price * self.quantity\n\nclass Order: # \n    def __init__(self, customer, cart, promotion=None):\n        self.customer = customer\n        self.cart = list(cart)\n        self.promotion = promotion\n    def total(self):\n        if not hasattr(self, '__total'):\n            self.__total = sum(item.total() for item in self.cart)\n            return self.__total\n    def due(self):\n        if self.promotion is None:\n            discount = 0\n        else:\n            discount = self.promotion(self)\n        return self.total() - discount\n    def __repr__(self):\n        fmt = '<Order total: {:.2f} due: {:.2f}>'\n        return fmt.format(self.total(), self.due())\ndef fidelity_promo(order):\n    \"\"\"10005%\"\"\"\n    return order.total() * .05 if order.customer.fidelity >= 1000 else 0\ndef bulk_item_promo(order):\n    \"\"\"2010%\"\"\"\n    discount = 0\n    for item in order.cart:\n        if item.quantity >= 20:\n            discount += item.total() * .1\n    return discount\ndef large_order_promo(order):\n    \"\"\"107%\"\"\"\n    distinct_items = {item.product for item in order.cart}\n    if len(distinct_items) >= 10:\n        return order.total() * .07\n    return 0    \n```\n****    \n:   \n\n```python\n>>> joe = Customer('John Doe', 0)\n>>> ann = Customer('Ann Smith', 1100)\n>>> cart = [LineItem('banana', 4, .5),\n... LineItem('apple', 10, 1.5),\n... LineItem('watermellon', 5, 5.0)]\n>>> Order(joe, cart, fidelity_promo)\n<Order total: 42.00 due: 42.00>\n>>> Order(ann, cart, fidelity_promo)\n<Order total: 42.00 due: 39.90>\n>>> banana_cart = [LineItem('banana', 30, .5),\n... LineItem('apple', 10, 1.5)]\n>>> Order(joe, banana_cart, bulk_item_promo)\n<Order total: 30.00 due: 28.50>\n>>> long_order = [LineItem(str(item_code), 1, 1.0)\n... for item_code in range(10)]\n>>> Order(joe, long_order, large_order_promo)\n<Order total: 10.00 due: 9.30>\n>>> Order(joe, cart, large_order_promo)\n<Order total: 42.00 due: 42.00>    \n```\n\nOrder6.1\n\nflyweight   Order \n\n**** Python ****\n\n\n\n##### ()\n:\n\n```python    \npromos = [fidelity_promo, bulk_item_promo, large_order_promo]\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\nbest\\_promoOrder:promosbest\\_promo\n\n##### \nglobals(),![](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)\n\nbest\\_promo:    \n\n```python   \npromos = [globals()[name] for name in globals()\n            if name.endswith('_promo')\n                and name != 'best_promo']\ndef best_promo(order):\n\"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\n\n(promotions.py)best_promo   \n\n```python   \npromos = [func for name, func in\n            inspect.getmembers(promotions, inspect.isfunction)]\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\npromotions****\n\n#### \n:   \n  \n>  \"\"\"\"     \n\n()\n\n[](https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/design-pattern-mentioned.md)\n\n\n![](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/17.png?raw=true)\n\n\n\n","slug":"fluent-python-6-1","published":1,"updated":"2019-04-25T01:27:24.888Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gl003ndhyfw73o6nfv","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-6-Design-Patterns-with-First-Class-Functions\"><a href=\"#Chapter-6-Design-Patterns-with-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 6. Design Patterns with First-Class Functions\"></a>Chapter 6. Design Patterns with First-Class Functions</h3><h3 id=\"--1--\"><a href=\"#--1--\" class=\"headerlink\" title=\". (1)  \"></a>. (1)  </h3><p>Python</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.1.png?raw=true\" alt=\"1\"></p>\n<p>UML:</p>\n<blockquote>\n<p>:   </p>\n<ol>\n<li> 1000  5%    </li>\n<li> 20  10%   </li>\n<li> 10  7% <br>  </li>\n</ol>\n</blockquote>\n<p>UML:</p>\n<ul>\n<li>:  Order   </li>\n<li>: Promotion     </li>\n<li>: fidelityPromoBulkPromo LargeOrderPromo </li>\n</ul>\n<p>UML discount<br>Python()Promotion<br><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.1.py\" target=\"_blank\" rel=\"noopener\">6.1</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding=utf8</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABC, abstractmethod</span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\">Customer = namedtuple(<span class=\"string\">'Customer'</span>, <span class=\"string\">'name fidelity'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineItem</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, product, quantity, price)</span>:</span></span><br><span class=\"line\">        self.product = product</span><br><span class=\"line\">        self.quantity = quantity</span><br><span class=\"line\">        self.price = price</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.price * self.quantity</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, customer, cart, promotion=None)</span>:</span></span><br><span class=\"line\">        self.customer = customer</span><br><span class=\"line\">        self.cart = list(cart)</span><br><span class=\"line\">        self.promotion = promotion</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(self, <span class=\"string\">'__total'</span>):</span><br><span class=\"line\">            self.__total = sum(item.total() <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> self.cart)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__total</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">due</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.promotion <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            discount = self.promotion.discount(self)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.total() - discount</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        fmt = <span class=\"string\">'&lt;Order total: &#123;:.2f&#125; due: &#123;:.2f&#125;&gt;'</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmt.format(self.total(), self.due())</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span><span class=\"params\">(ABC)</span> :</span> <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FidelityPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BulkItemPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">                discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LargeOrderPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p> Promotion(ABC)@abstractmethod</p>\n<p>Order:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>joe = Customer(<span class=\"string\">'John Doe'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ann = Customer(<span class=\"string\">'Ann Smith'</span>, <span class=\"number\">1100</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">4</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'watermellon'</span>, <span class=\"number\">5</span>, <span class=\"number\">5.0</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, FidelityPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(ann, cart, FidelityPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">39.90</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>banana_cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">30</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, banana_cart, BulkItemPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">30.00</span> due: <span class=\"number\">28.50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>long_order = [LineItem(str(item_code), <span class=\"number\">1</span>, <span class=\"number\">1.0</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">for</span> item_code <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, long_order, LargeOrderPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">10.00</span> due: <span class=\"number\">9.30</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, LargeOrderPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>discount, <br><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.3.py\" target=\"_blank\" rel=\"noopener\">6.3</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding:utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\"></span><br><span class=\"line\">Customer = namedtuple(<span class=\"string\">'Customer'</span>, <span class=\"string\">'name fidelity'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineItem</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, product, quantity, price)</span>:</span></span><br><span class=\"line\">        self.product = product</span><br><span class=\"line\">        self.quantity = quantity</span><br><span class=\"line\">        self.price = price</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.price * self.quantity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, customer, cart, promotion=None)</span>:</span></span><br><span class=\"line\">        self.customer = customer</span><br><span class=\"line\">        self.cart = list(cart)</span><br><span class=\"line\">        self.promotion = promotion</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(self, <span class=\"string\">'__total'</span>):</span><br><span class=\"line\">            self.__total = sum(item.total() <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> self.cart)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.__total</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">due</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.promotion <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            discount = self.promotion(self)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.total() - discount</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        fmt = <span class=\"string\">'&lt;Order total: &#123;:.2f&#125; due: &#123;:.2f&#125;&gt;'</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmt.format(self.total(), self.due())</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fidelity_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bulk_item_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    discount = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">            discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">large_order_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>:   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>joe = Customer(<span class=\"string\">'John Doe'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ann = Customer(<span class=\"string\">'Ann Smith'</span>, <span class=\"number\">1100</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">4</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'watermellon'</span>, <span class=\"number\">5</span>, <span class=\"number\">5.0</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, fidelity_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(ann, cart, fidelity_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">39.90</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>banana_cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">30</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, banana_cart, bulk_item_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">30.00</span> due: <span class=\"number\">28.50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>long_order = [LineItem(str(item_code), <span class=\"number\">1</span>, <span class=\"number\">1.0</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">for</span> item_code <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, long_order, large_order_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">10.00</span> due: <span class=\"number\">9.30</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, large_order_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>Order6.1</p>\n<p>flyweight   Order </p>\n<p><strong></strong> Python <strong></strong></p>\n<p></p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h5><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [fidelity_promo, bulk_item_promo, large_order_promo]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>best_promoOrder:promosbest_promo</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>globals(),<img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt></p>\n<p>best_promo:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [globals()[name] <span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> globals()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> name.endswith(<span class=\"string\">'_promo'</span>)</span><br><span class=\"line\">                <span class=\"keyword\">and</span> name != <span class=\"string\">'best_promo'</span>]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>(promotions.py)best_promo   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [func <span class=\"keyword\">for</span> name, func <span class=\"keyword\">in</span></span><br><span class=\"line\">            inspect.getmembers(promotions, inspect.isfunction)]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>promotions<strong></strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>:   </p>\n<blockquote>\n<p>      </p>\n</blockquote>\n<p>()</p>\n<p><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/design-pattern-mentioned.md\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><br><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/17.png?raw=true\" alt></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-6-Design-Patterns-with-First-Class-Functions\"><a href=\"#Chapter-6-Design-Patterns-with-First-Class-Functions\" class=\"headerlink\" title=\"Chapter 6. Design Patterns with First-Class Functions\"></a>Chapter 6. Design Patterns with First-Class Functions</h3><h3 id=\"--1--\"><a href=\"#--1--\" class=\"headerlink\" title=\". (1)  \"></a>. (1)  </h3><p>Python</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-6.1.png?raw=true\" alt=\"1\"></p>\n<p>UML:</p>\n<blockquote>\n<p>:   </p>\n<ol>\n<li> 1000  5%    </li>\n<li> 20  10%   </li>\n<li> 10  7% <br>  </li>\n</ol>\n</blockquote>\n<p>UML:</p>\n<ul>\n<li>:  Order   </li>\n<li>: Promotion     </li>\n<li>: fidelityPromoBulkPromo LargeOrderPromo </li>\n</ul>\n<p>UML discount<br>Python()Promotion<br><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.1.py\" target=\"_blank\" rel=\"noopener\">6.1</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding=utf8</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABC, abstractmethod</span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\">Customer = namedtuple(<span class=\"string\">'Customer'</span>, <span class=\"string\">'name fidelity'</span>)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineItem</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, product, quantity, price)</span>:</span></span><br><span class=\"line\">        self.product = product</span><br><span class=\"line\">        self.quantity = quantity</span><br><span class=\"line\">        self.price = price</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.price * self.quantity</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, customer, cart, promotion=None)</span>:</span></span><br><span class=\"line\">        self.customer = customer</span><br><span class=\"line\">        self.cart = list(cart)</span><br><span class=\"line\">        self.promotion = promotion</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(self, <span class=\"string\">'__total'</span>):</span><br><span class=\"line\">            self.__total = sum(item.total() <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> self.cart)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__total</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">due</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.promotion <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            discount = self.promotion.discount(self)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.total() - discount</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        fmt = <span class=\"string\">'&lt;Order total: &#123;:.2f&#125; due: &#123;:.2f&#125;&gt;'</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmt.format(self.total(), self.due())</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Promotion</span><span class=\"params\">(ABC)</span> :</span> <span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FidelityPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BulkItemPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">                discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LargeOrderPromo</span><span class=\"params\">(Promotion)</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">discount</span><span class=\"params\">(self, order)</span>:</span></span><br><span class=\"line\">        distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p> Promotion(ABC)@abstractmethod</p>\n<p>Order:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>joe = Customer(<span class=\"string\">'John Doe'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ann = Customer(<span class=\"string\">'Ann Smith'</span>, <span class=\"number\">1100</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">4</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'watermellon'</span>, <span class=\"number\">5</span>, <span class=\"number\">5.0</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, FidelityPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(ann, cart, FidelityPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">39.90</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>banana_cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">30</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, banana_cart, BulkItemPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">30.00</span> due: <span class=\"number\">28.50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>long_order = [LineItem(str(item_code), <span class=\"number\">1</span>, <span class=\"number\">1.0</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">for</span> item_code <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, long_order, LargeOrderPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">10.00</span> due: <span class=\"number\">9.30</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, LargeOrderPromo())</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>discount, <br><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/order6.3.py\" target=\"_blank\" rel=\"noopener\">6.3</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding:utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> namedtuple</span><br><span class=\"line\"></span><br><span class=\"line\">Customer = namedtuple(<span class=\"string\">'Customer'</span>, <span class=\"string\">'name fidelity'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineItem</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, product, quantity, price)</span>:</span></span><br><span class=\"line\">        self.product = product</span><br><span class=\"line\">        self.quantity = quantity</span><br><span class=\"line\">        self.price = price</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.price * self.quantity</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Order</span>:</span> <span class=\"comment\"># </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, customer, cart, promotion=None)</span>:</span></span><br><span class=\"line\">        self.customer = customer</span><br><span class=\"line\">        self.cart = list(cart)</span><br><span class=\"line\">        self.promotion = promotion</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">total</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> hasattr(self, <span class=\"string\">'__total'</span>):</span><br><span class=\"line\">            self.__total = sum(item.total() <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> self.cart)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> self.__total</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">due</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.promotion <span class=\"keyword\">is</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">            discount = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            discount = self.promotion(self)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.total() - discount</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        fmt = <span class=\"string\">'&lt;Order total: &#123;:.2f&#125; due: &#123;:.2f&#125;&gt;'</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmt.format(self.total(), self.due())</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fidelity_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bulk_item_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    discount = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">            discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">large_order_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p><strong></strong><br>:   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>joe = Customer(<span class=\"string\">'John Doe'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>ann = Customer(<span class=\"string\">'Ann Smith'</span>, <span class=\"number\">1100</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">4</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'watermellon'</span>, <span class=\"number\">5</span>, <span class=\"number\">5.0</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, fidelity_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(ann, cart, fidelity_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">39.90</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>banana_cart = [LineItem(<span class=\"string\">'banana'</span>, <span class=\"number\">30</span>, <span class=\"number\">.5</span>),</span><br><span class=\"line\"><span class=\"meta\">... </span>LineItem(<span class=\"string\">'apple'</span>, <span class=\"number\">10</span>, <span class=\"number\">1.5</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, banana_cart, bulk_item_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">30.00</span> due: <span class=\"number\">28.50</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>long_order = [LineItem(str(item_code), <span class=\"number\">1</span>, <span class=\"number\">1.0</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"keyword\">for</span> item_code <span class=\"keyword\">in</span> range(<span class=\"number\">10</span>)]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, long_order, large_order_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">10.00</span> due: <span class=\"number\">9.30</span>&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Order(joe, cart, large_order_promo)</span><br><span class=\"line\">&lt;Order total: <span class=\"number\">42.00</span> due: <span class=\"number\">42.00</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>Order6.1</p>\n<p>flyweight   Order </p>\n<p><strong></strong> Python <strong></strong></p>\n<p></p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h5><p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [fidelity_promo, bulk_item_promo, large_order_promo]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>best_promoOrder:promosbest_promo</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>globals(),<img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt></p>\n<p>best_promo:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [globals()[name] <span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> globals()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> name.endswith(<span class=\"string\">'_promo'</span>)</span><br><span class=\"line\">                <span class=\"keyword\">and</span> name != <span class=\"string\">'best_promo'</span>]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>(promotions.py)best_promo   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = [func <span class=\"keyword\">for</span> name, func <span class=\"keyword\">in</span></span><br><span class=\"line\">            inspect.getmembers(promotions, inspect.isfunction)]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>promotions<strong></strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>:   </p>\n<blockquote>\n<p>      </p>\n</blockquote>\n<p>()</p>\n<p><a href=\"https://github.com/aldslvda/readings/blob/master/Fluent-Python/6.%20Design%20Patterns%20with%20First-Class%20Functions/design-pattern-mentioned.md\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><br><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/17.png?raw=true\" alt></p>\n"},{"title":" ","date":"2017-11-28T17:02:23.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/hnc_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n##  ##\n### .  --  ###\n\n#### \n\n\n- http\n- DNSwebIP\n- DNSip\n- \n\n#### http\n1. URL  ++http:ftp:file:mailto:     \n2. urlhttpurl,http://, /ip,      index.html/default.html    \n3. HTTP:**HTTP **URI(Method)\n![F1.1](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.1.png?raw=true)  \nHTTPMethodURIHTTP\n4. HTTP:   \nhttp,    \nMethod\"\"   \nRequest(), HEADERS(), BODY()   \nSTATUS, HEADERS(), BODY()\n![F1.2](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.2.png?raw=true)  \n\n#### DNSWEBIP\n1. TCP/IPIP(Hub)-(Router)-Hub-Router...   \n2. IP0, 1IP 01\n3. IP  DNS    \n4. DNS IP resolutionresolverDNSsocket    \nDNSDNS IP IP\n5.DNSDNSIP\n\n#### DNS\n\n##### DNS\n\n\n-  \n- Class  DNSIN\n-  \n\n||||\n|----|---|-----|\n|A  |AAddress|IP|\n|NS | NSName Server| DNS| \n|MX |MXMail Exchanger||  \n|CNAME  |CNAMECanonical Name | |\n|TXT |TXT ||\n\nDNS \n\n##### \nDNS     \n1. DNS \n2. DNS DNS\n3.    \n\n##### DNS\n1.  \n2. \n3. DNSDNS\n\n![F1.3](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.3.png?raw=true) \n\n##### DNS\n1.    \n2. \n3. \n\n#### \n##### \nWeb HTTP digital data   \nSocket \n![F1.4](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.4.png?raw=true)   \n\n,    \n:\n \n-   \n-   \n-   \n-   \n\n\n\n##### \nsocket, \n\n##### \nSocketconnect 3\n\n-   \n- IP : \n-  IP\n\\* .\n\nconnect IP \n\n\n#####  \n\n\n##### : \nWeb HTTP Web Web close \nHTTP 1.1\n\n","source":"_posts/how-network-connects-1.md","raw":"title:  \ndate: 2017-11-29 01:02:23\ntags:\n- http\n- socket\n- \ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/hnc_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n##  ##\n### .  --  ###\n\n#### \n\n\n- http\n- DNSwebIP\n- DNSip\n- \n\n#### http\n1. URL  ++http:ftp:file:mailto:     \n2. urlhttpurl,http://, /ip,      index.html/default.html    \n3. HTTP:**HTTP **URI(Method)\n![F1.1](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.1.png?raw=true)  \nHTTPMethodURIHTTP\n4. HTTP:   \nhttp,    \nMethod\"\"   \nRequest(), HEADERS(), BODY()   \nSTATUS, HEADERS(), BODY()\n![F1.2](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.2.png?raw=true)  \n\n#### DNSWEBIP\n1. TCP/IPIP(Hub)-(Router)-Hub-Router...   \n2. IP0, 1IP 01\n3. IP  DNS    \n4. DNS IP resolutionresolverDNSsocket    \nDNSDNS IP IP\n5.DNSDNSIP\n\n#### DNS\n\n##### DNS\n\n\n-  \n- Class  DNSIN\n-  \n\n||||\n|----|---|-----|\n|A  |AAddress|IP|\n|NS | NSName Server| DNS| \n|MX |MXMail Exchanger||  \n|CNAME  |CNAMECanonical Name | |\n|TXT |TXT ||\n\nDNS \n\n##### \nDNS     \n1. DNS \n2. DNS DNS\n3.    \n\n##### DNS\n1.  \n2. \n3. DNSDNS\n\n![F1.3](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.3.png?raw=true) \n\n##### DNS\n1.    \n2. \n3. \n\n#### \n##### \nWeb HTTP digital data   \nSocket \n![F1.4](https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.4.png?raw=true)   \n\n,    \n:\n \n-   \n-   \n-   \n-   \n\n\n\n##### \nsocket, \n\n##### \nSocketconnect 3\n\n-   \n- IP : \n-  IP\n\\* .\n\nconnect IP \n\n\n#####  \n\n\n##### : \nWeb HTTP Web Web close \nHTTP 1.1\n\n","slug":"how-network-connects-1","published":1,"updated":"2019-04-25T01:27:24.856Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gn003rdhyffderc9bm","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\".   \"></a>.   </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li>http</li>\n<li>DNSwebIP</li>\n<li>DNSip</li>\n<li></li>\n</ul>\n<h4 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h4><ol>\n<li>URL  ++http:ftp:file:mailto:     </li>\n<li>urlhttpurl,http://, /ip,      index.html/default.html    </li>\n<li>HTTP:<strong>HTTP </strong>URI(Method)<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.1.png?raw=true\" alt=\"F1.1\"><br>HTTPMethodURIHTTP</li>\n<li>HTTP:<br>http, <br>Method<br>Request(), HEADERS(), BODY()<br>STATUS, HEADERS(), BODY()<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.2.png?raw=true\" alt=\"F1.2\">  </li>\n</ol>\n<h4 id=\"DNSWEBIP\"><a href=\"#DNSWEBIP\" class=\"headerlink\" title=\"DNSWEBIP\"></a>DNSWEBIP</h4><ol>\n<li>TCP/IPIP(Hub)-(Router)-Hub-Router   </li>\n<li>IP0, 1IP 01</li>\n<li>IP  DNS    </li>\n<li>DNS IP resolutionresolverDNSsocket<br>DNSDNS IP IP<br>5.DNSDNSIP</li>\n</ol>\n<h4 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h4><h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><p></p>\n<ul>\n<li> </li>\n<li>Class  DNSIN</li>\n<li> </li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>AAddress</td>\n<td>IP</td>\n</tr>\n<tr>\n<td>NS</td>\n<td>NSName Server</td>\n<td>DNS</td>\n</tr>\n<tr>\n<td>MX</td>\n<td>MXMail Exchanger</td>\n<td></td>\n</tr>\n<tr>\n<td>CNAME</td>\n<td>CNAMECanonical Name </td>\n<td></td>\n</tr>\n<tr>\n<td>TXT</td>\n<td>TXT</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>DNS </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>DNS     </p>\n<ol>\n<li>DNS </li>\n<li>DNS DNS</li>\n<li>   </li>\n</ol>\n<h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><ol>\n<li> </li>\n<li></li>\n<li>DNSDNS</li>\n</ol>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.3.png?raw=true\" alt=\"F1.3\"> </p>\n<h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><ol>\n<li>   </li>\n<li></li>\n<li></li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Web HTTP digital data<br>Socket <br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.4.png?raw=true\" alt=\"F1.4\">   </p>\n<p>, <br>:</p>\n<ul>\n<li>  </li>\n<li>  </li>\n<li>  </li>\n<li>  </li>\n</ul>\n<p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>socket, </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Socketconnect 3</p>\n<ul>\n<li>  </li>\n<li>IP : </li>\n<li> IP<br>* .</li>\n</ul>\n<p>connect IP </p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h5><p></p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h5><p>Web HTTP Web Web close <br>HTTP 1.1</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\".   \"></a>.   </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li>http</li>\n<li>DNSwebIP</li>\n<li>DNSip</li>\n<li></li>\n</ul>\n<h4 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h4><ol>\n<li>URL  ++http:ftp:file:mailto:     </li>\n<li>urlhttpurl,http://, /ip,      index.html/default.html    </li>\n<li>HTTP:<strong>HTTP </strong>URI(Method)<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.1.png?raw=true\" alt=\"F1.1\"><br>HTTPMethodURIHTTP</li>\n<li>HTTP:<br>http, <br>Method<br>Request(), HEADERS(), BODY()<br>STATUS, HEADERS(), BODY()<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.2.png?raw=true\" alt=\"F1.2\">  </li>\n</ol>\n<h4 id=\"DNSWEBIP\"><a href=\"#DNSWEBIP\" class=\"headerlink\" title=\"DNSWEBIP\"></a>DNSWEBIP</h4><ol>\n<li>TCP/IPIP(Hub)-(Router)-Hub-Router   </li>\n<li>IP0, 1IP 01</li>\n<li>IP  DNS    </li>\n<li>DNS IP resolutionresolverDNSsocket<br>DNSDNS IP IP<br>5.DNSDNSIP</li>\n</ol>\n<h4 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h4><h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><p></p>\n<ul>\n<li> </li>\n<li>Class  DNSIN</li>\n<li> </li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>AAddress</td>\n<td>IP</td>\n</tr>\n<tr>\n<td>NS</td>\n<td>NSName Server</td>\n<td>DNS</td>\n</tr>\n<tr>\n<td>MX</td>\n<td>MXMail Exchanger</td>\n<td></td>\n</tr>\n<tr>\n<td>CNAME</td>\n<td>CNAMECanonical Name </td>\n<td></td>\n</tr>\n<tr>\n<td>TXT</td>\n<td>TXT</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>DNS </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>DNS     </p>\n<ol>\n<li>DNS </li>\n<li>DNS DNS</li>\n<li>   </li>\n</ol>\n<h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><ol>\n<li> </li>\n<li></li>\n<li>DNSDNS</li>\n</ol>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.3.png?raw=true\" alt=\"F1.3\"> </p>\n<h5 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h5><ol>\n<li>   </li>\n<li></li>\n<li></li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Web HTTP digital data<br>Socket <br><img src=\"https://github.com/aldslvda/blog-images/blob/master/H-N-C-1.4.png?raw=true\" alt=\"F1.4\">   </p>\n<p>, <br>:</p>\n<ul>\n<li>  </li>\n<li>  </li>\n<li>  </li>\n<li>  </li>\n</ul>\n<p></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>socket, </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Socketconnect 3</p>\n<ul>\n<li>  </li>\n<li>IP : </li>\n<li> IP<br>* .</li>\n</ul>\n<p>connect IP </p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h5><p></p>\n<h5 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h5><p>Web HTTP Web Web close <br>HTTP 1.1</p>\n"},{"title":"scrapy","date":"2017-11-23T17:01:43.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/scrapylogo.png?raw=true"],"toc":true,"comment":true,"_content":"\n\n# scrapy #\n\n:     \n  Scrapy, PySpider(Python); Nutch, Heritrix(Java)  ,  requests + json/html/xml ![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)    \n, (200+app300+300+), 1/1G/1M, ......![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true)\n\n\n\nscrapy![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true)\n\n......   \n......   \n......   \n\n......\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1015.png?raw=true)\n\nscrapy app\n\n**\\***  learning scrapy, \n\n## 1.  ##\nMac OSX, Python, OSXubuntu/debian    \n\n- scrapy\n\n```bash\nsudo pip install scrapy\n```\n\n- \n\n```bash\nscrapy startproject crawler\ntree crawler\n.\n crawler\n  __init__.py\n  items.py\n  middlewares.py\n  pipelines.py\n  settings.py\n  spiders\n      __init__.py\n scrapy.cfg\n```\nscrapy startproject crawler tree     \n:   \n\n(1) scrapy.cfg    \n(2) crawler/ :Python   \n(3) crawler/items.py: items()item   \n(4) crawler/pipelines: \n> scrapypipeline   \n   1. html   \n\t2. (item)   \n\t3.    \n\t4. item   \n\n(5) crawler/settings.py    \n(6) crawler/spiders/ :   \n\n## 2.  ##\n\n### 2.1 Item ###\nitemscrapy.item.Field\n\napp, , ****, \n   \n\n-    category ( /)    \n-    source\\_type  (app, , , ,  etc.)   \n-    source\\_name  \n-    news_sign     ()\n-    views         \n-    title         \n-    url           \n-    publish_time  \n-    text          \n-    images        \n\nitem\n\n```python\nfrom scrapy.item import Item, Field\n\nclass NewsCrawlerItem(Item):\n    category = Field()\n    source_type = Field()\n    source_name = Field()\n\n    news_sign = Field()\n    views = Field()\n    title = Field()\n    url = Field()\n    publish_time = Field()\n    text = Field()\n    images = Field()\n```\n\n### 2.2  ###\nSpider()\nSpiderscrapy.spider.BaseSpider\n- name \n- start_urls \n- parse() , scrapy.RequestResponse\n\n#### 2.2.1  ####\n\n- \n- ()\n\n   \n\n\n#### 2.2.2 (HTTPResponse Body) ####\n- html  beautifusoup/xpath/ \n- json Python\n- xml  python   \n\njsonhtmlhtmlxpath\n\n#### 2.2.3 appSpider ####\n\n```python\n#coding:utf-8\nimport datetime\nimport socket\nimport json\nimport scrapy\nimport urlparse\n\nfrom scrapy.loader.processors import MapCompose, Join\nfrom scrapy.loader import ItemLoader\nfrom scrapy.http import Request\n\nfrom news_crawler.items import NewsCrawlerItem\n\nclass BasicSpider(scrapy.Spider):\n    name = \"netease\"\n    allowed_domains = [\"163.com\"]\n    # Start on the first index page\n    chls = [\n        \"T1370583240249\",  \"T1348649145984\",  \"T1348647909107\",  \"T1348648037603\",  \n        \"T1368497029546\",  \"T1348648141035\",  \"T1474271789612\",  \"T1467284926140\",  \n        \"T1492136373327\",  \"T1348648517839\",  \"T1348648650048\",  \"T1498701411149\",  \n        \"T1348648756099\",  \"T1473054348939\",  \"T1356600029035\",  \"T1348649079062\",  \n        \"T1348649503389\",  \"T1348649176279\",  \"T1348649475931\",  \"T1411113472760\",  \n        \"T1486979691117\",  \"T1348649580692\",  \"T1348649654285\",  \"T1348649776727\",  \n        \"T1350383429665\",  \"T1421997195219\",  \"T1456394562871\",  \"T1348654060988\",  \n        \"T1348654085632\",  \"T1491816738487\",  \"T1348654105308\",  \"T1348654151579\",  \n        \"T1348654204705\",  \"T1414389941036\",  \"T1401272877187\",  \"T1385429690972\",  \n        \"T1348654225495\",  \"T1397116135282\",  \"T1444270454635\",  \"T1481105123675\",  \n        \"T1503456682313\",  \"T1464592736048\",  \"T1504171773862\",  \"T1348650593803\",  \n        \"T1348650839000\",  \"T1414142214384\",  \"T1441074311424\",  \"T1482470888760\",  \n        \"T1499853820829\",  \"T1509504918215\",  \"T1502955728035\",  \"T1509448512433\",  \n        \"T1419315959525\",  \"T1419316284722\",  \"T1419316384474\",  \"T1419316531256\",  \n        \"T1427878984398\",  \"T1433137697241\",  \"T1449126525962\",  \"T1456112189138\",  \n        \"T1493374039495\",  \"T1456112438822\",  \"T1468031118349\",  \"T1488432440430\",  \n        \"T1488432474929\",  \"T1504689350701\"\n    ]\n    start_urls = (\n        'http://c.m.163.com/nc/article/list/%s/0-20.html'%chlid for chlid in chls\n    )\n    def parse(self, response):\n        # Get the next index URLs and yield Requests\n        url_spl = response.url.split('/')\n        chl_url = '/'.join(url_spl[:-1])\n        chl_id = url_spl[-2]\n        items = json.loads(response.body)[chl_id]\n        # Get item URLs and yield Requests\n        for item in items:\n            if 'url_3w' in item and item['url_3w']:\n                news_url = item['url_3w']\n                if '_mobile' not in news_url and '3g.163.com' not in news_url:\n                    news_url = news_url.replace('.html', '_mobile.html')\n                yield Request(news_url, callback=self.parse_item, dont_filter=True)\n        if len(items) == 20:\n            page_num = int(url_spl[-1].split('-')[0]) /20 + 1\n            yield Request(chl_url+'/%d-%d.html'%(page_num*20, page_num*20+20), callback=self.parse, dont_filter=True)\n\n\n\n    def parse_item(self, response):\n        \"\"\" This function parses a netease page.\n        @returns item\n        @scrapes category source_type source_name news_sign views title url publish_time text images\n        \"\"\"\n\n        # Create the loader using the response\n        \n        item = NewsCrawlerItem()\n        item['category'] = 'image'\n        item['source_type'] = 'app'\n        item['source_name'] = self.name\n        item['news_sign'] = ''\n        item['views'] = 0\n        item['url'] = response.url\n        item['title'] = response.xpath('//h1/text()').extract()[0]\n        # Load fields using XPath expressions\n        if '3g.163.com' in response.url:\n            item['publish_time'] = response.xpath('//*[@property=\"article:published_time\"]/@content').extract()[0][:19].replace('T','')\n            item['text'] = ''.join(response.xpath('//*[@class=\"content\"]//p/text()').extract())\n            item['images'] = response.xpath('//*[@class=\"content\"]//img/@src').extract()\n            item['news_sign'] = 'netease'+response.xpath('//article/@id').extract()[0]\n        else:\n            item['publish_time'] = response.xpath('//*[@id=\"articleBody\"]/div[1]/span[1]/text()').extract()[0]\n            item['text'] = ''.join(response.xpath('//*[@class=\"article-body\"]//p/text()').extract())\n            item['images'] = response.xpath('//*[@class=\"article-body\"]//img/@src').extract()\n            item['news_sign'] = 'netease'+response.xpath('//*[@id=\"docId\"]/@value').extract()[0]\n        return item\n```\n\n#### 2.2.4  ####\nparseresponse\nparse()yeild,\nRequest:\n\n```python\nclass Request(object_ref):\n\n    def __init__(self, url, callback=None, method='GET', headers=None, body=None,\n                 cookies=None, meta=None, encoding='utf-8', priority=0,\n                 dont_filter=False, errback=None, flags=None):\n```\n\n3,url,callback,dont\\_filter\nyeildparse\\_item();    \nyeildparse(),scrapycallbackparse(),parse()\ndont\\_filterRequesturl()\n\nparse\\_item()html\n\n\n\n## 3  ##\nmongoDb\n### 3.1 MongoDB ###\nsettings.pyMongoDB\n\n```python\n# MongoDB settings\nMONGODB_SERVER = \"$mongo_server\"\nMONGODB_PORT = 27017\nMONGODB_DB = \"news\"\nMONGODB_COLLECTION = \"news_item\"\n\n```\nserverip\n### 3.2 MongoDBPipeline ###\n\n```python\nfrom pymongo import MongoClient\n\nfrom scrapy.conf import settings\nfrom scrapy.exceptions import DropItem\nfrom scrapy import log\n\n\nclass MongoDBPipeline(object):\n\n    def __init__(self):\n        client = MongoClient(\n            settings['MONGODB_SERVER'],\n            settings['MONGODB_PORT']\n        )\n        news_db = client[settings['MONGODB_DB']]\n        self.collection = news_db[settings['MONGODB_COLLECTION']]\n\n    def process_item(self, item, spider):\n        valid = True\n        if not item['news_sign']:\n            valid = False\n            raise DropItem(\"Missing item!\")\n        if valid:\n            self.collection.insert(dict(item))\n            log.msg(\"news added to MongoDB database!\",\n                    level=log.INFO, spider=spider)\n        return item\n\n```\n\npipelineitem\n\n### 3.3 pipeline ###\n settings.py\n \n ```python\n ITEM_PIPELINES = {\n    'news_crawler.pipelines.mongodb_ppl.MongoDBPipeline': 300,\n}\n \n ```\n \n pipeline()\n \n \n## 4. ##\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true)\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true)\n","source":"_posts/scrapy_crawler_01.md","raw":"title: scrapy\ndate: 2017-11-24 01:01:43\ntags:\n- Python\n- scrapy\n- crawler\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/scrapylogo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n\n# scrapy #\n\n:     \n  Scrapy, PySpider(Python); Nutch, Heritrix(Java)  ,  requests + json/html/xml ![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true)    \n, (200+app300+300+), 1/1G/1M, ......![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true)\n\n\n\nscrapy![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true)\n\n......   \n......   \n......   \n\n......\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1015.png?raw=true)\n\nscrapy app\n\n**\\***  learning scrapy, \n\n## 1.  ##\nMac OSX, Python, OSXubuntu/debian    \n\n- scrapy\n\n```bash\nsudo pip install scrapy\n```\n\n- \n\n```bash\nscrapy startproject crawler\ntree crawler\n.\n crawler\n  __init__.py\n  items.py\n  middlewares.py\n  pipelines.py\n  settings.py\n  spiders\n      __init__.py\n scrapy.cfg\n```\nscrapy startproject crawler tree     \n:   \n\n(1) scrapy.cfg    \n(2) crawler/ :Python   \n(3) crawler/items.py: items()item   \n(4) crawler/pipelines: \n> scrapypipeline   \n   1. html   \n\t2. (item)   \n\t3.    \n\t4. item   \n\n(5) crawler/settings.py    \n(6) crawler/spiders/ :   \n\n## 2.  ##\n\n### 2.1 Item ###\nitemscrapy.item.Field\n\napp, , ****, \n   \n\n-    category ( /)    \n-    source\\_type  (app, , , ,  etc.)   \n-    source\\_name  \n-    news_sign     ()\n-    views         \n-    title         \n-    url           \n-    publish_time  \n-    text          \n-    images        \n\nitem\n\n```python\nfrom scrapy.item import Item, Field\n\nclass NewsCrawlerItem(Item):\n    category = Field()\n    source_type = Field()\n    source_name = Field()\n\n    news_sign = Field()\n    views = Field()\n    title = Field()\n    url = Field()\n    publish_time = Field()\n    text = Field()\n    images = Field()\n```\n\n### 2.2  ###\nSpider()\nSpiderscrapy.spider.BaseSpider\n- name \n- start_urls \n- parse() , scrapy.RequestResponse\n\n#### 2.2.1  ####\n\n- \n- ()\n\n   \n\n\n#### 2.2.2 (HTTPResponse Body) ####\n- html  beautifusoup/xpath/ \n- json Python\n- xml  python   \n\njsonhtmlhtmlxpath\n\n#### 2.2.3 appSpider ####\n\n```python\n#coding:utf-8\nimport datetime\nimport socket\nimport json\nimport scrapy\nimport urlparse\n\nfrom scrapy.loader.processors import MapCompose, Join\nfrom scrapy.loader import ItemLoader\nfrom scrapy.http import Request\n\nfrom news_crawler.items import NewsCrawlerItem\n\nclass BasicSpider(scrapy.Spider):\n    name = \"netease\"\n    allowed_domains = [\"163.com\"]\n    # Start on the first index page\n    chls = [\n        \"T1370583240249\",  \"T1348649145984\",  \"T1348647909107\",  \"T1348648037603\",  \n        \"T1368497029546\",  \"T1348648141035\",  \"T1474271789612\",  \"T1467284926140\",  \n        \"T1492136373327\",  \"T1348648517839\",  \"T1348648650048\",  \"T1498701411149\",  \n        \"T1348648756099\",  \"T1473054348939\",  \"T1356600029035\",  \"T1348649079062\",  \n        \"T1348649503389\",  \"T1348649176279\",  \"T1348649475931\",  \"T1411113472760\",  \n        \"T1486979691117\",  \"T1348649580692\",  \"T1348649654285\",  \"T1348649776727\",  \n        \"T1350383429665\",  \"T1421997195219\",  \"T1456394562871\",  \"T1348654060988\",  \n        \"T1348654085632\",  \"T1491816738487\",  \"T1348654105308\",  \"T1348654151579\",  \n        \"T1348654204705\",  \"T1414389941036\",  \"T1401272877187\",  \"T1385429690972\",  \n        \"T1348654225495\",  \"T1397116135282\",  \"T1444270454635\",  \"T1481105123675\",  \n        \"T1503456682313\",  \"T1464592736048\",  \"T1504171773862\",  \"T1348650593803\",  \n        \"T1348650839000\",  \"T1414142214384\",  \"T1441074311424\",  \"T1482470888760\",  \n        \"T1499853820829\",  \"T1509504918215\",  \"T1502955728035\",  \"T1509448512433\",  \n        \"T1419315959525\",  \"T1419316284722\",  \"T1419316384474\",  \"T1419316531256\",  \n        \"T1427878984398\",  \"T1433137697241\",  \"T1449126525962\",  \"T1456112189138\",  \n        \"T1493374039495\",  \"T1456112438822\",  \"T1468031118349\",  \"T1488432440430\",  \n        \"T1488432474929\",  \"T1504689350701\"\n    ]\n    start_urls = (\n        'http://c.m.163.com/nc/article/list/%s/0-20.html'%chlid for chlid in chls\n    )\n    def parse(self, response):\n        # Get the next index URLs and yield Requests\n        url_spl = response.url.split('/')\n        chl_url = '/'.join(url_spl[:-1])\n        chl_id = url_spl[-2]\n        items = json.loads(response.body)[chl_id]\n        # Get item URLs and yield Requests\n        for item in items:\n            if 'url_3w' in item and item['url_3w']:\n                news_url = item['url_3w']\n                if '_mobile' not in news_url and '3g.163.com' not in news_url:\n                    news_url = news_url.replace('.html', '_mobile.html')\n                yield Request(news_url, callback=self.parse_item, dont_filter=True)\n        if len(items) == 20:\n            page_num = int(url_spl[-1].split('-')[0]) /20 + 1\n            yield Request(chl_url+'/%d-%d.html'%(page_num*20, page_num*20+20), callback=self.parse, dont_filter=True)\n\n\n\n    def parse_item(self, response):\n        \"\"\" This function parses a netease page.\n        @returns item\n        @scrapes category source_type source_name news_sign views title url publish_time text images\n        \"\"\"\n\n        # Create the loader using the response\n        \n        item = NewsCrawlerItem()\n        item['category'] = 'image'\n        item['source_type'] = 'app'\n        item['source_name'] = self.name\n        item['news_sign'] = ''\n        item['views'] = 0\n        item['url'] = response.url\n        item['title'] = response.xpath('//h1/text()').extract()[0]\n        # Load fields using XPath expressions\n        if '3g.163.com' in response.url:\n            item['publish_time'] = response.xpath('//*[@property=\"article:published_time\"]/@content').extract()[0][:19].replace('T','')\n            item['text'] = ''.join(response.xpath('//*[@class=\"content\"]//p/text()').extract())\n            item['images'] = response.xpath('//*[@class=\"content\"]//img/@src').extract()\n            item['news_sign'] = 'netease'+response.xpath('//article/@id').extract()[0]\n        else:\n            item['publish_time'] = response.xpath('//*[@id=\"articleBody\"]/div[1]/span[1]/text()').extract()[0]\n            item['text'] = ''.join(response.xpath('//*[@class=\"article-body\"]//p/text()').extract())\n            item['images'] = response.xpath('//*[@class=\"article-body\"]//img/@src').extract()\n            item['news_sign'] = 'netease'+response.xpath('//*[@id=\"docId\"]/@value').extract()[0]\n        return item\n```\n\n#### 2.2.4  ####\nparseresponse\nparse()yeild,\nRequest:\n\n```python\nclass Request(object_ref):\n\n    def __init__(self, url, callback=None, method='GET', headers=None, body=None,\n                 cookies=None, meta=None, encoding='utf-8', priority=0,\n                 dont_filter=False, errback=None, flags=None):\n```\n\n3,url,callback,dont\\_filter\nyeildparse\\_item();    \nyeildparse(),scrapycallbackparse(),parse()\ndont\\_filterRequesturl()\n\nparse\\_item()html\n\n\n\n## 3  ##\nmongoDb\n### 3.1 MongoDB ###\nsettings.pyMongoDB\n\n```python\n# MongoDB settings\nMONGODB_SERVER = \"$mongo_server\"\nMONGODB_PORT = 27017\nMONGODB_DB = \"news\"\nMONGODB_COLLECTION = \"news_item\"\n\n```\nserverip\n### 3.2 MongoDBPipeline ###\n\n```python\nfrom pymongo import MongoClient\n\nfrom scrapy.conf import settings\nfrom scrapy.exceptions import DropItem\nfrom scrapy import log\n\n\nclass MongoDBPipeline(object):\n\n    def __init__(self):\n        client = MongoClient(\n            settings['MONGODB_SERVER'],\n            settings['MONGODB_PORT']\n        )\n        news_db = client[settings['MONGODB_DB']]\n        self.collection = news_db[settings['MONGODB_COLLECTION']]\n\n    def process_item(self, item, spider):\n        valid = True\n        if not item['news_sign']:\n            valid = False\n            raise DropItem(\"Missing item!\")\n        if valid:\n            self.collection.insert(dict(item))\n            log.msg(\"news added to MongoDB database!\",\n                    level=log.INFO, spider=spider)\n        return item\n\n```\n\npipelineitem\n\n### 3.3 pipeline ###\n settings.py\n \n ```python\n ITEM_PIPELINES = {\n    'news_crawler.pipelines.mongodb_ppl.MongoDBPipeline': 300,\n}\n \n ```\n \n pipeline()\n \n \n## 4. ##\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true)\n\n![1](https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true)\n","slug":"scrapy_crawler_01","published":1,"updated":"2019-04-25T01:27:25.032Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gp003udhyfxgaccm26","content":"<h1 id=\"scrapy\"><a href=\"#scrapy\" class=\"headerlink\" title=\"scrapy\"></a>scrapy</h1><p>: <br>  Scrapy, PySpider(Python); Nutch, Heritrix(Java)  ,  requests + json/html/xml <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt=\"1\"><br>, (200+app300+300+), 1/1G/1M, <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true\" alt=\"1\"></p>\n<p></p>\n<p>scrapy<img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true\" alt=\"1\"></p>\n<p><br><br>   </p>\n<p></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1015.png?raw=true\" alt=\"1\"></p>\n<p>scrapy app</p>\n<p><strong>*</strong>  learning scrapy, </p>\n<h2 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h2><p>Mac OSX, Python, OSXubuntu/debian    </p>\n<ul>\n<li>scrapy</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pip install scrapy</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scrapy startproject crawler</span><br><span class=\"line\">tree crawler</span><br><span class=\"line\">.</span><br><span class=\"line\"> crawler</span><br><span class=\"line\">  __init__.py</span><br><span class=\"line\">  items.py</span><br><span class=\"line\">  middlewares.py</span><br><span class=\"line\">  pipelines.py</span><br><span class=\"line\">  settings.py</span><br><span class=\"line\">  spiders</span><br><span class=\"line\">      __init__.py</span><br><span class=\"line\"> scrapy.cfg</span><br></pre></td></tr></table></figure>\n<p>scrapy startproject crawler tree<br>:   </p>\n<p>(1) scrapy.cfg <br>(2) crawler/ :Python<br>(3) crawler/items.py: items()item<br>(4) crawler/pipelines: </p>\n<blockquote>\n<p>scrapypipeline   </p>\n<ol>\n<li>html   <ol start=\"2\">\n<li>(item)   </li>\n<li>   </li>\n<li>item   </li>\n</ol>\n</li>\n</ol>\n</blockquote>\n<p>(5) crawler/settings.py <br>(6) crawler/spiders/ :   </p>\n<h2 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h2><h3 id=\"2-1-Item\"><a href=\"#2-1-Item\" class=\"headerlink\" title=\"2.1 Item\"></a>2.1 Item</h3><p>itemscrapy.item.Field</p>\n<p>app, , <strong></strong>, <br>   </p>\n<ul>\n<li>category ( /)    </li>\n<li>source_type  (app, , , ,  etc.)   </li>\n<li>source_name  </li>\n<li>news_sign     ()</li>\n<li>views         </li>\n<li>title         </li>\n<li>url           </li>\n<li>publish_time  </li>\n<li>text          </li>\n<li>images        </li>\n</ul>\n<p>item</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> scrapy.item <span class=\"keyword\">import</span> Item, Field</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NewsCrawlerItem</span><span class=\"params\">(Item)</span>:</span></span><br><span class=\"line\">    category = Field()</span><br><span class=\"line\">    source_type = Field()</span><br><span class=\"line\">    source_name = Field()</span><br><span class=\"line\"></span><br><span class=\"line\">    news_sign = Field()</span><br><span class=\"line\">    views = Field()</span><br><span class=\"line\">    title = Field()</span><br><span class=\"line\">    url = Field()</span><br><span class=\"line\">    publish_time = Field()</span><br><span class=\"line\">    text = Field()</span><br><span class=\"line\">    images = Field()</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>Spider()<br>Spiderscrapy.spider.BaseSpider</p>\n<ul>\n<li>name </li>\n<li>start_urls </li>\n<li>parse() , scrapy.RequestResponse</li>\n</ul>\n<h4 id=\"2-2-1-\"><a href=\"#2-2-1-\" class=\"headerlink\" title=\"2.2.1 \"></a>2.2.1 </h4><p></p>\n<ul>\n<li></li>\n<li>()</li>\n</ul>\n<p><br></p>\n<h4 id=\"2-2-2--HTTPResponse-Body-\"><a href=\"#2-2-2--HTTPResponse-Body-\" class=\"headerlink\" title=\"2.2.2 (HTTPResponse Body)\"></a>2.2.2 (HTTPResponse Body)</h4><ul>\n<li>html  beautifusoup/xpath/ </li>\n<li>json Python</li>\n<li>xml  python   </li>\n</ul>\n<p>jsonhtmlhtmlxpath</p>\n<h4 id=\"2-2-3-appSpider\"><a href=\"#2-2-3-appSpider\" class=\"headerlink\" title=\"2.2.3 appSpider\"></a>2.2.3 appSpider</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding:utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> scrapy</span><br><span class=\"line\"><span class=\"keyword\">import</span> urlparse</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.loader.processors <span class=\"keyword\">import</span> MapCompose, Join</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.loader <span class=\"keyword\">import</span> ItemLoader</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.http <span class=\"keyword\">import</span> Request</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> news_crawler.items <span class=\"keyword\">import</span> NewsCrawlerItem</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BasicSpider</span><span class=\"params\">(scrapy.Spider)</span>:</span></span><br><span class=\"line\">    name = <span class=\"string\">\"netease\"</span></span><br><span class=\"line\">    allowed_domains = [<span class=\"string\">\"163.com\"</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Start on the first index page</span></span><br><span class=\"line\">    chls = [</span><br><span class=\"line\">        <span class=\"string\">\"T1370583240249\"</span>,  <span class=\"string\">\"T1348649145984\"</span>,  <span class=\"string\">\"T1348647909107\"</span>,  <span class=\"string\">\"T1348648037603\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1368497029546\"</span>,  <span class=\"string\">\"T1348648141035\"</span>,  <span class=\"string\">\"T1474271789612\"</span>,  <span class=\"string\">\"T1467284926140\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1492136373327\"</span>,  <span class=\"string\">\"T1348648517839\"</span>,  <span class=\"string\">\"T1348648650048\"</span>,  <span class=\"string\">\"T1498701411149\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348648756099\"</span>,  <span class=\"string\">\"T1473054348939\"</span>,  <span class=\"string\">\"T1356600029035\"</span>,  <span class=\"string\">\"T1348649079062\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348649503389\"</span>,  <span class=\"string\">\"T1348649176279\"</span>,  <span class=\"string\">\"T1348649475931\"</span>,  <span class=\"string\">\"T1411113472760\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1486979691117\"</span>,  <span class=\"string\">\"T1348649580692\"</span>,  <span class=\"string\">\"T1348649654285\"</span>,  <span class=\"string\">\"T1348649776727\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1350383429665\"</span>,  <span class=\"string\">\"T1421997195219\"</span>,  <span class=\"string\">\"T1456394562871\"</span>,  <span class=\"string\">\"T1348654060988\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654085632\"</span>,  <span class=\"string\">\"T1491816738487\"</span>,  <span class=\"string\">\"T1348654105308\"</span>,  <span class=\"string\">\"T1348654151579\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654204705\"</span>,  <span class=\"string\">\"T1414389941036\"</span>,  <span class=\"string\">\"T1401272877187\"</span>,  <span class=\"string\">\"T1385429690972\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654225495\"</span>,  <span class=\"string\">\"T1397116135282\"</span>,  <span class=\"string\">\"T1444270454635\"</span>,  <span class=\"string\">\"T1481105123675\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1503456682313\"</span>,  <span class=\"string\">\"T1464592736048\"</span>,  <span class=\"string\">\"T1504171773862\"</span>,  <span class=\"string\">\"T1348650593803\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348650839000\"</span>,  <span class=\"string\">\"T1414142214384\"</span>,  <span class=\"string\">\"T1441074311424\"</span>,  <span class=\"string\">\"T1482470888760\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1499853820829\"</span>,  <span class=\"string\">\"T1509504918215\"</span>,  <span class=\"string\">\"T1502955728035\"</span>,  <span class=\"string\">\"T1509448512433\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1419315959525\"</span>,  <span class=\"string\">\"T1419316284722\"</span>,  <span class=\"string\">\"T1419316384474\"</span>,  <span class=\"string\">\"T1419316531256\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1427878984398\"</span>,  <span class=\"string\">\"T1433137697241\"</span>,  <span class=\"string\">\"T1449126525962\"</span>,  <span class=\"string\">\"T1456112189138\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1493374039495\"</span>,  <span class=\"string\">\"T1456112438822\"</span>,  <span class=\"string\">\"T1468031118349\"</span>,  <span class=\"string\">\"T1488432440430\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1488432474929\"</span>,  <span class=\"string\">\"T1504689350701\"</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">    start_urls = (</span><br><span class=\"line\">        <span class=\"string\">'http://c.m.163.com/nc/article/list/%s/0-20.html'</span>%chlid <span class=\"keyword\">for</span> chlid <span class=\"keyword\">in</span> chls</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse</span><span class=\"params\">(self, response)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># Get the next index URLs and yield Requests</span></span><br><span class=\"line\">        url_spl = response.url.split(<span class=\"string\">'/'</span>)</span><br><span class=\"line\">        chl_url = <span class=\"string\">'/'</span>.join(url_spl[:<span class=\"number\">-1</span>])</span><br><span class=\"line\">        chl_id = url_spl[<span class=\"number\">-2</span>]</span><br><span class=\"line\">        items = json.loads(response.body)[chl_id]</span><br><span class=\"line\">        <span class=\"comment\"># Get item URLs and yield Requests</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> items:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">'url_3w'</span> <span class=\"keyword\">in</span> item <span class=\"keyword\">and</span> item[<span class=\"string\">'url_3w'</span>]:</span><br><span class=\"line\">                news_url = item[<span class=\"string\">'url_3w'</span>]</span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"string\">'_mobile'</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> news_url <span class=\"keyword\">and</span> <span class=\"string\">'3g.163.com'</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> news_url:</span><br><span class=\"line\">                    news_url = news_url.replace(<span class=\"string\">'.html'</span>, <span class=\"string\">'_mobile.html'</span>)</span><br><span class=\"line\">                <span class=\"keyword\">yield</span> Request(news_url, callback=self.parse_item, dont_filter=<span class=\"literal\">True</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> len(items) == <span class=\"number\">20</span>:</span><br><span class=\"line\">            page_num = int(url_spl[<span class=\"number\">-1</span>].split(<span class=\"string\">'-'</span>)[<span class=\"number\">0</span>]) /<span class=\"number\">20</span> + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">yield</span> Request(chl_url+<span class=\"string\">'/%d-%d.html'</span>%(page_num*<span class=\"number\">20</span>, page_num*<span class=\"number\">20</span>+<span class=\"number\">20</span>), callback=self.parse, dont_filter=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_item</span><span class=\"params\">(self, response)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\" This function parses a netease page.</span></span><br><span class=\"line\"><span class=\"string\">        @returns item</span></span><br><span class=\"line\"><span class=\"string\">        @scrapes category source_type source_name news_sign views title url publish_time text images</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Create the loader using the response</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        item = NewsCrawlerItem()</span><br><span class=\"line\">        item[<span class=\"string\">'category'</span>] = <span class=\"string\">'image'</span></span><br><span class=\"line\">        item[<span class=\"string\">'source_type'</span>] = <span class=\"string\">'app'</span></span><br><span class=\"line\">        item[<span class=\"string\">'source_name'</span>] = self.name</span><br><span class=\"line\">        item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">''</span></span><br><span class=\"line\">        item[<span class=\"string\">'views'</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        item[<span class=\"string\">'url'</span>] = response.url</span><br><span class=\"line\">        item[<span class=\"string\">'title'</span>] = response.xpath(<span class=\"string\">'//h1/text()'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"comment\"># Load fields using XPath expressions</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">'3g.163.com'</span> <span class=\"keyword\">in</span> response.url:</span><br><span class=\"line\">            item[<span class=\"string\">'publish_time'</span>] = response.xpath(<span class=\"string\">'//*[@property=\"article:published_time\"]/@content'</span>).extract()[<span class=\"number\">0</span>][:<span class=\"number\">19</span>].replace(<span class=\"string\">'T'</span>,<span class=\"string\">''</span>)</span><br><span class=\"line\">            item[<span class=\"string\">'text'</span>] = <span class=\"string\">''</span>.join(response.xpath(<span class=\"string\">'//*[@class=\"content\"]//p/text()'</span>).extract())</span><br><span class=\"line\">            item[<span class=\"string\">'images'</span>] = response.xpath(<span class=\"string\">'//*[@class=\"content\"]//img/@src'</span>).extract()</span><br><span class=\"line\">            item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">'netease'</span>+response.xpath(<span class=\"string\">'//article/@id'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            item[<span class=\"string\">'publish_time'</span>] = response.xpath(<span class=\"string\">'//*[@id=\"articleBody\"]/div[1]/span[1]/text()'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">            item[<span class=\"string\">'text'</span>] = <span class=\"string\">''</span>.join(response.xpath(<span class=\"string\">'//*[@class=\"article-body\"]//p/text()'</span>).extract())</span><br><span class=\"line\">            item[<span class=\"string\">'images'</span>] = response.xpath(<span class=\"string\">'//*[@class=\"article-body\"]//img/@src'</span>).extract()</span><br><span class=\"line\">            item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">'netease'</span>+response.xpath(<span class=\"string\">'//*[@id=\"docId\"]/@value'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-2-4-\"><a href=\"#2-2-4-\" class=\"headerlink\" title=\"2.2.4 \"></a>2.2.4 </h4><p>parseresponse<br>parse()yeild,<br>Request:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Request</span><span class=\"params\">(object_ref)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, url, callback=None, method=<span class=\"string\">'GET'</span>, headers=None, body=None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 cookies=None, meta=None, encoding=<span class=\"string\">'utf-8'</span>, priority=<span class=\"number\">0</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 dont_filter=False, errback=None, flags=None)</span>:</span></span><br></pre></td></tr></table></figure>\n<p>3,url,callback,dont_filter<br>yeildparse_item();<br>yeildparse(),scrapycallbackparse(),parse()<br>dont_filterRequesturl()</p>\n<p>parse_item()html</p>\n<h2 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3 \"></a>3 </h2><p>mongoDb</p>\n<h3 id=\"3-1-MongoDB\"><a href=\"#3-1-MongoDB\" class=\"headerlink\" title=\"3.1 MongoDB\"></a>3.1 MongoDB</h3><p>settings.pyMongoDB</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># MongoDB settings</span></span><br><span class=\"line\">MONGODB_SERVER = <span class=\"string\">\"$mongo_server\"</span></span><br><span class=\"line\">MONGODB_PORT = <span class=\"number\">27017</span></span><br><span class=\"line\">MONGODB_DB = <span class=\"string\">\"news\"</span></span><br><span class=\"line\">MONGODB_COLLECTION = <span class=\"string\">\"news_item\"</span></span><br></pre></td></tr></table></figure>\n<p>serverip</p>\n<h3 id=\"3-2-MongoDBPipeline\"><a href=\"#3-2-MongoDBPipeline\" class=\"headerlink\" title=\"3.2 MongoDBPipeline\"></a>3.2 MongoDBPipeline</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.conf <span class=\"keyword\">import</span> settings</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.exceptions <span class=\"keyword\">import</span> DropItem</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy <span class=\"keyword\">import</span> log</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MongoDBPipeline</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        client = MongoClient(</span><br><span class=\"line\">            settings[<span class=\"string\">'MONGODB_SERVER'</span>],</span><br><span class=\"line\">            settings[<span class=\"string\">'MONGODB_PORT'</span>]</span><br><span class=\"line\">        )</span><br><span class=\"line\">        news_db = client[settings[<span class=\"string\">'MONGODB_DB'</span>]]</span><br><span class=\"line\">        self.collection = news_db[settings[<span class=\"string\">'MONGODB_COLLECTION'</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_item</span><span class=\"params\">(self, item, spider)</span>:</span></span><br><span class=\"line\">        valid = <span class=\"literal\">True</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> item[<span class=\"string\">'news_sign'</span>]:</span><br><span class=\"line\">            valid = <span class=\"literal\">False</span></span><br><span class=\"line\">            <span class=\"keyword\">raise</span> DropItem(<span class=\"string\">\"Missing item!\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> valid:</span><br><span class=\"line\">            self.collection.insert(dict(item))</span><br><span class=\"line\">            log.msg(<span class=\"string\">\"news added to MongoDB database!\"</span>,</span><br><span class=\"line\">                    level=log.INFO, spider=spider)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item</span><br></pre></td></tr></table></figure>\n<p>pipelineitem</p>\n<h3 id=\"3-3-pipeline\"><a href=\"#3-3-pipeline\" class=\"headerlink\" title=\"3.3 pipeline\"></a>3.3 pipeline</h3><p> settings.py</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ITEM_PIPELINES = &#123;</span><br><span class=\"line\">    <span class=\"string\">'news_crawler.pipelines.mongodb_ppl.MongoDBPipeline'</span>: <span class=\"number\">300</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> pipeline()</p>\n<h2 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4.\"></a>4.</h2><p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true\" alt=\"1\"></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true\" alt=\"1\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"scrapy\"><a href=\"#scrapy\" class=\"headerlink\" title=\"scrapy\"></a>scrapy</h1><p>: <br>  Scrapy, PySpider(Python); Nutch, Heritrix(Java)  ,  requests + json/html/xml <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/11.png?raw=true\" alt=\"1\"><br>, (200+app300+300+), 1/1G/1M, <img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/01.png?raw=true\" alt=\"1\"></p>\n<p></p>\n<p>scrapy<img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true\" alt=\"1\"></p>\n<p><br><br>   </p>\n<p></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1015.png?raw=true\" alt=\"1\"></p>\n<p>scrapy app</p>\n<p><strong>*</strong>  learning scrapy, </p>\n<h2 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h2><p>Mac OSX, Python, OSXubuntu/debian    </p>\n<ul>\n<li>scrapy</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pip install scrapy</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scrapy startproject crawler</span><br><span class=\"line\">tree crawler</span><br><span class=\"line\">.</span><br><span class=\"line\"> crawler</span><br><span class=\"line\">  __init__.py</span><br><span class=\"line\">  items.py</span><br><span class=\"line\">  middlewares.py</span><br><span class=\"line\">  pipelines.py</span><br><span class=\"line\">  settings.py</span><br><span class=\"line\">  spiders</span><br><span class=\"line\">      __init__.py</span><br><span class=\"line\"> scrapy.cfg</span><br></pre></td></tr></table></figure>\n<p>scrapy startproject crawler tree<br>:   </p>\n<p>(1) scrapy.cfg <br>(2) crawler/ :Python<br>(3) crawler/items.py: items()item<br>(4) crawler/pipelines: </p>\n<blockquote>\n<p>scrapypipeline   </p>\n<ol>\n<li>html   <ol start=\"2\">\n<li>(item)   </li>\n<li>   </li>\n<li>item   </li>\n</ol>\n</li>\n</ol>\n</blockquote>\n<p>(5) crawler/settings.py <br>(6) crawler/spiders/ :   </p>\n<h2 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h2><h3 id=\"2-1-Item\"><a href=\"#2-1-Item\" class=\"headerlink\" title=\"2.1 Item\"></a>2.1 Item</h3><p>itemscrapy.item.Field</p>\n<p>app, , <strong></strong>, <br>   </p>\n<ul>\n<li>category ( /)    </li>\n<li>source_type  (app, , , ,  etc.)   </li>\n<li>source_name  </li>\n<li>news_sign     ()</li>\n<li>views         </li>\n<li>title         </li>\n<li>url           </li>\n<li>publish_time  </li>\n<li>text          </li>\n<li>images        </li>\n</ul>\n<p>item</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> scrapy.item <span class=\"keyword\">import</span> Item, Field</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NewsCrawlerItem</span><span class=\"params\">(Item)</span>:</span></span><br><span class=\"line\">    category = Field()</span><br><span class=\"line\">    source_type = Field()</span><br><span class=\"line\">    source_name = Field()</span><br><span class=\"line\"></span><br><span class=\"line\">    news_sign = Field()</span><br><span class=\"line\">    views = Field()</span><br><span class=\"line\">    title = Field()</span><br><span class=\"line\">    url = Field()</span><br><span class=\"line\">    publish_time = Field()</span><br><span class=\"line\">    text = Field()</span><br><span class=\"line\">    images = Field()</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><p>Spider()<br>Spiderscrapy.spider.BaseSpider</p>\n<ul>\n<li>name </li>\n<li>start_urls </li>\n<li>parse() , scrapy.RequestResponse</li>\n</ul>\n<h4 id=\"2-2-1-\"><a href=\"#2-2-1-\" class=\"headerlink\" title=\"2.2.1 \"></a>2.2.1 </h4><p></p>\n<ul>\n<li></li>\n<li>()</li>\n</ul>\n<p><br></p>\n<h4 id=\"2-2-2--HTTPResponse-Body-\"><a href=\"#2-2-2--HTTPResponse-Body-\" class=\"headerlink\" title=\"2.2.2 (HTTPResponse Body)\"></a>2.2.2 (HTTPResponse Body)</h4><ul>\n<li>html  beautifusoup/xpath/ </li>\n<li>json Python</li>\n<li>xml  python   </li>\n</ul>\n<p>jsonhtmlhtmlxpath</p>\n<h4 id=\"2-2-3-appSpider\"><a href=\"#2-2-3-appSpider\" class=\"headerlink\" title=\"2.2.3 appSpider\"></a>2.2.3 appSpider</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#coding:utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> scrapy</span><br><span class=\"line\"><span class=\"keyword\">import</span> urlparse</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.loader.processors <span class=\"keyword\">import</span> MapCompose, Join</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.loader <span class=\"keyword\">import</span> ItemLoader</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.http <span class=\"keyword\">import</span> Request</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> news_crawler.items <span class=\"keyword\">import</span> NewsCrawlerItem</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BasicSpider</span><span class=\"params\">(scrapy.Spider)</span>:</span></span><br><span class=\"line\">    name = <span class=\"string\">\"netease\"</span></span><br><span class=\"line\">    allowed_domains = [<span class=\"string\">\"163.com\"</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Start on the first index page</span></span><br><span class=\"line\">    chls = [</span><br><span class=\"line\">        <span class=\"string\">\"T1370583240249\"</span>,  <span class=\"string\">\"T1348649145984\"</span>,  <span class=\"string\">\"T1348647909107\"</span>,  <span class=\"string\">\"T1348648037603\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1368497029546\"</span>,  <span class=\"string\">\"T1348648141035\"</span>,  <span class=\"string\">\"T1474271789612\"</span>,  <span class=\"string\">\"T1467284926140\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1492136373327\"</span>,  <span class=\"string\">\"T1348648517839\"</span>,  <span class=\"string\">\"T1348648650048\"</span>,  <span class=\"string\">\"T1498701411149\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348648756099\"</span>,  <span class=\"string\">\"T1473054348939\"</span>,  <span class=\"string\">\"T1356600029035\"</span>,  <span class=\"string\">\"T1348649079062\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348649503389\"</span>,  <span class=\"string\">\"T1348649176279\"</span>,  <span class=\"string\">\"T1348649475931\"</span>,  <span class=\"string\">\"T1411113472760\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1486979691117\"</span>,  <span class=\"string\">\"T1348649580692\"</span>,  <span class=\"string\">\"T1348649654285\"</span>,  <span class=\"string\">\"T1348649776727\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1350383429665\"</span>,  <span class=\"string\">\"T1421997195219\"</span>,  <span class=\"string\">\"T1456394562871\"</span>,  <span class=\"string\">\"T1348654060988\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654085632\"</span>,  <span class=\"string\">\"T1491816738487\"</span>,  <span class=\"string\">\"T1348654105308\"</span>,  <span class=\"string\">\"T1348654151579\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654204705\"</span>,  <span class=\"string\">\"T1414389941036\"</span>,  <span class=\"string\">\"T1401272877187\"</span>,  <span class=\"string\">\"T1385429690972\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348654225495\"</span>,  <span class=\"string\">\"T1397116135282\"</span>,  <span class=\"string\">\"T1444270454635\"</span>,  <span class=\"string\">\"T1481105123675\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1503456682313\"</span>,  <span class=\"string\">\"T1464592736048\"</span>,  <span class=\"string\">\"T1504171773862\"</span>,  <span class=\"string\">\"T1348650593803\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1348650839000\"</span>,  <span class=\"string\">\"T1414142214384\"</span>,  <span class=\"string\">\"T1441074311424\"</span>,  <span class=\"string\">\"T1482470888760\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1499853820829\"</span>,  <span class=\"string\">\"T1509504918215\"</span>,  <span class=\"string\">\"T1502955728035\"</span>,  <span class=\"string\">\"T1509448512433\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1419315959525\"</span>,  <span class=\"string\">\"T1419316284722\"</span>,  <span class=\"string\">\"T1419316384474\"</span>,  <span class=\"string\">\"T1419316531256\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1427878984398\"</span>,  <span class=\"string\">\"T1433137697241\"</span>,  <span class=\"string\">\"T1449126525962\"</span>,  <span class=\"string\">\"T1456112189138\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1493374039495\"</span>,  <span class=\"string\">\"T1456112438822\"</span>,  <span class=\"string\">\"T1468031118349\"</span>,  <span class=\"string\">\"T1488432440430\"</span>,  </span><br><span class=\"line\">        <span class=\"string\">\"T1488432474929\"</span>,  <span class=\"string\">\"T1504689350701\"</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">    start_urls = (</span><br><span class=\"line\">        <span class=\"string\">'http://c.m.163.com/nc/article/list/%s/0-20.html'</span>%chlid <span class=\"keyword\">for</span> chlid <span class=\"keyword\">in</span> chls</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse</span><span class=\"params\">(self, response)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># Get the next index URLs and yield Requests</span></span><br><span class=\"line\">        url_spl = response.url.split(<span class=\"string\">'/'</span>)</span><br><span class=\"line\">        chl_url = <span class=\"string\">'/'</span>.join(url_spl[:<span class=\"number\">-1</span>])</span><br><span class=\"line\">        chl_id = url_spl[<span class=\"number\">-2</span>]</span><br><span class=\"line\">        items = json.loads(response.body)[chl_id]</span><br><span class=\"line\">        <span class=\"comment\"># Get item URLs and yield Requests</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> items:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">'url_3w'</span> <span class=\"keyword\">in</span> item <span class=\"keyword\">and</span> item[<span class=\"string\">'url_3w'</span>]:</span><br><span class=\"line\">                news_url = item[<span class=\"string\">'url_3w'</span>]</span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"string\">'_mobile'</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> news_url <span class=\"keyword\">and</span> <span class=\"string\">'3g.163.com'</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> news_url:</span><br><span class=\"line\">                    news_url = news_url.replace(<span class=\"string\">'.html'</span>, <span class=\"string\">'_mobile.html'</span>)</span><br><span class=\"line\">                <span class=\"keyword\">yield</span> Request(news_url, callback=self.parse_item, dont_filter=<span class=\"literal\">True</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> len(items) == <span class=\"number\">20</span>:</span><br><span class=\"line\">            page_num = int(url_spl[<span class=\"number\">-1</span>].split(<span class=\"string\">'-'</span>)[<span class=\"number\">0</span>]) /<span class=\"number\">20</span> + <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">yield</span> Request(chl_url+<span class=\"string\">'/%d-%d.html'</span>%(page_num*<span class=\"number\">20</span>, page_num*<span class=\"number\">20</span>+<span class=\"number\">20</span>), callback=self.parse, dont_filter=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_item</span><span class=\"params\">(self, response)</span>:</span></span><br><span class=\"line\">        <span class=\"string\">\"\"\" This function parses a netease page.</span></span><br><span class=\"line\"><span class=\"string\">        @returns item</span></span><br><span class=\"line\"><span class=\"string\">        @scrapes category source_type source_name news_sign views title url publish_time text images</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Create the loader using the response</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        item = NewsCrawlerItem()</span><br><span class=\"line\">        item[<span class=\"string\">'category'</span>] = <span class=\"string\">'image'</span></span><br><span class=\"line\">        item[<span class=\"string\">'source_type'</span>] = <span class=\"string\">'app'</span></span><br><span class=\"line\">        item[<span class=\"string\">'source_name'</span>] = self.name</span><br><span class=\"line\">        item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">''</span></span><br><span class=\"line\">        item[<span class=\"string\">'views'</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        item[<span class=\"string\">'url'</span>] = response.url</span><br><span class=\"line\">        item[<span class=\"string\">'title'</span>] = response.xpath(<span class=\"string\">'//h1/text()'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"comment\"># Load fields using XPath expressions</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">'3g.163.com'</span> <span class=\"keyword\">in</span> response.url:</span><br><span class=\"line\">            item[<span class=\"string\">'publish_time'</span>] = response.xpath(<span class=\"string\">'//*[@property=\"article:published_time\"]/@content'</span>).extract()[<span class=\"number\">0</span>][:<span class=\"number\">19</span>].replace(<span class=\"string\">'T'</span>,<span class=\"string\">''</span>)</span><br><span class=\"line\">            item[<span class=\"string\">'text'</span>] = <span class=\"string\">''</span>.join(response.xpath(<span class=\"string\">'//*[@class=\"content\"]//p/text()'</span>).extract())</span><br><span class=\"line\">            item[<span class=\"string\">'images'</span>] = response.xpath(<span class=\"string\">'//*[@class=\"content\"]//img/@src'</span>).extract()</span><br><span class=\"line\">            item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">'netease'</span>+response.xpath(<span class=\"string\">'//article/@id'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            item[<span class=\"string\">'publish_time'</span>] = response.xpath(<span class=\"string\">'//*[@id=\"articleBody\"]/div[1]/span[1]/text()'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">            item[<span class=\"string\">'text'</span>] = <span class=\"string\">''</span>.join(response.xpath(<span class=\"string\">'//*[@class=\"article-body\"]//p/text()'</span>).extract())</span><br><span class=\"line\">            item[<span class=\"string\">'images'</span>] = response.xpath(<span class=\"string\">'//*[@class=\"article-body\"]//img/@src'</span>).extract()</span><br><span class=\"line\">            item[<span class=\"string\">'news_sign'</span>] = <span class=\"string\">'netease'</span>+response.xpath(<span class=\"string\">'//*[@id=\"docId\"]/@value'</span>).extract()[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-2-4-\"><a href=\"#2-2-4-\" class=\"headerlink\" title=\"2.2.4 \"></a>2.2.4 </h4><p>parseresponse<br>parse()yeild,<br>Request:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Request</span><span class=\"params\">(object_ref)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, url, callback=None, method=<span class=\"string\">'GET'</span>, headers=None, body=None,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 cookies=None, meta=None, encoding=<span class=\"string\">'utf-8'</span>, priority=<span class=\"number\">0</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                 dont_filter=False, errback=None, flags=None)</span>:</span></span><br></pre></td></tr></table></figure>\n<p>3,url,callback,dont_filter<br>yeildparse_item();<br>yeildparse(),scrapycallbackparse(),parse()<br>dont_filterRequesturl()</p>\n<p>parse_item()html</p>\n<h2 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3 \"></a>3 </h2><p>mongoDb</p>\n<h3 id=\"3-1-MongoDB\"><a href=\"#3-1-MongoDB\" class=\"headerlink\" title=\"3.1 MongoDB\"></a>3.1 MongoDB</h3><p>settings.pyMongoDB</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># MongoDB settings</span></span><br><span class=\"line\">MONGODB_SERVER = <span class=\"string\">\"$mongo_server\"</span></span><br><span class=\"line\">MONGODB_PORT = <span class=\"number\">27017</span></span><br><span class=\"line\">MONGODB_DB = <span class=\"string\">\"news\"</span></span><br><span class=\"line\">MONGODB_COLLECTION = <span class=\"string\">\"news_item\"</span></span><br></pre></td></tr></table></figure>\n<p>serverip</p>\n<h3 id=\"3-2-MongoDBPipeline\"><a href=\"#3-2-MongoDBPipeline\" class=\"headerlink\" title=\"3.2 MongoDBPipeline\"></a>3.2 MongoDBPipeline</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.conf <span class=\"keyword\">import</span> settings</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy.exceptions <span class=\"keyword\">import</span> DropItem</span><br><span class=\"line\"><span class=\"keyword\">from</span> scrapy <span class=\"keyword\">import</span> log</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MongoDBPipeline</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        client = MongoClient(</span><br><span class=\"line\">            settings[<span class=\"string\">'MONGODB_SERVER'</span>],</span><br><span class=\"line\">            settings[<span class=\"string\">'MONGODB_PORT'</span>]</span><br><span class=\"line\">        )</span><br><span class=\"line\">        news_db = client[settings[<span class=\"string\">'MONGODB_DB'</span>]]</span><br><span class=\"line\">        self.collection = news_db[settings[<span class=\"string\">'MONGODB_COLLECTION'</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_item</span><span class=\"params\">(self, item, spider)</span>:</span></span><br><span class=\"line\">        valid = <span class=\"literal\">True</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> item[<span class=\"string\">'news_sign'</span>]:</span><br><span class=\"line\">            valid = <span class=\"literal\">False</span></span><br><span class=\"line\">            <span class=\"keyword\">raise</span> DropItem(<span class=\"string\">\"Missing item!\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> valid:</span><br><span class=\"line\">            self.collection.insert(dict(item))</span><br><span class=\"line\">            log.msg(<span class=\"string\">\"news added to MongoDB database!\"</span>,</span><br><span class=\"line\">                    level=log.INFO, spider=spider)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item</span><br></pre></td></tr></table></figure>\n<p>pipelineitem</p>\n<h3 id=\"3-3-pipeline\"><a href=\"#3-3-pipeline\" class=\"headerlink\" title=\"3.3 pipeline\"></a>3.3 pipeline</h3><p> settings.py</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ITEM_PIPELINES = &#123;</span><br><span class=\"line\">    <span class=\"string\">'news_crawler.pipelines.mongodb_ppl.MongoDBPipeline'</span>: <span class=\"number\">300</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> pipeline()</p>\n<h2 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4.\"></a>4.</h2><p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/1010.png?raw=true\" alt=\"1\"></p>\n<p><img src=\"https://github.com/aldslvda/blog-images/blob/master/acfun_emoji/25.png?raw=true\" alt=\"1\"></p>\n"},{"title":"Python( etc.)","date":"2018-09-17T06:27:22.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/python-tricks-title.jpg?raw=true"],"toc":true,"comment":true,"_content":"\n\n## Python \n\n Python  A-Z \n\n### all or any\n\nPython \n\n Python executable pseudocode\n\n```python\nx = [True, True, False]\n\nif any(x):\n\n    print(\"At least one True\")\n\nif all(x):\n\n    print(\"Not one False\")\n\nif any(x) and not all(x):\n\n    print(\"At least one True and one False\")\n```\n\n### bashplotlib\n\n\n\n```bash\n$ pip install bashplotlib\n```\n\n\n\n### collections\n\nPython \n\nPython  collections \n\n> collections https://docs.python.org/3/library/collections.html\n\n```python\nfrom collections import OrderedDict, Counter\n\n# Remembers the order the keys are added!\n\nx = OrderedDict(a=1, b=2, c=3)\n\n# Counts the frequency of each character\n\ny = Counter(\"Hello World!\")\n```\n\n### dir\n\n Python \n\n\n```bash\n>>> dir()\n\n>>> dir(\"Hello World\")\n\n>>> dir(dir)\n```\n\n Python \n\n\n> https://docs.python.org/3/library/functions.html#dir\n\n\n### emoji\n\n\n> https://pypi.org/project/emoji/\n\n```bash\n$ pip install emoji\n```\n\n\n```python\nfrom emoji import emojize\n\nprint(emojize(\":thumbs_up:\"))\n\n\n```\n\n### from \\_\\_future\\_\\_ import\n\nPython \n\n\\_\\_future\\_\\_ Python \n\n> \\_\\_future\\_\\_https://docs.python.org/2/library/\\*future\\*.html\n\n```python\nfrom \\_\\_future\\_\\_ import print_function\n\nprint(\"Hello World!\")\n```\n\n### geopy\n\nGeography geopy \n\n> geopy https://geopy.readthedocs.io/en/latest/\n```bash\n$ pip install geopy\n```\n\n API \n\n\n\n```python\nfrom geopy import GoogleV3\n\nplace = \"221b Baker Street, London\"\n\nlocation = GoogleV3().geocode(place)\n\nprint(location.address)\n\nprint(location.location)\n```\n\n### howdoi\n\n StackOverflow\n\nhttps://github.com/gleitz/howdoi\n\n```bash\n$ pip install howdoi\n```\n\n```bash\n$ howdoi vertical align css\n\n$ howdoi for loop in java\n\n$ howdoi undo commits in git\n```\n StackOverflow \n```bash\n$ howdoi exit vim\n```\n### inspect\n\nPython  inspect  inspect \n\n> inspect https://docs.python.org/3/library/inspect.html\n\n inspect.getsource()  inspect.getmodule() \n\n\n```python\nimport inspect\n\nprint(inspect.getsource(inspect.getsource))\n\nprint(inspect.getmodule(inspect.getmodule))\n\nprint(inspect.currentframe().f_lineno)\n```\n\ninspect \n\n### Jedi\n\nJedi \n\n IDE Jedi \n\n> Jedihttps://jedi.readthedocs.io/en/latest/docs/usage.html\n\n Jedi IPython  Jedi \n\n### \\*\\*kwargs\n\n Python \\*\\*kwargs \n\n\n\n kwargs\n\n```python\ndictionary = {\"a\": 1, \"b\": 2}\n\ndef someFunction(a, b):\n\n    print(a + b)\n\n    return\n\n# these do the same thing:\n\nsomeFunction(**dictionary)\n\nsomeFunction(a=1, b=2)\n```\n\n\n\n### List comprehensions\n\n Python \n> https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\n\n\n\n> https://www.learnpython.org/en/List_Comprehensions\n\n```python\nnumbers = [1,2,3,4,5,6,7]\n\nevens = [x for x in numbers if x % 2 is 0]\n\nodds = [y for y in numbers if y not in evens]\n\ncities = ['London', 'Dublin', 'Oslo']\n\ndef visit(city):\n\n    print(\"Welcome to \"+city)\n\nfor city in cities:\n\n    visit(city)\n```\n### map\n\nPython map()  lambda \n\n> lambda https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions\n\n```python\nx = [1, 2, 3]\n\ny = map(lambda x : x + 1 , x)\n\n# prints out [2,3,4]\n\nprint(list(y))\n```\n\nmap()  lambda  x  map \n\n### newspaper3k\n\n\n> https://pypi.org/project/newspaper3k/\n\n\n\n NLP \n\n> https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article\n\n BeautifulSoup  DIY $ pip install newspaper3k\n\n### Operator overloading\n\nPython \n\n Python  + \n\n Python \n```python\nclass Thing:\n\n    def __init__(self, value):\n\n        self.__value = value\n\n    def __gt__(self, other):\n\n        return self.__value > other.__value\n\n    def __lt__(self, other):\n\n        return self.__value < other.__value\n\nsomething = Thing(100)\n\nnothing = Thing(0)\n\n# True\n\nsomething > nothing\n\n# False\n\nsomething < nothing\n\n# Error\n\nsomething + nothing\n```\n\n### pprint\n\nPython  print \n\n Python  pretty printer \n\n> pretty printer https://docs.python.org/3/library/pprint.html\n\nPython \n```python\nimport requests\n\nimport pprint\n\nurl = 'https://randomuser.me/api/?results=1'\n\nusers = requests.get(url).json()\n\npprint.pprint(users)\n\nQueue\n```\n\n### Python  Python  Queue \n\nqueue\n\nFirst in, first out (FIFO) Last in, first out (LIFO) \n\npriority queue\n\n queue  Python https://www.tutorialspoint.com/python3/python_multithreading.htm\n\n### \\_\\_repr\\_\\_\n\n Python \n```bash\n>>> file = open('file.txt', 'r')\n\n>>> print(file)\n\n<open file 'file.txt', mode 'r' at 0x10d30aaf0>\n```\n debug \n\n```python\nclass someClass:\n\n    def __repr__(self):\n\n        return \"<some description here>\"\n\nsomeInstance = someClass()\n\n# prints <some description here>\n\nprint(someInstance)\n```\n\n### sh\n\nPython  os  subprocess \n\nsh \n\n> sh http://amoffat.github.io/sh/\n\n\n```python\nfrom sh import *\n\nsh.pwd()\n\nsh.mkdir('new_folder')\n\nsh.touch('new_file.txt')\n\nsh.whoami()\n\nsh.echo('This is great!')\n```\n\n### Type hints\n\nPython \n\ntyping issue\n\n Python 3.5 \n```python\ndef addTwo(x : Int) -> Int:\n\n    return x + 2\n```\n\n```python\nfrom typing import List\n\nVector = List[float]\n\nMatrix = List[Vector]\n\ndef addMatrix(a : Matrix, b : Matrix) -> Matrix:\n\n  result = []\n\n  for i,row in enumerate(a):\n\n    result_row =[]\n\n    for j, col in enumerate(row):\n\n      result_row += [a[i][j] + b[i][j]]\n\n    result += [result_row]\n\n  return result\n\nx = [[1.0, 0.0], [0.0, 1.0]]\n\ny = [[2.0, 1.0], [0.0, -2.0]]\n\nz = addMatrix(x, y)\n```\n\n\n TypeError\n\n### uuid\n\nUniversally Unique IDUUID Python  uuid \n\n> uuid https://docs.python.org/3/library/uuid.html\n\n```python\nimport uuid\n\nuser_id = uuid.uuid4()\n\nprint(user_id)\n```\n\n 128 \n\n 2 UUID 5,000,000,000,000,000,000,000,000,000,000,000,000\n\n UUID\n\n### Virtual environment\n\n Python \n\n Python \n\nPython \n```bash\npython -m venv my-project\n\nsource my-project/bin/activate\n\npip install all-the-modules \n```\n Python \n\n### wikipedia\n\nWikipedia  API\n\nwikipedia  API \n\n> Wikipedia https://wikipedia.readthedocs.io/en/latest/quickstart.html\n\n```python\nimport wikipedia\n\nresult = wikipedia.page('freeCodeCamp')\n\nprint(result.summary)\n\nfor link in result.links:\n\n    print(link)\n```\n donate() \n\n### xkcd\n\nhumour  Python (Monty Python and the Flying Circus)Python \n\n\n```python\nimport antigravity\n```\n xkcd  Python Python\n\n### YAML\n\nYAML  YAML Aint Markup Language JSON \n\n JSON \n\n> PyYAML https://pyyaml.org/wiki/PyYAMLDocumentation Python  YAML\n\n\n```basj\n$ pip install pyyaml\n```\n\n```python\nimport yaml\n```\nPyYAML  Python \n\n### zip\n\n\n```python\nkeys = ['a', 'b', 'c']\n\nvals = [1, 2, 3]\n\nzipped = dict(zip(keys, vals))\n```\nzip() \n\n\\*zip() \n\n\nhttps://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747","source":"_posts/some_python_tricks.md","raw":"title: Python( etc.)\ndate: 2018-09-17 14:27:22\ntags:\n- Python Tricks\n- Syntactic sugar\n- \ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/python-tricks-title.jpg?raw=true\"\ntoc: true\ncomment: true\n---\n\n\n## Python \n\n Python  A-Z \n\n### all or any\n\nPython \n\n Python executable pseudocode\n\n```python\nx = [True, True, False]\n\nif any(x):\n\n    print(\"At least one True\")\n\nif all(x):\n\n    print(\"Not one False\")\n\nif any(x) and not all(x):\n\n    print(\"At least one True and one False\")\n```\n\n### bashplotlib\n\n\n\n```bash\n$ pip install bashplotlib\n```\n\n\n\n### collections\n\nPython \n\nPython  collections \n\n> collections https://docs.python.org/3/library/collections.html\n\n```python\nfrom collections import OrderedDict, Counter\n\n# Remembers the order the keys are added!\n\nx = OrderedDict(a=1, b=2, c=3)\n\n# Counts the frequency of each character\n\ny = Counter(\"Hello World!\")\n```\n\n### dir\n\n Python \n\n\n```bash\n>>> dir()\n\n>>> dir(\"Hello World\")\n\n>>> dir(dir)\n```\n\n Python \n\n\n> https://docs.python.org/3/library/functions.html#dir\n\n\n### emoji\n\n\n> https://pypi.org/project/emoji/\n\n```bash\n$ pip install emoji\n```\n\n\n```python\nfrom emoji import emojize\n\nprint(emojize(\":thumbs_up:\"))\n\n\n```\n\n### from \\_\\_future\\_\\_ import\n\nPython \n\n\\_\\_future\\_\\_ Python \n\n> \\_\\_future\\_\\_https://docs.python.org/2/library/\\*future\\*.html\n\n```python\nfrom \\_\\_future\\_\\_ import print_function\n\nprint(\"Hello World!\")\n```\n\n### geopy\n\nGeography geopy \n\n> geopy https://geopy.readthedocs.io/en/latest/\n```bash\n$ pip install geopy\n```\n\n API \n\n\n\n```python\nfrom geopy import GoogleV3\n\nplace = \"221b Baker Street, London\"\n\nlocation = GoogleV3().geocode(place)\n\nprint(location.address)\n\nprint(location.location)\n```\n\n### howdoi\n\n StackOverflow\n\nhttps://github.com/gleitz/howdoi\n\n```bash\n$ pip install howdoi\n```\n\n```bash\n$ howdoi vertical align css\n\n$ howdoi for loop in java\n\n$ howdoi undo commits in git\n```\n StackOverflow \n```bash\n$ howdoi exit vim\n```\n### inspect\n\nPython  inspect  inspect \n\n> inspect https://docs.python.org/3/library/inspect.html\n\n inspect.getsource()  inspect.getmodule() \n\n\n```python\nimport inspect\n\nprint(inspect.getsource(inspect.getsource))\n\nprint(inspect.getmodule(inspect.getmodule))\n\nprint(inspect.currentframe().f_lineno)\n```\n\ninspect \n\n### Jedi\n\nJedi \n\n IDE Jedi \n\n> Jedihttps://jedi.readthedocs.io/en/latest/docs/usage.html\n\n Jedi IPython  Jedi \n\n### \\*\\*kwargs\n\n Python \\*\\*kwargs \n\n\n\n kwargs\n\n```python\ndictionary = {\"a\": 1, \"b\": 2}\n\ndef someFunction(a, b):\n\n    print(a + b)\n\n    return\n\n# these do the same thing:\n\nsomeFunction(**dictionary)\n\nsomeFunction(a=1, b=2)\n```\n\n\n\n### List comprehensions\n\n Python \n> https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\n\n\n\n> https://www.learnpython.org/en/List_Comprehensions\n\n```python\nnumbers = [1,2,3,4,5,6,7]\n\nevens = [x for x in numbers if x % 2 is 0]\n\nodds = [y for y in numbers if y not in evens]\n\ncities = ['London', 'Dublin', 'Oslo']\n\ndef visit(city):\n\n    print(\"Welcome to \"+city)\n\nfor city in cities:\n\n    visit(city)\n```\n### map\n\nPython map()  lambda \n\n> lambda https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions\n\n```python\nx = [1, 2, 3]\n\ny = map(lambda x : x + 1 , x)\n\n# prints out [2,3,4]\n\nprint(list(y))\n```\n\nmap()  lambda  x  map \n\n### newspaper3k\n\n\n> https://pypi.org/project/newspaper3k/\n\n\n\n NLP \n\n> https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article\n\n BeautifulSoup  DIY $ pip install newspaper3k\n\n### Operator overloading\n\nPython \n\n Python  + \n\n Python \n```python\nclass Thing:\n\n    def __init__(self, value):\n\n        self.__value = value\n\n    def __gt__(self, other):\n\n        return self.__value > other.__value\n\n    def __lt__(self, other):\n\n        return self.__value < other.__value\n\nsomething = Thing(100)\n\nnothing = Thing(0)\n\n# True\n\nsomething > nothing\n\n# False\n\nsomething < nothing\n\n# Error\n\nsomething + nothing\n```\n\n### pprint\n\nPython  print \n\n Python  pretty printer \n\n> pretty printer https://docs.python.org/3/library/pprint.html\n\nPython \n```python\nimport requests\n\nimport pprint\n\nurl = 'https://randomuser.me/api/?results=1'\n\nusers = requests.get(url).json()\n\npprint.pprint(users)\n\nQueue\n```\n\n### Python  Python  Queue \n\nqueue\n\nFirst in, first out (FIFO) Last in, first out (LIFO) \n\npriority queue\n\n queue  Python https://www.tutorialspoint.com/python3/python_multithreading.htm\n\n### \\_\\_repr\\_\\_\n\n Python \n```bash\n>>> file = open('file.txt', 'r')\n\n>>> print(file)\n\n<open file 'file.txt', mode 'r' at 0x10d30aaf0>\n```\n debug \n\n```python\nclass someClass:\n\n    def __repr__(self):\n\n        return \"<some description here>\"\n\nsomeInstance = someClass()\n\n# prints <some description here>\n\nprint(someInstance)\n```\n\n### sh\n\nPython  os  subprocess \n\nsh \n\n> sh http://amoffat.github.io/sh/\n\n\n```python\nfrom sh import *\n\nsh.pwd()\n\nsh.mkdir('new_folder')\n\nsh.touch('new_file.txt')\n\nsh.whoami()\n\nsh.echo('This is great!')\n```\n\n### Type hints\n\nPython \n\ntyping issue\n\n Python 3.5 \n```python\ndef addTwo(x : Int) -> Int:\n\n    return x + 2\n```\n\n```python\nfrom typing import List\n\nVector = List[float]\n\nMatrix = List[Vector]\n\ndef addMatrix(a : Matrix, b : Matrix) -> Matrix:\n\n  result = []\n\n  for i,row in enumerate(a):\n\n    result_row =[]\n\n    for j, col in enumerate(row):\n\n      result_row += [a[i][j] + b[i][j]]\n\n    result += [result_row]\n\n  return result\n\nx = [[1.0, 0.0], [0.0, 1.0]]\n\ny = [[2.0, 1.0], [0.0, -2.0]]\n\nz = addMatrix(x, y)\n```\n\n\n TypeError\n\n### uuid\n\nUniversally Unique IDUUID Python  uuid \n\n> uuid https://docs.python.org/3/library/uuid.html\n\n```python\nimport uuid\n\nuser_id = uuid.uuid4()\n\nprint(user_id)\n```\n\n 128 \n\n 2 UUID 5,000,000,000,000,000,000,000,000,000,000,000,000\n\n UUID\n\n### Virtual environment\n\n Python \n\n Python \n\nPython \n```bash\npython -m venv my-project\n\nsource my-project/bin/activate\n\npip install all-the-modules \n```\n Python \n\n### wikipedia\n\nWikipedia  API\n\nwikipedia  API \n\n> Wikipedia https://wikipedia.readthedocs.io/en/latest/quickstart.html\n\n```python\nimport wikipedia\n\nresult = wikipedia.page('freeCodeCamp')\n\nprint(result.summary)\n\nfor link in result.links:\n\n    print(link)\n```\n donate() \n\n### xkcd\n\nhumour  Python (Monty Python and the Flying Circus)Python \n\n\n```python\nimport antigravity\n```\n xkcd  Python Python\n\n### YAML\n\nYAML  YAML Aint Markup Language JSON \n\n JSON \n\n> PyYAML https://pyyaml.org/wiki/PyYAMLDocumentation Python  YAML\n\n\n```basj\n$ pip install pyyaml\n```\n\n```python\nimport yaml\n```\nPyYAML  Python \n\n### zip\n\n\n```python\nkeys = ['a', 'b', 'c']\n\nvals = [1, 2, 3]\n\nzipped = dict(zip(keys, vals))\n```\nzip() \n\n\\*zip() \n\n\nhttps://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747","slug":"some_python_tricks","published":1,"updated":"2019-04-25T01:27:25.828Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6gr003xdhyf5qoa8r4s","content":"<h2 id=\"Python-\"><a href=\"#Python-\" class=\"headerlink\" title=\"Python \"></a>Python </h2><p> Python  A-Z </p>\n<h3 id=\"all-or-any\"><a href=\"#all-or-any\" class=\"headerlink\" title=\"all or any\"></a>all or any</h3><p>Python </p>\n<p> Python executable pseudocode</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = [<span class=\"literal\">True</span>, <span class=\"literal\">True</span>, <span class=\"literal\">False</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> any(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"At least one True\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> all(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"Not one False\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> any(x) <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> all(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"At least one True and one False\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"bashplotlib\"><a href=\"#bashplotlib\" class=\"headerlink\" title=\"bashplotlib\"></a>bashplotlib</h3><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install bashplotlib</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"collections\"><a href=\"#collections\" class=\"headerlink\" title=\"collections\"></a>collections</h3><p>Python </p>\n<p>Python  collections </p>\n<blockquote>\n<p>collections <a href=\"https://docs.python.org/3/library/collections.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/collections.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> OrderedDict, Counter</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Remembers the order the keys are added!</span></span><br><span class=\"line\"></span><br><span class=\"line\">x = OrderedDict(a=<span class=\"number\">1</span>, b=<span class=\"number\">2</span>, c=<span class=\"number\">3</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Counts the frequency of each character</span></span><br><span class=\"line\"></span><br><span class=\"line\">y = Counter(<span class=\"string\">\"Hello World!\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"dir\"><a href=\"#dir\" class=\"headerlink\" title=\"dir\"></a>dir</h3><p> Python </p>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; dir()</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; dir(<span class=\"string\">\"Hello World\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; dir(dir)</span><br></pre></td></tr></table></figure></p>\n<p> Python </p>\n<p></p>\n<blockquote>\n<p><a href=\"https://docs.python.org/3/library/functions.html#dir\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/functions.html#dir</a></p>\n</blockquote>\n<h3 id=\"emoji\"><a href=\"#emoji\" class=\"headerlink\" title=\"emoji\"></a>emoji</h3><p></p>\n<blockquote>\n<p><a href=\"https://pypi.org/project/emoji/\" target=\"_blank\" rel=\"noopener\">https://pypi.org/project/emoji/</a></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install emoji</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> emoji <span class=\"keyword\">import</span> emojize</span><br><span class=\"line\"></span><br><span class=\"line\">print(emojize(<span class=\"string\">\":thumbs_up:\"</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"from-future-import\"><a href=\"#from-future-import\" class=\"headerlink\" title=\"from __future__ import\"></a>from __future__ import</h3><p>Python </p>\n<p>__future__ Python </p>\n<blockquote>\n<p>__future__<a href=\"https://docs.python.org/2/library/\\*future\\*.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/2/library/\\*future\\*.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> \\_\\_future\\_\\_ <span class=\"keyword\">import</span> print_function</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"Hello World!\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"geopy\"><a href=\"#geopy\" class=\"headerlink\" title=\"geopy\"></a>geopy</h3><p>Geography geopy </p>\n<blockquote>\n<p>geopy <a href=\"https://geopy.readthedocs.io/en/latest/\" target=\"_blank\" rel=\"noopener\">https://geopy.readthedocs.io/en/latest/</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install geopy</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p> API </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> geopy <span class=\"keyword\">import</span> GoogleV3</span><br><span class=\"line\"></span><br><span class=\"line\">place = <span class=\"string\">\"221b Baker Street, London\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">location = GoogleV3().geocode(place)</span><br><span class=\"line\"></span><br><span class=\"line\">print(location.address)</span><br><span class=\"line\"></span><br><span class=\"line\">print(location.location)</span><br></pre></td></tr></table></figure>\n<h3 id=\"howdoi\"><a href=\"#howdoi\" class=\"headerlink\" title=\"howdoi\"></a>howdoi</h3><p> StackOverflow</p>\n<p><a href=\"https://github.com/gleitz/howdoi\" target=\"_blank\" rel=\"noopener\">https://github.com/gleitz/howdoi</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install howdoi</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ howdoi vertical align css</span><br><span class=\"line\"></span><br><span class=\"line\">$ howdoi <span class=\"keyword\">for</span> loop <span class=\"keyword\">in</span> java</span><br><span class=\"line\"></span><br><span class=\"line\">$ howdoi undo commits <span class=\"keyword\">in</span> git</span><br></pre></td></tr></table></figure></p>\n<p> StackOverflow <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ howdoi <span class=\"built_in\">exit</span> vim</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"inspect\"><a href=\"#inspect\" class=\"headerlink\" title=\"inspect\"></a>inspect</h3><p>Python  inspect  inspect </p>\n<blockquote>\n<p>inspect <a href=\"https://docs.python.org/3/library/inspect.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/inspect.html</a></p>\n</blockquote>\n<p> inspect.getsource()  inspect.getmodule() </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> inspect</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.getsource(inspect.getsource))</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.getmodule(inspect.getmodule))</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.currentframe().f_lineno)</span><br></pre></td></tr></table></figure></p>\n<p>inspect </p>\n<h3 id=\"Jedi\"><a href=\"#Jedi\" class=\"headerlink\" title=\"Jedi\"></a>Jedi</h3><p>Jedi </p>\n<p> IDE Jedi </p>\n<blockquote>\n<p>Jedi<a href=\"https://jedi.readthedocs.io/en/latest/docs/usage.html\" target=\"_blank\" rel=\"noopener\">https://jedi.readthedocs.io/en/latest/docs/usage.html</a></p>\n</blockquote>\n<p> Jedi IPython  Jedi </p>\n<h3 id=\"kwargs\"><a href=\"#kwargs\" class=\"headerlink\" title=\"**kwargs\"></a>**kwargs</h3><p> Python **kwargs </p>\n<p></p>\n<p> kwargs</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dictionary = &#123;<span class=\"string\">\"a\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"b\"</span>: <span class=\"number\">2</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">someFunction</span><span class=\"params\">(a, b)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(a + b)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># these do the same thing:</span></span><br><span class=\"line\"></span><br><span class=\"line\">someFunction(**dictionary)</span><br><span class=\"line\"></span><br><span class=\"line\">someFunction(a=<span class=\"number\">1</span>, b=<span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"List-comprehensions\"><a href=\"#List-comprehensions\" class=\"headerlink\" title=\"List comprehensions\"></a>List comprehensions</h3><p> Python </p>\n<blockquote>\n<p><a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions</a></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p><a href=\"https://www.learnpython.org/en/List_Comprehensions\" target=\"_blank\" rel=\"noopener\">https://www.learnpython.org/en/List_Comprehensions</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">numbers = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">evens = [x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> numbers <span class=\"keyword\">if</span> x % <span class=\"number\">2</span> <span class=\"keyword\">is</span> <span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">odds = [y <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> numbers <span class=\"keyword\">if</span> y <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> evens]</span><br><span class=\"line\"></span><br><span class=\"line\">cities = [<span class=\"string\">'London'</span>, <span class=\"string\">'Dublin'</span>, <span class=\"string\">'Oslo'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">visit</span><span class=\"params\">(city)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"Welcome to \"</span>+city)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> city <span class=\"keyword\">in</span> cities:</span><br><span class=\"line\"></span><br><span class=\"line\">    visit(city)</span><br></pre></td></tr></table></figure>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>Python map()  lambda </p>\n<blockquote>\n<p>lambda <a href=\"https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">y = map(<span class=\"keyword\">lambda</span> x : x + <span class=\"number\">1</span> , x)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># prints out [2,3,4]</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(list(y))</span><br></pre></td></tr></table></figure>\n<p>map()  lambda  x  map </p>\n<h3 id=\"newspaper3k\"><a href=\"#newspaper3k\" class=\"headerlink\" title=\"newspaper3k\"></a>newspaper3k</h3><p></p>\n<blockquote>\n<p><a href=\"https://pypi.org/project/newspaper3k/\" target=\"_blank\" rel=\"noopener\">https://pypi.org/project/newspaper3k/</a></p>\n</blockquote>\n<p></p>\n<p> NLP </p>\n<blockquote>\n<p><a href=\"https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article\" target=\"_blank\" rel=\"noopener\">https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article</a></p>\n</blockquote>\n<p> BeautifulSoup  DIY $ pip install newspaper3k</p>\n<h3 id=\"Operator-overloading\"><a href=\"#Operator-overloading\" class=\"headerlink\" title=\"Operator overloading\"></a>Operator overloading</h3><p>Python </p>\n<p> Python  + </p>\n<p> Python <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Thing</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, value)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.__value = value</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__gt__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__value &gt; other.__value</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__lt__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__value &lt; other.__value</span><br><span class=\"line\"></span><br><span class=\"line\">something = Thing(<span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">nothing = Thing(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># True</span></span><br><span class=\"line\"></span><br><span class=\"line\">something &gt; nothing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># False</span></span><br><span class=\"line\"></span><br><span class=\"line\">something &lt; nothing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Error</span></span><br><span class=\"line\"></span><br><span class=\"line\">something + nothing</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"pprint\"><a href=\"#pprint\" class=\"headerlink\" title=\"pprint\"></a>pprint</h3><p>Python  print </p>\n<p> Python  pretty printer </p>\n<blockquote>\n<p>pretty printer <a href=\"https://docs.python.org/3/library/pprint.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/pprint.html</a></p>\n</blockquote>\n<p>Python <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://randomuser.me/api/?results=1'</span></span><br><span class=\"line\"></span><br><span class=\"line\">users = requests.get(url).json()</span><br><span class=\"line\"></span><br><span class=\"line\">pprint.pprint(users)</span><br><span class=\"line\"></span><br><span class=\"line\">Queue</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Python--Python--Queue-\"><a href=\"#Python--Python--Queue-\" class=\"headerlink\" title=\"Python  Python  Queue \"></a>Python  Python  Queue </h3><p>queue</p>\n<p>First in, first out (FIFO) Last in, first out (LIFO) </p>\n<p>priority queue</p>\n<p> queue  Python <a href=\"https://www.tutorialspoint.com/python3/python_multithreading.htm\" target=\"_blank\" rel=\"noopener\">https://www.tutorialspoint.com/python3/python_multithreading.htm</a></p>\n<h3 id=\"repr\"><a href=\"#repr\" class=\"headerlink\" title=\"__repr__\"></a>__repr__</h3><p> Python <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; file = open(<span class=\"string\">'file.txt'</span>, <span class=\"string\">'r'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; <span class=\"built_in\">print</span>(file)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;open file <span class=\"string\">'file.txt'</span>, mode <span class=\"string\">'r'</span> at 0x10d30aaf0&gt;</span><br></pre></td></tr></table></figure></p>\n<p> debug </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">someClass</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;some description here&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">someInstance = someClass()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># prints &lt;some description here&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(someInstance)</span><br></pre></td></tr></table></figure>\n<h3 id=\"sh\"><a href=\"#sh\" class=\"headerlink\" title=\"sh\"></a>sh</h3><p>Python  os  subprocess </p>\n<p>sh </p>\n<blockquote>\n<p>sh <a href=\"http://amoffat.github.io/sh/\" target=\"_blank\" rel=\"noopener\">http://amoffat.github.io/sh/</a></p>\n</blockquote>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sh <span class=\"keyword\">import</span> *</span><br><span class=\"line\"></span><br><span class=\"line\">sh.pwd()</span><br><span class=\"line\"></span><br><span class=\"line\">sh.mkdir(<span class=\"string\">'new_folder'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sh.touch(<span class=\"string\">'new_file.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sh.whoami()</span><br><span class=\"line\"></span><br><span class=\"line\">sh.echo(<span class=\"string\">'This is great!'</span>)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Type-hints\"><a href=\"#Type-hints\" class=\"headerlink\" title=\"Type hints\"></a>Type hints</h3><p>Python </p>\n<p>typing issue</p>\n<p> Python 3.5 <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">addTwo</span><span class=\"params\">(x : Int)</span> -&gt; Int:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List</span><br><span class=\"line\"></span><br><span class=\"line\">Vector = List[float]</span><br><span class=\"line\"></span><br><span class=\"line\">Matrix = List[Vector]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">addMatrix</span><span class=\"params\">(a : Matrix, b : Matrix)</span> -&gt; Matrix:</span></span><br><span class=\"line\"></span><br><span class=\"line\">  result = []</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i,row <span class=\"keyword\">in</span> enumerate(a):</span><br><span class=\"line\"></span><br><span class=\"line\">    result_row =[]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> j, col <span class=\"keyword\">in</span> enumerate(row):</span><br><span class=\"line\"></span><br><span class=\"line\">      result_row += [a[i][j] + b[i][j]]</span><br><span class=\"line\"></span><br><span class=\"line\">    result += [result_row]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\">x = [[<span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>], [<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">y = [[<span class=\"number\">2.0</span>, <span class=\"number\">1.0</span>], [<span class=\"number\">0.0</span>, <span class=\"number\">-2.0</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">z = addMatrix(x, y)</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<p> TypeError</p>\n<h3 id=\"uuid\"><a href=\"#uuid\" class=\"headerlink\" title=\"uuid\"></a>uuid</h3><p>Universally Unique IDUUID Python  uuid </p>\n<blockquote>\n<p>uuid <a href=\"https://docs.python.org/3/library/uuid.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/uuid.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> uuid</span><br><span class=\"line\"></span><br><span class=\"line\">user_id = uuid.uuid4()</span><br><span class=\"line\"></span><br><span class=\"line\">print(user_id)</span><br></pre></td></tr></table></figure>\n<p> 128 </p>\n<p> 2 UUID 5,000,000,000,000,000,000,000,000,000,000,000,000</p>\n<p> UUID</p>\n<h3 id=\"Virtual-environment\"><a href=\"#Virtual-environment\" class=\"headerlink\" title=\"Virtual environment\"></a>Virtual environment</h3><p> Python </p>\n<p> Python </p>\n<p>Python <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m venv my-project</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">source</span> my-project/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\">pip install all-the-modules</span><br></pre></td></tr></table></figure></p>\n<p> Python </p>\n<h3 id=\"wikipedia\"><a href=\"#wikipedia\" class=\"headerlink\" title=\"wikipedia\"></a>wikipedia</h3><p>Wikipedia  API</p>\n<p>wikipedia  API </p>\n<blockquote>\n<p>Wikipedia <a href=\"https://wikipedia.readthedocs.io/en/latest/quickstart.html\" target=\"_blank\" rel=\"noopener\">https://wikipedia.readthedocs.io/en/latest/quickstart.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> wikipedia</span><br><span class=\"line\"></span><br><span class=\"line\">result = wikipedia.page(<span class=\"string\">'freeCodeCamp'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(result.summary)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> link <span class=\"keyword\">in</span> result.links:</span><br><span class=\"line\"></span><br><span class=\"line\">    print(link)</span><br></pre></td></tr></table></figure>\n<p> donate() </p>\n<h3 id=\"xkcd\"><a href=\"#xkcd\" class=\"headerlink\" title=\"xkcd\"></a>xkcd</h3><p>humour  Python (Monty Python and the Flying Circus)Python </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> antigravity</span><br></pre></td></tr></table></figure></p>\n<p> xkcd  Python Python</p>\n<h3 id=\"YAML\"><a href=\"#YAML\" class=\"headerlink\" title=\"YAML\"></a>YAML</h3><p>YAML  YAML Aint Markup Language JSON </p>\n<p> JSON </p>\n<blockquote>\n<p>PyYAML <a href=\"https://pyyaml.org/wiki/PyYAMLDocumentation\" target=\"_blank\" rel=\"noopener\">https://pyyaml.org/wiki/PyYAMLDocumentation</a> Python  YAML</p>\n</blockquote>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install pyyaml</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> yaml</span><br></pre></td></tr></table></figure></p>\n<p>PyYAML  Python </p>\n<h3 id=\"zip\"><a href=\"#zip\" class=\"headerlink\" title=\"zip\"></a>zip</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keys = [<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">vals = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">zipped = dict(zip(keys, vals))</span><br></pre></td></tr></table></figure></p>\n<p>zip() </p>\n<p>*zip() </p>\n<p><a href=\"https://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747\" target=\"_blank\" rel=\"noopener\">https://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Python-\"><a href=\"#Python-\" class=\"headerlink\" title=\"Python \"></a>Python </h2><p> Python  A-Z </p>\n<h3 id=\"all-or-any\"><a href=\"#all-or-any\" class=\"headerlink\" title=\"all or any\"></a>all or any</h3><p>Python </p>\n<p> Python executable pseudocode</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = [<span class=\"literal\">True</span>, <span class=\"literal\">True</span>, <span class=\"literal\">False</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> any(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"At least one True\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> all(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"Not one False\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> any(x) <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> all(x):</span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"At least one True and one False\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"bashplotlib\"><a href=\"#bashplotlib\" class=\"headerlink\" title=\"bashplotlib\"></a>bashplotlib</h3><p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install bashplotlib</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"collections\"><a href=\"#collections\" class=\"headerlink\" title=\"collections\"></a>collections</h3><p>Python </p>\n<p>Python  collections </p>\n<blockquote>\n<p>collections <a href=\"https://docs.python.org/3/library/collections.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/collections.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> OrderedDict, Counter</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Remembers the order the keys are added!</span></span><br><span class=\"line\"></span><br><span class=\"line\">x = OrderedDict(a=<span class=\"number\">1</span>, b=<span class=\"number\">2</span>, c=<span class=\"number\">3</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Counts the frequency of each character</span></span><br><span class=\"line\"></span><br><span class=\"line\">y = Counter(<span class=\"string\">\"Hello World!\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"dir\"><a href=\"#dir\" class=\"headerlink\" title=\"dir\"></a>dir</h3><p> Python </p>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; dir()</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; dir(<span class=\"string\">\"Hello World\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; dir(dir)</span><br></pre></td></tr></table></figure></p>\n<p> Python </p>\n<p></p>\n<blockquote>\n<p><a href=\"https://docs.python.org/3/library/functions.html#dir\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/functions.html#dir</a></p>\n</blockquote>\n<h3 id=\"emoji\"><a href=\"#emoji\" class=\"headerlink\" title=\"emoji\"></a>emoji</h3><p></p>\n<blockquote>\n<p><a href=\"https://pypi.org/project/emoji/\" target=\"_blank\" rel=\"noopener\">https://pypi.org/project/emoji/</a></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install emoji</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> emoji <span class=\"keyword\">import</span> emojize</span><br><span class=\"line\"></span><br><span class=\"line\">print(emojize(<span class=\"string\">\":thumbs_up:\"</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"from-future-import\"><a href=\"#from-future-import\" class=\"headerlink\" title=\"from __future__ import\"></a>from __future__ import</h3><p>Python </p>\n<p>__future__ Python </p>\n<blockquote>\n<p>__future__<a href=\"https://docs.python.org/2/library/\\*future\\*.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/2/library/\\*future\\*.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> \\_\\_future\\_\\_ <span class=\"keyword\">import</span> print_function</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"Hello World!\"</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"geopy\"><a href=\"#geopy\" class=\"headerlink\" title=\"geopy\"></a>geopy</h3><p>Geography geopy </p>\n<blockquote>\n<p>geopy <a href=\"https://geopy.readthedocs.io/en/latest/\" target=\"_blank\" rel=\"noopener\">https://geopy.readthedocs.io/en/latest/</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install geopy</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p> API </p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> geopy <span class=\"keyword\">import</span> GoogleV3</span><br><span class=\"line\"></span><br><span class=\"line\">place = <span class=\"string\">\"221b Baker Street, London\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">location = GoogleV3().geocode(place)</span><br><span class=\"line\"></span><br><span class=\"line\">print(location.address)</span><br><span class=\"line\"></span><br><span class=\"line\">print(location.location)</span><br></pre></td></tr></table></figure>\n<h3 id=\"howdoi\"><a href=\"#howdoi\" class=\"headerlink\" title=\"howdoi\"></a>howdoi</h3><p> StackOverflow</p>\n<p><a href=\"https://github.com/gleitz/howdoi\" target=\"_blank\" rel=\"noopener\">https://github.com/gleitz/howdoi</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install howdoi</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ howdoi vertical align css</span><br><span class=\"line\"></span><br><span class=\"line\">$ howdoi <span class=\"keyword\">for</span> loop <span class=\"keyword\">in</span> java</span><br><span class=\"line\"></span><br><span class=\"line\">$ howdoi undo commits <span class=\"keyword\">in</span> git</span><br></pre></td></tr></table></figure></p>\n<p> StackOverflow <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ howdoi <span class=\"built_in\">exit</span> vim</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"inspect\"><a href=\"#inspect\" class=\"headerlink\" title=\"inspect\"></a>inspect</h3><p>Python  inspect  inspect </p>\n<blockquote>\n<p>inspect <a href=\"https://docs.python.org/3/library/inspect.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/inspect.html</a></p>\n</blockquote>\n<p> inspect.getsource()  inspect.getmodule() </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> inspect</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.getsource(inspect.getsource))</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.getmodule(inspect.getmodule))</span><br><span class=\"line\"></span><br><span class=\"line\">print(inspect.currentframe().f_lineno)</span><br></pre></td></tr></table></figure></p>\n<p>inspect </p>\n<h3 id=\"Jedi\"><a href=\"#Jedi\" class=\"headerlink\" title=\"Jedi\"></a>Jedi</h3><p>Jedi </p>\n<p> IDE Jedi </p>\n<blockquote>\n<p>Jedi<a href=\"https://jedi.readthedocs.io/en/latest/docs/usage.html\" target=\"_blank\" rel=\"noopener\">https://jedi.readthedocs.io/en/latest/docs/usage.html</a></p>\n</blockquote>\n<p> Jedi IPython  Jedi </p>\n<h3 id=\"kwargs\"><a href=\"#kwargs\" class=\"headerlink\" title=\"**kwargs\"></a>**kwargs</h3><p> Python **kwargs </p>\n<p></p>\n<p> kwargs</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dictionary = &#123;<span class=\"string\">\"a\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"b\"</span>: <span class=\"number\">2</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">someFunction</span><span class=\"params\">(a, b)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(a + b)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># these do the same thing:</span></span><br><span class=\"line\"></span><br><span class=\"line\">someFunction(**dictionary)</span><br><span class=\"line\"></span><br><span class=\"line\">someFunction(a=<span class=\"number\">1</span>, b=<span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"List-comprehensions\"><a href=\"#List-comprehensions\" class=\"headerlink\" title=\"List comprehensions\"></a>List comprehensions</h3><p> Python </p>\n<blockquote>\n<p><a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions</a></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p><a href=\"https://www.learnpython.org/en/List_Comprehensions\" target=\"_blank\" rel=\"noopener\">https://www.learnpython.org/en/List_Comprehensions</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">numbers = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">evens = [x <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> numbers <span class=\"keyword\">if</span> x % <span class=\"number\">2</span> <span class=\"keyword\">is</span> <span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">odds = [y <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> numbers <span class=\"keyword\">if</span> y <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> evens]</span><br><span class=\"line\"></span><br><span class=\"line\">cities = [<span class=\"string\">'London'</span>, <span class=\"string\">'Dublin'</span>, <span class=\"string\">'Oslo'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">visit</span><span class=\"params\">(city)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(<span class=\"string\">\"Welcome to \"</span>+city)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> city <span class=\"keyword\">in</span> cities:</span><br><span class=\"line\"></span><br><span class=\"line\">    visit(city)</span><br></pre></td></tr></table></figure>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>Python map()  lambda </p>\n<blockquote>\n<p>lambda <a href=\"https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">y = map(<span class=\"keyword\">lambda</span> x : x + <span class=\"number\">1</span> , x)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># prints out [2,3,4]</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(list(y))</span><br></pre></td></tr></table></figure>\n<p>map()  lambda  x  map </p>\n<h3 id=\"newspaper3k\"><a href=\"#newspaper3k\" class=\"headerlink\" title=\"newspaper3k\"></a>newspaper3k</h3><p></p>\n<blockquote>\n<p><a href=\"https://pypi.org/project/newspaper3k/\" target=\"_blank\" rel=\"noopener\">https://pypi.org/project/newspaper3k/</a></p>\n</blockquote>\n<p></p>\n<p> NLP </p>\n<blockquote>\n<p><a href=\"https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article\" target=\"_blank\" rel=\"noopener\">https://newspaper.readthedocs.io/en/latest/user_guide/quickstart.html#performing-nlp-on-an-article</a></p>\n</blockquote>\n<p> BeautifulSoup  DIY $ pip install newspaper3k</p>\n<h3 id=\"Operator-overloading\"><a href=\"#Operator-overloading\" class=\"headerlink\" title=\"Operator overloading\"></a>Operator overloading</h3><p>Python </p>\n<p> Python  + </p>\n<p> Python <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Thing</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, value)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.__value = value</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__gt__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__value &gt; other.__value</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__lt__</span><span class=\"params\">(self, other)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__value &lt; other.__value</span><br><span class=\"line\"></span><br><span class=\"line\">something = Thing(<span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">nothing = Thing(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># True</span></span><br><span class=\"line\"></span><br><span class=\"line\">something &gt; nothing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># False</span></span><br><span class=\"line\"></span><br><span class=\"line\">something &lt; nothing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Error</span></span><br><span class=\"line\"></span><br><span class=\"line\">something + nothing</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"pprint\"><a href=\"#pprint\" class=\"headerlink\" title=\"pprint\"></a>pprint</h3><p>Python  print </p>\n<p> Python  pretty printer </p>\n<blockquote>\n<p>pretty printer <a href=\"https://docs.python.org/3/library/pprint.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/pprint.html</a></p>\n</blockquote>\n<p>Python <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://randomuser.me/api/?results=1'</span></span><br><span class=\"line\"></span><br><span class=\"line\">users = requests.get(url).json()</span><br><span class=\"line\"></span><br><span class=\"line\">pprint.pprint(users)</span><br><span class=\"line\"></span><br><span class=\"line\">Queue</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Python--Python--Queue-\"><a href=\"#Python--Python--Queue-\" class=\"headerlink\" title=\"Python  Python  Queue \"></a>Python  Python  Queue </h3><p>queue</p>\n<p>First in, first out (FIFO) Last in, first out (LIFO) </p>\n<p>priority queue</p>\n<p> queue  Python <a href=\"https://www.tutorialspoint.com/python3/python_multithreading.htm\" target=\"_blank\" rel=\"noopener\">https://www.tutorialspoint.com/python3/python_multithreading.htm</a></p>\n<h3 id=\"repr\"><a href=\"#repr\" class=\"headerlink\" title=\"__repr__\"></a>__repr__</h3><p> Python <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt; file = open(<span class=\"string\">'file.txt'</span>, <span class=\"string\">'r'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; <span class=\"built_in\">print</span>(file)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;open file <span class=\"string\">'file.txt'</span>, mode <span class=\"string\">'r'</span> at 0x10d30aaf0&gt;</span><br></pre></td></tr></table></figure></p>\n<p> debug </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">someClass</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__repr__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;some description here&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">someInstance = someClass()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># prints &lt;some description here&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(someInstance)</span><br></pre></td></tr></table></figure>\n<h3 id=\"sh\"><a href=\"#sh\" class=\"headerlink\" title=\"sh\"></a>sh</h3><p>Python  os  subprocess </p>\n<p>sh </p>\n<blockquote>\n<p>sh <a href=\"http://amoffat.github.io/sh/\" target=\"_blank\" rel=\"noopener\">http://amoffat.github.io/sh/</a></p>\n</blockquote>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sh <span class=\"keyword\">import</span> *</span><br><span class=\"line\"></span><br><span class=\"line\">sh.pwd()</span><br><span class=\"line\"></span><br><span class=\"line\">sh.mkdir(<span class=\"string\">'new_folder'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sh.touch(<span class=\"string\">'new_file.txt'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">sh.whoami()</span><br><span class=\"line\"></span><br><span class=\"line\">sh.echo(<span class=\"string\">'This is great!'</span>)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Type-hints\"><a href=\"#Type-hints\" class=\"headerlink\" title=\"Type hints\"></a>Type hints</h3><p>Python </p>\n<p>typing issue</p>\n<p> Python 3.5 <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">addTwo</span><span class=\"params\">(x : Int)</span> -&gt; Int:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> List</span><br><span class=\"line\"></span><br><span class=\"line\">Vector = List[float]</span><br><span class=\"line\"></span><br><span class=\"line\">Matrix = List[Vector]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">addMatrix</span><span class=\"params\">(a : Matrix, b : Matrix)</span> -&gt; Matrix:</span></span><br><span class=\"line\"></span><br><span class=\"line\">  result = []</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i,row <span class=\"keyword\">in</span> enumerate(a):</span><br><span class=\"line\"></span><br><span class=\"line\">    result_row =[]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> j, col <span class=\"keyword\">in</span> enumerate(row):</span><br><span class=\"line\"></span><br><span class=\"line\">      result_row += [a[i][j] + b[i][j]]</span><br><span class=\"line\"></span><br><span class=\"line\">    result += [result_row]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\">x = [[<span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>], [<span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">y = [[<span class=\"number\">2.0</span>, <span class=\"number\">1.0</span>], [<span class=\"number\">0.0</span>, <span class=\"number\">-2.0</span>]]</span><br><span class=\"line\"></span><br><span class=\"line\">z = addMatrix(x, y)</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<p> TypeError</p>\n<h3 id=\"uuid\"><a href=\"#uuid\" class=\"headerlink\" title=\"uuid\"></a>uuid</h3><p>Universally Unique IDUUID Python  uuid </p>\n<blockquote>\n<p>uuid <a href=\"https://docs.python.org/3/library/uuid.html\" target=\"_blank\" rel=\"noopener\">https://docs.python.org/3/library/uuid.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> uuid</span><br><span class=\"line\"></span><br><span class=\"line\">user_id = uuid.uuid4()</span><br><span class=\"line\"></span><br><span class=\"line\">print(user_id)</span><br></pre></td></tr></table></figure>\n<p> 128 </p>\n<p> 2 UUID 5,000,000,000,000,000,000,000,000,000,000,000,000</p>\n<p> UUID</p>\n<h3 id=\"Virtual-environment\"><a href=\"#Virtual-environment\" class=\"headerlink\" title=\"Virtual environment\"></a>Virtual environment</h3><p> Python </p>\n<p> Python </p>\n<p>Python <br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m venv my-project</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">source</span> my-project/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\">pip install all-the-modules</span><br></pre></td></tr></table></figure></p>\n<p> Python </p>\n<h3 id=\"wikipedia\"><a href=\"#wikipedia\" class=\"headerlink\" title=\"wikipedia\"></a>wikipedia</h3><p>Wikipedia  API</p>\n<p>wikipedia  API </p>\n<blockquote>\n<p>Wikipedia <a href=\"https://wikipedia.readthedocs.io/en/latest/quickstart.html\" target=\"_blank\" rel=\"noopener\">https://wikipedia.readthedocs.io/en/latest/quickstart.html</a></p>\n</blockquote>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> wikipedia</span><br><span class=\"line\"></span><br><span class=\"line\">result = wikipedia.page(<span class=\"string\">'freeCodeCamp'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(result.summary)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> link <span class=\"keyword\">in</span> result.links:</span><br><span class=\"line\"></span><br><span class=\"line\">    print(link)</span><br></pre></td></tr></table></figure>\n<p> donate() </p>\n<h3 id=\"xkcd\"><a href=\"#xkcd\" class=\"headerlink\" title=\"xkcd\"></a>xkcd</h3><p>humour  Python (Monty Python and the Flying Circus)Python </p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> antigravity</span><br></pre></td></tr></table></figure></p>\n<p> xkcd  Python Python</p>\n<h3 id=\"YAML\"><a href=\"#YAML\" class=\"headerlink\" title=\"YAML\"></a>YAML</h3><p>YAML  YAML Aint Markup Language JSON </p>\n<p> JSON </p>\n<blockquote>\n<p>PyYAML <a href=\"https://pyyaml.org/wiki/PyYAMLDocumentation\" target=\"_blank\" rel=\"noopener\">https://pyyaml.org/wiki/PyYAMLDocumentation</a> Python  YAML</p>\n</blockquote>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install pyyaml</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> yaml</span><br></pre></td></tr></table></figure></p>\n<p>PyYAML  Python </p>\n<h3 id=\"zip\"><a href=\"#zip\" class=\"headerlink\" title=\"zip\"></a>zip</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keys = [<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">vals = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">zipped = dict(zip(keys, vals))</span><br></pre></td></tr></table></figure></p>\n<p>zip() </p>\n<p>*zip() </p>\n<p><a href=\"https://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747\" target=\"_blank\" rel=\"noopener\">https://medium.freecodecamp.org/an-a-z-of-useful-python-tricks-b467524ee747</a></p>\n"},{"title":"Fluent Python ","date":"2017-12-19T09:01:13.000Z","photos":["https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true"],"toc":true,"comment":true,"_content":"\n## Fluent Python ##\n### Chapter 7. Function Decorators and Closures\n### : \n\n\b  \nnonlocal Python3 nonlocal    \n   \n:    \n    \n\n- python \n- python \n- \n- nonlocal \n\n:\n\n- \n- \n- \n\n#### \n\n     \n, decorate:\n\n```python\n@decorate\ndef target():\n    print('running target()') \n# \ntarget = decorate(target())\n```\n\n\ntargetdecrate, :   \n\n    ```python   \n>>> def deco(func):\n...     def inner():\n...         print('running inner()')\n...     return inner\n...\n>>> @deco\n... def target():\n...     print('running target()')\n...\n>>> target()\nrunning inner()\n>>> target\n<function deco.<locals>.inner at 0x10063b598>\n```\n\ntarget inner,targetinner       \n\n#### Python    \n  \n:    \n\n```python     \nregistry = []\ndef register(func):\n    print('running register(%s)' % func)\n    registry.append(func)\n    return func\n\n@register\ndef f1():\n    print('running f1()')\n@register\ndef f2():\n    print('running f2()')\ndef f3():\n    print('running f3()')\ndef main():\n    print('running main()')\n    print('registry ->', registry)\n    f1()\n    f2()\n    f3()\nif __name__=='__main__':\n    main()\n```\n\n:\n\n```python    \nrunning register(<function f1 at 0x10320eb70>)\nrunning register(<function f2 at 0x10320eae8>)\nrunning main()\nregistry -> [<function f1 at 0x10320eb70>, <function f2 at 0x10320eae8>]\nrunning f1()\nrunning f2()\nrunning f3()\n```\n\n:    \n```python    \n>>> import registeration\nrunning register(<function f1 at 0x1100480d0>)\nrunning register(<function f2 at 0x110048158>)\n>>> registeration.registry\n[<function f1 at 0x1100480d0>, <function f2 at 0x110048158>]   \n```\n\n Python ********    \n\nregisteration.py:   \n- \n-  register \n\n#### \n\n\n```python    \npromos = []\ndef promotion(promo_func):\n    promos.append(promo_func)\n    return promo_func\n@promotion\ndef fidelity(order):\n    \"\"\"10005%\"\"\"\n    return order.total() * .05 if order.customer.fidelity >= 1000 else 0\n@promotion\n    def bulk_item(order):\n    \"\"\"2010%\"\"\"\n    discount = 0\n    for item in order.cart:\n        if item.quantity >= 20:\n            discount += item.total() * .1\n        return discount\n@promotion\ndef large_order(order):\n    \"\"\"107%\"\"\"\n    distinct_items = {item.product for item in order.cart}\n    if len(distinct_items) >= 10:\n        return order.total() * .07\n    return 0\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\n\n:\n\n- \n- @promotion \n- @promotion\n\n Python    \n#### Python   \nPython     \n\n```python    \n>>> def f1(a):\n...     print(a)\n...     print(b)\n...\n>>> f1(3)\n3\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<stdin>\", line 3, in f1\nNameError: name 'b' is not defined\n```\n\nb\n\n```python    \n>>> b = 6\n>>> f1(3)\n3\n6\n\n```\n\nb,\n\n```python    \n>>> def f2(a):\n...     print(a)\n...     print(b)\n...     b = 6\n...\n>>> b = 3\n>>> f2(3)\n3\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<stdin>\", line 3, in f2\nUnboundLocalError: local variable 'b' referenced before assignment\n\n```\n\nf2bf2b\n\nPython: Python \nglobal\n\n```python    \n>>> def f3(a):\n...     global b\n...     print(a)\n...     print(b)\n...     b = 6\n...\n>>> b = 3\n>>> f3(b)\n3\n3\n>>> b\n6\n>>>\n```\n\nf1/f2dis  \n\n```python     \n>>> dis(f1)\n  2           0 LOAD_GLOBAL              0 (print)\n              2 LOAD_FAST                0 (a)\n              4 CALL_FUNCTION            1\n              6 POP_TOP\n\n  3           8 LOAD_GLOBAL              0 (print)\n             10 LOAD_GLOBAL              1 (b)  #\n             12 CALL_FUNCTION            1\n             14 POP_TOP\n             16 LOAD_CONST               0 (None)\n             18 RETURN_VALUE\n\nSyntaxError: invalid syntax\n>>> dis(f2)\n  2           0 LOAD_GLOBAL              0 (print)\n              2 LOAD_FAST                0 (a)\n              4 CALL_FUNCTION            1\n              6 POP_TOP\n\n  3           8 LOAD_GLOBAL              0 (print)\n             10 LOAD_FAST                1 (b)  #\n             12 CALL_FUNCTION            1\n             14 POP_TOP\n\n  4          16 LOAD_CONST               1 (6)\n             18 STORE_FAST               1 (b)\n             20 LOAD_CONST               0 (None)\n             22 RETURN_VALUE\n```\n\n\n####  7.5     \n     \n:\n\n>  avg     \n\n:\n\n```python   \nclass Averager():\n    def __init__(self):\n        self.series = []\n    def __call__(self, new_value):\n        self.series.append(new_value)\n        total = sum(self.series)\n        return total/len(self.series)\n```\n\nAverager()Averager\n\n> \\>\\>\\> avg = Averager()     \n> \\>\\>\\> avg(10)   \n> 10.0   \n> \\>\\>\\> avg(11)    \n> 10.5   \n> \\>\\>\\> avg(12)    \n> 11.0  \n\nmake_averager:    \n\n```python    \ndef make_averager():\n    series = []\n    def averager(new_value):\n        series.append(new_value)\n        total = sum(series)\n        return total/len(series)\n    return averager\n```\n> \\>\\>\\> avg = make_averager()    \n> \\>\\>\\> avg(10)    \n>  10.0    \n> \\>\\>\\> avg(11)    \n>  10.5    \n> \\>\\>\\> avg(12)    \n>  11.0    \n\n: self.seriesmake_averagerseries\n\n avg = make\\_averager() make_averagerseries\n\naveragerseriesfree variable,\n![](https://github.com/aldslvda/blog-images/blob/master/fluent-python-7.1.png?raw=true)\n\naveragerPython\\_\\_code\\_\\_\b\n\n```python    \n>>> from averager import make_averager\n>>>\n>>> avg = make_averager()\n>>> avg.__code__.co_varnames\n('new_value', 'total')\n>>> avg.__code__.co_freevars\n('series',)\n```\n\nseries  avg.\\_\\_closure\\_\\_\n\n```python     \n>>> avg.__closure__[0].cell_contents\n[]\n>>> avg(10)\n10.0\n>>> avg.__closure__[0].cell_contents\n[10]\n>>> avg(11)\n10.5\n>>> avg.__closure__[0].cell_contents\n[10, 11]\n>>> avg(13)\n11.333333333333334\n>>> avg.__closure__[0].cell_contents\n[10, 11, 13]\n```\n\n    \n\n    \n\n#### nonlocal\n\nmake_averageravg+    \n:      \n\n```python\ndef make_averager_v1():\n    count = 0\n    total = 0\n    def averager(new_value):\n        count += 1\n        total += new_value\n        return total / count\n    return averager    \n```\n\n:   \n```python      \n>>> from averager import make_averager_v1\n>>> avg = make_averager_v1()\n>>> avg(10)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/NickAl/study/github/readings/Fluent-Python/7. Function Decorators and Closures/averager.py\", line 13, in averager\n    count += 1\nUnboundLocalError: local variable 'count' referenced before assignment\n>>>\n```\n\ncountcountint,count\n\nPython3 nonlocal\nnonlocal\n\n```python    \ndef make_averager_v1():\n    count = 0\n    total = 0\n    def averager(new_value):\n        nonlocal count, total\n        count += 1\n        total += new_value\n        return total / count\n    return averager\n```\nnonlocalPython2\n\n####      \n, clockedfunc   \n\n```python    \nimport time\ndef clock(func):\n    def clocked(*args):\n        t0 = time.perf_counter()\n        result = func(*args)\n        elapsed = time.perf_counter() - t0\n        name = func.__name__\n        arg_str = ', '.join(repr(arg) for arg in args)\n        print('[%0.8fs] %s(%s) -> %r' % (elapsed, name, arg_str, result))\n        return result\n    return clocked\n```\n\nPython:\n\n```python     \n# clockdeco_demo.py\nimport time\nfrom clockdeco import clock\n@clock\ndef snooze(seconds):\n    time.sleep(seconds)\n@clock\ndef factorial(n):\n    return 1 if n < 2 else n*factorial(n-1)\nif __name__=='__main__':\n    print('*' * 40, 'Calling snooze(.123)')\n    snooze(.123)\n    print('*' * 40, 'Calling factorial(6)')\n    print('6! =', factorial(6))\n```\n\n:\n\n> -> % python3 clockdeco_demo.py     \n> **************************************** Calling snooze(.123)     \n> [0.12309374s] snooze(0.123) -> None     \n> **************************************** Calling factorial(6)     \n> [0.00000162s] factorial(1) -> 1    \n> [0.00003553s] factorial(2) -> 2    \n> [0.00005951s] factorial(3) -> 6    \n> [0.00008194s] factorial(4) -> 24    \n> [0.00010441s] factorial(5) -> 120    \n> [0.00013048s] factorial(6) -> 720    \n> 6! = 720    \n\nclocked:     \n(1)  t0    \n(2)  factorial     \n(3)     \n(4)     \n(5)  2     \n\n\n:\n\n- \n- \\_\\_name\\_\\_\\_\\_doc\\_\\_\n\n\n\n```python    \n#clockdeco2.py\nimport time\nimport functools\ndef clock(func):\n    @functools.wraps(func)\n    def clocked(*args, **kwargs):\n        t0 = time.time()\n        result = func(*args, **kwargs)\n        elapsed = time.time() - t0\n        name = func.__name__\n        arg_lst = []\n        if args:\n            arg_lst.append(', '.join(repr(arg) for arg in args))\n        if kwargs:\n            pairs = ['%s=%r' % (k, w) for k, w in sorted(kwargs.items())]\n            arg_lst.append(', '.join(pairs))\n            arg_str = ', '.join(arg_lst)\n        print('[%0.8fs] %s(%s) -> %r ' % (elapsed, name, arg_str, result))\n        return result\n    return clocked\n```\nfunctool.wrap\n\n#### \n\nfunctool: lru\\_cachesingle\\_dispatch\n\n##### functools.lru_cache\nfunctools.lru_cache memoizationLRULeast Recently Used    \n n  lru_cache\n\n```python     \nfrom clockdeco import clock\n@clock\ndef fibonacci(n):\n    if n < 2:\n        return n\n    return fibonacci(n-2) + fibonacci(n-1)\nif __name__=='__main__':\n    print(fibonacci(6))\n\n```\n\n\n\n> -> % python3 fibo_demo.py  \n> [0.00000075s] fibonacci(0) -> 0   \n> [0.00000106s] fibonacci(1) -> 1  \n> [0.00008829s] fibonacci(2) -> 1  \n> [0.00000052s] fibonacci(1) -> 1  \n> [0.00000056s] fibonacci(0) -> 0  \n> [0.00000068s] fibonacci(1) -> 1  \n> [0.00002681s] fibonacci(2) -> 1  \n> [0.00005140s] fibonacci(3) -> 2  \n> [0.00016751s] fibonacci(4) -> 3  \n> [0.00000051s] fibonacci(1) -> 1  \n> [0.00000046s] fibonacci(0) -> 0  \n> [0.00000054s] fibonacci(1) -> 1  \n> [0.00002430s] fibonacci(2) -> 1  \n> [0.00005003s] fibonacci(3) -> 2  \n> [0.00000054s] fibonacci(0) -> 0  \n> [0.00000057s] fibonacci(1) -> 1  \n> [0.00002484s] fibonacci(2) -> 1   \n> [0.00000044s] fibonacci(1) -> 1  \n> [0.00000081s] fibonacci(0) -> 0   \n> [0.00000073s] fibonacci(1) -> 1   \n> [0.00002765s] fibonacci(2) -> 1   \n> [0.00005353s] fibonacci(3) -> 2   \n> [0.00010212s] fibonacci(4) -> 3  \n> [0.00017658s] fibonacci(5) -> 5  \n> [0.00037021s] fibonacci(6) -> 8  \n>  8\n\n:\n\n```python    \nimport functools\nfrom clockdeco import clock\n@functools.lru_cache()\n@clock\ndef fibonacci(n):\n    if n < 2:\n        return n\n    return fibonacci(n-2) + fibonacci(n-1)\nif __name__=='__main__':\n    print(fibonacci(6))\n```\n\n:\n\n> -> % python3 fibo_demo.py  \n> [0.00000114s] fibonacci(0) -> 0  \n> [0.00000152s] fibonacci(1) -> 1  \n> [0.00014005s] fibonacci(2) -> 1  \n> [0.00000173s] fibonacci(3) -> 2  \n> [0.00018128s] fibonacci(4) -> 3  \n> [0.00000119s] fibonacci(5) -> 5   \n> [0.00022029s] fibonacci(6) -> 8   \n>  8  \n\n:lru\\_cache   \nlru\\_cacheWeb\n\n> functools.lru_cache(maxsize=128, typed=False)\n\nfunctools.lru\\_cachemaxsizetyped\n- maxsize2\n- typed\n- lru\\_cache\n\n7.8.2 \n\nPython:switchif/elif/else      \n\nsingle\\_dispatch @singledispatch generic function\n\nHtml\n\n```python\nfrom functools import singledispatch\nfrom collections import abc\nimport numbers\nimport html\n@singledispatch\ndef htmlize(obj):\n    content = html.escape(repr(obj))\n    return '<pre>{}</pre>'.format(content)\n@htmlize.register(str)\ndef _(text):\n    content = html.escape(text).replace('\\n', '<br>\\n')\n    return '<p>{0}</p>'.format(content)\n@htmlize.register(numbers.Integral)\ndef _(n):\n    return '<pre>{0} (0x{0:x})</pre>'.format(n)\n@htmlize.register(tuple)\n@htmlize.register(abc.MutableSequence)\ndef _(seq):\n    inner = '</li>\\n<li>'.join(htmlize(item) for item in seq)\n    return '<ul>\\n<li>' + inner + '</li>\\n</ul>'\n\n```\n\n numbers.Integral abc.MutableSequence int  listPython  numbers.Integral int    \n\nsingle dispatch  Java  Python   \n\n#### 7.9 \nPython \n\n:\n\n##### registeration\n register  active False \n```python     \nregistry = set()\ndef register(active=True):\n    def decorate(func):\n        print('running register(active=%s)->decorate(%s)'% (active, func))\n        if active:\n            registry.add(func)\n        else:\n            registry.discard(func)\n        return func\n    return decorate\n@register(active=False)\ndef f1():\n    print('running f1()')\n@register()\ndef f2():\n    print('running f2()')\ndef f3():\n    print('running f3()')\n```\n\nregister()  decorate    \n  \n\n##### clock\n\nclock\n\n```python   \nimport time\nDEFAULT_FMT = '[{elapsed:0.8f}s] {name}({args}) -> {result}'\ndef clock(fmt=DEFAULT_FMT): #\n    def decorate(func):     #\n        def clocked(*_args):#\n            t0 = time.time()\n            _result = func(*_args)\n            elapsed = time.time() - t0\n            name = func.__name__\n            args = ', '.join(repr(arg) for arg in _args)\n            result = repr(_result)\n            print(fmt.format(**locals()))\n            return _result\n        return clocked\n    return decorate \nif __name__ == '__main__':\n    @clock()\n    def snooze(seconds):\n        time.sleep(seconds)\n        for i in range(3):\n            snooze(.123)\n```\n\n#### \n\n @functools.wraps      \nnonlocal  nonlocal GUI  I/O","source":"_posts/fluent-python-7.md","raw":"title: Fluent Python \ndate: 2017-12-19 17:01:13\ntags:\n- Python\n- decorator\n- closure\n- fluent python\ncategories:\n- \nphotos:\t \n- \"https://github.com/aldslvda/blog-images/blob/master/fluent_python_logo.png?raw=true\"\ntoc: true\ncomment: true\n---\n\n## Fluent Python ##\n### Chapter 7. Function Decorators and Closures\n### : \n\n\b  \nnonlocal Python3 nonlocal    \n   \n:    \n    \n\n- python \n- python \n- \n- nonlocal \n\n:\n\n- \n- \n- \n\n#### \n\n     \n, decorate:\n\n```python\n@decorate\ndef target():\n    print('running target()') \n# \ntarget = decorate(target())\n```\n\n\ntargetdecrate, :   \n\n    ```python   \n>>> def deco(func):\n...     def inner():\n...         print('running inner()')\n...     return inner\n...\n>>> @deco\n... def target():\n...     print('running target()')\n...\n>>> target()\nrunning inner()\n>>> target\n<function deco.<locals>.inner at 0x10063b598>\n```\n\ntarget inner,targetinner       \n\n#### Python    \n  \n:    \n\n```python     \nregistry = []\ndef register(func):\n    print('running register(%s)' % func)\n    registry.append(func)\n    return func\n\n@register\ndef f1():\n    print('running f1()')\n@register\ndef f2():\n    print('running f2()')\ndef f3():\n    print('running f3()')\ndef main():\n    print('running main()')\n    print('registry ->', registry)\n    f1()\n    f2()\n    f3()\nif __name__=='__main__':\n    main()\n```\n\n:\n\n```python    \nrunning register(<function f1 at 0x10320eb70>)\nrunning register(<function f2 at 0x10320eae8>)\nrunning main()\nregistry -> [<function f1 at 0x10320eb70>, <function f2 at 0x10320eae8>]\nrunning f1()\nrunning f2()\nrunning f3()\n```\n\n:    \n```python    \n>>> import registeration\nrunning register(<function f1 at 0x1100480d0>)\nrunning register(<function f2 at 0x110048158>)\n>>> registeration.registry\n[<function f1 at 0x1100480d0>, <function f2 at 0x110048158>]   \n```\n\n Python ********    \n\nregisteration.py:   \n- \n-  register \n\n#### \n\n\n```python    \npromos = []\ndef promotion(promo_func):\n    promos.append(promo_func)\n    return promo_func\n@promotion\ndef fidelity(order):\n    \"\"\"10005%\"\"\"\n    return order.total() * .05 if order.customer.fidelity >= 1000 else 0\n@promotion\n    def bulk_item(order):\n    \"\"\"2010%\"\"\"\n    discount = 0\n    for item in order.cart:\n        if item.quantity >= 20:\n            discount += item.total() * .1\n        return discount\n@promotion\ndef large_order(order):\n    \"\"\"107%\"\"\"\n    distinct_items = {item.product for item in order.cart}\n    if len(distinct_items) >= 10:\n        return order.total() * .07\n    return 0\ndef best_promo(order):\n    \"\"\"\"\"\"\n    return max(promo(order) for promo in promos)\n```\n\n:\n\n- \n- @promotion \n- @promotion\n\n Python    \n#### Python   \nPython     \n\n```python    \n>>> def f1(a):\n...     print(a)\n...     print(b)\n...\n>>> f1(3)\n3\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<stdin>\", line 3, in f1\nNameError: name 'b' is not defined\n```\n\nb\n\n```python    \n>>> b = 6\n>>> f1(3)\n3\n6\n\n```\n\nb,\n\n```python    \n>>> def f2(a):\n...     print(a)\n...     print(b)\n...     b = 6\n...\n>>> b = 3\n>>> f2(3)\n3\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<stdin>\", line 3, in f2\nUnboundLocalError: local variable 'b' referenced before assignment\n\n```\n\nf2bf2b\n\nPython: Python \nglobal\n\n```python    \n>>> def f3(a):\n...     global b\n...     print(a)\n...     print(b)\n...     b = 6\n...\n>>> b = 3\n>>> f3(b)\n3\n3\n>>> b\n6\n>>>\n```\n\nf1/f2dis  \n\n```python     \n>>> dis(f1)\n  2           0 LOAD_GLOBAL              0 (print)\n              2 LOAD_FAST                0 (a)\n              4 CALL_FUNCTION            1\n              6 POP_TOP\n\n  3           8 LOAD_GLOBAL              0 (print)\n             10 LOAD_GLOBAL              1 (b)  #\n             12 CALL_FUNCTION            1\n             14 POP_TOP\n             16 LOAD_CONST               0 (None)\n             18 RETURN_VALUE\n\nSyntaxError: invalid syntax\n>>> dis(f2)\n  2           0 LOAD_GLOBAL              0 (print)\n              2 LOAD_FAST                0 (a)\n              4 CALL_FUNCTION            1\n              6 POP_TOP\n\n  3           8 LOAD_GLOBAL              0 (print)\n             10 LOAD_FAST                1 (b)  #\n             12 CALL_FUNCTION            1\n             14 POP_TOP\n\n  4          16 LOAD_CONST               1 (6)\n             18 STORE_FAST               1 (b)\n             20 LOAD_CONST               0 (None)\n             22 RETURN_VALUE\n```\n\n\n####  7.5     \n     \n:\n\n>  avg     \n\n:\n\n```python   \nclass Averager():\n    def __init__(self):\n        self.series = []\n    def __call__(self, new_value):\n        self.series.append(new_value)\n        total = sum(self.series)\n        return total/len(self.series)\n```\n\nAverager()Averager\n\n> \\>\\>\\> avg = Averager()     \n> \\>\\>\\> avg(10)   \n> 10.0   \n> \\>\\>\\> avg(11)    \n> 10.5   \n> \\>\\>\\> avg(12)    \n> 11.0  \n\nmake_averager:    \n\n```python    \ndef make_averager():\n    series = []\n    def averager(new_value):\n        series.append(new_value)\n        total = sum(series)\n        return total/len(series)\n    return averager\n```\n> \\>\\>\\> avg = make_averager()    \n> \\>\\>\\> avg(10)    \n>  10.0    \n> \\>\\>\\> avg(11)    \n>  10.5    \n> \\>\\>\\> avg(12)    \n>  11.0    \n\n: self.seriesmake_averagerseries\n\n avg = make\\_averager() make_averagerseries\n\naveragerseriesfree variable,\n![](https://github.com/aldslvda/blog-images/blob/master/fluent-python-7.1.png?raw=true)\n\naveragerPython\\_\\_code\\_\\_\b\n\n```python    \n>>> from averager import make_averager\n>>>\n>>> avg = make_averager()\n>>> avg.__code__.co_varnames\n('new_value', 'total')\n>>> avg.__code__.co_freevars\n('series',)\n```\n\nseries  avg.\\_\\_closure\\_\\_\n\n```python     \n>>> avg.__closure__[0].cell_contents\n[]\n>>> avg(10)\n10.0\n>>> avg.__closure__[0].cell_contents\n[10]\n>>> avg(11)\n10.5\n>>> avg.__closure__[0].cell_contents\n[10, 11]\n>>> avg(13)\n11.333333333333334\n>>> avg.__closure__[0].cell_contents\n[10, 11, 13]\n```\n\n    \n\n    \n\n#### nonlocal\n\nmake_averageravg+    \n:      \n\n```python\ndef make_averager_v1():\n    count = 0\n    total = 0\n    def averager(new_value):\n        count += 1\n        total += new_value\n        return total / count\n    return averager    \n```\n\n:   \n```python      \n>>> from averager import make_averager_v1\n>>> avg = make_averager_v1()\n>>> avg(10)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/NickAl/study/github/readings/Fluent-Python/7. Function Decorators and Closures/averager.py\", line 13, in averager\n    count += 1\nUnboundLocalError: local variable 'count' referenced before assignment\n>>>\n```\n\ncountcountint,count\n\nPython3 nonlocal\nnonlocal\n\n```python    \ndef make_averager_v1():\n    count = 0\n    total = 0\n    def averager(new_value):\n        nonlocal count, total\n        count += 1\n        total += new_value\n        return total / count\n    return averager\n```\nnonlocalPython2\n\n####      \n, clockedfunc   \n\n```python    \nimport time\ndef clock(func):\n    def clocked(*args):\n        t0 = time.perf_counter()\n        result = func(*args)\n        elapsed = time.perf_counter() - t0\n        name = func.__name__\n        arg_str = ', '.join(repr(arg) for arg in args)\n        print('[%0.8fs] %s(%s) -> %r' % (elapsed, name, arg_str, result))\n        return result\n    return clocked\n```\n\nPython:\n\n```python     \n# clockdeco_demo.py\nimport time\nfrom clockdeco import clock\n@clock\ndef snooze(seconds):\n    time.sleep(seconds)\n@clock\ndef factorial(n):\n    return 1 if n < 2 else n*factorial(n-1)\nif __name__=='__main__':\n    print('*' * 40, 'Calling snooze(.123)')\n    snooze(.123)\n    print('*' * 40, 'Calling factorial(6)')\n    print('6! =', factorial(6))\n```\n\n:\n\n> -> % python3 clockdeco_demo.py     \n> **************************************** Calling snooze(.123)     \n> [0.12309374s] snooze(0.123) -> None     \n> **************************************** Calling factorial(6)     \n> [0.00000162s] factorial(1) -> 1    \n> [0.00003553s] factorial(2) -> 2    \n> [0.00005951s] factorial(3) -> 6    \n> [0.00008194s] factorial(4) -> 24    \n> [0.00010441s] factorial(5) -> 120    \n> [0.00013048s] factorial(6) -> 720    \n> 6! = 720    \n\nclocked:     \n(1)  t0    \n(2)  factorial     \n(3)     \n(4)     \n(5)  2     \n\n\n:\n\n- \n- \\_\\_name\\_\\_\\_\\_doc\\_\\_\n\n\n\n```python    \n#clockdeco2.py\nimport time\nimport functools\ndef clock(func):\n    @functools.wraps(func)\n    def clocked(*args, **kwargs):\n        t0 = time.time()\n        result = func(*args, **kwargs)\n        elapsed = time.time() - t0\n        name = func.__name__\n        arg_lst = []\n        if args:\n            arg_lst.append(', '.join(repr(arg) for arg in args))\n        if kwargs:\n            pairs = ['%s=%r' % (k, w) for k, w in sorted(kwargs.items())]\n            arg_lst.append(', '.join(pairs))\n            arg_str = ', '.join(arg_lst)\n        print('[%0.8fs] %s(%s) -> %r ' % (elapsed, name, arg_str, result))\n        return result\n    return clocked\n```\nfunctool.wrap\n\n#### \n\nfunctool: lru\\_cachesingle\\_dispatch\n\n##### functools.lru_cache\nfunctools.lru_cache memoizationLRULeast Recently Used    \n n  lru_cache\n\n```python     \nfrom clockdeco import clock\n@clock\ndef fibonacci(n):\n    if n < 2:\n        return n\n    return fibonacci(n-2) + fibonacci(n-1)\nif __name__=='__main__':\n    print(fibonacci(6))\n\n```\n\n\n\n> -> % python3 fibo_demo.py  \n> [0.00000075s] fibonacci(0) -> 0   \n> [0.00000106s] fibonacci(1) -> 1  \n> [0.00008829s] fibonacci(2) -> 1  \n> [0.00000052s] fibonacci(1) -> 1  \n> [0.00000056s] fibonacci(0) -> 0  \n> [0.00000068s] fibonacci(1) -> 1  \n> [0.00002681s] fibonacci(2) -> 1  \n> [0.00005140s] fibonacci(3) -> 2  \n> [0.00016751s] fibonacci(4) -> 3  \n> [0.00000051s] fibonacci(1) -> 1  \n> [0.00000046s] fibonacci(0) -> 0  \n> [0.00000054s] fibonacci(1) -> 1  \n> [0.00002430s] fibonacci(2) -> 1  \n> [0.00005003s] fibonacci(3) -> 2  \n> [0.00000054s] fibonacci(0) -> 0  \n> [0.00000057s] fibonacci(1) -> 1  \n> [0.00002484s] fibonacci(2) -> 1   \n> [0.00000044s] fibonacci(1) -> 1  \n> [0.00000081s] fibonacci(0) -> 0   \n> [0.00000073s] fibonacci(1) -> 1   \n> [0.00002765s] fibonacci(2) -> 1   \n> [0.00005353s] fibonacci(3) -> 2   \n> [0.00010212s] fibonacci(4) -> 3  \n> [0.00017658s] fibonacci(5) -> 5  \n> [0.00037021s] fibonacci(6) -> 8  \n>  8\n\n:\n\n```python    \nimport functools\nfrom clockdeco import clock\n@functools.lru_cache()\n@clock\ndef fibonacci(n):\n    if n < 2:\n        return n\n    return fibonacci(n-2) + fibonacci(n-1)\nif __name__=='__main__':\n    print(fibonacci(6))\n```\n\n:\n\n> -> % python3 fibo_demo.py  \n> [0.00000114s] fibonacci(0) -> 0  \n> [0.00000152s] fibonacci(1) -> 1  \n> [0.00014005s] fibonacci(2) -> 1  \n> [0.00000173s] fibonacci(3) -> 2  \n> [0.00018128s] fibonacci(4) -> 3  \n> [0.00000119s] fibonacci(5) -> 5   \n> [0.00022029s] fibonacci(6) -> 8   \n>  8  \n\n:lru\\_cache   \nlru\\_cacheWeb\n\n> functools.lru_cache(maxsize=128, typed=False)\n\nfunctools.lru\\_cachemaxsizetyped\n- maxsize2\n- typed\n- lru\\_cache\n\n7.8.2 \n\nPython:switchif/elif/else      \n\nsingle\\_dispatch @singledispatch generic function\n\nHtml\n\n```python\nfrom functools import singledispatch\nfrom collections import abc\nimport numbers\nimport html\n@singledispatch\ndef htmlize(obj):\n    content = html.escape(repr(obj))\n    return '<pre>{}</pre>'.format(content)\n@htmlize.register(str)\ndef _(text):\n    content = html.escape(text).replace('\\n', '<br>\\n')\n    return '<p>{0}</p>'.format(content)\n@htmlize.register(numbers.Integral)\ndef _(n):\n    return '<pre>{0} (0x{0:x})</pre>'.format(n)\n@htmlize.register(tuple)\n@htmlize.register(abc.MutableSequence)\ndef _(seq):\n    inner = '</li>\\n<li>'.join(htmlize(item) for item in seq)\n    return '<ul>\\n<li>' + inner + '</li>\\n</ul>'\n\n```\n\n numbers.Integral abc.MutableSequence int  listPython  numbers.Integral int    \n\nsingle dispatch  Java  Python   \n\n#### 7.9 \nPython \n\n:\n\n##### registeration\n register  active False \n```python     \nregistry = set()\ndef register(active=True):\n    def decorate(func):\n        print('running register(active=%s)->decorate(%s)'% (active, func))\n        if active:\n            registry.add(func)\n        else:\n            registry.discard(func)\n        return func\n    return decorate\n@register(active=False)\ndef f1():\n    print('running f1()')\n@register()\ndef f2():\n    print('running f2()')\ndef f3():\n    print('running f3()')\n```\n\nregister()  decorate    \n  \n\n##### clock\n\nclock\n\n```python   \nimport time\nDEFAULT_FMT = '[{elapsed:0.8f}s] {name}({args}) -> {result}'\ndef clock(fmt=DEFAULT_FMT): #\n    def decorate(func):     #\n        def clocked(*_args):#\n            t0 = time.time()\n            _result = func(*_args)\n            elapsed = time.time() - t0\n            name = func.__name__\n            args = ', '.join(repr(arg) for arg in _args)\n            result = repr(_result)\n            print(fmt.format(**locals()))\n            return _result\n        return clocked\n    return decorate \nif __name__ == '__main__':\n    @clock()\n    def snooze(seconds):\n        time.sleep(seconds)\n        for i in range(3):\n            snooze(.123)\n```\n\n#### \n\n @functools.wraps      \nnonlocal  nonlocal GUI  I/O","slug":"fluent-python-7","published":1,"updated":"2019-04-25T01:27:24.747Z","comments":1,"layout":"post","link":"","_id":"cjuw5c6id005zdhyfjdlvh2jw","content":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-7-Function-Decorators-and-Closures\"><a href=\"#Chapter-7-Function-Decorators-and-Closures\" class=\"headerlink\" title=\"Chapter 7. Function Decorators and Closures\"></a>Chapter 7. Function Decorators and Closures</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>\b<br>nonlocal Python3 nonlocal<br><br>:<br>    </p>\n<ul>\n<li>python </li>\n<li>python </li>\n<li></li>\n<li>nonlocal </li>\n</ul>\n<p>:</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>, decorate:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@decorate</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">target</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running target()'</span>) </span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">target = decorate(target())</span><br></pre></td></tr></table></figure>\n<p>targetdecrate, :   </p>\n<pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deco</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">inner</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>        print(<span class=\"string\">'running inner()'</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">return</span> inner</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>@deco</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">target</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(<span class=\"string\">'running target()'</span>)</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>target()</span><br><span class=\"line\">running inner()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>target</span><br><span class=\"line\">&lt;function deco.&lt;locals&gt;.inner at <span class=\"number\">0x10063b598</span>&gt;</span><br></pre></td></tr></table></figure>\n</code></pre><p>target inner,targetinner       </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><br>:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running register(%s)'</span> % func)</span><br><span class=\"line\">    registry.append(func)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> func</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@register</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f1()'</span>)</span><br><span class=\"line\"><span class=\"meta\">@register</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f2()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f3()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running main()'</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'registry -&gt;'</span>, registry)</span><br><span class=\"line\">    f1()</span><br><span class=\"line\">    f2()</span><br><span class=\"line\">    f3()</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">running register(&lt;function f1 at <span class=\"number\">0x10320eb70</span>&gt;)</span><br><span class=\"line\">running register(&lt;function f2 at <span class=\"number\">0x10320eae8</span>&gt;)</span><br><span class=\"line\">running main()</span><br><span class=\"line\">registry -&gt; [&lt;function f1 at 0x10320eb70&gt;, &lt;function f2 at 0x10320eae8&gt;]</span><br><span class=\"line\">running f1()</span><br><span class=\"line\">running f2()</span><br><span class=\"line\">running f3()</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> registeration</span><br><span class=\"line\">running register(&lt;function f1 at <span class=\"number\">0x1100480d0</span>&gt;)</span><br><span class=\"line\">running register(&lt;function f2 at <span class=\"number\">0x110048158</span>&gt;)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>registeration.registry</span><br><span class=\"line\">[&lt;function f1 at <span class=\"number\">0x1100480d0</span>&gt;, &lt;function f2 at <span class=\"number\">0x110048158</span>&gt;]</span><br></pre></td></tr></table></figure></p>\n<p> Python <strong></strong><strong></strong>    </p>\n<p>registeration.py:   </p>\n<ul>\n<li></li>\n<li> register </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion</span><span class=\"params\">(promo_func)</span>:</span></span><br><span class=\"line\">    promos.append(promo_func)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> promo_func</span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fidelity</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bulk_item</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    discount = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">            discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">large_order</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li></li>\n<li>@promotion </li>\n<li>@promotion</li>\n</ul>\n<p> Python    </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Python     </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f1(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">3</span>, <span class=\"keyword\">in</span> f1</span><br><span class=\"line\">NameError: name <span class=\"string\">'b'</span> <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> defined</span><br></pre></td></tr></table></figure>\n<p>b</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f1(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br></pre></td></tr></table></figure>\n<p>b,</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\"><span class=\"meta\">... </span>    b = <span class=\"number\">6</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f2(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">3</span>, <span class=\"keyword\">in</span> f2</span><br><span class=\"line\">UnboundLocalError: local variable <span class=\"string\">'b'</span> referenced before assignment</span><br></pre></td></tr></table></figure>\n<p>f2bf2b</p>\n<p>Python: Python <br>global</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">global</span> b</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\"><span class=\"meta\">... </span>    b = <span class=\"number\">6</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f3(b)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b</span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>\n<p>f1/f2dis  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>dis(f1)</span><br><span class=\"line\">  <span class=\"number\">2</span>           <span class=\"number\">0</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">              <span class=\"number\">2</span> LOAD_FAST                <span class=\"number\">0</span> (a)</span><br><span class=\"line\">              <span class=\"number\">4</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">              <span class=\"number\">6</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">3</span>           <span class=\"number\">8</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">             <span class=\"number\">10</span> LOAD_GLOBAL              <span class=\"number\">1</span> (b)  <span class=\"comment\">#</span></span><br><span class=\"line\">             <span class=\"number\">12</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">             <span class=\"number\">14</span> POP_TOP</span><br><span class=\"line\">             <span class=\"number\">16</span> LOAD_CONST               <span class=\"number\">0</span> (<span class=\"literal\">None</span>)</span><br><span class=\"line\">             <span class=\"number\">18</span> RETURN_VALUE</span><br><span class=\"line\"></span><br><span class=\"line\">SyntaxError: invalid syntax</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>dis(f2)</span><br><span class=\"line\">  <span class=\"number\">2</span>           <span class=\"number\">0</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">              <span class=\"number\">2</span> LOAD_FAST                <span class=\"number\">0</span> (a)</span><br><span class=\"line\">              <span class=\"number\">4</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">              <span class=\"number\">6</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">3</span>           <span class=\"number\">8</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">             <span class=\"number\">10</span> LOAD_FAST                <span class=\"number\">1</span> (b)  <span class=\"comment\">#</span></span><br><span class=\"line\">             <span class=\"number\">12</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">             <span class=\"number\">14</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">4</span>          <span class=\"number\">16</span> LOAD_CONST               <span class=\"number\">1</span> (<span class=\"number\">6</span>)</span><br><span class=\"line\">             <span class=\"number\">18</span> STORE_FAST               <span class=\"number\">1</span> (b)</span><br><span class=\"line\">             <span class=\"number\">20</span> LOAD_CONST               <span class=\"number\">0</span> (<span class=\"literal\">None</span>)</span><br><span class=\"line\">             <span class=\"number\">22</span> RETURN_VALUE</span><br></pre></td></tr></table></figure>\n<h4 id=\"7-5-\"><a href=\"#7-5-\" class=\"headerlink\" title=\"7.5  \"></a>7.5  </h4><p><br>:</p>\n<blockquote>\n<p> avg     </p>\n</blockquote>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Averager</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.series = []</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, new_value)</span>:</span></span><br><span class=\"line\">        self.series.append(new_value)</span><br><span class=\"line\">        total = sum(self.series)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total/len(self.series)</span><br></pre></td></tr></table></figure>\n<p>Averager()Averager</p>\n<blockquote>\n<p>>>> avg = Averager()<br>>>> avg(10)<br>10.0<br>>>> avg(11)<br>10.5<br>>>> avg(12)<br>11.0  </p>\n</blockquote>\n<p>make_averager:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    series = []</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        series.append(new_value)</span><br><span class=\"line\">        total = sum(series)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total/len(series)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>>>> avg = make_averager()<br>>>> avg(10)<br> 10.0<br>>>> avg(11)<br> 10.5<br>>>> avg(12)<br> 11.0    </p>\n</blockquote>\n<p>: self.seriesmake_averagerseries</p>\n<p> avg = make_averager() make_averagerseries</p>\n<p>averagerseriesfree variable,<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-7.1.png?raw=true\" alt=\"\"></p>\n<p>averagerPython__code__\b</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> averager <span class=\"keyword\">import</span> make_averager</span><br><span class=\"line\">&gt;&gt;&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg = make_averager()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__code__.co_varnames</span><br><span class=\"line\">(<span class=\"string\">'new_value'</span>, <span class=\"string\">'total'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__code__.co_freevars</span><br><span class=\"line\">(<span class=\"string\">'series'</span>,)</span><br></pre></td></tr></table></figure>\n<p>series  avg.__closure__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"number\">10.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"number\">10.5</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">11</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">13</span>)</span><br><span class=\"line\"><span class=\"number\">11.333333333333334</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">13</span>]</span><br></pre></td></tr></table></figure>\n<p>    </p>\n<p>    </p>\n<h4 id=\"nonlocal\"><a href=\"#nonlocal\" class=\"headerlink\" title=\"nonlocal\"></a>nonlocal</h4><p>make_averageravg+<br>:      </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager_v1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    count = <span class=\"number\">0</span></span><br><span class=\"line\">    total = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        count += <span class=\"number\">1</span></span><br><span class=\"line\">        total += new_value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total / count</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> averager <span class=\"keyword\">import</span> make_averager_v1</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg = make_averager_v1()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">10</span>)</span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"/Users/NickAl/study/github/readings/Fluent-Python/7. Function Decorators and Closures/averager.py\"</span>, line <span class=\"number\">13</span>, <span class=\"keyword\">in</span> averager</span><br><span class=\"line\">    count += <span class=\"number\">1</span></span><br><span class=\"line\">UnboundLocalError: local variable <span class=\"string\">'count'</span> referenced before assignment</span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>\n<p>countcountint,count</p>\n<p>Python3 nonlocal<br>nonlocal</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager_v1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    count = <span class=\"number\">0</span></span><br><span class=\"line\">    total = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">nonlocal</span> count, total</span><br><span class=\"line\">        count += <span class=\"number\">1</span></span><br><span class=\"line\">        total += new_value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total / count</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<p>nonlocalPython2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>, clockedfunc   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*args)</span>:</span></span><br><span class=\"line\">        t0 = time.perf_counter()</span><br><span class=\"line\">        result = func(*args)</span><br><span class=\"line\">        elapsed = time.perf_counter() - t0</span><br><span class=\"line\">        name = func.__name__</span><br><span class=\"line\">        arg_str = <span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> args)</span><br><span class=\"line\">        print(<span class=\"string\">'[%0.8fs] %s(%s) -&gt; %r'</span> % (elapsed, name, arg_str, result))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clocked</span><br></pre></td></tr></table></figure>\n<p>Python:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># clockdeco_demo.py</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">snooze</span><span class=\"params\">(seconds)</span>:</span></span><br><span class=\"line\">    time.sleep(seconds)</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">factorial</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span> <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span> <span class=\"keyword\">else</span> n*factorial(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(<span class=\"string\">'*'</span> * <span class=\"number\">40</span>, <span class=\"string\">'Calling snooze(.123)'</span>)</span><br><span class=\"line\">    snooze(<span class=\"number\">.123</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'*'</span> * <span class=\"number\">40</span>, <span class=\"string\">'Calling factorial(6)'</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'6! ='</span>, factorial(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>-&gt; % python3 clockdeco_demo.py<br><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong> Calling snooze(.123)<br>[0.12309374s] snooze(0.123) -&gt; None<br><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong> Calling factorial(6)<br>[0.00000162s] factorial(1) -&gt; 1<br>[0.00003553s] factorial(2) -&gt; 2<br>[0.00005951s] factorial(3) -&gt; 6<br>[0.00008194s] factorial(4) -&gt; 24<br>[0.00010441s] factorial(5) -&gt; 120<br>[0.00013048s] factorial(6) -&gt; 720<br>6! = 720    </p>\n</blockquote>\n<p>clocked:<br>(1)  t0<br>(2)  factorial <br>(3) <br>(4) <br>(5)  2 <br></p>\n<p>:</p>\n<ul>\n<li></li>\n<li>__name____doc__</li>\n</ul>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#clockdeco2.py</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @functools.wraps(func)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*args, **kwargs)</span>:</span></span><br><span class=\"line\">        t0 = time.time()</span><br><span class=\"line\">        result = func(*args, **kwargs)</span><br><span class=\"line\">        elapsed = time.time() - t0</span><br><span class=\"line\">        name = func.__name__</span><br><span class=\"line\">        arg_lst = []</span><br><span class=\"line\">        <span class=\"keyword\">if</span> args:</span><br><span class=\"line\">            arg_lst.append(<span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> args))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> kwargs:</span><br><span class=\"line\">            pairs = [<span class=\"string\">'%s=%r'</span> % (k, w) <span class=\"keyword\">for</span> k, w <span class=\"keyword\">in</span> sorted(kwargs.items())]</span><br><span class=\"line\">            arg_lst.append(<span class=\"string\">', '</span>.join(pairs))</span><br><span class=\"line\">            arg_str = <span class=\"string\">', '</span>.join(arg_lst)</span><br><span class=\"line\">        print(<span class=\"string\">'[%0.8fs] %s(%s) -&gt; %r '</span> % (elapsed, name, arg_str, result))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clocked</span><br></pre></td></tr></table></figure>\n<p>functool.wrap</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>functool: lru_cachesingle_dispatch</p>\n<h5 id=\"functools-lru-cache\"><a href=\"#functools-lru-cache\" class=\"headerlink\" title=\"functools.lru_cache\"></a>functools.lru_cache</h5><p>functools.lru_cache memoizationLRULeast Recently Used<br> n  lru_cache</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fibonacci</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fibonacci(n<span class=\"number\">-2</span>) + fibonacci(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(fibonacci(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>-&gt; % python3 fibo_demo.py<br>[0.00000075s] fibonacci(0) -&gt; 0<br>[0.00000106s] fibonacci(1) -&gt; 1<br>[0.00008829s] fibonacci(2) -&gt; 1<br>[0.00000052s] fibonacci(1) -&gt; 1<br>[0.00000056s] fibonacci(0) -&gt; 0<br>[0.00000068s] fibonacci(1) -&gt; 1<br>[0.00002681s] fibonacci(2) -&gt; 1<br>[0.00005140s] fibonacci(3) -&gt; 2<br>[0.00016751s] fibonacci(4) -&gt; 3<br>[0.00000051s] fibonacci(1) -&gt; 1<br>[0.00000046s] fibonacci(0) -&gt; 0<br>[0.00000054s] fibonacci(1) -&gt; 1<br>[0.00002430s] fibonacci(2) -&gt; 1<br>[0.00005003s] fibonacci(3) -&gt; 2<br>[0.00000054s] fibonacci(0) -&gt; 0<br>[0.00000057s] fibonacci(1) -&gt; 1<br>[0.00002484s] fibonacci(2) -&gt; 1<br>[0.00000044s] fibonacci(1) -&gt; 1<br>[0.00000081s] fibonacci(0) -&gt; 0<br>[0.00000073s] fibonacci(1) -&gt; 1<br>[0.00002765s] fibonacci(2) -&gt; 1<br>[0.00005353s] fibonacci(3) -&gt; 2<br>[0.00010212s] fibonacci(4) -&gt; 3<br>[0.00017658s] fibonacci(5) -&gt; 5<br>[0.00037021s] fibonacci(6) -&gt; 8<br> 8</p>\n</blockquote>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@functools.lru_cache()</span></span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fibonacci</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fibonacci(n<span class=\"number\">-2</span>) + fibonacci(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(fibonacci(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>-&gt; % python3 fibo_demo.py<br>[0.00000114s] fibonacci(0) -&gt; 0<br>[0.00000152s] fibonacci(1) -&gt; 1<br>[0.00014005s] fibonacci(2) -&gt; 1<br>[0.00000173s] fibonacci(3) -&gt; 2<br>[0.00018128s] fibonacci(4) -&gt; 3<br>[0.00000119s] fibonacci(5) -&gt; 5<br>[0.00022029s] fibonacci(6) -&gt; 8<br> 8  </p>\n</blockquote>\n<p>:lru_cache<br>lru_cacheWeb</p>\n<blockquote>\n<p>functools.lru_cache(maxsize=128, typed=False)</p>\n</blockquote>\n<p>functools.lru_cachemaxsizetyped</p>\n<ul>\n<li>maxsize2</li>\n<li>typed</li>\n<li>lru_cache</li>\n</ul>\n<p>7.8.2 </p>\n<p>Python:switchif/elif/else      </p>\n<p>single_dispatch @singledispatch generic function</p>\n<p>Html</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> singledispatch</span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> abc</span><br><span class=\"line\"><span class=\"keyword\">import</span> numbers</span><br><span class=\"line\"><span class=\"keyword\">import</span> html</span><br><span class=\"line\"><span class=\"meta\">@singledispatch</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">htmlize</span><span class=\"params\">(obj)</span>:</span></span><br><span class=\"line\">    content = html.escape(repr(obj))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&#123;&#125;&lt;/pre&gt;'</span>.format(content)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(str)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(text)</span>:</span></span><br><span class=\"line\">    content = html.escape(text).replace(<span class=\"string\">'\\n'</span>, <span class=\"string\">'&lt;br&gt;\\n'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;p&gt;&#123;0&#125;&lt;/p&gt;'</span>.format(content)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(numbers.Integral)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&#123;0&#125; (0x&#123;0:x&#125;)&lt;/pre&gt;'</span>.format(n)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(tuple)</span></span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(abc.MutableSequence)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(seq)</span>:</span></span><br><span class=\"line\">    inner = <span class=\"string\">'&lt;/li&gt;\\n&lt;li&gt;'</span>.join(htmlize(item) <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> seq)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;\\n&lt;li&gt;'</span> + inner + <span class=\"string\">'&lt;/li&gt;\\n&lt;/ul&gt;'</span></span><br></pre></td></tr></table></figure>\n<p> numbers.Integral abc.MutableSequence int  listPython  numbers.Integral int    </p>\n<p>single dispatch  Java  Python   </p>\n<h4 id=\"7-9-\"><a href=\"#7-9-\" class=\"headerlink\" title=\"7.9 \"></a>7.9 </h4><p>Python </p>\n<p>:</p>\n<h5 id=\"registeration\"><a href=\"#registeration\" class=\"headerlink\" title=\"registeration\"></a>registeration</h5><p> register  active False <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry = set()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(active=True)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decorate</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">        print(<span class=\"string\">'running register(active=%s)-&gt;decorate(%s)'</span>% (active, func))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> active:</span><br><span class=\"line\">            registry.add(func)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            registry.discard(func)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decorate</span><br><span class=\"line\"><span class=\"meta\">@register(active=False)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f1()'</span>)</span><br><span class=\"line\"><span class=\"meta\">@register()</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f2()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f3()'</span>)</span><br></pre></td></tr></table></figure></p>\n<p>register()  decorate<br>  </p>\n<h5 id=\"clock\"><a href=\"#clock\" class=\"headerlink\" title=\"clock\"></a>clock</h5><p>clock</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\">DEFAULT_FMT = <span class=\"string\">'[&#123;elapsed:0.8f&#125;s] &#123;name&#125;(&#123;args&#125;) -&gt; &#123;result&#125;'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(fmt=DEFAULT_FMT)</span>:</span> <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decorate</span><span class=\"params\">(func)</span>:</span>     <span class=\"comment\">#</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*_args)</span>:</span><span class=\"comment\">#</span></span><br><span class=\"line\">            t0 = time.time()</span><br><span class=\"line\">            _result = func(*_args)</span><br><span class=\"line\">            elapsed = time.time() - t0</span><br><span class=\"line\">            name = func.__name__</span><br><span class=\"line\">            args = <span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> _args)</span><br><span class=\"line\">            result = repr(_result)</span><br><span class=\"line\">            print(fmt.format(**locals()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> _result</span><br><span class=\"line\">        <span class=\"keyword\">return</span> clocked</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decorate </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\"><span class=\"meta\">    @clock()</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">snooze</span><span class=\"params\">(seconds)</span>:</span></span><br><span class=\"line\">        time.sleep(seconds)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">3</span>):</span><br><span class=\"line\">            snooze(<span class=\"number\">.123</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br> @functools.wraps <br>nonlocal  nonlocal GUI  I/O</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Fluent-Python\"><a href=\"#Fluent-Python\" class=\"headerlink\" title=\"Fluent Python\"></a>Fluent Python</h2><h3 id=\"Chapter-7-Function-Decorators-and-Closures\"><a href=\"#Chapter-7-Function-Decorators-and-Closures\" class=\"headerlink\" title=\"Chapter 7. Function Decorators and Closures\"></a>Chapter 7. Function Decorators and Closures</h3><h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\": \"></a>: </h3><p>\b<br>nonlocal Python3 nonlocal<br><br>:<br>    </p>\n<ul>\n<li>python </li>\n<li>python </li>\n<li></li>\n<li>nonlocal </li>\n</ul>\n<p>:</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>, decorate:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@decorate</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">target</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running target()'</span>) </span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">target = decorate(target())</span><br></pre></td></tr></table></figure>\n<p>targetdecrate, :   </p>\n<pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deco</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">inner</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>        print(<span class=\"string\">'running inner()'</span>)</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">return</span> inner</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>@deco</span><br><span class=\"line\"><span class=\"meta\">... </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">target</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(<span class=\"string\">'running target()'</span>)</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>target()</span><br><span class=\"line\">running inner()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>target</span><br><span class=\"line\">&lt;function deco.&lt;locals&gt;.inner at <span class=\"number\">0x10063b598</span>&gt;</span><br></pre></td></tr></table></figure>\n</code></pre><p>target inner,targetinner       </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><br>:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running register(%s)'</span> % func)</span><br><span class=\"line\">    registry.append(func)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> func</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@register</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f1()'</span>)</span><br><span class=\"line\"><span class=\"meta\">@register</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f2()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f3()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running main()'</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'registry -&gt;'</span>, registry)</span><br><span class=\"line\">    f1()</span><br><span class=\"line\">    f2()</span><br><span class=\"line\">    f3()</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">running register(&lt;function f1 at <span class=\"number\">0x10320eb70</span>&gt;)</span><br><span class=\"line\">running register(&lt;function f2 at <span class=\"number\">0x10320eae8</span>&gt;)</span><br><span class=\"line\">running main()</span><br><span class=\"line\">registry -&gt; [&lt;function f1 at 0x10320eb70&gt;, &lt;function f2 at 0x10320eae8&gt;]</span><br><span class=\"line\">running f1()</span><br><span class=\"line\">running f2()</span><br><span class=\"line\">running f3()</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> registeration</span><br><span class=\"line\">running register(&lt;function f1 at <span class=\"number\">0x1100480d0</span>&gt;)</span><br><span class=\"line\">running register(&lt;function f2 at <span class=\"number\">0x110048158</span>&gt;)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>registeration.registry</span><br><span class=\"line\">[&lt;function f1 at <span class=\"number\">0x1100480d0</span>&gt;, &lt;function f2 at <span class=\"number\">0x110048158</span>&gt;]</span><br></pre></td></tr></table></figure></p>\n<p> Python <strong></strong><strong></strong>    </p>\n<p>registeration.py:   </p>\n<ul>\n<li></li>\n<li> register </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promos = []</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">promotion</span><span class=\"params\">(promo_func)</span>:</span></span><br><span class=\"line\">    promos.append(promo_func)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> promo_func</span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fidelity</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"10005%\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.05</span> <span class=\"keyword\">if</span> order.customer.fidelity &gt;= <span class=\"number\">1000</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bulk_item</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"2010%\"\"\"</span></span><br><span class=\"line\">    discount = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> item.quantity &gt;= <span class=\"number\">20</span>:</span><br><span class=\"line\">            discount += item.total() * <span class=\"number\">.1</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> discount</span><br><span class=\"line\"><span class=\"meta\">@promotion</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">large_order</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"107%\"\"\"</span></span><br><span class=\"line\">    distinct_items = &#123;item.product <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> order.cart&#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> len(distinct_items) &gt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> order.total() * <span class=\"number\">.07</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">best_promo</span><span class=\"params\">(order)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"\"\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> max(promo(order) <span class=\"keyword\">for</span> promo <span class=\"keyword\">in</span> promos)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li></li>\n<li>@promotion </li>\n<li>@promotion</li>\n</ul>\n<p> Python    </p>\n<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p>Python     </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f1(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">3</span>, <span class=\"keyword\">in</span> f1</span><br><span class=\"line\">NameError: name <span class=\"string\">'b'</span> <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> defined</span><br></pre></td></tr></table></figure>\n<p>b</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f1(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br></pre></td></tr></table></figure>\n<p>b,</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\"><span class=\"meta\">... </span>    b = <span class=\"number\">6</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f2(<span class=\"number\">3</span>)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">3</span>, <span class=\"keyword\">in</span> f2</span><br><span class=\"line\">UnboundLocalError: local variable <span class=\"string\">'b'</span> referenced before assignment</span><br></pre></td></tr></table></figure>\n<p>f2bf2b</p>\n<p>Python: Python <br>global</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">(a)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">global</span> b</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(a)</span><br><span class=\"line\"><span class=\"meta\">... </span>    print(b)</span><br><span class=\"line\"><span class=\"meta\">... </span>    b = <span class=\"number\">6</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>f3(b)</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b</span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>\n<p>f1/f2dis  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>dis(f1)</span><br><span class=\"line\">  <span class=\"number\">2</span>           <span class=\"number\">0</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">              <span class=\"number\">2</span> LOAD_FAST                <span class=\"number\">0</span> (a)</span><br><span class=\"line\">              <span class=\"number\">4</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">              <span class=\"number\">6</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">3</span>           <span class=\"number\">8</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">             <span class=\"number\">10</span> LOAD_GLOBAL              <span class=\"number\">1</span> (b)  <span class=\"comment\">#</span></span><br><span class=\"line\">             <span class=\"number\">12</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">             <span class=\"number\">14</span> POP_TOP</span><br><span class=\"line\">             <span class=\"number\">16</span> LOAD_CONST               <span class=\"number\">0</span> (<span class=\"literal\">None</span>)</span><br><span class=\"line\">             <span class=\"number\">18</span> RETURN_VALUE</span><br><span class=\"line\"></span><br><span class=\"line\">SyntaxError: invalid syntax</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>dis(f2)</span><br><span class=\"line\">  <span class=\"number\">2</span>           <span class=\"number\">0</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">              <span class=\"number\">2</span> LOAD_FAST                <span class=\"number\">0</span> (a)</span><br><span class=\"line\">              <span class=\"number\">4</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">              <span class=\"number\">6</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">3</span>           <span class=\"number\">8</span> LOAD_GLOBAL              <span class=\"number\">0</span> (<span class=\"keyword\">print</span>)</span><br><span class=\"line\">             <span class=\"number\">10</span> LOAD_FAST                <span class=\"number\">1</span> (b)  <span class=\"comment\">#</span></span><br><span class=\"line\">             <span class=\"number\">12</span> CALL_FUNCTION            <span class=\"number\">1</span></span><br><span class=\"line\">             <span class=\"number\">14</span> POP_TOP</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">4</span>          <span class=\"number\">16</span> LOAD_CONST               <span class=\"number\">1</span> (<span class=\"number\">6</span>)</span><br><span class=\"line\">             <span class=\"number\">18</span> STORE_FAST               <span class=\"number\">1</span> (b)</span><br><span class=\"line\">             <span class=\"number\">20</span> LOAD_CONST               <span class=\"number\">0</span> (<span class=\"literal\">None</span>)</span><br><span class=\"line\">             <span class=\"number\">22</span> RETURN_VALUE</span><br></pre></td></tr></table></figure>\n<h4 id=\"7-5-\"><a href=\"#7-5-\" class=\"headerlink\" title=\"7.5  \"></a>7.5  </h4><p><br>:</p>\n<blockquote>\n<p> avg     </p>\n</blockquote>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Averager</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">        self.series = []</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__call__</span><span class=\"params\">(self, new_value)</span>:</span></span><br><span class=\"line\">        self.series.append(new_value)</span><br><span class=\"line\">        total = sum(self.series)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total/len(self.series)</span><br></pre></td></tr></table></figure>\n<p>Averager()Averager</p>\n<blockquote>\n<p>>>> avg = Averager()<br>>>> avg(10)<br>10.0<br>>>> avg(11)<br>10.5<br>>>> avg(12)<br>11.0  </p>\n</blockquote>\n<p>make_averager:    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    series = []</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        series.append(new_value)</span><br><span class=\"line\">        total = sum(series)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total/len(series)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>>>> avg = make_averager()<br>>>> avg(10)<br> 10.0<br>>>> avg(11)<br> 10.5<br>>>> avg(12)<br> 11.0    </p>\n</blockquote>\n<p>: self.seriesmake_averagerseries</p>\n<p> avg = make_averager() make_averagerseries</p>\n<p>averagerseriesfree variable,<br><img src=\"https://github.com/aldslvda/blog-images/blob/master/fluent-python-7.1.png?raw=true\" alt=\"\"></p>\n<p>averagerPython__code__\b</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> averager <span class=\"keyword\">import</span> make_averager</span><br><span class=\"line\">&gt;&gt;&gt;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg = make_averager()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__code__.co_varnames</span><br><span class=\"line\">(<span class=\"string\">'new_value'</span>, <span class=\"string\">'total'</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__code__.co_freevars</span><br><span class=\"line\">(<span class=\"string\">'series'</span>,)</span><br></pre></td></tr></table></figure>\n<p>series  avg.__closure__</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">10</span>)</span><br><span class=\"line\"><span class=\"number\">10.0</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">11</span>)</span><br><span class=\"line\"><span class=\"number\">10.5</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">11</span>]</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">13</span>)</span><br><span class=\"line\"><span class=\"number\">11.333333333333334</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg.__closure__[<span class=\"number\">0</span>].cell_contents</span><br><span class=\"line\">[<span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">13</span>]</span><br></pre></td></tr></table></figure>\n<p>    </p>\n<p>    </p>\n<h4 id=\"nonlocal\"><a href=\"#nonlocal\" class=\"headerlink\" title=\"nonlocal\"></a>nonlocal</h4><p>make_averageravg+<br>:      </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager_v1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    count = <span class=\"number\">0</span></span><br><span class=\"line\">    total = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        count += <span class=\"number\">1</span></span><br><span class=\"line\">        total += new_value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total / count</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">from</span> averager <span class=\"keyword\">import</span> make_averager_v1</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg = make_averager_v1()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>avg(<span class=\"number\">10</span>)</span><br><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;module&gt;</span><br><span class=\"line\">  File <span class=\"string\">\"/Users/NickAl/study/github/readings/Fluent-Python/7. Function Decorators and Closures/averager.py\"</span>, line <span class=\"number\">13</span>, <span class=\"keyword\">in</span> averager</span><br><span class=\"line\">    count += <span class=\"number\">1</span></span><br><span class=\"line\">UnboundLocalError: local variable <span class=\"string\">'count'</span> referenced before assignment</span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>\n<p>countcountint,count</p>\n<p>Python3 nonlocal<br>nonlocal</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_averager_v1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    count = <span class=\"number\">0</span></span><br><span class=\"line\">    total = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">averager</span><span class=\"params\">(new_value)</span>:</span></span><br><span class=\"line\">        <span class=\"keyword\">nonlocal</span> count, total</span><br><span class=\"line\">        count += <span class=\"number\">1</span></span><br><span class=\"line\">        total += new_value</span><br><span class=\"line\">        <span class=\"keyword\">return</span> total / count</span><br><span class=\"line\">    <span class=\"keyword\">return</span> averager</span><br></pre></td></tr></table></figure>\n<p>nonlocalPython2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>, clockedfunc   </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*args)</span>:</span></span><br><span class=\"line\">        t0 = time.perf_counter()</span><br><span class=\"line\">        result = func(*args)</span><br><span class=\"line\">        elapsed = time.perf_counter() - t0</span><br><span class=\"line\">        name = func.__name__</span><br><span class=\"line\">        arg_str = <span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> args)</span><br><span class=\"line\">        print(<span class=\"string\">'[%0.8fs] %s(%s) -&gt; %r'</span> % (elapsed, name, arg_str, result))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clocked</span><br></pre></td></tr></table></figure>\n<p>Python:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># clockdeco_demo.py</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">snooze</span><span class=\"params\">(seconds)</span>:</span></span><br><span class=\"line\">    time.sleep(seconds)</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">factorial</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span> <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span> <span class=\"keyword\">else</span> n*factorial(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(<span class=\"string\">'*'</span> * <span class=\"number\">40</span>, <span class=\"string\">'Calling snooze(.123)'</span>)</span><br><span class=\"line\">    snooze(<span class=\"number\">.123</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'*'</span> * <span class=\"number\">40</span>, <span class=\"string\">'Calling factorial(6)'</span>)</span><br><span class=\"line\">    print(<span class=\"string\">'6! ='</span>, factorial(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>-&gt; % python3 clockdeco_demo.py<br><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong> Calling snooze(.123)<br>[0.12309374s] snooze(0.123) -&gt; None<br><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong> Calling factorial(6)<br>[0.00000162s] factorial(1) -&gt; 1<br>[0.00003553s] factorial(2) -&gt; 2<br>[0.00005951s] factorial(3) -&gt; 6<br>[0.00008194s] factorial(4) -&gt; 24<br>[0.00010441s] factorial(5) -&gt; 120<br>[0.00013048s] factorial(6) -&gt; 720<br>6! = 720    </p>\n</blockquote>\n<p>clocked:<br>(1)  t0<br>(2)  factorial <br>(3) <br>(4) <br>(5)  2 <br></p>\n<p>:</p>\n<ul>\n<li></li>\n<li>__name____doc__</li>\n</ul>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#clockdeco2.py</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">    @functools.wraps(func)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*args, **kwargs)</span>:</span></span><br><span class=\"line\">        t0 = time.time()</span><br><span class=\"line\">        result = func(*args, **kwargs)</span><br><span class=\"line\">        elapsed = time.time() - t0</span><br><span class=\"line\">        name = func.__name__</span><br><span class=\"line\">        arg_lst = []</span><br><span class=\"line\">        <span class=\"keyword\">if</span> args:</span><br><span class=\"line\">            arg_lst.append(<span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> args))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> kwargs:</span><br><span class=\"line\">            pairs = [<span class=\"string\">'%s=%r'</span> % (k, w) <span class=\"keyword\">for</span> k, w <span class=\"keyword\">in</span> sorted(kwargs.items())]</span><br><span class=\"line\">            arg_lst.append(<span class=\"string\">', '</span>.join(pairs))</span><br><span class=\"line\">            arg_str = <span class=\"string\">', '</span>.join(arg_lst)</span><br><span class=\"line\">        print(<span class=\"string\">'[%0.8fs] %s(%s) -&gt; %r '</span> % (elapsed, name, arg_str, result))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clocked</span><br></pre></td></tr></table></figure>\n<p>functool.wrap</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>functool: lru_cachesingle_dispatch</p>\n<h5 id=\"functools-lru-cache\"><a href=\"#functools-lru-cache\" class=\"headerlink\" title=\"functools.lru_cache\"></a>functools.lru_cache</h5><p>functools.lru_cache memoizationLRULeast Recently Used<br> n  lru_cache</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fibonacci</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fibonacci(n<span class=\"number\">-2</span>) + fibonacci(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(fibonacci(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>-&gt; % python3 fibo_demo.py<br>[0.00000075s] fibonacci(0) -&gt; 0<br>[0.00000106s] fibonacci(1) -&gt; 1<br>[0.00008829s] fibonacci(2) -&gt; 1<br>[0.00000052s] fibonacci(1) -&gt; 1<br>[0.00000056s] fibonacci(0) -&gt; 0<br>[0.00000068s] fibonacci(1) -&gt; 1<br>[0.00002681s] fibonacci(2) -&gt; 1<br>[0.00005140s] fibonacci(3) -&gt; 2<br>[0.00016751s] fibonacci(4) -&gt; 3<br>[0.00000051s] fibonacci(1) -&gt; 1<br>[0.00000046s] fibonacci(0) -&gt; 0<br>[0.00000054s] fibonacci(1) -&gt; 1<br>[0.00002430s] fibonacci(2) -&gt; 1<br>[0.00005003s] fibonacci(3) -&gt; 2<br>[0.00000054s] fibonacci(0) -&gt; 0<br>[0.00000057s] fibonacci(1) -&gt; 1<br>[0.00002484s] fibonacci(2) -&gt; 1<br>[0.00000044s] fibonacci(1) -&gt; 1<br>[0.00000081s] fibonacci(0) -&gt; 0<br>[0.00000073s] fibonacci(1) -&gt; 1<br>[0.00002765s] fibonacci(2) -&gt; 1<br>[0.00005353s] fibonacci(3) -&gt; 2<br>[0.00010212s] fibonacci(4) -&gt; 3<br>[0.00017658s] fibonacci(5) -&gt; 5<br>[0.00037021s] fibonacci(6) -&gt; 8<br> 8</p>\n</blockquote>\n<p>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> functools</span><br><span class=\"line\"><span class=\"keyword\">from</span> clockdeco <span class=\"keyword\">import</span> clock</span><br><span class=\"line\"><span class=\"meta\">@functools.lru_cache()</span></span><br><span class=\"line\"><span class=\"meta\">@clock</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">fibonacci</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fibonacci(n<span class=\"number\">-2</span>) + fibonacci(n<span class=\"number\">-1</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    print(fibonacci(<span class=\"number\">6</span>))</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<blockquote>\n<p>-&gt; % python3 fibo_demo.py<br>[0.00000114s] fibonacci(0) -&gt; 0<br>[0.00000152s] fibonacci(1) -&gt; 1<br>[0.00014005s] fibonacci(2) -&gt; 1<br>[0.00000173s] fibonacci(3) -&gt; 2<br>[0.00018128s] fibonacci(4) -&gt; 3<br>[0.00000119s] fibonacci(5) -&gt; 5<br>[0.00022029s] fibonacci(6) -&gt; 8<br> 8  </p>\n</blockquote>\n<p>:lru_cache<br>lru_cacheWeb</p>\n<blockquote>\n<p>functools.lru_cache(maxsize=128, typed=False)</p>\n</blockquote>\n<p>functools.lru_cachemaxsizetyped</p>\n<ul>\n<li>maxsize2</li>\n<li>typed</li>\n<li>lru_cache</li>\n</ul>\n<p>7.8.2 </p>\n<p>Python:switchif/elif/else      </p>\n<p>single_dispatch @singledispatch generic function</p>\n<p>Html</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> singledispatch</span><br><span class=\"line\"><span class=\"keyword\">from</span> collections <span class=\"keyword\">import</span> abc</span><br><span class=\"line\"><span class=\"keyword\">import</span> numbers</span><br><span class=\"line\"><span class=\"keyword\">import</span> html</span><br><span class=\"line\"><span class=\"meta\">@singledispatch</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">htmlize</span><span class=\"params\">(obj)</span>:</span></span><br><span class=\"line\">    content = html.escape(repr(obj))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&#123;&#125;&lt;/pre&gt;'</span>.format(content)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(str)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(text)</span>:</span></span><br><span class=\"line\">    content = html.escape(text).replace(<span class=\"string\">'\\n'</span>, <span class=\"string\">'&lt;br&gt;\\n'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;p&gt;&#123;0&#125;&lt;/p&gt;'</span>.format(content)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(numbers.Integral)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&#123;0&#125; (0x&#123;0:x&#125;)&lt;/pre&gt;'</span>.format(n)</span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(tuple)</span></span><br><span class=\"line\"><span class=\"meta\">@htmlize.register(abc.MutableSequence)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_</span><span class=\"params\">(seq)</span>:</span></span><br><span class=\"line\">    inner = <span class=\"string\">'&lt;/li&gt;\\n&lt;li&gt;'</span>.join(htmlize(item) <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> seq)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;ul&gt;\\n&lt;li&gt;'</span> + inner + <span class=\"string\">'&lt;/li&gt;\\n&lt;/ul&gt;'</span></span><br></pre></td></tr></table></figure>\n<p> numbers.Integral abc.MutableSequence int  listPython  numbers.Integral int    </p>\n<p>single dispatch  Java  Python   </p>\n<h4 id=\"7-9-\"><a href=\"#7-9-\" class=\"headerlink\" title=\"7.9 \"></a>7.9 </h4><p>Python </p>\n<p>:</p>\n<h5 id=\"registeration\"><a href=\"#registeration\" class=\"headerlink\" title=\"registeration\"></a>registeration</h5><p> register  active False <br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry = set()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(active=True)</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decorate</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\">        print(<span class=\"string\">'running register(active=%s)-&gt;decorate(%s)'</span>% (active, func))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> active:</span><br><span class=\"line\">            registry.add(func)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            registry.discard(func)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decorate</span><br><span class=\"line\"><span class=\"meta\">@register(active=False)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f1</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f1()'</span>)</span><br><span class=\"line\"><span class=\"meta\">@register()</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f2</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f2()'</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f3</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    print(<span class=\"string\">'running f3()'</span>)</span><br></pre></td></tr></table></figure></p>\n<p>register()  decorate<br>  </p>\n<h5 id=\"clock\"><a href=\"#clock\" class=\"headerlink\" title=\"clock\"></a>clock</h5><p>clock</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\">DEFAULT_FMT = <span class=\"string\">'[&#123;elapsed:0.8f&#125;s] &#123;name&#125;(&#123;args&#125;) -&gt; &#123;result&#125;'</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clock</span><span class=\"params\">(fmt=DEFAULT_FMT)</span>:</span> <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">decorate</span><span class=\"params\">(func)</span>:</span>     <span class=\"comment\">#</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clocked</span><span class=\"params\">(*_args)</span>:</span><span class=\"comment\">#</span></span><br><span class=\"line\">            t0 = time.time()</span><br><span class=\"line\">            _result = func(*_args)</span><br><span class=\"line\">            elapsed = time.time() - t0</span><br><span class=\"line\">            name = func.__name__</span><br><span class=\"line\">            args = <span class=\"string\">', '</span>.join(repr(arg) <span class=\"keyword\">for</span> arg <span class=\"keyword\">in</span> _args)</span><br><span class=\"line\">            result = repr(_result)</span><br><span class=\"line\">            print(fmt.format(**locals()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> _result</span><br><span class=\"line\">        <span class=\"keyword\">return</span> clocked</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decorate </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\"><span class=\"meta\">    @clock()</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">snooze</span><span class=\"params\">(seconds)</span>:</span></span><br><span class=\"line\">        time.sleep(seconds)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">3</span>):</span><br><span class=\"line\">            snooze(<span class=\"number\">.123</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br> @functools.wraps <br>nonlocal  nonlocal GUI  I/O</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjuw5c69o0007dhyfajnhyloi","category_id":"cjuw5c69j0004dhyffn4n0os5","_id":"cjuw5c69x000ddhyfcvj6qud6"},{"post_id":"cjuw5c69a0000dhyff6vcxx3k","category_id":"cjuw5c69j0004dhyffn4n0os5","_id":"cjuw5c6a0000hdhyf6yjuwocj"},{"post_id":"cjuw5c69f0002dhyf9ndyp0fg","category_id":"cjuw5c69j0004dhyffn4n0os5","_id":"cjuw5c6a2000kdhyffsshjmfl"},{"post_id":"cjuw5c69m0006dhyfbtizqfbj","category_id":"cjuw5c69j0004dhyffn4n0os5","_id":"cjuw5c6a5000pdhyfoofmt23e"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6a9000xdhyfbxrak9ql"},{"post_id":"cjuw5c69s000bdhyf5yttrd5a","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6aa0011dhyf09du1avy"},{"post_id":"cjuw5c6a8000vdhyf73dmqsyc","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6ab0014dhyfgrtx5wg2"},{"post_id":"cjuw5c69v000cdhyf1ky72dql","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6ab0016dhyffpvj82cu"},{"post_id":"cjuw5c69z000gdhyfrfktj815","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6ac001adhyfx8p84u13"},{"post_id":"cjuw5c6a1000idhyfqe8tfl72","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6ac001edhyf9o99fzdd"},{"post_id":"cjuw5c6a3000mdhyfn49h0msc","category_id":"cjuw5c6ac0019dhyf5umhejhp","_id":"cjuw5c6ad001idhyf3znyxsol"},{"post_id":"cjuw5c6a4000odhyf2i26figm","category_id":"cjuw5c6ac001fdhyf2efuz51f","_id":"cjuw5c6ae001ldhyfbgmmizsf"},{"post_id":"cjuw5c6a6000tdhyfwa2wevr2","category_id":"cjuw5c6ac001fdhyf2efuz51f","_id":"cjuw5c6ae001ndhyfye7hgqur"},{"post_id":"cjuw5c6g30035dhyfcxlkg0em","category_id":"cjuw5c6ac001fdhyf2efuz51f","_id":"cjuw5c6gb003bdhyfnlysp0a9"},{"post_id":"cjuw5c6g50037dhyfcom9vc6w","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gc003ddhyfsecuy8hz"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6ge003gdhyfhn3977cp"},{"post_id":"cjuw5c6ga003adhyfr6fuwcnh","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gh003idhyf9kn3qp87"},{"post_id":"cjuw5c6gb003cdhyfze1raqis","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gk003ldhyfnwly3o52"},{"post_id":"cjuw5c6gd003fdhyffmae0td5","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gm003odhyfqz91e0y5"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6go003sdhyfo3tbtsxf"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gq003vdhyfkzis8hcp"},{"post_id":"cjuw5c6gl003ndhyfw73o6nfv","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gs003ydhyfijwhjm6i"},{"post_id":"cjuw5c6gn003rdhyffderc9bm","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6gt003zdhyfg6upm1g9"},{"post_id":"cjuw5c6gp003udhyfxgaccm26","category_id":"cjuw5c6ac001fdhyf2efuz51f","_id":"cjuw5c6gu0041dhyfvjhrtw80"},{"post_id":"cjuw5c6gr003xdhyf5qoa8r4s","category_id":"cjuw5c6gt0040dhyfabvqbn80","_id":"cjuw5c6gv0048dhyf6907t2hm"},{"post_id":"cjuw5c6id005zdhyfjdlvh2jw","category_id":"cjuw5c6a2000jdhyfx9f7pypw","_id":"cjuw5c6if0061dhyflee1kumt"}],"PostTag":[{"post_id":"cjuw5c69a0000dhyff6vcxx3k","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6a4000ndhyfnhimbvcf"},{"post_id":"cjuw5c69a0000dhyff6vcxx3k","tag_id":"cjuw5c69q000adhyfn6h2va4e","_id":"cjuw5c6a5000rdhyfvgq3bsrl"},{"post_id":"cjuw5c69a0000dhyff6vcxx3k","tag_id":"cjuw5c69y000fdhyf51off8i1","_id":"cjuw5c6a7000udhyfoy2pw9tt"},{"post_id":"cjuw5c69f0002dhyf9ndyp0fg","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6aa000zdhyfnazs5xld"},{"post_id":"cjuw5c69f0002dhyf9ndyp0fg","tag_id":"cjuw5c6a6000sdhyfsiy6t585","_id":"cjuw5c6aa0012dhyf61us372r"},{"post_id":"cjuw5c69m0006dhyfbtizqfbj","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ac0018dhyfyc80m624"},{"post_id":"cjuw5c69m0006dhyfbtizqfbj","tag_id":"cjuw5c6aa0013dhyfs35glmce","_id":"cjuw5c6ac001bdhyfrjku9cqj"},{"post_id":"cjuw5c69o0007dhyfajnhyloi","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ac001ddhyfmrsl23j4"},{"post_id":"cjuw5c69o0007dhyfajnhyloi","tag_id":"cjuw5c6ab0017dhyfzfwol5c6","_id":"cjuw5c6ad001gdhyfjrr0in79"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6af001rdhyf1hxa6e8f"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ac001cdhyfskbo7mex","_id":"cjuw5c6af001sdhyfmj8orp7c"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ad001hdhyfz80rvtk3","_id":"cjuw5c6af001udhyfxjk15ufk"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ad001kdhyfkgux4rpr","_id":"cjuw5c6af001vdhyfv7zp8v21"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ae001mdhyfelkdccbl","_id":"cjuw5c6ag001xdhyfabcqkg93"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ag001ydhyfyjra5dut"},{"post_id":"cjuw5c69p0008dhyft2llnkrx","tag_id":"cjuw5c6ae001pdhyfcqi7mrba","_id":"cjuw5c6ag0020dhyfoif99wtw"},{"post_id":"cjuw5c69s000bdhyf5yttrd5a","tag_id":"cjuw5c6ae001qdhyfx77vztp9","_id":"cjuw5c6ag0021dhyfmm57ll3s"},{"post_id":"cjuw5c69s000bdhyf5yttrd5a","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ah0023dhyfubo880g3"},{"post_id":"cjuw5c69v000cdhyf1ky72dql","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ah0024dhyfmb6ryxfb"},{"post_id":"cjuw5c69v000cdhyf1ky72dql","tag_id":"cjuw5c6af001wdhyft0k1yien","_id":"cjuw5c6ah0026dhyfhxzr2nra"},{"post_id":"cjuw5c69v000cdhyf1ky72dql","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ah0027dhyfyayp94rg"},{"post_id":"cjuw5c69z000gdhyfrfktj815","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ai002bdhyfqqyvh961"},{"post_id":"cjuw5c69z000gdhyfrfktj815","tag_id":"cjuw5c6ah0022dhyficst1dpi","_id":"cjuw5c6ai002cdhyf0e8wniu6"},{"post_id":"cjuw5c69z000gdhyfrfktj815","tag_id":"cjuw5c6ah0025dhyfc5b5viow","_id":"cjuw5c6aj002edhyfposxp8gu"},{"post_id":"cjuw5c69z000gdhyfrfktj815","tag_id":"cjuw5c6ah0028dhyf12tzbhsq","_id":"cjuw5c6aj002fdhyfjgsby5yt"},{"post_id":"cjuw5c69z000gdhyfrfktj815","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ak002hdhyf80phx0un"},{"post_id":"cjuw5c6a1000idhyfqe8tfl72","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ak002idhyf9i18uw5p"},{"post_id":"cjuw5c6a1000idhyfqe8tfl72","tag_id":"cjuw5c6ai002adhyfab3mt2yu","_id":"cjuw5c6ak002kdhyftax4giza"},{"post_id":"cjuw5c6a1000idhyfqe8tfl72","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ak002ldhyfftcnu0wc"},{"post_id":"cjuw5c6a3000mdhyfn49h0msc","tag_id":"cjuw5c6aj002gdhyfwkckmqml","_id":"cjuw5c6al002ndhyfein5972n"},{"post_id":"cjuw5c6a4000odhyf2i26figm","tag_id":"cjuw5c6ak002jdhyf860yf09x","_id":"cjuw5c6al002qdhyf8z96h7vw"},{"post_id":"cjuw5c6a4000odhyf2i26figm","tag_id":"cjuw5c6ak002mdhyfz1pzac1y","_id":"cjuw5c6al002rdhyf01v79qkl"},{"post_id":"cjuw5c6a4000odhyf2i26figm","tag_id":"cjuw5c6al002odhyfaix4vsgf","_id":"cjuw5c6am002tdhyftdo3dp05"},{"post_id":"cjuw5c6a6000tdhyfwa2wevr2","tag_id":"cjuw5c6al002pdhyfl7xl6u24","_id":"cjuw5c6am002wdhyffbr8aert"},{"post_id":"cjuw5c6a6000tdhyfwa2wevr2","tag_id":"cjuw5c6al002sdhyf5bc4cr1b","_id":"cjuw5c6am002xdhyfy9nf0ybs"},{"post_id":"cjuw5c6a6000tdhyfwa2wevr2","tag_id":"cjuw5c6am002udhyfa4qa78q4","_id":"cjuw5c6an002zdhyf509btg3z"},{"post_id":"cjuw5c6a8000vdhyf73dmqsyc","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ao0031dhyfndzu7qpm"},{"post_id":"cjuw5c6a8000vdhyf73dmqsyc","tag_id":"cjuw5c6am002vdhyfz8zwblx1","_id":"cjuw5c6ao0032dhyf9yi9setg"},{"post_id":"cjuw5c6a8000vdhyf73dmqsyc","tag_id":"cjuw5c6an002ydhyfxaj5ism0","_id":"cjuw5c6ao0033dhyf34zi08c9"},{"post_id":"cjuw5c6a8000vdhyf73dmqsyc","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ao0034dhyfc8li1ghj"},{"post_id":"cjuw5c6g30035dhyfcxlkg0em","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6gk003mdhyfe31q35f8"},{"post_id":"cjuw5c6g30035dhyfcxlkg0em","tag_id":"cjuw5c6g80038dhyfsv6bppbp","_id":"cjuw5c6gm003pdhyf9dj4u7aq"},{"post_id":"cjuw5c6g30035dhyfcxlkg0em","tag_id":"cjuw5c6gc003edhyf0zg2cjkm","_id":"cjuw5c6go003tdhyfvkohep3t"},{"post_id":"cjuw5c6g50037dhyfcom9vc6w","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6gu0043dhyfbswp4ds1"},{"post_id":"cjuw5c6g50037dhyfcom9vc6w","tag_id":"cjuw5c6gi003jdhyfg7gv0ivv","_id":"cjuw5c6gv0044dhyflr23fifo"},{"post_id":"cjuw5c6g50037dhyfcom9vc6w","tag_id":"cjuw5c6gn003qdhyf97agrc12","_id":"cjuw5c6gv0046dhyfzqvl6r5o"},{"post_id":"cjuw5c6g50037dhyfcom9vc6w","tag_id":"cjuw5c6gr003wdhyf3z9l27ut","_id":"cjuw5c6gv0047dhyfyky707jg"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6gx004cdhyfrklcgvjo"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6gu0042dhyfphn0ds37","_id":"cjuw5c6gy004ddhyfcxg3i2gv"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6gv0045dhyf9jma3qmw","_id":"cjuw5c6gy004fdhyf243fajoh"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6ac001cdhyfskbo7mex","_id":"cjuw5c6gy004gdhyffki4464r"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6gw0049dhyf31lge8dm","_id":"cjuw5c6gz004idhyfipn05s8z"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6gw004adhyfkjc1afeq","_id":"cjuw5c6h0004jdhyf4br22850"},{"post_id":"cjuw5c6g90039dhyfcraxn4wk","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h0004ldhyf6iblj45i"},{"post_id":"cjuw5c6ga003adhyfr6fuwcnh","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6h0004mdhyf5kgx0d9q"},{"post_id":"cjuw5c6ga003adhyfr6fuwcnh","tag_id":"cjuw5c6gw004bdhyfmrm1vca0","_id":"cjuw5c6h1004ndhyf5j80nahy"},{"post_id":"cjuw5c6ga003adhyfr6fuwcnh","tag_id":"cjuw5c6gy004edhyf50boe6ed","_id":"cjuw5c6h1004pdhyfiswvos1z"},{"post_id":"cjuw5c6ga003adhyfr6fuwcnh","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h1004qdhyf3cjpj8o5"},{"post_id":"cjuw5c6gb003cdhyfze1raqis","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6h2004sdhyfjo001dnw"},{"post_id":"cjuw5c6gb003cdhyfze1raqis","tag_id":"cjuw5c6gz004hdhyf8p7hzndv","_id":"cjuw5c6h2004tdhyfjufncgg7"},{"post_id":"cjuw5c6gb003cdhyfze1raqis","tag_id":"cjuw5c6h0004kdhyflok8ll10","_id":"cjuw5c6h3004vdhyft2z9ravg"},{"post_id":"cjuw5c6gb003cdhyfze1raqis","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h3004wdhyfyz8wwbjm"},{"post_id":"cjuw5c6gd003fdhyffmae0td5","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6h3004ydhyf4ugoo9y9"},{"post_id":"cjuw5c6gd003fdhyffmae0td5","tag_id":"cjuw5c6h1004odhyfm9vmgisa","_id":"cjuw5c6h4004zdhyftetlsx1z"},{"post_id":"cjuw5c6gd003fdhyffmae0td5","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h40050dhyf22vau7s0"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6h50052dhyfajyi59cj"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","tag_id":"cjuw5c6h1004rdhyfpexx86af","_id":"cjuw5c6h50053dhyf6l1634rc"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","tag_id":"cjuw5c6h2004udhyfg0fsffs7","_id":"cjuw5c6h60055dhyff10zu7y1"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","tag_id":"cjuw5c6h3004xdhyfjq85x596","_id":"cjuw5c6h60056dhyf3agtpyzq"},{"post_id":"cjuw5c6gf003hdhyfm7x4jv32","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h70058dhyfp5zvrwvv"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6h80059dhyfl967mtda"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","tag_id":"cjuw5c6gu0042dhyfphn0ds37","_id":"cjuw5c6h9005bdhyfklh7pcup"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","tag_id":"cjuw5c6gv0045dhyf9jma3qmw","_id":"cjuw5c6h9005cdhyfk1t45lkh"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","tag_id":"cjuw5c6ac001cdhyfskbo7mex","_id":"cjuw5c6h9005edhyf4uool1nc"},{"post_id":"cjuw5c6gj003kdhyfu5efkt5f","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6h9005fdhyf1qa8xr2v"},{"post_id":"cjuw5c6gl003ndhyfw73o6nfv","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6ha005hdhyfc1z92ak1"},{"post_id":"cjuw5c6gl003ndhyfw73o6nfv","tag_id":"cjuw5c6am002vdhyfz8zwblx1","_id":"cjuw5c6ha005idhyfapbrmrbz"},{"post_id":"cjuw5c6gl003ndhyfw73o6nfv","tag_id":"cjuw5c6h60057dhyfmd2na816","_id":"cjuw5c6ha005jdhyf4s5ypxf3"},{"post_id":"cjuw5c6gl003ndhyfw73o6nfv","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6hc005ldhyfh82km1pk"},{"post_id":"cjuw5c6gn003rdhyffderc9bm","tag_id":"cjuw5c6h8005adhyf1ns6qzzd","_id":"cjuw5c6hd005mdhyf044u6qzt"},{"post_id":"cjuw5c6gn003rdhyffderc9bm","tag_id":"cjuw5c6h9005ddhyfjb2ht5on","_id":"cjuw5c6he005odhyff76uyoxn"},{"post_id":"cjuw5c6gn003rdhyffderc9bm","tag_id":"cjuw5c6ha005gdhyfye3gp9de","_id":"cjuw5c6hf005pdhyf8og589bo"},{"post_id":"cjuw5c6gp003udhyfxgaccm26","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6hf005rdhyfy4z726qo"},{"post_id":"cjuw5c6gp003udhyfxgaccm26","tag_id":"cjuw5c6hb005kdhyforrmzx1w","_id":"cjuw5c6hg005sdhyfrc9xc094"},{"post_id":"cjuw5c6gp003udhyfxgaccm26","tag_id":"cjuw5c6hd005ndhyfuae4628c","_id":"cjuw5c6hg005udhyfc37p0fuv"},{"post_id":"cjuw5c6gr003xdhyf5qoa8r4s","tag_id":"cjuw5c6hf005qdhyfx3kvn9ns","_id":"cjuw5c6hi005wdhyfdcc4oayc"},{"post_id":"cjuw5c6gr003xdhyf5qoa8r4s","tag_id":"cjuw5c6hg005tdhyfbhgdcwmt","_id":"cjuw5c6hj005xdhyf0j60uql6"},{"post_id":"cjuw5c6gr003xdhyf5qoa8r4s","tag_id":"cjuw5c6hh005vdhyfvfiql2yd","_id":"cjuw5c6hj005ydhyftyudac9f"},{"post_id":"cjuw5c6id005zdhyfjdlvh2jw","tag_id":"cjuw5c69l0005dhyf8dw7rvdj","_id":"cjuw5c6if0063dhyfsm894bg4"},{"post_id":"cjuw5c6id005zdhyfjdlvh2jw","tag_id":"cjuw5c6if0060dhyfq4xrfxzd","_id":"cjuw5c6if0064dhyfnvgvvhl6"},{"post_id":"cjuw5c6id005zdhyfjdlvh2jw","tag_id":"cjuw5c6if0062dhyfo1fxn48g","_id":"cjuw5c6if0065dhyfcj4eqy76"},{"post_id":"cjuw5c6id005zdhyfjdlvh2jw","tag_id":"cjuw5c6ae001odhyfv0er1uuc","_id":"cjuw5c6ig0066dhyfxaaa2muj"}],"Tag":[{"name":"Python","_id":"cjuw5c69l0005dhyf8dw7rvdj"},{"name":"Divide and Conquer","_id":"cjuw5c69q000adhyfn6h2va4e"},{"name":"Dynamic Programming","_id":"cjuw5c69y000fdhyf51off8i1"},{"name":"stack","_id":"cjuw5c6a6000sdhyfsiy6t585"},{"name":"","_id":"cjuw5c6aa0013dhyfs35glmce"},{"name":"Bitwise Operation","_id":"cjuw5c6ab0017dhyfzfwol5c6"},{"name":"duck typing","_id":"cjuw5c6ac001cdhyfskbo7mex"},{"name":"protocal","_id":"cjuw5c6ad001hdhyfz80rvtk3"},{"name":"abstract basic class","_id":"cjuw5c6ad001kdhyfkgux4rpr"},{"name":"ABC","_id":"cjuw5c6ae001mdhyfelkdccbl"},{"name":"fluent python","_id":"cjuw5c6ae001odhyfv0er1uuc"},{"name":"interfaces","_id":"cjuw5c6ae001pdhyfcqi7mrba"},{"name":"Operator Overloading","_id":"cjuw5c6ae001qdhyfx77vztp9"},{"name":"sequence","_id":"cjuw5c6af001wdhyft0k1yien"},{"name":"inheritance","_id":"cjuw5c6ah0022dhyficst1dpi"},{"name":"multiple inheritance","_id":"cjuw5c6ah0025dhyfc5b5viow"},{"name":"mro","_id":"cjuw5c6ah0028dhyf12tzbhsq"},{"name":"magic method","_id":"cjuw5c6ai002adhyfab3mt2yu"},{"name":"flag","_id":"cjuw5c6aj002gdhyfwkckmqml"},{"name":"software","_id":"cjuw5c6ak002jdhyf860yf09x"},{"name":"crack","_id":"cjuw5c6ak002mdhyfz1pzac1y"},{"name":"jetbrains","_id":"cjuw5c6al002odhyfaix4vsgf"},{"name":"ubuntu","_id":"cjuw5c6al002pdhyfl7xl6u24"},{"name":"vps","_id":"cjuw5c6al002sdhyf5bc4cr1b"},{"name":"tcp-bbr","_id":"cjuw5c6am002udhyfa4qa78q4"},{"name":"design pattern","_id":"cjuw5c6am002vdhyfz8zwblx1"},{"name":"The Command pattern","_id":"cjuw5c6an002ydhyfxaj5ism0"},{"name":"","_id":"cjuw5c6g80038dhyfsv6bppbp"},{"name":"bilibili","_id":"cjuw5c6gc003edhyf0zg2cjkm"},{"name":"Iterable","_id":"cjuw5c6gi003jdhyfg7gv0ivv"},{"name":"Iterator","_id":"cjuw5c6gn003qdhyf97agrc12"},{"name":"Generator","_id":"cjuw5c6gr003wdhyf3z9l27ut"},{"name":"","_id":"cjuw5c6gu0042dhyfphn0ds37"},{"name":"pythonic","_id":"cjuw5c6gv0045dhyf9jma3qmw"},{"name":"slicing","_id":"cjuw5c6gw0049dhyf31lge8dm"},{"name":"reduce","_id":"cjuw5c6gw004adhyfkjc1afeq"},{"name":"dict","_id":"cjuw5c6gw004bdhyfmrm1vca0"},{"name":"set","_id":"cjuw5c6gy004edhyf50boe6ed"},{"name":"bytes","_id":"cjuw5c6gz004hdhyf8p7hzndv"},{"name":"unicode","_id":"cjuw5c6h0004kdhyflok8ll10"},{"name":"functional","_id":"cjuw5c6h1004odhyfm9vmgisa"},{"name":"","_id":"cjuw5c6h1004rdhyfpexx86af"},{"name":"","_id":"cjuw5c6h2004udhyfg0fsffs7"},{"name":"Mutability","_id":"cjuw5c6h3004xdhyfjq85x596"},{"name":"The Strategy pattern","_id":"cjuw5c6h60057dhyfmd2na816"},{"name":"http","_id":"cjuw5c6h8005adhyf1ns6qzzd"},{"name":"socket","_id":"cjuw5c6h9005ddhyfjb2ht5on"},{"name":"","_id":"cjuw5c6ha005gdhyfye3gp9de"},{"name":"scrapy","_id":"cjuw5c6hb005kdhyforrmzx1w"},{"name":"crawler","_id":"cjuw5c6hd005ndhyfuae4628c"},{"name":"Python Tricks","_id":"cjuw5c6hf005qdhyfx3kvn9ns"},{"name":"Syntactic sugar","_id":"cjuw5c6hg005tdhyfbhgdcwmt"},{"name":"","_id":"cjuw5c6hh005vdhyfvfiql2yd"},{"name":"decorator","_id":"cjuw5c6if0060dhyfq4xrfxzd"},{"name":"closure","_id":"cjuw5c6if0062dhyfo1fxn48g"}]}}